window.__require=function e(t,o,n){function i(r,s){if(!o[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AddDesktopBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"03410wPXvZKfL/ygHbhCFqM","AddDesktopBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/VideoManager"),l=e("../../GamingData_008"),c=e("./BaseSingleBtn_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onTouchEvent=function(){r.default.getInstance().click(),l.default.isGaming&&(l.default.isGamePause=!0,window.isCanCtrl=!1),s.default.getInstance().onAddDesktop(this.onComp.bind(this))},t.prototype.onComp=function(){l.default.isGaming&&(l.default.isGamePause=!1,window.isCanCtrl=!0)},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../GamingData_008":"GamingData_008","./BaseSingleBtn_008":"BaseSingleBtn_008"}],AgentTreeNode:[function(e,t,o){"use strict";cc._RF.push(t,"2988f9m1UVCp5LcfBmiynCz","AgentTreeNode"),Object.defineProperty(o,"__esModule",{value:!0}),o.AgentTreeNode=void 0;o.AgentTreeNode=function(){},cc._RF.pop()},{}],Agent:[function(e,t,o){"use strict";cc._RF.push(t,"41c71PUfxNMRqzmAuQImLff","Agent"),Object.defineProperty(o,"__esModule",{value:!0}),o.Agent=void 0;var n=e("./KeyValuePair"),i=e("./Line"),a=e("./RVOMath"),r=e("./Simulator"),s=e("./Vector2"),l=function(){function e(){this.agentNeighbors_=[],this.obstacleNeighbors_=[],this.orcaLines_=[],this.maxNeighbors_=0,this.maxSpeed_=0,this.neighborDist_=0,this.orientation_=0,this.newVelocity_=new s.Vector2(0,0),this.positionScreen_=new s.Vector2(0,0),this.prefVelocity_=new s.Vector2(0,0),this.velocity_=new s.Vector2(0,0),this.avoidenceWeight_=100,this.radius_=0,this.timeHorizon_=0,this.timeHorizonObst_=0,this.id_=0,this.index_=0}return e.prototype.computeNeighbors=function(){this.obstacleNeighbors_=[];var t=a.RVOMath.sqr(this.timeHorizonObst_*this.maxSpeed_+this.radius_);r.Simulator.Instance().kdTree_.computeObstacleNeighbors(this,t),this.agentNeighbors_=[],this.maxNeighbors_>0&&(e.rangeSq=a.RVOMath.sqr(this.neighborDist_),r.Simulator.Instance().kdTree_.computeAgentNeighbors(this,e.rangeSq))},e.prototype.computeNewVelocity=function(){this.orcaLines_=[];for(var e=1/this.timeHorizonObst_,t=0;t<this.obstacleNeighbors_.length;++t){for(var o=this.obstacleNeighbors_[t].Value,n=o.nextObstacle_,l=o.point_.moins(this.position_),c=n.point_.moins(this.position_),u=!1,p=0;p<this.orcaLines_.length;++p)if(s.Vector2.det(l.mul_k(e).moins(this.orcaLines_[p].point),this.orcaLines_[p].direction)-e*this.radius_>=-a.RVOMath.RVO_EPSILON&&s.Vector2.det(c.mul_k(e).moins(this.orcaLines_[p].point),this.orcaLines_[p].direction)-e*this.radius_>=-a.RVOMath.RVO_EPSILON){u=!0;break}if(!u){var d=s.Vector2.absSq(l),f=s.Vector2.absSq(c),h=a.RVOMath.sqr(this.radius_),_=n.point_.moins(o.point_),y=l.moinsSelf().mul(_)/s.Vector2.absSq(_),g=s.Vector2.absSq(l.moinsSelf().plus(_.mul_k(-y))),m=new i.Line;if(y<0&&d<=h)o.isConvex_&&(m.point=new s.Vector2(0,0),m.direction=s.Vector2.normalize(new s.Vector2(-l.y,l.x)),this.orcaLines_.push(m));else if(y>1&&f<=h)n.isConvex_&&s.Vector2.det(c,n.unitDir_)>=0&&(m.point=new s.Vector2(0,0),m.direction=s.Vector2.normalize(new s.Vector2(-c.y,c.x)),this.orcaLines_.push(m));else if(y>=0&&y<=1&&g<=h)m.point=new s.Vector2(0,0),m.direction=o.unitDir_.moinsSelf(),this.orcaLines_.push(m);else{var v,b;if(y<0&&g<=h){if(!o.isConvex_)continue;n=o;var P=Math.sqrt(d-h);v=new s.Vector2(l.x*P-l.y*this.radius_,l.x*this.radius_+l.y*P).div_k(d),b=new s.Vector2(l.x*P+l.y*this.radius_,-l.x*this.radius_+l.y*P).div_k(d)}else if(y>1&&g<=h){if(!n.isConvex_)continue;o=n;var S=Math.sqrt(f-h);v=new s.Vector2(c.x*S-c.y*this.radius_,c.x*this.radius_+c.y*S).div_k(f),b=new s.Vector2(c.x*S+c.y*this.radius_,-c.x*this.radius_+c.y*S).div_k(f)}else o.isConvex_?(P=Math.sqrt(d-h),v=new s.Vector2(l.x*P-l.y*this.radius_,l.x*this.radius_+l.y*P).div_k(d)):v=o.unitDir_.moinsSelf(),n.isConvex_?(S=Math.sqrt(f-h),b=new s.Vector2(c.x*S+c.y*this.radius_,-c.x*this.radius_+c.y*S).div_k(f)):b=o.unitDir_;var w=o.prevObstacle_,R=!1,I=!1;o.isConvex_&&s.Vector2.det(v,w.unitDir_.moinsSelf())>=0&&(v=w.unitDir_.moinsSelf(),R=!0),n.isConvex_&&s.Vector2.det(b,n.unitDir_)<=0&&(b=n.unitDir_,I=!0);var D=o.point_.moins(this.position_).mul_k(e),C=n.point_.moins(this.position_).mul_k(e),N=C.moins(D),O=o==n?.5:this.velocity_.moins(D).mul(N)/s.Vector2.absSq(N),B=this.velocity_.moins(D).mul(v),A=this.velocity_.moins(C).mul(b);if(O<0&&B<0||o==n&&B<0&&A<0){var E=s.Vector2.normalize(this.velocity_.moins(D));m.direction=new s.Vector2(E.y,-E.x),m.point=D.plus(E.mul_k(this.radius_*e)),this.orcaLines_.push(m)}else if(O>1&&A<0)E=s.Vector2.normalize(this.velocity_.moins(C)),m.direction=new s.Vector2(E.y,-E.x),m.point=C.plus(E.mul_k(this.radius_*e)),this.orcaLines_.push(m);else{var T=O<0||O>1||o==n?Number.POSITIVE_INFINITY:s.Vector2.absSq(this.velocity_.moins(D.plus(N.mul_k(O)))),x=B<0?Number.POSITIVE_INFINITY:s.Vector2.absSq(this.velocity_.moins(D.plus(v.mul_k(B)))),M=A<0?Number.POSITIVE_INFINITY:s.Vector2.absSq(this.velocity_.moins(C.plus(b.mul_k(A))));if(T<=x&&T<=M)m.direction=o.unitDir_.moinsSelf(),m.point=D.plus(new s.Vector2(-m.direction.y,m.direction.x).mul_k(this.radius_+e)),this.orcaLines_.push(m);else if(x<=M){if(R)continue;m.direction=v,m.point=D.plus(new s.Vector2(-m.direction.y,m.direction.x).mul_k(this.radius_+e)),this.orcaLines_.push(m)}else I||(m.direction=b.moinsSelf(),m.point=C.plus(new s.Vector2(-m.direction.y,m.direction.x).mul_k(this.radius_+e)),this.orcaLines_.push(m))}}}}var k=this.orcaLines_.length,F=1/this.timeHorizon_;for(t=0;t<this.agentNeighbors_.length;++t){var j=this.agentNeighbors_[t].Value,U=j.position_.moins(this.position_),G=this.velocity_.moins(j.velocity_),L=s.Vector2.absSq(U),V=this.radius_+j.radius_,K=a.RVOMath.sqr(V),H=(m=new i.Line,new s.Vector2(0,0));if(L>K){var W=G.moins(U.mul_k(F)),q=s.Vector2.absSq(W),X=W.mul(U);if(X<0&&a.RVOMath.sqr(X)>K*q){var z=Math.sqrt(q);E=W.div_k(z),m.direction=new s.Vector2(E.y,-E.x),H=E.mul_k(V*F-z)}else{var Q=Math.sqrt(L-K);s.Vector2.det(U,W)>0?m.direction=new s.Vector2(U.x*Q-U.y*V,U.x*V+U.y*Q).div_k(L):m.direction=new s.Vector2(U.x*Q+U.y*V,-U.x*V+U.y*Q).div_k(L).moinsSelf();var Y=G.mul(m.direction);H=m.direction.mul_k(Y).moins(G)}}else{var J=1/r.Simulator.Instance().timeStep_;W=G.moins(U.mul_k(J)),z=s.Vector2.abs(W),E=W.div_k(z),m.direction=new s.Vector2(E.y,-E.x),H=E.mul_k(V*J-z)}m.point=H.mul_k(this.getAvoidenceWeight(j.avoidenceWeight_)).plus(this.velocity_),this.orcaLines_.push(m)}var Z=this.linearProgram2(this.orcaLines_,this.maxSpeed_,this.prefVelocity_,!1,this.newVelocity_);Z<this.orcaLines_.length&&this.linearProgram3(this.orcaLines_,k,Z,this.maxSpeed_,this.newVelocity_)},e.prototype.getAvoidenceWeight=function(e){return this.avoidenceWeight_/(this.avoidenceWeight_+e)},e.prototype.insertAgentNeighbor=function(t){if(this!=t){var o=s.Vector2.absSq(this.position_.moins(t.position_));if(o<e.rangeSq){this.agentNeighbors_.length<this.maxNeighbors_&&this.agentNeighbors_.push(new n.KeyValuePair(o,t));for(var i=this.agentNeighbors_.length-1;0!=i&&o<this.agentNeighbors_[i-1].Key;)this.agentNeighbors_[i]=this.agentNeighbors_[i-1],--i;this.agentNeighbors_[i]=new n.KeyValuePair(o,t),this.agentNeighbors_.length==this.maxNeighbors_&&(e.rangeSq=this.agentNeighbors_[this.agentNeighbors_.length-1].Key)}}},e.prototype.update=function(){this.velocity_=this.newVelocity_,this.position_=this.position_.plus(this.velocity_.mul_k(r.Simulator._instance.timeStep_))},e.prototype.insertObstacleNeighbor=function(e,t){var o=e.nextObstacle_,i=s.Vector2.distSqPointLineSegment(e.point_,o.point_,this.position_);if(i<t){this.obstacleNeighbors_.push(new n.KeyValuePair(i,e));for(var a=this.obstacleNeighbors_.length-1;0!=a&&i<this.obstacleNeighbors_[a-1].Key;)this.obstacleNeighbors_[a]=this.obstacleNeighbors_[a-1],--a;this.obstacleNeighbors_[a]=new n.KeyValuePair(i,e)}},e.prototype.linearProgram1=function(e,t,o,n,i){var r=e[t].point.mul(e[t].direction),l=a.RVOMath.sqr(r)+a.RVOMath.sqr(o)-s.Vector2.absSq(e[t].point);if(l<0)return!1;for(var c=Math.sqrt(l),u=-r-c,p=-r+c,d=0;d<t;++d){var f=s.Vector2.det(e[t].direction,e[d].direction),h=s.Vector2.det(e[d].direction,e[t].point.moins(e[d].point));if(Math.abs(f)<=a.RVOMath.RVO_EPSILON){if(h<0)return!1}else{var _=h/f;if(f>=0?p=Math.min(p,_):u=Math.max(u,_),u>p)return!1}}if(i)n.mul(e[t].direction)>0?this.newVelocity_=e[t].point.plus(e[t].direction.mul_k(p)):this.newVelocity_=e[t].point.plus(e[t].direction.mul_k(u));else{var y=e[t].direction.mul(n.moins(e[t].point));this.newVelocity_=y<u?e[t].point.plus(e[t].direction.mul_k(u)):y>p?e[t].point.plus(e[t].direction.mul_k(p)):e[t].point.plus(e[t].direction.mul_k(y))}return!0},e.prototype.linearProgram2=function(e,t,o,n){n?this.newVelocity_=o.mul_k(t):s.Vector2.absSq(o)>a.RVOMath.sqr(t)?this.newVelocity_=s.Vector2.normalize(o).mul_k(t):this.newVelocity_=o;for(var i=0;i<e.length;++i)if(s.Vector2.det(e[i].direction,e[i].point.moins(this.newVelocity_))>0){var r=this.newVelocity_;if(!this.linearProgram1(e,i,t,o,n,this.newVelocity_))return this.newVelocity_=r,i}return e.length},e.prototype.linearProgram3=function(e,t,o,n){for(var r=0,l=o;l<e.length;++l)if(s.Vector2.det(e[l].direction,e[l].point.moins(this.velocity_))>r){for(var c=[],u=0;u<t;++u)c.push(e[u]);for(var p=t;p<l;++p){var d=new i.Line,f=s.Vector2.det(e[l].direction,e[p].direction);if(Math.abs(f)<=a.RVOMath.RVO_EPSILON){if(e[l].direction.mul(e[p].direction)>0)continue;d.point=e[l].point.plus(e[p].point).mul_k(.5)}else{var h=s.Vector2.det(e[p].direction,e[l].point.moins(e[p].point))/f,_=e[l].direction.mul_k(h);d.point=e[l].point.plus(_)}d.direction=s.Vector2.normalize(e[p].direction.moins(e[l].direction)),c.push(d)}var y=this.newVelocity_;this.linearProgram2(c,n,new s.Vector2(-e[l].direction.y,e[l].direction.x),!0,this.newVelocity_)<c.length&&(this.newVelocity_=y),r=s.Vector2.det(e[l].direction,e[l].point.moins(this.newVelocity_))}},e}();o.Agent=l,cc._RF.pop()},{"./KeyValuePair":"KeyValuePair","./Line":"Line","./RVOMath":"RVOMath","./Simulator":"Simulator","./Vector2":"Vector2"}],AlchemyTips_008:[function(e,t,o){"use strict";cc._RF.push(t,"b4454DBc4NJAIalHSedJEq3","AlchemyTips_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../Utils/RandomUtils"),c=e("../../../../mag/AudioMag"),u=e("../../Config_008"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pre_alchemy_tips_sprite=null,t.pre_alchemy_tips_label=null,t.spriteParentNode=null,t.labelParentNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.initNodePool()},t.prototype.onDestroy=function(){this.nodePool_sprite.clear(),this.nodePool_label.clear()},t.prototype.initNodePool=function(){this.nodePool_sprite=new cc.NodePool;for(var e=0;e<20;e++)this.nodePool_sprite.put(cc.instantiate(this.pre_alchemy_tips_sprite));for(this.nodePool_label=new cc.NodePool,e=0;e<20;e++)this.nodePool_label.put(cc.instantiate(this.pre_alchemy_tips_label))},t.prototype.onShowTips=function(e){return r(this,void 0,void 0,function(){var t,o,n,i=this;return s(this,function(){if(e.length<=0)return[2];for(c.default.getInstance().playSound(u.default.SEF_AlchemyExpDrop),t=function(t){if(o.nodePool_sprite.size()<=0)return"break";var n=e[t],a=o.nodePool_sprite.get();a.setParent(o.spriteParentNode),a.setPosition(0,0);var r,s,p=l.RandomUtils.getRandomBoolean();r=l.RandomUtils.getRandomInt(-160,-100),s=p?l.RandomUtils.getRandomInt(-150,50):l.RandomUtils.getRandomInt(50,150),a.setPosition(0,0);var d=cc.v2(s/2,r+150),f=cc.v2(s/2,r+120);cc.tween(a).bezierBy(.5,d,f,cc.v2(s,r)).bezierBy(.1,d.mul(.1),f.mul(.1),cc.v2(s,0).mul(.1)).bezierBy(.05,d.mul(.05),f.mul(.05),cc.v2(s,0).mul(.05)).delay(.2+.75*Math.random()).call(function(){c.default.getInstance().playSound(u.default.SEF_PickUp),i.showLabel(a.getPosition(),n),i.nodePool_sprite.put(a)}).start()},o=this,n=0;n<e.length&&"break"!==t(n);n++);return[2]})})},t.prototype.showLabel=function(e,t){var o=this,n=this.nodePool_label.get();n.getComponent(cc.Label).string="+"+t,n.setParent(this.labelParentNode),n.setPosition(e.add(cc.v2(0,50))),cc.tween(n).by(1,{y:50}).call(function(){o.nodePool_label.put(n)}).start()},t.prototype.wait=function(e){var t=this;return new Promise(function(o){t.scheduleOnce(o,e)})},a([f(cc.Prefab)],t.prototype,"pre_alchemy_tips_sprite",void 0),a([f(cc.Prefab)],t.prototype,"pre_alchemy_tips_label",void 0),a([f(cc.Node)],t.prototype,"spriteParentNode",void 0),a([f(cc.Node)],t.prototype,"labelParentNode",void 0),a([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008"}],AniEffectNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"91db86+sGFEjIhQXScdL8tA","AniEffectNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anim=null,t.duration=.5,t}return i(t,e),t.prototype.onInit=function(e){this.anim.play(),this.scheduleOnce(e,this.duration)},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},a([l(cc.Animation)],t.prototype,"anim",void 0),a([l(cc.Float)],t.prototype,"duration",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],Ani_FishIdle:[function(e,t,o){"use strict";cc._RF.push(t,"8ace9D7solPRI3HpOGIvwch","Ani_FishIdle");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.actNode=this.node.getChildByName("actNode")},t.prototype.onEnable=function(){cc.tween(this.actNode).repeatForever(cc.tween().to(.6,{scaleX:.9,scaleY:1.1}).to(.6,{scaleX:1,scaleY:1})).start()},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node)},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],Ani_RotateForever:[function(e,t,o){"use strict";cc._RF.push(t,"78f30P9iIdOCYGhxfy59zkZ","Ani_RotateForever");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=120,t}return i(t,e),t.prototype.onEnable=function(){cc.tween(this.node).repeatForever(cc.tween().by(1,{angle:this.speed})).start()},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node)},a([l(cc.Float)],t.prototype,"speed",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],Ani_ScaleForever:[function(e,t,o){"use strict";cc._RF.push(t,"0c8f4rxUkVPWZ+h5ZF/hg9y","Ani_ScaleForever");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minScale=.9,t.maxScale=1.1,t.duration=.6,t}return i(t,e),t.prototype.onLoad=function(){this.targetMinScale=this.node.scale*this.minScale,this.targetMaxScale=this.node.scale*this.maxScale},t.prototype.onEnable=function(){cc.tween(this.node).repeatForever(cc.tween().to(this.duration,{scale:this.targetMinScale}).to(.6,{scale:this.targetMaxScale})).start()},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node)},a([l(cc.Float)],t.prototype,"minScale",void 0),a([l(cc.Float)],t.prototype,"maxScale",void 0),a([l(cc.Float)],t.prototype,"duration",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],AudioMag:[function(e,t,o){"use strict";cc._RF.push(t,"876c49IW/JCuqvqQQhPgE7O","AudioMag");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioType=void 0;var a=function(){function e(){this.isOpenMusic=!0,this.isOpenSound=!0,this.bundle=null,this.intervalLimitSoundMap=new Map,this.loopSoundMap=new Map}return e.getInstance=function(){return this._instance||(this._instance=new e,window.AudioMag=this._instance),this._instance},e.prototype.init=function(){return n(this,void 0,void 0,function(){var t,o=this;return i(this,function(){return t=e.bgm,cc.game.on(cc.game.EVENT_HIDE,function(){t=e.bgm,o.stopBgm()},this),cc.game.on(cc.game.EVENT_SHOW,function(){""!=t&&o.playBGM(t)},this),[2,new Promise(function(e,t){cc.assetManager.loadBundle("music",function(n,i){n&&(console.log(n,"\u52a0\u8f7d\u97f3\u6548bundle\u5931\u8d25"),t()),o.bundle=i,console.log("\u52a0\u8f7d\u97f3\u6548bundle\u5b8c\u6210"),e&&e(null)})})]})})},e.prototype.playSound=function(t,o,n){if(this.isOpenSound){var i=this;if(e._caseSoundsRes.has(t)){var a=e._caseSoundsRes.get(t);return e._caseSoundUseTimes.set(t,30),this.tryReleaseRes(t),void cc.audioEngine.play(a,o||!1,n||1)}this.bundle&&this.bundle.load(t,cc.AudioClip,function(a,r){a?cc.log(a):(e._caseSoundUseTimes.set(t,30),e._caseSoundsRes.set(t,r),i.tryReleaseRes(t),cc.audioEngine.play(r,o||!1,n||1))})}},e.prototype.playSound_intervalLimit=function(e,t){var o=!0,n=(new Date).getTime();this.intervalLimitSoundMap.has(e)&&(o=n-this.intervalLimitSoundMap.get(e)>=t),o&&(this.playSound(e),this.intervalLimitSoundMap.set(e,n))},e.prototype.playSound_loop=function(t){if(this.isOpenSound&&!this.loopSoundMap.has(t)){var o=this;if(e._caseSoundsRes.has(t)){var n=e._caseSoundsRes.get(t),i=cc.audioEngine.play(n,!0,1);this.loopSoundMap.set(t,i)}else this.bundle&&this.bundle.load(t,cc.AudioClip,function(e,n){if(e)cc.log(e);else if(!o.loopSoundMap.has(t)){var i=cc.audioEngine.play(n,!0,1);o.loopSoundMap.set(t,i)}})}},e.prototype.stopSound_loop=function(e){if(this.loopSoundMap.has(e)){var t=this.loopSoundMap.get(e);cc.audioEngine.stop(t),this.loopSoundMap.delete(e)}},e.prototype.stopSound_allLoop=function(){var e=[];this.loopSoundMap.forEach(function(t){e.push(t)});for(var t=0;t<e.length;t++)cc.audioEngine.stop(e[t]);this.loopSoundMap.clear()},e.prototype.pauseSound_loop=function(e){if(this.loopSoundMap.has(e)){var t=this.loopSoundMap.get(e);cc.audioEngine.pause(t)}},e.prototype.resumeSound_loop=function(e){if(this.loopSoundMap.has(e)){var t=this.loopSoundMap.get(e);cc.audioEngine.resume(t)}else this.playSound_loop(e)},e.prototype.playBGM=function(t){if(this.isOpenMusic&&(cc.audioEngine.setMusicVolume(1),e.bgm!=t)){if(cc.audioEngine.stopMusic(),e.bgm=t,e._caseSoundsRes.has(t)){var o=e._caseSoundsRes.get(t);return e._caseSoundUseTimes.set(t,100),void cc.audioEngine.playMusic(o,!0)}this.bundle&&this.bundle.load(t,cc.AudioClip,function(o,n){o?cc.log(o):(e._caseSoundsRes.set(t,n),e._caseSoundUseTimes.set(t,100),e.bgm==t&&cc.audioEngine.playMusic(n,!0))})}},e.prototype.stopBgm=function(){e.bgm="",cc.audioEngine.stopMusic()},e.prototype.stopAll=function(){cc.audioEngine.stopAll()},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e.prototype.click=function(){this.playSound(r.ef_btn)},e.prototype.changeSoundState=function(){this.isOpenSound=!this.isOpenSound},e.prototype.changeMusicState=function(){this.isOpenMusic?(this.stopBgm(),this.isOpenMusic=!1):(this.isOpenMusic=!0,e.getInstance().playBGM(r.bgm_start))},e.prototype.tryReleaseRes=function(){var t=[];e._caseSoundUseTimes.forEach(function(o,n){o>1?e._caseSoundUseTimes.set(n,o-1):t.push(n)});for(var o=0;o<t.length;o++)e._caseSoundUseTimes.has(t[o])&&e._caseSoundUseTimes.delete(t[o]),e._caseSoundsRes.has(t[o])&&e._caseSoundsRes.delete(t[o])},e.bgm="",e._caseSoundsRes=new Map,e._caseSoundUseTimes=new Map,e}();o.default=a;var r=function(){function e(){}return e.bgm_start="bgm_start",e.bgm_game="bgm_game",e.ef_btn="ef_btn",e}();o.AudioType=r,cc._RF.pop()},{}],BaseBossSkill2_008:[function(e,t,o){"use strict";cc._RF.push(t,"5f5acZ1YTpN3bRYOQyVEIHV","BaseBossSkill2_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../Config_008"),u=e("../BaseEnemySkill_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.isResLoaded=!1,t.aniData=[],t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-2,this.isResLoaded=!1,this.onPlayIdleAni(),[4,this.onLoadBulletRes()];case 1:return e.sent(),-2===this.state&&this.onWalk(),this.isResLoaded=!0,[2]}})})},t.prototype.onResetData=function(){this.state=-2,this.isResLoaded?this.onWalk():this.onInitWeapon()},t.prototype.onUpdate=function(e,t){t&&this.state>=-1&&(this.timer-=e,this.timer<=0?this.onTryChangeState(this.state+1):this.onStateLogic(this.state,e))},t.prototype.onWalk=function(){this.state=-1,this.timer=1,this.enemyTs.onChangeAni(c.EnemyAniState.Walk,!0)},t.prototype.onLoadBulletRes=function(){return r(this,void 0,void 0,function(){var e=this;return s(this,function(){return[2,new Promise(function(t){var o=c.EnemyBulletId2PrefabPathMap.get(e.weaponData.bulletId);o?(e.bulletKeyPath=o,l.default.getInstance().onInitNodePool({key:o,prePath:o,count:1}).then(function(){t(null)})):t(null)})]})})},t.prototype.onInitAniData=function(e){this.aniData=e,null===this.aniData&&this.onSetDefaultAniData()},t.prototype.onSetDefaultAniData=function(){var e=this.enemyTs.getAniNameByState(c.EnemyAniState.Walk),t=this.enemyTs.getAniNameByState(c.EnemyAniState.Skill_SF);this.aniData=[{index:0,name:e,duration:.5,isLoop:!0},{index:1,name:t,duration:1,isLoop:!1},{index:5,name:e,duration:1,isLoop:!0}]},t.prototype.getAniDataByIndex=function(e){for(var t=0;t<this.aniData.length;t++)if(this.aniData[t].index===e)return this.aniData[t];return null},t.prototype.getNextAniDuration=function(e){for(var t,o=this.getAniDataByIndex(e);null===o&&(e+=1,o=this.getAniDataByIndex(e),!(e>=6)););return null!==(t=null==o?void 0:o.duration)&&void 0!==t?t:1.5},t.prototype.getAniDurationByAniIndexs=function(e){for(var t=0,o=0;o<e.length;o++){var n=this.getAniDataByIndex(e[o]);null!==n&&(t+=n.duration)}return t},t.prototype.onPlayIdleAni=function(){this.enemyTs.onChangeAniByAniName("dj",!0)},t.prototype.onChangeAni=function(e,t){this.enemyTs.onChangeAniByAniName(e,t)},t.prototype.onTryChangeState=function(e){var t;if(6===e)return this.state=-1,this.timer=2,void this.enemyTs.onChangeUsingSkill();var o=this.getAniDataByIndex(e);o?(this.onChangeAni(o.name,null!==(t=null==o?void 0:o.isLoop)&&void 0!==t&&t),this.state=e,this.timer=o.duration,this.onChangeState(e,o)):this.onTryChangeState(e+1)},t.prototype.onChangeState=function(e,t){0===e?(this.enemyTs.onSetMovementState(!1),this.onFire(t.duration)):5===e&&(this.enemyTs.onSetMovementState(!0),this.timer=this.fireCoolDownTime)},a([d],t)}(u.default));o.default=f,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../BaseEnemySkill_008":"BaseEnemySkill_008"}],BaseBossSkill_008:[function(e,t,o){"use strict";cc._RF.push(t,"2975dZXlBNLOJX9Y8wV2Lih","BaseBossSkill_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../Config_008"),u=e("../../GamingData_008"),p=e("../BaseEnemySkill_008"),d=cc._decorator,f=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.bulletArr=[],t.aniType=0,t.qsAwaitTime=2.5,t.sfAwaitTime=2.5,t}return i(t,e),t.prototype.onResetData=function(){this.state=0,this.timer=1},t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.onInitAniType(),e=this.node.getChildByName("firePoint_range"),this.firePos=null!==e?cc.v2(e.getPosition()):cc.v2(0,.5*this.node.height),this.onResetData(),this.bulletPrefabPath=c.EnemyBulletId2PrefabPathMap.get(this.weaponData.bulletId),[4,l.default.getInstance().onInitNodePool({key:this.bulletPrefabPath,prePath:this.bulletPrefabPath,count:1})];case 1:return t.sent(),[2]}})})},t.prototype.onInitAniType=function(){this.enemyTs.getAniNameByState(c.EnemyAniState.Skill_QS)!==this.enemyTs.getAniNameByState(c.EnemyAniState.Walk)?this.aniType=1:this.aniType=2},t.prototype.onUpdate=function(e,t){t&&(this.timer-=e,1===this.aniType?this.onUpdate_1(e):2===this.aniType&&this.onUpdate_2(e))},t.prototype.onLookAtPlayer=function(){3!==this.state&&(this.enemyTs.scaleXNode.scaleX=u.default.PlayerNode.getPosition().sub(this.node.getPosition()).x>=0?1:-1)},t.prototype.onRecoveryBullet=function(){for(var e=0;e<this.bulletArr.length;e++)this.bulletArr[e].emit(c.default.e_OnExitBattleRoundRecoveryGameObjNode);this.bulletArr=[]},t.prototype.onRecovery=function(){this.onRecoveryBullet(),e.prototype.onRecovery.call(this)},t.prototype.onUpdate_1=function(){0===this.state?this.timer<=0&&(this.state=1,this.timer=.5,this.enemyTs.onSetMovementState(!1)):1===this.state?this.timer<=0&&(this.state=2,this.onFireStart_QS()):2===this.state?this.timer<=0&&(this.state=3,this.onFireIdle_QS()):3===this.state?this.timer<0&&(this.state=5,this.timer=this.fireCoolDownTime,this.enemyTs.onSetMovementState(!0),this.enemyTs.onChangeAni(c.EnemyAniState.Walk,!0)):5===this.state&&this.timer<0&&(this.state=0,this.timer=1,this.enemyTs.onChangeUsingSkill())},t.prototype.onFireStart_QS=function(){var e=this.enemyTs.onChangeAni(c.EnemyAniState.Skill_QS,!1);e=e>.1?e:.1,this.timer=e,this.qsAniTime=e,this.onFire_QS(this.qsAwaitTime)},t.prototype.onFireIdle_QS=function(){this.timer=this.qsAwaitTime-this.qsAniTime,this.enemyTs.onChangeAni(c.EnemyAniState.Skill_DJ,!0)},t.prototype.onUpdate_2=function(){0===this.state&&(this.enemyTs.onSetMovementState(!0),this.timer<=0&&(this.state=1,this.timer=this.sfAwaitTime-.2,this.onFire_SF(this.sfAwaitTime),this.enemyTs.onSetMovementState(!1))),1===this.state?this.timer<=0&&(this.state=3,this.timer=3,this.onPlayAttackAni_SF()):3===this.state?this.timer<0&&(this.state=5,this.timer=this.fireCoolDownTime,this.onBulletAwake()):5===this.state&&this.timer<0&&(this.state=0,this.timer=1,this.enemyTs.onChangeUsingSkill())},t.prototype.onBulletAwake=function(){for(var e=0;e<this.bulletArr.length;e++)this.bulletArr[e].emit(c.default.e_OnBulletAwake);this.bulletArr=[],this.enemyTs.onChangeAni(c.EnemyAniState.Walk,!0),this.enemyTs.onSetMovementState(!0)},t.prototype.onPlayAttackAni_SF=function(){this.enemyTs.onChangeAni(c.EnemyAniState.Skill_SF,!1,this.onBulletAwake.bind(this))},a([f],t)}(p.default));o.default=h,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../BaseEnemySkill_008":"BaseEnemySkill_008"}],BaseDropItem_008:[function(e,t,o){"use strict";cc._RF.push(t,"17536V4AHFJHYU9Fp14b8k9","BaseDropItem_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=cc._decorator,u=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dropItemId=0,t.showNode=null,t.flyingSpeed=1200,t.func_onActivation=null,t.targetNode=null,t.oppositeFlyingTime=0,t}return i(t,e),t.prototype.onInit=function(e,t,o){var n=this;this.func_onActivation=o,t.setParent(this.node),t.setPosition(0,0),e>=s.DropItemType.ExpGemstone_1&&e<=s.DropItemType.ExpGemstone_3?this.scheduleOnce(function(){t.emit(s.default.e_RefreshExpstoneSF,n.dropItemId)},0):e>=s.DropItemType.Coin_1&&e<=s.DropItemType.Coin_3&&this.scheduleOnce(function(){t.emit(s.default.e_RefreshCoinSF,n.dropItemId)},0),this.showNode=t,this.dropItemId=e,this.targetNode=null},t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node),this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onSetFlyTarget=function(e,t){null===this.targetNode&&(this.targetNode=e,this.flyingSpeed=t,this.oppositeFlyingTime=144/t)},t.prototype.onBossRoundEvent=function(e,t){if(null===this.targetNode)if(this.dropItemId!==s.DropItemType.ExpGemstone_1&&this.dropItemId!==s.DropItemType.ExpGemstone_2&&this.dropItemId!==s.DropItemType.ExpGemstone_3&&this.dropItemId!==s.DropItemType.Chichen)this.onRecovery();else{if(e.getPosition().sub(this.node.getPosition()).magSqr()>t*t){var o=this.node.getPosition().sub(e.getPosition()).normalize(),n=Math.atan2(o.y,o.x);this.node.x=e.getPosition().x+t*Math.cos(n),this.node.y=e.getPosition().y+t*Math.sin(n)}this.targetNode=e,this.flyingSpeed=t,this.oppositeFlyingTime=.045}},t.prototype.onGameSuccEvent=function(e,t){if(null===this.targetNode)if(this.dropItemId!==s.DropItemType.AlchemyPullet&&this.dropItemId!==s.DropItemType.Coin_1&&this.dropItemId!==s.DropItemType.Coin_2&&this.dropItemId!==s.DropItemType.Coin_3)this.onRecovery();else{if(e.getPosition().sub(this.node.getPosition()).magSqr()>t*t){var o=this.node.getPosition().sub(e.getPosition()).normalize(),n=Math.atan2(o.y,o.x);this.node.x=e.getPosition().x+t*Math.cos(n),this.node.y=e.getPosition().y+t*Math.sin(n)}this.targetNode=e,this.flyingSpeed=t,this.oppositeFlyingTime=.045}},t.prototype.update=function(e){if(!l.default.isGamePause&&null!==this.targetNode){this.oppositeFlyingTime-=e;var t=this.targetNode.getPosition().sub(this.node.getPosition());this.oppositeFlyingTime>=0?this.node.setPosition(this.node.getPosition().add(t.normalize().mul(this.flyingSpeed*e*-1.5))):t.magSqr()<s.default.DropItemActionDisSqr?this.onActivation():this.node.setPosition(this.node.getPosition().add(t.normalize().mul(this.flyingSpeed*e)))}},t.prototype.lateUpdate=function(){this.node.opacity=l.default.RenderRect.contains(this.node.getPosition())?255:0},t.prototype.onActivation=function(){var e;null===(e=this.func_onActivation)||void 0===e||e.call(this,this.dropItemId,this)},t.prototype.onRecoveryShowNode=function(){this.targetNode=null,r.default.getInstance().recoveryNode(s.DropItemConfigMap.get(this.dropItemId),this.showNode),this.showNode=null},t.prototype.onRecovery=function(){this.onRecoveryShowNode(),r.default.getInstance().recoveryNode(s.default.Key_DropItem,this.node)},a([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],BaseEnemyBuff_008:[function(e,t,o){"use strict";cc._RF.push(t,"6d8cciivIVPzbKE2hHb/2HT","BaseEnemyBuff_008");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../mag/NodePoolManager"),r=e("../../../mag/ObjectPoolManager"),s=function(){function e(){this.isAlive=!1,this.baseEnemyTs=null,this.timer=0,this.cooldownTime=3,this.efNode=null}return e.prototype.reset=function(){this.timer=0},e.prototype.onInit=function(e,t){this.isAlive=!0,this.baseEnemyTs=e,this.timer=t[0],this.cooldownTime=t[1],this.onBuffStart(),this.onLoadEffectNode()},e.prototype.onUpdate=function(e){return this.timer-=e,this.onBuffUpdate(e),this.isAlive&&this.timer<=0&&this.onStartCooldown(),!this.isAlive&&this.timer<=-this.cooldownTime},e.prototype.onLoadEffectNode=function(){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return null===this.efNodeKey?[3,2]:[4,a.default.getInstance().onInitNodePool({key:this.efNodeKey,prePath:this.efNodeKey,count:1})];case 1:e.sent(),this.isAlive&&(this.efNode=a.default.getInstance().getNodeNotNull(this.efNodeKey),null!==this.efNode&&this.onInitEffectNode()),e.label=2;case 2:return[2]}})})},e.prototype.onRecoveryEffectNode=function(){this.efNode&&(a.default.getInstance().recoveryNode(this.efNodeKey,this.efNode),this.efNode=null)},e.prototype.onStartCooldown=function(){this.isAlive&&(this.isAlive=!1,this.onBuffEnd()),this.onRecoveryEffectNode()},e.prototype.onRecovery=function(){this.onStartCooldown(),r.ObjectPoolManager.getInstance().put(this)},e}();o.default=s,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../../../mag/ObjectPoolManager":"ObjectPoolManager"}],BaseEnemyMovement_008:[function(e,t,o){"use strict";cc._RF.push(t,"ff964DivCtLCKW24eJJCZH3","BaseEnemyMovement_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../mag/ObjectPoolManager"),i=e("../GamingData_008"),a=function(){function e(){this.enabled=!1,this.node=null,this.baseEnemyTs=null,this.stopMoveState=0,this._moveSpeedRatio=1}return e.prototype.reset=function(){this.enabled=!1,this.node=null,this.baseEnemyTs=null},Object.defineProperty(e.prototype,"moveSpeedRatio",{get:function(){return this._moveSpeedRatio},set:function(e){this._moveSpeedRatio=e,this.baseEnemyTs&&this.baseEnemyTs.setAnimationSpeed(e)},enumerable:!1,configurable:!0}),e.prototype.onInit=function(e,t){this.node=e,this.baseEnemyTs=t,this.enabled=!0,this.moveSpeedRatio=1,this.stopMoveState=0},e.prototype.onRemove=function(){this.enabled=!1,n.ObjectPoolManager.getInstance().put(this)},e.prototype.onUpdate=function(e,t,o,n){this.enabled&&(this.stopMoveState>0||(n?(this.node.x+=t.x*o*e,this.node.y+=t.y*o*e):(this.node.x+=t.x*o*e*this.moveSpeedRatio,this.node.y+=t.y*o*e*this.moveSpeedRatio,this.baseEnemyTs.scaleXNode.scaleX=t.x>=0?1:-1)))},e.prototype.setMovementState=function(e){this.enabled=e},e.prototype.changeStopMoveState=function(e){this.stopMoveState+=e,this.stopMoveState>0?this.baseEnemyTs.onPauseAni():this.baseEnemyTs.onResumeAni()},e.prototype.getStopMoveState=function(){return this.stopMoveState>0},e.prototype.onRun=function(e,t,o){this.baseEnemyTs.scaleXNode.scaleX=t.x>=0?1:-1,i.default.isLimitMoveRect&&this.node.getPosition().sub(i.default.limitRectCenterPoint).magSqr()>i.default.limitRectRadiusSqr&&(o=0),this.node.x+=t.x*o*e,this.node.y+=t.y*o*e},e.prototype.onResetPos=function(e){this.node.setPosition(e)},e}();o.default=a,cc._RF.pop()},{"../../../mag/ObjectPoolManager":"ObjectPoolManager","../GamingData_008":"GamingData_008"}],BaseEnemySkill_008:[function(e,t,o){"use strict";cc._RF.push(t,"500f2MMca5LDrr8qi46qPfV","BaseEnemySkill_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../mag/ObjectPoolManager"),i=function(){function e(){this.node=null,this.enemyTs=null,this.weaponData=null,this.weight=100,this.bulletCount=1,this.fireCoolDownTime=5}return e.prototype.reset=function(){this.node=null,this.enemyTs=null,this.weaponData=null},e.prototype.onInit=function(e,t,o,n){this.weight=e,this.node=t,this.enemyTs=o,this.weaponData=n,this.bulletCount=n.bulletCount,this.fireCoolDownTime=n.fireCoolDownTime,this.onInitWeapon()},e.prototype.onRecovery=function(){n.ObjectPoolManager.getInstance().put(this)},e}();o.default=i,cc._RF.pop()},{"../../../mag/ObjectPoolManager":"ObjectPoolManager"}],BaseEnemy_008:[function(e,t,o){"use strict";cc._RF.push(t,"f48197F9oBDT6LL9jEo3mFR","BaseEnemy_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../../../mag/ObjectPoolManager"),c=e("../Config_008"),u=e("../DropItemMag_008"),p=e("../FloatTextMag_008"),d=e("../GamingData_008"),f=e("../enemyMovement/EnemyMovement_Group_008"),h=e("../enemyMovement/EnemyMovement_RVO2Agent_008"),_=e("../enemyWeapon/boss2/BaseBossSkill2_008"),y=e("../misc/HpBarNode_008"),g=e("../utils/FightUtils_008"),m=cc._decorator,v=m.ccclass,b=m.property,P=m.inspector,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleXNode=null,t.actNode=null,t.yy=null,t.circleCollider=null,t.circleColliderPos=cc.v2(0,0),t.isAlive=!1,t.invulnerableState=0,t.targetNode=null,t.damagePoint=10,t.damagePoint_range=10,t.armor=0,t.moveSpeed=180,t.maxHp=1e3,t.currHp=1e3,t.floatTextOffsetY=180,t.enemyData=null,t.prefabData=null,t.func_preRecovery=null,t.func_recovery=null,t.isOnKnockbackState=!1,t.movementTs=null,t.isElite=!1,t.isBoss=!1,t.hpBarNode=null,t.func_refreshHpBar=null,t.isCanAttackPlayer=!1,t.attackTimer=0,t.skillArr=[],t.currUsingSkillIndex=0,t.buffArr=[],t.aniNameArr=[],t}return i(t,e),t.prototype.onLoad=function(){this.circleCollider=this.node.getComponent(cc.CircleCollider)},t.prototype.onEnable=function(){this.node.on(c.default.e_OnEnemyAttacked,this.onAttacked,this),this.node.on(c.default.e_OnEnemyAttacked_NuclearBomb,this.onNuclearAttacked,this),this.node.on(c.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.on(c.default.e_OnTryAddBuffToEnemy,this.onTryAddBuff,this)},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.actNode),cc.Tween.stopAllByTarget(this.node),this.node.off(c.default.e_OnEnemyAttacked,this.onAttacked,this),this.node.off(c.default.e_OnEnemyAttacked_NuclearBomb,this.onNuclearAttacked,this),this.node.off(c.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.off(c.default.e_OnTryAddBuffToEnemy,this.onTryAddBuff,this)},t.prototype.onInit=function(e,t,o,n,i,a){var r;void 0===a&&(a=!1),this.enemyData=n,this.prefabData=c.default.getEnemyPrefabData(n.prefabId),this.targetNode=e,this.func_recovery=t,this.func_preRecovery=o,this.isAlive=!0,this.isOnKnockbackState=!1,this.isCanAttackPlayer=!1,this.isElite=n.isElite,this.isBoss=a,this.invulnerableState=0,this.maxHp=n.hp+i.enemyLv*n.hpRatio,this.currHp=this.maxHp,this.moveSpeed=n.moveSpeed,this.damagePoint=n.damagePoint+i.enemyLv*n.damagePointRatio,this.damagePoint_range=n.damagePointRange+i.enemyLv*n.damagePointRatio,this.armor=null!==(r=null==n?void 0:n.armor)&&void 0!==r?r:0,this.node.scale=n.scale,this.onInitSizeData(),this.floatTextOffsetY=.6*this.size_height,this.circleColliderPosOffsetY=this.node.scaleY*this.circleCollider.offset.y,this.circoleColliderRadius=this.node.scale*this.circleCollider.radius,this.onRereshCircleColliderPos(),this.yy.opacity=255,this.onInitAniNameArr(),this.onResetRenderNode(),this.onChangeAni(c.EnemyAniState.Walk,!0),this.circleCollider.enabled=!1,i.isGroup?(this.movementTs=l.ObjectPoolManager.getInstance().get(f.default),this.movementTs.onInit(this.node,this)):(this.movementTs=l.ObjectPoolManager.getInstance().get(h.default),this.movementTs.onInit(this.node,this)),this.onInitHpBar(this.isBoss,this.isElite),this.onEquipSkill()},t.prototype.onAttacked=function(e,t,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=cc.Color.WHITE),this.isAlive&&!this.isInvulnerable()){var i=this.armor*Math.max(1-t,0),a=g.default.calculateDamage(e,i);a=Math.ceil(a),this.currHp-=a,this.func_refreshHpBar&&this.func_refreshHpBar(this.currHp/this.maxHp),o?p.default.ins.onShowDamageFloatText_Cirt(a.toString(),this.node.getPosition().x,this.node.getPosition().y+this.floatTextOffsetY,n):p.default.ins.onShowDamageFloatText(a.toString(),this.node.getPosition().x,this.node.getPosition().y+this.floatTextOffsetY,n),this.currHp<=0?this.onDeath():this.onPlayHitAni()}},t.prototype.onNuclearAttacked=function(e,t){void 0===t&&(t=cc.Color.WHITE),this.isAlive&&(this.isBoss&&(e=999),this.currHp-=e,this.func_refreshHpBar&&this.func_refreshHpBar(this.currHp/this.maxHp),p.default.ins.onShowDamageFloatText(e.toString(),this.node.getPosition().x,this.node.getPosition().y+this.floatTextOffsetY,t),this.currHp<=0?this.onDeath():this.onPlayHitAni())},t.prototype.onDeath=function(){this.isAlive=!1,this.onRecoveryAllBuff(),this.movementTs.onRemove(),this.movementTs=null,this.yy.opacity=0,this.circleCollider.enabled=!1,this.onClearAniState(),this.onRecoveryAllSkill(),this.onPreRecovery(),this.onPlayDieAni(),this.isBoss?d.default.currKillBossCount+=1:d.default.currKillEnemyCount+=1,u.default.ins.onEnemyDropLogic(this.node.getPosition(),this.enemyData.dropData,this.isElite,this.isBoss)},t.prototype.onPlayHitAni=function(){cc.Tween.stopAllByTarget(this.actNode),this.actNode.scaleX=1,this.actNode.scaleY=1,cc.tween(this.actNode).to(.05,{scaleX:1.2,scaleY:.8}).to(.05,{scaleX:1,scaleY:1}).start(),this.onRenderNodePlayHitAni()},t.prototype.onPlayDieAni=function(){this.onPlayHitAni(),this.setAnimationSpeed(0);var e=this.targetNode.getPosition().sub(this.node.getPosition()).normalizeSelf(),t=this.node.getPosition().sub(e.mul(c.default.EnemyDieKnockbackDis));cc.tween(this.node).to(.5,{x:t.x,y:t.y}).start(),this.onRenderNodePlayDieAni(.5)},t.prototype.onPreRecovery=function(){this.onRecoveryHpBar(),this.unscheduleAllCallbacks(),this.func_preRecovery()},t.prototype.onRecovery=function(){this.isAlive&&(this.isAlive=!1,this.onRecoveryAllBuff(),this.movementTs.onRemove(),this.movementTs=null,this.onRecoveryHpBar(),this.onRecoveryAllSkill(),this.unscheduleAllCallbacks(),this.onClearAniState(),this.func_recovery())},t.prototype.update=function(e){if(!d.default.isGamePause&&this.isAlive&&(this.onUpdateBuff(e),this.isAlive)){var t=this.targetNode.getPosition().sub(this.node.getPosition()),o=t.magSqr();t.normalizeSelf(),this.onMovementLogic(e,t,o),this.node.opacity=d.default.isLimitMoveRect||d.default.RenderRect.contains(this.node.getPosition())?255:0,this.isInvulnerable()?this.circleCollider.enabled=!1:this.circleCollider.enabled=d.default.isLimitMoveRect||d.default.ColliderRect.contains(this.node.getPosition()),this.onUpdateSkill(e,o),this.onMeleeLogic(e)}},t.prototype.onMovementLogic=function(e,t){this.isOnKnockbackState?this.movementTs.onUpdate(e,t,-c.default.KnockbackEnemySpeed,!0):this.movementTs.onUpdate(e,t,this.moveSpeed,!1)},t.prototype.onSetMovementState=function(e){var t;null===(t=this.movementTs)||void 0===t||t.setMovementState(e)},t.prototype.onResetPos=function(e){var t;null===(t=this.movementTs)||void 0===t||t.onResetPos(e)},t.prototype.onRereshCircleColliderPos=function(){this.circleColliderPos.x=this.node.x,this.circleColliderPos.y=this.node.y+this.circleColliderPosOffsetY},t.prototype.onMeleeLogic=function(e){this.onRereshCircleColliderPos();var t=this.circleColliderPos.sub(d.default.playerCircleColliderPos).magSqr(),o=this.circoleColliderRadius+d.default.playerCircleColliderRadius;this.isCanAttackPlayer=t<o*o,this.attackTimer>0&&(this.attackTimer-=e),this.isCanAttackPlayer&&this.attackTimer<=0&&(this.attackTimer=c.default.EnemyContactDamageCoolDown,this.onAttackPlayer(this.damagePoint))},t.prototype.onAttackPlayer=function(e){d.default.onAttackPlayer(!0,e,this.enemyData.isIgnorePlayerArmor)},t.prototype.isInvulnerable=function(){return this.invulnerableState>0},t.prototype.onEquipSkill=function(){this.skillArr=[];for(var e=0;e<this.enemyData.weaponDataArr.length;e++){var t=this.enemyData.weaponDataArr[e];if(c.EnemySkillConfigMap.has(t.i)){var o=c.EnemySkillConfigMap.get(t.i),n=c.EnemySkillId2TSMap.get(o.weaponClassId);if("function"==typeof n){var i=new n;this.skillArr.push(i),i.onInit(t.w,this.node,this,o),i instanceof _.default&&i.onInitAniData(null)}}}this.onChangeUsingSkill()},t.prototype.onUpdateSkill=function(e,t){for(var o=0;o<this.skillArr.length;o++)this.skillArr[o].onUpdate(e,this.currUsingSkillIndex===o,t)},t.prototype.onChangeUsingSkill=function(){if(!(this.skillArr.length<1)){if(1===this.skillArr.length)return this.currUsingSkillIndex=0,void this.skillArr[this.currUsingSkillIndex].onResetData();for(var e=0,t=0;t<this.skillArr.length;t++)e+=this.skillArr[t].weight;var o=r.RandomUtils.getRandomInt(0,e),n=0;for(t=0;t<this.skillArr.length;t++)if(o<=(n+=this.skillArr[t].weight)){this.currUsingSkillIndex=t,this.skillArr[t].onResetData();break}}},t.prototype.removeSkill=function(e){var t=this.skillArr.indexOf(e);-1!==t&&(this.skillArr[t].onRecovery(),this.skillArr.splice(t,1),this.currUsingSkillIndex===t?this.onChangeUsingSkill():t<this.currUsingSkillIndex&&(this.currUsingSkillIndex-=1))},t.prototype.onRecoveryAllSkill=function(){for(var e=0;e<this.skillArr.length;e++)this.skillArr[e].onRecovery();this.skillArr=[]},t.prototype.onTryAddBuff=function(e,t){if(this.isAlive&&!this.getIsHasBuff(e)){var o=l.ObjectPoolManager.getInstance().get(e);this.buffArr.push(o),o.onInit(this,t)}},t.prototype.getIsHasBuff=function(e){var t=!1,o=l.ObjectPoolManager.getInstance().get(e),n=o.buffId;l.ObjectPoolManager.getInstance().put(o);for(var i=0;i<this.buffArr.length;i++)if(this.buffArr[i].buffId===n){t=!0;break}return t},t.prototype.onUpdateBuff=function(e){for(var t=this.buffArr.length-1;t>=0;t--)if(this.buffArr[t].onUpdate(e)){if(!(this.buffArr.length>0))return;this.buffArr[t].onRecovery(),this.buffArr.splice(t,1)}},t.prototype.onRecoveryAllBuff=function(){for(var e=this.buffArr.length-1;e>=0;e--)this.buffArr[e].onRecovery();this.buffArr=[]},t.prototype.onInitHpBar=function(e,t){if(e){if(null!==(n=s.default.getInstance().getNodeNotNull(c.default.Key_BossHpBar))){this.hpBarNode=n,n.setParent(d.default.HpBarNode);var o=this.getHpBarPosY();this.func_refreshHpBar=n.getComponent(y.default).onInitHpBar(this.node,cc.v2(0,o)),this.func_refreshHpBar(1)}}else if(t){var n;null!==(n=s.default.getInstance().getNodeNotNull(c.default.Key_HpBar))&&(this.hpBarNode=n,n.setParent(d.default.HpBarNode),o=this.getHpBarPosY(),this.func_refreshHpBar=n.getComponent(y.default).onInitHpBar(this.node,cc.v2(0,o)),this.func_refreshHpBar(1))}},t.prototype.onRecoveryHpBar=function(){null!==this.hpBarNode&&(this.isBoss?s.default.getInstance().recoveryNode(c.default.Key_BossHpBar,this.hpBarNode):s.default.getInstance().recoveryNode(c.default.Key_HpBar,this.hpBarNode),this.hpBarNode=null,this.func_refreshHpBar=null)},a([b(cc.Node)],t.prototype,"scaleXNode",void 0),a([b(cc.Node)],t.prototype,"actNode",void 0),a([b(cc.Node)],t.prototype,"yy",void 0),a([v,P("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../../../mag/ObjectPoolManager":"ObjectPoolManager","../Config_008":"Config_008","../DropItemMag_008":"DropItemMag_008","../FloatTextMag_008":"FloatTextMag_008","../GamingData_008":"GamingData_008","../enemyMovement/EnemyMovement_Group_008":"EnemyMovement_Group_008","../enemyMovement/EnemyMovement_RVO2Agent_008":"EnemyMovement_RVO2Agent_008","../enemyWeapon/boss2/BaseBossSkill2_008":"BaseBossSkill2_008","../misc/HpBarNode_008":"HpBarNode_008","../utils/FightUtils_008":"FightUtils_008"}],BasePlayerWeapon_008:[function(e,t,o){"use strict";cc._RF.push(t,"c8e12XuUTtC1bzW46FRF6/v","BasePlayerWeapon_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../Config_008"),l=e("../GamingData_008"),c=e("../LocalDataManager_008"),u=e("../entities/Enums_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillId=0,t.isAlive=!1,t.player=null,t.power=0,t.fireCoolDownTime=5,t.bulletCount=1,t.bulletScale=1,t.cirtProb=0,t.cirtPowerBonus=0,t.gongfaData=null,t}return i(t,e),t.prototype.onInit=function(e,t){this.isAlive=!0,this.player=e,this.skillId=t,this.onInitGongFaBonus(),this.onResetData(),this.onInitWeapon()},t.prototype.onRecovery=function(){this.isAlive=!1,this.destroy()},t.prototype.getSkillLv=function(){return l.default.SkillStateMap.get(this.skillId)||0},t.prototype.onInitGongFaBonus=function(){this.gongfaData={};var e=this.skillId>300?this.skillId-100:this.skillId,t=c.default.getInstance().gongfa_getLvById(e),o=window.gongFaUtils_008.getInfoBonus(e,t,this.skillId>300?u.GongFa_BonusInfoName.superPowerBonus:u.GongFa_BonusInfoName.basePowerBonus),n=window.gongFaUtils_008.getInfoBonus(e,t,u.GongFa_BonusInfoName.ignoreArmorProp),i=window.gongFaUtils_008.getInfoBonus(e,t,u.GongFa_BonusInfoName.bulletLifeBonus),a=window.gongFaUtils_008.getInfoBonus(e,t,u.GongFa_BonusInfoName.bulletDurCount),r=window.gongFaUtils_008.getInfoBonus(e,t,u.GongFa_BonusInfoName.dotPowerBonus),s=window.gongFaUtils_008.getInfoBonus(e,t,u.GongFa_BonusInfoName.dotTimeBonus);this.gongfaData[u.GongFa_BonusInfoName.basePowerBonus]=o,this.gongfaData[u.GongFa_BonusInfoName.ignoreArmorProp]=n,this.gongfaData[u.GongFa_BonusInfoName.bulletLifeBonus]=i,this.gongfaData[u.GongFa_BonusInfoName.bulletDurCount]=a,this.gongfaData[u.GongFa_BonusInfoName.dotPowerBonus]=r,this.gongfaData[u.GongFa_BonusInfoName.dotTimeBonus]=s},t.prototype.getBulletLifeBonus=function(){return 3+this.gongfaData[u.GongFa_BonusInfoName.bulletLifeBonus]},t.prototype.getBulletDurCountBonus=function(){return this.gongfaData[u.GongFa_BonusInfoName.bulletLifeBonus]},t.prototype.getExceptionStatePowerbonus=function(){return this.gongfaData[u.GongFa_BonusInfoName.dotPowerBonus]},t.prototype.getExceptionStateTimeBonus=function(){return this.gongfaData[u.GongFa_BonusInfoName.dotTimeBonus]},t.prototype.onResetData=function(){var e=l.default.SkillStateMap.get(this.skillId)-1||0,t=s.SkillConfigMap.get(this.skillId);this.power=l.default.PlayerGamingInfo.damagePoint*(1+this.gongfaData[u.GongFa_BonusInfoName.basePowerBonus])*t.powerRatio+t.powerArr[e],this.fireCoolDownTime=t.coolDownTimeArr[e]*(1-l.default.PlayerGamingInfo.coolDownTimeBonus),this.bulletCount=t.countArr[e],this.bulletScale=t.scaleArr[e],this.cirtProb=l.default.PlayerGamingInfo.critProb+t.cirtProb[e],this.cirtPowerBonus=l.default.PlayerGamingInfo.critPowerBonus+t.cirtPowerBonus[e]},t.prototype.getPowerString=function(){return"\u6b66\u5668"+this.skillId+" \u653b\u51fb\u529b\uff1a"+this.power},t.prototype.getPower=function(){return this.power},t.prototype.onAttackEnemy=function(e){if(r.RandomUtils.getRandomProbability_10000()<=this.cirtProb){var t=this.power*(100+this.cirtPowerBonus)*.01;e.emit(s.default.e_OnEnemyAttacked,t,this.gongfaData[u.GongFa_BonusInfoName.ignoreArmorProp],!0)}else e.emit(s.default.e_OnEnemyAttacked,this.power,this.gongfaData[u.GongFa_BonusInfoName.ignoreArmorProp])},a([d],t)}(cc.Component));o.default=f,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../LocalDataManager_008":"LocalDataManager_008","../entities/Enums_008":"Enums_008"}],BaseSingleBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"61e30H7TJpMCI7kvngff6kF","BaseSingleBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this)},t.prototype.onTouchBtn=function(){window.isCanCtrl&&this.onTouchEvent()},t.prototype.onRecovery=function(){},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],BaseUIDialog_008:[function(e,t,o){"use strict";cc._RF.push(t,"eff2cIyLXRL1I5m2O+knlbi","BaseUIDialog_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../000_common/WidgetToCanvas"),s=e("../../DelegateManager_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=l.inspector,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aniTime_show=.3,t.aniTime_hide=.3,t.bg=null,t.actNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.on("onInit",this.onInit,this)},t.prototype.onDestroy=function(){this.node.off("onInit",this.onInit,this)},t.prototype.onInitBg=function(e){if(!this.bg.getComponent(r.default)){var t=this.bg.getComponent(cc.Widget);t&&(t.target=e,t.updateAlignment())}},t.prototype.onEnable=function(){this.onShow()},t.prototype.onDisable=function(){s.default.onCloseSomeoneDia.executeDelegates()},t.prototype.onShow=function(){var e=this;this.actNode.scale=0,cc.tween(this.actNode).to(this.aniTime_show,{scale:1},{easing:"backOut"}).call(function(){e.onInitEvent()}).start()},t.prototype.onHide=function(e){var t=this;this.onRemoveEvent(),cc.tween(this.actNode).to(this.aniTime_hide,{scale:0},{easing:"backIn"}).call(function(){t.node.active=!1,e&&e()}).start()},a([u(cc.Float)],t.prototype,"aniTime_show",void 0),a([u(cc.Float)],t.prototype,"aniTime_hide",void 0),a([u(cc.Node)],t.prototype,"bg",void 0),a([u(cc.Node)],t.prototype,"actNode",void 0),a([c,p("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../000_common/WidgetToCanvas":"WidgetToCanvas","../../DelegateManager_008":"DelegateManager_008"}],BaseUI:[function(e,t,o){"use strict";cc._RF.push(t,"e337124hiRPjLlHuXwjH7gm","BaseUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r,s=e("../game/mag/AudioMag"),l=cc._decorator,c=l.ccclass,u=l.property;(function(e){e[e.None=-1]="None",e[e.Scale=-1]="Scale",e[e.ScaleX=-1]="ScaleX",e[e.ScaleY=-1]="ScaleY",e[e.Opacity=-1]="Opacity",e[e.UpToMid=-1]="UpToMid"})(r||(r={})),cc.Enum;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showAni=r.None,t.actNode=null,t.isCanClick=!0,t}return i(t,e),t.prototype.onLoad=function(){this.actNode=this.node.getChildByName("actNode"),this.onOnLoad()},t.prototype.onOnLoad=function(){},t.prototype.addBtnEvent=function(e){e.on(cc.Node.EventType.TOUCH_END,this.onClickBtn,this)},t.prototype.remvoeBtnEvent=function(e){e.off(cc.Node.EventType.TOUCH_END,this.onClickBtn,this)},t.prototype.onClickBtn=function(e){this.isCanClick&&(s.default.getInstance().click(),this.onOnClickBtn(e))},t.prototype.onOnClickBtn=function(){},t.prototype.onShow=function(e,t){this.isCanClick=!1,cc.Tween.stopAllByTarget(this.actNode),this.node.active=!0,this.actNode.opacity=255,this.actNode.y=0,this.actNode.scale=1,e?this.playShowAni(t):this.onShowOver(t)},t.prototype.onHide=function(e,t){this.isCanClick=!1,cc.Tween.stopAllByTarget(this.actNode),e?this.playHideAni(t):this.onHideOver(t)},t.prototype.playShowAni=function(e){var t=this;switch(this.showAni){case r.Scale:this.actNode.scale=0,cc.tween(this.actNode).to(.4,{scale:1},{easing:"backOut"}).call(function(){t.onShowOver(e)}).start();break;case r.ScaleX:this.actNode.scaleX=0,cc.tween(this.actNode).to(.2,{scaleX:1}).call(function(){t.onShowOver(e)}).start();break;case r.ScaleY:this.actNode.scaleY=0,cc.tween(this.actNode).to(.2,{scaleY:1}).call(function(){t.onShowOver(e)}).start();break;case r.Opacity:this.actNode.opacity=0,cc.tween(this.actNode).to(.4,{opacity:255},{easing:"fade"}).call(function(){t.onShowOver(e)}).start();break;case r.UpToMid:this.actNode.y=1e3,cc.tween(this.actNode).to(.4,{y:0},{easing:"backOut"}).call(function(){t.onShowOver(e)}).start();break;default:this.onShowOver(e)}},t.prototype.playHideAni=function(e){var t=this;switch(this.showAni){case r.Scale:cc.tween(this.actNode).to(.4,{scale:0},{easing:"backIn"}).call(function(){t.onHideOver(e)}).start();break;case r.ScaleX:cc.tween(this.actNode).to(.2,{scaleX:0}).call(function(){t.onHideOver(e)}).start();break;case r.ScaleY:cc.tween(this.actNode).to(.2,{scaleY:0}).call(function(){t.onHideOver(e)}).start();break;case r.Opacity:cc.tween(this.actNode).to(.4,{opacity:0},{easing:"fade"}).call(function(){t.onHideOver(e)}).start();break;case r.UpToMid:cc.tween(this.actNode).to(.4,{y:1e3},{easing:"backIn"}).call(function(){t.onHideOver(e)}).start();break;default:this.onHideOver(e)}},t.prototype.onShowOver=function(e){this.isCanClick=!0,e&&e()},t.prototype.onHideOver=function(e){this.node.active=!1,e&&e()},a([u({type:cc.Enum(r),tooltip:"UI\u754c\u9762\u6253\u5f00\u65f6\u7684\u52a8\u753b\u7c7b\u578b"})],t.prototype,"showAni",void 0),a([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../game/mag/AudioMag":"AudioMag"}],BaseVideoDropItem_008:[function(e,t,o){"use strict";cc._RF.push(t,"0e8cc/sK81Jn47Robu+gAH6","BaseVideoDropItem_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/VideoManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=e("../VideoDropItemMag_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onPreRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onPreRecovery,this)},t.prototype.update=function(){l.default.isGamePause||l.default.PlayerNode.getPosition().sub(this.node.getPosition()).magSqr()<6400&&this.onTrigger()},t.prototype.lateUpdate=function(){this.node.opacity=l.default.RenderRect.contains(this.node.getPosition())?255:0},t.prototype.onTrigger=function(){l.default.isGamePause=!0,r.default.getInstance().showVideo(this.onVideoSucc.bind(this),this.onVideoFail.bind(this))},t.prototype.onVideoSucc=function(){this.onActive(),l.default.isGamePause=!1,this.onPreRecovery()},t.prototype.onVideoFail=function(){l.default.isGamePause=!1,this.onPreRecovery()},t.prototype.onPreRecovery=function(){c.default.ins.onRemoveOne(this.node),this.onRecovery()},a([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../mag/VideoManager":"VideoManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../VideoDropItemMag_008":"VideoDropItemMag_008"}],BossSkill2_RangeAttack2_008:[function(e,t,o){"use strict";cc._RF.push(t,"dffb1V5Dl5FmYnEvEkQ0TtH","BossSkill2_RangeAttack2_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=e("../../enemyBullet/boss2/EnemyBullet_RangeAttack2_Circle_008"),u=e("./BaseBossSkill2_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletNode=null,t}return i(t,e),t.prototype.onSetDefaultAniData=function(){var e=this.enemyTs.getAniNameByState(s.EnemyAniState.Walk),t=this.enemyTs.getAniNameByState(s.EnemyAniState.Skill_SF);this.aniData=[{index:0,name:e,duration:1,isLoop:!0},{index:1,name:t,duration:1,isLoop:!1},{index:2,name:t,duration:4.5,isLoop:!0},{index:5,name:e,duration:1,isLoop:!0}]},t.prototype.onStateLogic=function(){3===this.state&&this.onRecoveryBullet()},t.prototype.onFire=function(e){var t=r.default.getInstance().getNodeNotNull(this.bulletKeyPath);null!==t&&(t.setParent(l.default.GameObjNode),t.setPosition(this.node.getPosition().add(cc.v2(0,50))),t.zIndex=cc.macro.MIN_ZINDEX+50,t.getComponent(c.default).onInit(this.enemyTs.damagePoint,e,this.bulletKeyPath),this.bulletNode=t)},t.prototype.onRecoveryBullet=function(){null!==this.bulletNode&&(r.default.getInstance().recoveryNode(this.bulletKeyPath,this.bulletNode),this.bulletNode=null)},t.prototype.onRecovery=function(){this.onRecoveryBullet(),e.prototype.onRecovery.call(this)},a([d],t)}(u.default));o.default=f,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../enemyBullet/boss2/EnemyBullet_RangeAttack2_Circle_008":"EnemyBullet_RangeAttack2_Circle_008","./BaseBossSkill2_008":"BaseBossSkill2_008"}],BossSkill2_RangeAttack_008:[function(e,t,o){"use strict";cc._RF.push(t,"15bfe9Arw5MfboVddtRA1X2","BossSkill2_RangeAttack_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=e("../../enemyBullet/boss2/EnemyBullet_RangeAttack_008"),u=e("./BaseBossSkill2_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t}return i(t,e),t.prototype.onSetDefaultAniData=function(){var e=this.enemyTs.getAniNameByState(s.EnemyAniState.Walk),t=this.enemyTs.getAniNameByState(s.EnemyAniState.Skill_SF);this.aniData=[{index:0,name:e,duration:1,isLoop:!0},{index:1,name:e,duration:1,isLoop:!1},{index:2,name:t,duration:1,isLoop:!0},{index:5,name:e,duration:1,isLoop:!0}]},t.prototype.onStateLogic=function(){},t.prototype.onFire=function(e){var t=this.getNextAniDuration(1),o=r.default.getInstance().getNodeNotNull(this.bulletKeyPath);null!==o&&(o.setParent(l.default.GameObjNode),o.setPosition(this.node.getPosition()),o.zIndex=cc.macro.MIN_ZINDEX+50,o.getComponent(c.default).onInit(this.enemyTs.damagePoint,e,t,this.bulletKeyPath))},a([d],t)}(u.default));o.default=f,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../enemyBullet/boss2/EnemyBullet_RangeAttack_008":"EnemyBullet_RangeAttack_008","./BaseBossSkill2_008":"BaseBossSkill2_008"}],BossSkill2_RangeLinear_008:[function(e,t,o){"use strict";cc._RF.push(t,"3acf5mcYJJFYaw6DQqspQn5","BossSkill2_RangeLinear_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../GamingData_008"),u=e("../../enemyBullet/EnemyBullet_RangeLinear_Route_008"),p=e("./BaseBossSkill2_008"),d=cc._decorator,f=d.ccclass,h=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(){return t=this.node.getChildByName("firePoint_range"),this.firePos=null!==t?cc.v2(t.getPosition()):cc.v2(0,.5*this.node.height),e.prototype.onInitWeapon.call(this),[2]})})},t.prototype.onStateLogic=function(){},t.prototype.onFire=function(e){e+=.5*this.getNextAniDuration(1),this.onFireReal(e)},t.prototype.onFireReal=function(e){for(var t=c.default.enemyBulletNode_middle,o=t.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.firePos)),n=c.default.PlayerNode.getPosition().sub(o).normalize(),i=this.bulletCount,a=cc.misc.degreesToRadians(12),r=a*(i-1)*-.5,s=0;s<i;s++){var p=l.default.getInstance().getNodeNotNull(this.bulletKeyPath);if(null!==p){p.setParent(t),p.setPosition(o);var d=cc.v2(n).rotate(r+a*s);p.getComponent(u.default).onInit(e,d,this.enemyTs.damagePoint_range,5,this.bulletKeyPath,2)}}},a([f],t)}(p.default));o.default=h,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../GamingData_008":"GamingData_008","../../enemyBullet/EnemyBullet_RangeLinear_Route_008":"EnemyBullet_RangeLinear_Route_008","./BaseBossSkill2_008":"BaseBossSkill2_008"}],BossSkill2_TrackRange_008:[function(e,t,o){"use strict";cc._RF.push(t,"1117bSpAGlOk4mzdc+BYoch","BossSkill2_TrackRange_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=e("../../enemyBullet/boss2/EnemyBullet_TrackRange_008"),u=e("./BaseBossSkill2_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletNode=null,t}return i(t,e),t.prototype.onSetDefaultAniData=function(){var e=this.enemyTs.getAniNameByState(s.EnemyAniState.Walk),t=this.enemyTs.getAniNameByState(s.EnemyAniState.Skill_SF);this.aniData=[{index:0,name:e,duration:1,isLoop:!0},{index:1,name:t,duration:1,isLoop:!1},{index:2,name:t,duration:4.5,isLoop:!0},{index:5,name:e,duration:1,isLoop:!0}]},t.prototype.onStateLogic=function(){},t.prototype.onFire=function(){var e=r.default.getInstance().getNodeNotNull(this.bulletKeyPath);if(null!==e){e.setParent(l.default.GameObjNode),e.setPosition(l.default.PlayerNode.getPosition()),e.zIndex=cc.macro.MIN_ZINDEX+50;var t=this.getAniDurationByAniIndexs([0,1]),o=this.getAniDurationByAniIndexs([2]);e.getComponent(c.default).onInit(this.enemyTs.damagePoint_range,t,o,this.bulletKeyPath),this.bulletNode=e}},a([d],t)}(u.default));o.default=f,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../enemyBullet/boss2/EnemyBullet_TrackRange_008":"EnemyBullet_TrackRange_008","./BaseBossSkill2_008":"BaseBossSkill2_008"}],BossSkill_RangeFall_008:[function(e,t,o){"use strict";cc._RF.push(t,"93d27l9jkRGvLfi8oK00DLq","BossSkill_RangeFall_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/RandomUtils"),s=e("../../../../mag/NodePoolManager"),l=e("../../GamingData_008"),c=e("../../enemyBullet/boss/Bossbullet_RangeFall_008"),u=e("./BaseBossSkill_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onFire_QS=function(e){this.bulletArr=[];for(var t=0;t<this.bulletCount;t++){var o=s.default.getInstance().getNodeNotNull(this.bulletPrefabPath);null!==o&&(o.setParent(l.default.GameObjNode),o.setPosition(this.getBulletInitPos(t)),o.getComponent(c.default).onInit(e,this.enemyTs.damagePoint_range,this.bulletPrefabPath),this.bulletArr.push(o))}},t.prototype.onFire_SF=function(e){this.onFire_QS(e)},t.prototype.getBulletInitPos=function(e){var t;return 0===e?t=l.default.PlayerNode.getPosition():((t=new cc.Vec2).x=l.default.PlayerNode.getPosition().x+r.RandomUtils.getRandomInt(-400,400),t.y=l.default.PlayerNode.getPosition().y+r.RandomUtils.getRandomInt(-400,400)),t},a([d],t)}(u.default));o.default=f,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../GamingData_008":"GamingData_008","../../enemyBullet/boss/Bossbullet_RangeFall_008":"Bossbullet_RangeFall_008","./BaseBossSkill_008":"BaseBossSkill_008"}],BossSkill_RangeLinear_Route_008:[function(e,t,o){"use strict";cc._RF.push(t,"23a83CwlAVOyZfZHxxPSX5S","BossSkill_RangeLinear_Route_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../GamingData_008"),l=e("../../enemyBullet/EnemyBullet_RangeLinear_Route_008"),c=e("./BaseBossSkill_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onFire_QS=function(e){this.bulletArr=[];for(var t=s.default.enemyBulletNode_middle.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.firePos)),o=s.default.PlayerNode.getPosition().sub(t).normalize(),n=this.bulletCount,i=cc.misc.degreesToRadians(15),a=i*(n-1)*-.5,c=0;c<n;c++){var u=r.default.getInstance().getNodeNotNull(this.bulletPrefabPath);if(null!==u){u.setParent(s.default.enemyBulletNode_middle),u.setPosition(t);var p=cc.v2(o).rotate(a+i*c);u.getComponent(l.default).onInit(e,p,this.enemyTs.damagePoint_range,3,this.bulletPrefabPath),this.bulletArr.push(u)}}},t.prototype.onFire_SF=function(e){this.onFire_QS(e)},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../GamingData_008":"GamingData_008","../../enemyBullet/EnemyBullet_RangeLinear_Route_008":"EnemyBullet_RangeLinear_Route_008","./BaseBossSkill_008":"BaseBossSkill_008"}],Boss_LingHuChong_008:[function(e,t,o){"use strict";cc._RF.push(t,"abe26se54dA6qT6hooV0EAU","Boss_LingHuChong_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("../enemyWeapon/boss2/BaseBossSkill2_008"),l=e("./SpineEnemy_008"),c=cc._decorator,u=c.ccclass,p=(c.property,c.inspector),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onPlayDieAni=function(){this.onRenderNodePlayDieAni(0)},t.prototype.onRenderNodePlayDieAni=function(){this.spine.setAnimation(0,"sw",!1)},t.prototype.onEquipSkill=function(){this.skillArr=[];for(var e=[{i:70001,w:100},{i:80001,w:100},{i:90001,w:100},{i:100001,w:100}],t=[[{index:0,name:"dj",duration:.2,isLoop:!1},{index:1,name:"jn-cd1",duration:1.16,isLoop:!1},{index:2,name:"jn-cd2",duration:1,isLoop:!0},{index:4,name:"di-hj",duration:1.66,isLoop:!1},{index:5,name:"xz",duration:1,isLoop:!0}],[{index:0,name:"dj",duration:.5,isLoop:!0},{index:1,name:"jn-bj",duration:1.16,isLoop:!1},{index:5,name:"xz",duration:1,isLoop:!0}],[{index:0,name:"dj",duration:1.33,isLoop:!0},{index:1,name:"jn-yj-1",duration:2,isLoop:!1},{index:2,name:"jn-yj-dj",duration:4.5,isLoop:!0},{index:3,name:"jn-yj-2",duration:1.5,isLoop:!1},{index:5,name:"xz",duration:1,isLoop:!0}],[{index:0,name:"dj",duration:1.33,isLoop:!0},{index:1,name:"jn-yj-1",duration:2,isLoop:!1},{index:2,name:"jn-yj-dj",duration:6,isLoop:!0},{index:3,name:"jn-yj-2",duration:1.5,isLoop:!1},{index:5,name:"xz",duration:1,isLoop:!0}]],o=0;o<e.length;o++){var n=e[o];if(r.EnemySkillConfigMap.has(n.i)){var i=r.EnemySkillConfigMap.get(n.i),a=r.EnemySkillId2TSMap.get(i.weaponClassId);if("function"==typeof a){var l=new a;this.skillArr.push(l),l.onInit(n.w,this.node,this,i),l instanceof s.default&&l.onInitAniData(t[o])}}}this.onChangeUsingSkill()},a([u,p("packages://autoproperty//inspector.js")],t)}(l.default);o.default=d,cc._RF.pop()},{"../Config_008":"Config_008","../enemyWeapon/boss2/BaseBossSkill2_008":"BaseBossSkill2_008","./SpineEnemy_008":"SpineEnemy_008"}],Bossbullet_RangeFall_008:[function(e,t,o){"use strict";cc._RF.push(t,"2d0dcpWFkJK95Wi9v5w2j3z","Bossbullet_RangeFall_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fallInterval=.3,t.circleCollider=null,t.aniArr=[],t}return i(t,e),t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.on(s.default.e_OnBulletAwake,this.onAwake,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.off(s.default.e_OnBulletAwake,this.onAwake,this)},t.prototype.onInit=function(e,t,o){this.isAlive=!0,this.power=t,this.bulletPrefabPath=o,this.timer=-e,this.index=0,this.gamePauseState=l.default.isGamePause;for(var n=0;n<this.aniArr.length;n++)this.aniArr[n].node.opacity=0;this.circleCollider.enabled=!1},t.prototype.update=function(e){if(this.gamePauseState!==l.default.isGamePause){this.gamePauseState=l.default.isGamePause;for(var t=0;t<this.aniArr.length;t++)this.gamePauseState?this.aniArr[t].pause():this.aniArr[t].resume()}l.default.isGamePause||(this.timer+=e,this.index<this.aniArr.length?this.timer>this.fallInterval*(this.index+1)&&(this.aniArr[this.index].node.opacity=255,this.aniArr[this.index].play(),this.index+=1,this.circleCollider.enabled=!1,this.circleCollider.enabled=!0):this.timer>=this.fallInterval*this.index+1.2&&this.onRecovery())},t.prototype.onAwake=function(){0===this.index&&(this.timer=this.fallInterval)},t.prototype.onRecovery=function(){this.isAlive&&(this.isAlive=!1,this.circleCollider.enabled=!1,r.default.getInstance().recoveryNode(this.bulletPrefabPath,this.node))},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Player&&l.default.onAttackPlayer(!1,this.power,!1)},a([p(cc.Float)],t.prototype,"fallInterval",void 0),a([p(cc.CircleCollider)],t.prototype,"circleCollider",void 0),a([p([cc.Animation])],t.prototype,"aniArr",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],BoxDropItem_008:[function(e,t,o){"use strict";cc._RF.push(t,"21880lJmY1HV4Rzho0IH/HU","BoxDropItem_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../Config_008"),l=e("../DelegateManager_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actNode=null,t.sprite=null,t.openLight=null,t.bgLight=null,t.sf_close=null,t.sf_open=null,t.boxLv=0,t.func_onRecovery=null,t.isInit=!1,t}return i(t,e),t.prototype.onEnable=function(){this.sprite.spriteFrame=this.sf_close,this.openLight.opacity=0,this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node),this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onInit=function(e,t){var o=this;this.boxLv=e,this.func_onRecovery=t,this.isInit=!1,this.bgLight.opacity=0,this.actNode.angle=0,cc.tween(this.actNode).to(.4,{angle:720}).call(function(){o.isInit=!0,o.bgLight.opacity=255,o.bgLight.emit("onShow")}).start(),r.default.getInstance().playSound_intervalLimit(s.default.SEF_Drop_Box,50)},t.prototype.onOpen=function(){var e=this;c.default.isGamePause=!0,window.isCanCtrl=!1,c.default.currOpenBoxLv=this.boxLv,cc.tween(this.sprite.node).to(.2,{scale:.75}).to(.2,{scale:.9}).to(.15,{scale:.65}).to(.15,{scale:.9}).to(.1,{scale:.5}).to(.1,{scale:1}).call(function(){e.sprite.spriteFrame=e.sf_open,e.openLight.opacity=255}).delay(.2).call(function(){l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_GamingBox)}).delay(1).call(this.onRecovery,this).start()},t.prototype.update=function(){c.default.isGamePause||this.isInit&&c.default.PlayerNode.getPosition().sub(this.node.getPosition()).magSqr()<1e4&&this.onOpen()},t.prototype.lateUpdate=function(){this.node.opacity=c.default.RenderRect.contains(this.node.getPosition())?255:0},t.prototype.onRecovery=function(){var e;null===(e=this.func_onRecovery)||void 0===e||e.call(this,this)},a([d(cc.Node)],t.prototype,"actNode",void 0),a([d(cc.Sprite)],t.prototype,"sprite",void 0),a([d(cc.Node)],t.prototype,"openLight",void 0),a([d(cc.Node)],t.prototype,"bgLight",void 0),a([d(cc.SpriteFrame)],t.prototype,"sf_close",void 0),a([d(cc.SpriteFrame)],t.prototype,"sf_open",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../GamingData_008":"GamingData_008"}],BtnIcon_Quests_008:[function(e,t,o){"use strict";cc._RF.push(t,"38946Fc2v1EebeXwe98gRz5","BtnIcon_Quests_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delayShow=.25,t.aniNode=null,t}return i(t,e),t.prototype.onEnable=function(){this.onInitAni()},t.prototype.onDisable=function(){this.onStopAni()},t.prototype.onInitAni=function(){var e=this;this.onStopAni(),cc.tween(this.aniNode).delay(this.delayShow).call(function(){cc.tween(e.aniNode).repeatForever(cc.tween().to(.2,{opacity:255,scale:1}).delay(2).to(.01,{opacity:0,scale:3})).start()}).start()},t.prototype.onStopAni=function(){this.aniNode.scale=3,this.aniNode.opacity=0,cc.Tween.stopAllByTarget(this.aniNode)},a([l(cc.Float)],t.prototype,"delayShow",void 0),a([l(cc.Node)],t.prototype,"aniNode",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],ChapterView_008:[function(e,t,o){"use strict";cc._RF.push(t,"2fd7134Gz9JJY5Zqc1VhsMR","ChapterView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../../../mag/VideoManager"),c=e("../../Config_008"),u=e("../../DelegateManager_008"),p=e("../../LC_008"),d=e("../../LocalDataManager_008"),f=e("../../entities/Enums_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=h.inspector,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chapter_title=null,t.chapter_icon=null,t.btn_icon=null,t.btn_startGame=null,t.btn_trial=null,t.guide_touch=null,t.progressNode=null,t.currChapterGrade=0,t.currChapterIndex=0,t.currChapterProgress=0,t.isNeedVideoStartGame=!1,t}return i(t,e),t.prototype.onEnable=function(){this.onHideTouchGuide(),this.btn_icon.on(cc.Node.EventType.TOUCH_END,this.onOepnChapterView,this),this.btn_startGame.on(cc.Node.EventType.TOUCH_END,this.onStartGame,this);for(var e=this.progressNode.getChildByName("state"),t=0;t<e.childrenCount;t++){var o=t;e.children[t].on(cc.Node.EventType.TOUCH_END,this.onChangeProgress.bind(this,o),this)}this.onInitChapterUI(),this.onRefreshTrialBtn(),this.onRefreshStartGameBtnUI(),u.default.onRefreshCurrChapter.addDelegate(this.onChangeChapter,this),u.default.onShowTouchGuide.addDelegate(this.onShowTouchGuide,this),u.default.onHideTouchGuide.addDelegate(this.onHideTouchGuide,this),u.default.onRefreshStartGameBtnUI.addDelegate(this.onRefreshStartGameBtnUI,this),u.default.onQuestGoMainUIView.addDelegate(this.onQuestGo,this)},t.prototype.onDisable=function(){this.btn_icon.off(cc.Node.EventType.TOUCH_END,this.onOepnChapterView,this),this.btn_startGame.off(cc.Node.EventType.TOUCH_END,this.onStartGame,this);for(var e=this.progressNode.getChildByName("state"),t=0;t<e.childrenCount;t++)e.children[t].off(cc.Node.EventType.TOUCH_END);u.default.onRefreshCurrChapter.removeDelegate(this.onChangeChapter,this),u.default.onShowTouchGuide.removeDelegate(this.onShowTouchGuide,this),u.default.onHideTouchGuide.removeDelegate(this.onHideTouchGuide,this),u.default.onRefreshStartGameBtnUI.removeDelegate(this.onRefreshStartGameBtnUI,this),u.default.onQuestGoMainUIView.removeDelegate(this.onQuestGo,this)},t.prototype.onInitChapterUI=function(){var e=d.default.getInstance().getHighestChapterId(this.currChapterGrade);this.currChapterIndex=e,this.currChapterIndex<0&&(this.currChapterIndex=0),this.currChapterIndex>c.ChapterConfig.length-1&&(this.currChapterIndex=c.ChapterConfig.length-1),this.onChangeChapter(this.currChapterIndex)},t.prototype.onOepnChapterView=function(){window.isCanCtrl&&u.default.onShowDia.executeDelegates(c.default.UIPath_Dia_selectChapter,this.currChapterGrade,this.currChapterIndex)},t.prototype.onChangeChapter=function(e){var t=this;this.currChapterIndex=e,s.default.getInstance().getSpriteFrame(c.default.UIPath_Chapter_Title+(e+1)).then(function(e){t.chapter_title.spriteFrame=e}),s.default.getInstance().getSpriteFrame(c.default.UIPath_Chapter_Icon+(e+1)).then(function(e){t.chapter_icon.spriteFrame=e});var o=c.ChapterConfig[this.currChapterGrade][this.currChapterIndex].enemyGeneratorJSONPathArr.length,n=Math.min(d.default.getInstance().getChapterProgress(this.currChapterGrade,this.currChapterIndex),o-1);this.onRefreshChapterProgressUI(o,n),this.currChapterProgress=n},t.prototype.onRefreshChapterProgressUI=function(e,t){for(var o=this.progressNode.getChildByName("bg"),n=this.progressNode.getChildByName("state"),i=this.progressNode.getChildByName("lock"),a=0;a<o.childrenCount;a++)o.children[a].opacity=e-1===a?255:0;for(a=0;a<n.childrenCount;a++)n.children[a].x=141*(e-1)*-.5+141*a,n.children[a].opacity=a<=t?t===a?255:128:0;for(a=0;a<i.childrenCount;a++)i.children[a].x=141*(e-1)*-.5+141*a,i.children[a].opacity=a<=t?0:a<e?255:0},t.prototype.onChangeProgress=function(e){var t=c.ChapterConfig[this.currChapterGrade][this.currChapterIndex].enemyGeneratorJSONPathArr.length,o=Math.min(d.default.getInstance().getChapterProgress(this.currChapterGrade,this.currChapterIndex),t-1);if(e<=o){r.default.getInstance().click(),this.currChapterProgress=e;for(var n=this.progressNode.getChildByName("state"),i=0;i<n.childrenCount;i++)n.children[i].x=141*(t-1)*-.5+141*i,n.children[i].opacity=i<=o?e===i?255:128:0}},t.prototype.onRefreshStartGameBtnUI=function(){var e=d.default.getInstance().getEnergyCount(),t=this.btn_startGame.getChildByName("Background"),o=t.getChildByName("energy"),n=t.getChildByName("video");e>=5?(o.opacity=255,n.opacity=0,this.isNeedVideoStartGame=!1):(o.opacity=0,n.opacity=255,this.isNeedVideoStartGame=!0)},t.prototype.onRefreshTrialBtn=function(){this.btn_trial.active=d.default.getInstance().getHighestChapterId(0)>0},t.prototype.onStartGame=function(){var e=this;if(window.isCanCtrl){r.default.getInstance().click();var t=function(){p.default.ins.onStartGame(e.currChapterGrade,e.currChapterIndex,e.currChapterProgress)};if(this.isNeedVideoStartGame){l.default.getInstance().showVideo(t);var o=Math.min(c.default.MaxEnemyCount,d.default.getInstance().getEnergyCount()+25);d.default.getInstance().playerData.item_addCountById(f.ItemType_008.c_energy,o-d.default.getInstance().getEnergyCount()),u.default.onShowUIFloatText.executeDelegates("\u4f53\u529b+25"),u.default.onRefreshEnergyBar.executeDelegates(d.default.getInstance().getEnergyCount()),d.default.getInstance().onSaveData()}else window.isCanCtrl=!1,u.default.onShowUIFloatEnergyReduce.executeDelegates(5,this.btn_startGame.convertToWorldSpaceAR(cc.v2(0,0))),d.default.getInstance().tryUseEnergy(5),u.default.onRefreshEnergyBar.executeDelegates(d.default.getInstance().getEnergyCount()),d.default.getInstance().onSaveData(),this.scheduleOnce(function(){window.isCanCtrl=!0,t()},1)}},t.prototype.onShowTouchGuide=function(){this.guide_touch.opacity=255},t.prototype.onHideTouchGuide=function(){this.guide_touch.opacity=0},t.prototype.onQuestGo=function(e){e===f.MainUIViewId_008.Chapter&&this.onShowTouchGuide()},a([y(cc.Sprite)],t.prototype,"chapter_title",void 0),a([y(cc.Sprite)],t.prototype,"chapter_icon",void 0),a([y(cc.Node)],t.prototype,"btn_icon",void 0),a([y(cc.Node)],t.prototype,"btn_startGame",void 0),a([y(cc.Node)],t.prototype,"btn_trial",void 0),a([y(cc.Node)],t.prototype,"guide_touch",void 0),a([y(cc.Node)],t.prototype,"progressNode",void 0),a([_,g("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LC_008":"LC_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008"}],Cheat_008:[function(e,t,o){"use strict";cc._RF.push(t,"e7094RUoZNLWaGDcQf1Gwv8","Cheat_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../DropItemMag_008"),s=e("../EffectMag_008"),l=e("../EnemyManager_008"),c=e("../GamingData_008"),u=e("../LocalDataManager_008"),p=e("../playerWeapon/BasePlayerWeapon_008"),d=e("../entities/Enums_008"),f=e("../DelegateManager_008"),h=e("../Config_008"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){cc.sys.isBrowser&&(cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),console.log("F1 +30\u79d2"),console.log("F2 +60\u79d2"),console.log("F3 +120\u79d2"),console.log("F5  \u78c1\u94c1"),console.log("F6 \u6838\u5f39"),console.log("F7 \u70e7\u9e21"),console.log("F8 \u73a9\u5bb6-99"),console.log("F9 \u5f00\u5173 \u73a9\u5bb6\u6700\u5927\u8840\u91cf *1000"),console.log("F10 \u653b\u51fb\u529b+999"),console.log("F11 \u653b\u51fb\u529b-999"),console.log("a \u73a9\u5bb6+\u4e00\u628a\u5200"),console.log("\u7a7a\u683c \u73a9\u5bb6\u5347\u4e00\u7ea7(\u5c40\u5185)"),console.log("f +30\u70bc\u4e39\u6b21\u6570\uff08\u4e0d\u5237\u65b0ui\u663e\u793a\uff09"),console.log("\u5c0f\u952e\u76d8123 \u5206\u522b\u5bf9\u5e94\u8f6c\u76d8\u30101\uff0c3\uff0c5\u3011\u4e2a\u5956\u52b1"))},t.prototype.onDisable=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onKeyUp=function(e){if(e.keyCode==cc.macro.KEY.space)c.default.currUpgradeNeedExp-c.default.currExp>0&&c.default.onIncreaseExp(c.default.currUpgradeNeedExp-c.default.currExp);else if(e.keyCode==cc.macro.KEY.f1)l.default.ins.onCheat_jumpTime(30);else if(e.keyCode==cc.macro.KEY.f2)l.default.ins.onCheat_jumpTime(60);else if(e.keyCode==cc.macro.KEY.f3)l.default.ins.onCheat_jumpTime(120);else if(e.keyCode==cc.macro.KEY.f5)r.default.ins.onMagnet();else if(e.keyCode==cc.macro.KEY.f6)s.default.ins.onPlayNuclearBombAni(c.default.PlayerNode.getPosition());else if(e.keyCode==cc.macro.KEY.f7)c.default.onEatChichen();else if(e.keyCode==cc.macro.KEY.f8)c.default.onAttackPlayer(!0,99,!0);else if(e.keyCode==cc.macro.KEY.f9)c.default.PlayerGamingInfo.maxHp/c.default.PlayerGamingInfo.base_maxHp<50?(c.default.PlayerGamingInfo.maxHp*=1e3,console.log("\u73a9\u5bb6\u6700\u5927\u8840\u91cf *1000")):(c.default.PlayerGamingInfo.maxHp/=1e3,console.log("\u73a9\u5bb6\u6700\u5927\u8840\u91cf /1000"));else if(e.keyCode===cc.macro.KEY.f10){c.default.PlayerGamingInfo.damagePoint+=999;for(var t=c.default.PlayerNode.getComponents(p.default),o=0;o<t.length;o++)t[o].onResetData()}else if(e.keyCode===cc.macro.KEY.f11){if(c.default.PlayerGamingInfo.damagePoint>1e3)for(c.default.PlayerGamingInfo.damagePoint-=999,t=c.default.PlayerNode.getComponents(p.default),o=0;o<t.length;o++)t[o].onResetData()}else if(e.keyCode==cc.macro.KEY.a)f.default.onRotatingKnifePickUpKnife.executeDelegates();else if(e.keyCode==cc.macro.KEY.f)u.default.getInstance().playerData.item_addCountById(d.ItemType_008.c_boxKey,30),u.default.getInstance().onSaveData();else if(e.keyCode===cc.macro.KEY.num1){if(c.default.isGamePause)return;c.default.isGamePause=!0,window.isCanCtrl=!1,c.default.currOpenBoxLv=1,f.default.onShowDia.executeDelegates(h.default.UIPath_Dia_GamingBox)}else if(e.keyCode===cc.macro.KEY.num2){if(c.default.isGamePause)return;c.default.isGamePause=!0,window.isCanCtrl=!1,c.default.currOpenBoxLv=2,f.default.onShowDia.executeDelegates(h.default.UIPath_Dia_GamingBox)}else if(e.keyCode===cc.macro.KEY.num3){if(c.default.isGamePause)return;c.default.isGamePause=!0,window.isCanCtrl=!1,c.default.currOpenBoxLv=3,f.default.onShowDia.executeDelegates(h.default.UIPath_Dia_GamingBox)}},a([y],t)}(cc.Component));o.default=g,cc._RF.pop()},{"../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../DropItemMag_008":"DropItemMag_008","../EffectMag_008":"EffectMag_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../LocalDataManager_008":"LocalDataManager_008","../entities/Enums_008":"Enums_008","../playerWeapon/BasePlayerWeapon_008":"BasePlayerWeapon_008"}],CoinShowNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"07b8erfeu1BfJAyvw0zicjR","CoinShowNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.sfArr=[],t}return i(t,e),t.prototype.onEnable=function(){this.node.on(r.default.e_RefreshCoinSF,this.onRefresh,this)},t.prototype.onDisable=function(){this.node.off(r.default.e_RefreshCoinSF,this.onRefresh,this)},t.prototype.onRefresh=function(e){this.sprite.spriteFrame=this.sfArr[e-r.DropItemType.Coin_1]},a([c(cc.Sprite)],t.prototype,"sprite",void 0),a([c([cc.SpriteFrame])],t.prototype,"sfArr",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Config_008":"Config_008"}],CompanyUI:[function(e,t,o){"use strict";cc._RF.push(t,"c2c4fvrVgJKZKaCjWI/5zVU","CompanyUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_1=null,t.btn_2=null,t.btn_3=null,t.btn_4=null,t.node_icon=null,t.m_clickState=0,t}return i(t,e),t.prototype.onLoad=function(){this.btn_1=this.node.getChildByName("btn_1"),this.btn_2=this.node.getChildByName("btn_2"),this.btn_3=this.node.getChildByName("btn_3"),this.btn_4=this.node.getChildByName("btn_4"),this.node_icon=this.node.getChildByName("node_icon")},t.prototype.start=function(){var e=this;this.btn_1.on(cc.Node.EventType.TOUCH_END,function(){e.onClickBtn(e.btn_1)},this),this.btn_2.on(cc.Node.EventType.TOUCH_END,function(){e.onClickBtn(e.btn_2)},this),this.btn_3.on(cc.Node.EventType.TOUCH_END,function(){e.onClickBtn(e.btn_3)},this),this.btn_4.on(cc.Node.EventType.TOUCH_END,function(){e.onClickBtn(e.btn_4)},this)},t.prototype.onEnable=function(){this.node_icon.opacity=0,this.btn_1.scaleX=1,this.btn_2.scaleX=1,this.btn_3.scaleX=1,this.btn_4.scaleX=1,this.m_clickState=0},t.prototype.onClickBtn=function(e){e.scaleX=0,this.m_clickState++,4==this.m_clickState&&(this.node_icon.opacity=255)},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],Config_008:[function(e,t,o){"use strict";cc._RF.push(t,"ba20fsc/XZMZ4EPky8rOtBK","Config_008"),Object.defineProperty(o,"__esModule",{value:!0}),o.TrialLevel2ZhangLing=o.PlayerLevelInfoConfigMap=o.ChapterConfig=o.EnemyAniState=o.PlayerWeaponId2TsMap=o.EnemySkillId2TSMap=o.EnemyBulletId2PrefabPathMap=o.EnemySkillConfigMap=o.DropItemConfigMap=o.DropItemType=o.DropItemGroupConfigMap=o.EnemyConfigMap=o.EnemyPrefabDataConfigMap=o.UnlockModuleDataMap=o.UnlockSkillDataMap=o.SkillConfigMap=o.GamingExpConfig_008=o.NormalExpConfig_008=o.WeaponType_008=o.CommonSkillType_008=void 0;var n,i,a=e("./enemyWeapon/EnemySkill_Charge_008"),r=e("./enemyWeapon/EnemySkill_Charge_Lite_008"),s=e("./enemyWeapon/EnemySkill_Explosion_008"),l=e("./enemyWeapon/EnemySkill_MoveSpeedBoost_008"),c=e("./enemyWeapon/EnemySkill_RangeFall_008"),u=e("./enemyWeapon/EnemySkill_RangeLinear_008"),p=e("./enemyWeapon/EnemySkill_RotatingKnife_008"),d=e("./enemyWeapon/boss/BossSkill_RangeFall_008"),f=e("./enemyWeapon/boss/BossSkill_RangeLinear_Route_008"),h=e("./quests/QuestsSys_008"),_=e("./playerWeapon/PlayerWeapon_TenThousandSnakes_008"),y=e("./playerWeapon/PlayerWeapon_JinLong_008"),g=e("./playerWeapon/PlayerWeapon_Lightning_008"),m=e("./playerWeapon/PlayerWeapon_LionRoar_008"),v=e("./playerWeapon/PlayerWeapon_Long_008"),b=e("./playerWeapon/PlayerWeapon_RotatingKnife_008"),P=e("./playerWeapon/PlayerWeapon_SixPulseHolySword_008"),S=e("./playerWeapon/PlayerWeapon_SummonSword_008"),w=e("./playerWeapon/super/PlayerWeapon_Super_SixPulseHolySword_008"),R=e("./playerWeapon/super/PlayerWeapon_Super_RotatingKnife_008"),I=e("./playerWeapon/super/PlayerWeapon_Super_LionRoar_008"),D=e("./playerWeapon/PlayerWeapon_SwordFormation2_008"),C=e("./playerWeapon/PlayerWeapon_Frostbolt_008"),N=e("./playerWeapon/super/PlayerWeapon_Super_Frostbolt_008"),O=e("./playerWeapon/super/PlayerWeapon_Super_Lightning_008"),B=e("./playerWeapon/super/PlayerWeapon_Super_SummonSword_008"),A=e("./playerWeapon/super/PlayerWeapon_Super_FKnife_008"),E=e("./playerWeapon/PlayerWeapon_Phoenix_008"),T=e("./playerWeapon/super/PlayerWeapon_Super_Phoenix_008"),x=e("./playerWeapon/PlayerWeapon_FlowersUAV_008"),M=e("./playerWeapon/super/PlayerWeapon_Super_FlowersUAV_008"),k=e("./enemyWeapon/boss2/BossSkill2_RangeAttack_008"),F=e("./enemyWeapon/boss2/BossSkill2_RangeLinear_008"),j=e("./enemyWeapon/boss2/BossSkill2_RangeAttack2_008"),U=e("./enemyWeapon/boss2/BossSkill2_TrackRange_008"),G=e("./playerWeapon/PlayerWeapon_RollingLightning_008"),L=e("./playerWeapon/super/PlayerWeapon_Super_RollingLightning_008"),V=e("./playerWeapon/PlayerWeapon_FlyingKnife_008"),K=function(){function e(){}return e.getItemIconPath=function(e){return this.Path_IconItem+e},e.getItemIconPath_skill=function(e){return this.Path_IconSkill+e},e.getItemIconPath_box=function(e){return this.Path_IconBox+e},e.getEnemyPrefabData=function(e){return o.EnemyPrefabDataConfigMap.has(e)?o.EnemyPrefabDataConfigMap.get(e):o.EnemyPrefabDataConfigMap.get(0)},e.LOCALDATA_KEY="008_RotaingWeaponData",e.MaxEnergyRecoveryCount=30,e.EnergyRecoveryTime=300,e.DropItemActionDisSqr=2e3,e.DropItemFlyingSpeed=1200,e.DropItemFlyingSpeed_Magnet=3200,e.MaxEnemyCount=400,e.MaxDropItemCount=800,e.MaxFloatTextCount=200,e.CameraOrthoSize=1400,e.KnifeSparkEffectOffset=cc.v2(300,0),e.AutoResetPotPosInterval=5,e.AudoResetPotPosDisThreshold=625e4,e.EnemyMeleeAttackDis=8100,e.AutoResetEnemyPosInterval=5,e.AudoResetEnemyPosDisThreshold=1024e4,e.EnemyContactDamageCoolDown=.2,e.MagnetItemDuration=2.5,e.KnockbackEnemySpeed=400,e.EnemyDieKnockbackDis=150,e.EliteEnemyRageMoveSpeed=350,e.GroupEnemyMoveSpeed=800,e.EnemyMoveSpeedBuffRate=2,e.STR_NodeGroup_Player="player",e.STR_NodeGroup_Enemy="enemy",e.STR_NodeGroup_PlayerBullet="playerBullet",e.STR_NodeGroup_EnemyBullet="enemyBullet",e.STR_NodeGroup_Pot="pot",e.e_RefreshExpstoneSF="e_RefreshExpstoneSF",e.e_RefreshCoinSF="e_RefreshCoinSF",e.e_ShowPlayerInfoChangeTips="e_ShowPlayerInfoChangeTips",e.e_OnEnemyAttacked="e_OnEnemyAttacked",e.e_OnEnemyAttacked_NuclearBomb="e_OnEnemyAttacked_NuclearBomb",e.e_OnBulletAwake="e_OnBulletAwake",e.e_OnExitBattleRoundRecoveryGameObjNode="e_OnExitBattleRoundRecoveryGameObjNode",e.e_OnTryAddBuffToEnemy="e_OnTryAddBuffToEnemy",e.e_OnChangeEnemyKnifeColliderNodeState="e_OnChangeEnemyKnifeColliderNodeState",e.e_OnOpenPot="e_OnOpenPot",e.AniName_Enemy_Walk="ani_walk",e.Key_DropItem="008_Key_DropItem",e.Key_Box="008_Key_Box",e.Key_FloatText="008_Key_FloatText",e.Key_HpBar="008_Key_HpBar",e.Key_BossHpBar="008_Key_BossHpBar",e.Key_EF_Spark="008_Key_EF_Spark",e.Key_EF_NuclearBomb="008_Key_EF_NuclearBomb",e.Key_EF_EnemyDie="008_Key_EF_EnemyDie",e.Key_EF_NuclearBomb_Z="008_Key_EF_NuclearBomb_Z",e.Key_FlyingKnife="008_Key_FlyingKnife",e.Key_EF_PickUpWeapon="008_Key_EF_PickUpWeapon",e.Key_EF_RunRoute="008_Key_EF_RunRoute",e.Key_EF_EnemyDia="008_Key_EF_EnemyDia",e.Key_EF_BossInitPos="008_Key_BossInitPos",e.Key_Pot="008_Key_Pot",e.Key_Fence="008_Key_Fence",e.Path_IconSkill="lv_008/sf/icon_skill/",e.Path_IconBox="lv_008/sf/icon_skill/",e.Path_DropItem="lv_008/dropItem_1",e.Path_Box="lv_008/dropItem/box",e.Path_FloatText="lv_008/floatText",e.Path_HpBar="lv_008/hpBar",e.Path_BossHpBar="lv_008/bossHpBar",e.Path_EF_Spark="lv_008/ef/ef_spark",e.Path_EF_NuclearBomb="lv_008/ef/ef_nuclearBomb",e.Path_EF_NuclearBomb_Z="lv_008/ef/ef_nuclearBomb_z",e.Path_EF_EnemyDie="lv_008/ef/ef_enemyDie",e.Path_FlyingKnife="lv_008/flyingBullet/flyingKnife",e.Path_EF_PickUpWeapon="lv_008/ef/ef_pickUpWeapon",e.Path_EF_RunRoute="lv_008/ef/ef_runRoute",e.Path_EF_EnemyDia="lv_008/ef/ef_enemyDia",e.Path_EF_BossInitPos="lv_008/ef/ef_bossInitPos",e.Path_Pot="lv_008/misc/pot",e.Path_Fence="lv_008/misc/fence",e.Path_TeleportBlue="lv_008/ef/ef_teleport_blue",e.Key_EnemyKnifeColliderNode="008_Key_EnemyKnifeColliderNode",e.Path_EnemyKnifeColliderNode="lv_008/enemyBullet/eb_knifeColliderNode_101",e.Key_Knife_1="008_Key_Knife_1",e.Path_Knife_1="lv_008/playerBullet/knife_001",e.Key_Super_Knife="008_Key_Super_Knife",e.Path_Super_Knife="lv_008/playerBullet/super/super_knife",e.Key_Super_Knife_Flying="008_Key_Super_Knife_Flying",e.Path_Super_Knife_Flying="lv_008/playerBullet/super/super_knife_flying",e.Key_Lightning="008_Key_Lightning",e.Path_Lightning="lv_008/playerBullet/lightning",e.Key_Super_Lightning="008_Key_Super_Lightning",e.Path_Super_Lightning="lv_008/playerBullet/super/super_lightning",e.Key_Super_Lightning_Small="008_Key_Super_Lightning_Small",e.Path_Super_Lightning_Small="lv_008/playerBullet/super/super_lightning_small",e.Key_SixPulseHolySword="008_Key_SixPulseHolySword",e.Path_SixPulseHolySword="lv_008/playerBullet/six-pulseHolySword",e.Key_Super_SixPulseHolySword="008_Key_Super_SixPulseHolySword",e.Path_Super_SixPulseHolySword="lv_008/playerBullet/super/super_six-pulseHolySword",e.Key_SummonSword="008_Key_SummonSword",e.Path_SummonSword="lv_008/playerBullet/summon_sword_001",e.Key_Super_SummonSword="008_Key_SSSword",e.Path_Super_SummonSword="lv_008/playerBullet/super/super_summon_sword",e.Key_Long="008_Key_Long",e.Path_Long="lv_008/playerBullet/Long",e.Key_JinLong="008_Key_JinLong",e.Path_JinLong="lv_008/playerBullet/JinLong",e.Key_TenThousandSnakes="008_Key_TenThousandSnakes",e.Path_TenThousandSnakes="lv_008/playerBullet/tenThousandSnakes",e.Key_LionRoar="008_Key_LionRoar",e.Path_LionRoar="lv_008/playerBullet/lionRoar",e.Key_Super_LionRoar="008_Key_Super_LionRoar",e.Path_Super_LionRoar="lv_008/playerBullet/super/super_lionRoar",e.Key_Super_LionRoar_Small="008_Key_Super_LionRoar_Small",e.Path_Super_LionRoar_Small="lv_008/playerBullet/super/super_lionRoar_small",e.Key_SwordFormation_Sword="008_Key_SwordFormation_Sword",e.Path_SwordFormation_Sword="lv_008/playerBullet/swordFormation_sword",e.Key_SwordFormation_Bg="008_Key_SwordFormation_Bg",e.Path_SwordFormation_Bg="lv_008/playerBullet/swordFormation_bg",e.Key_SwordFormation_Bg2="008_Key_SwordFormation_Bg2",e.Path_SwordFormation_Bg2="lv_008/playerBullet/swordFormation_bg2",e.Key_Frostbolt="008_Key_Frostbolt",e.Path_Frostbolt="lv_008/playerBullet/frostbolt",e.Key_Super_Frostbolt="008_Key_Super_Frostbolt",e.Path_Super_Frostbolt="lv_008/playerBullet/super/super_frostbolt",e.Key_Super_Frostbolt_Small="008_Key_Super_Frostbolt_Small",e.Path_Super_Frostbolt_Small="lv_008/playerBullet/super/super_frostbolt_small",e.KeyPath_HitEF_Super_Frostbolt="lv_008/ef/ef_super_frostbolt_hit",e.KeyPath_EF_Super_Frostbolt_Fire="lv_008/ef/ef_super_frostbolt_fire",e.Key_Normal_FlyingKnife="008_Key_NormalFlyingKnife",e.Path_Normal_FlyingKnife="lv_008/playerBullet/normal_flying_knife",e.Key_SFKnife="008_Key_SFKnife",e.Path_SFKnife="lv_008/playerBullet/super/super_flying_knife",e.Key_EF_SFKnife_Pre="008_Key_EF_SFKnife_Pre",e.Path_EF_SFKnife_Pre="lv_008/ef/ef_super_flying_knife_pre",e.Key_RollingLightning="008_Key_RollingLightning",e.Path_RollingLightning="lv_008/playerBullet/rolling_lightning",e.Key_Super_RollingLightning="008_Key_Super_RollingLightning",e.Path_Super_RollingLightning="lv_008/playerBullet/super/super_rolling_lightning",e.Key_EF_RollingLightning_Pre="008_Key_EF_RollingLightning_Pre",e.Path_EF_RollingLightning_Pre="lv_008/ef/ef_rolling_lightning_pre",e.KeyPath_Phoenix="lv_008/playerBullet/phoenix",e.KeyPath_Super_Phoenix="lv_008/playerBullet/super/super_phoenix",e.KeyPath_Super_Phoenix_ground="lv_008/playerBullet/super/super_phoenix_ground",e.KeyPath_FlowersUAV_Small="lv_008/playerBullet/flowersUAV_small",e.Key_EnemyBuff_MoveSpeedBoost="lv_008/ef/enemyBuff/ef_moveSpeedUp",e.Key_EnemyBuff_Stun="lv_008/ef/enemyBuff/ef_stun",e.Key_EnemyBuff_DamagePointUp="lv_008/ef/enemyBuff/ef_damagePointUp",e.Key_EnemyBuff_MoveSpeedSlow="lv_008/ef/enemyBuff/ef_slow",e.Key_EnemyBuff_Burn="lv_008/ef/enemyBuff/ef_burn",e.Key_TouchEffect="008_Key_TouchEffect",e.Path_TouchEffect="lv_008/touchEffect",e.Alchemy_AniTime=[1,1.1,1.2,1.4],e.Alchemy_PulletWeightConfig=[30,30,20,10,3,4,5],e.Alchemy_TypeToKeyConfig=["alchemy_maxHp","alchemy_damagePoint","alchemy_armor","alchemy_moveSpeed","alchemy_restoreLife","alchemy_expBonus","alchemy_lucky"],e.Alchemy_PulletQualityValueRange=[[1,3],[5,8],[10,13],[15,20]],e.Alchemy_PulletQualityWeightConfig=[50,30,15,5],e.AlchemyExpReward=[[1,2,2,3],[1,2,2,3,3,1],[1,1,2,2,3,3,4,4],[1,1,2,2,3,3,3,4,4,5,6,6],[1,2,2,3,3,3,4,4,5,6,6,7],[1,2,2,3,3,3,4,4,5,6,6,7]],e.DailyQuestsCount=13,e.UIPath_Dia_Quests="lv_008/ui/dia_quests",e.UIPath_Dia_Rewards="lv_008/ui/dia_rewards",e.QuestsJsonMap=new Map([[h.QuestType.Daily,"lv_008/json/DailyQuestsConfig"]]),e.JsonPath_RewardItemData="lv_008/json/RewardItemConfig",e.Key_RewardItem="008_Key_RewardItem",e.Path_RewardItem="lv_008/rewardItem",e.Path_IconItem="lv_008/sf/icon_item/",e.UIPath_Dia_Trial="lv_008/ui/dia_trial",e.JsonPath_Trial="lv_008/json/TrialConfig",e.UIPath_Dia_Explore="lv_008/ui/dia_explore",e.UIPath_Dia_FoxDate="lv_008/ui/dia_foxDate",e.SEF_SelectSkill="008/008_selectSkill",e.SEF_LevelUp="008/008_levelUp",e.SEF_BOXOPEN="008/008_boxOpen-",e.SEF_EquipNewEquipment="008/008_equipNewEquipment",e.SEF_DiscardNewEquipment="008/008_discardNewEquipment",e.SEF_UnlockNewModule="008/008_unlockNewModule",e.SEF_BOX_OpenUI="008/008_box_openUI",e.SEF_BOX_OpenGamingBOX="008/008_gamingBoxOpen",e.SEF_BOX_Rotating="008/008_box_rotating",e.SEF_BOX_Select="008/008_box_select",e.SEF_WWHit="008/008_WWHit",e.SEF_WEHit="008/008_WEHit5",e.SEF_PickUp="008/008_pickUp",e.SEF_PickUp_Coin="008/008_pickUp_coin",e.SEF_Pot_Destory="008/008_pot_destory",e.SEF_PickUp_Expstone="008/008_pickUp_expStone",e.SEF_PlayerDie="008/008_playerDie",e.SEF_NuclearBomb="008/008_nuclearBomb",e.SEF_RestoreLife="008/008_restoreLife",e.SEF_AlchemyExpDrop="008/008_alchemyExpDrop",e.SEF_PlayerInjured="008/008_playerInjured",e.SEF_Pause="008/008_pause",e.SEF_Magnet="008/008_magnet",e.SEF_EnemyDie="008/008_enemyDie2",e.PlayWeaponRotatingSEFAngle=120,e.SEF_RotatingWeapon="008/008_rotatingWeapon2",e.SEF_Drop_Knife="008/008_drop_knife",e.SEF_Drop_Box="008/008_drop_box",e.SEF_KnifeFlying="008/008_knifeFlying",e.SEF_ResultView="008/008_resultView",e.SEF_Lightning="008/008_lightning",e.SEF_SixPulseHolySword="008/008_sixPulseHolySword2",e.SEF_SixPulseHolySword_Hit="008/008_sixPulseHolySword_hit",e.SEF_SummonSword_Attack_1="008/008_summonSword_attack_1",e.SEF_SummonSword_Attack_2="008/008_summonSword_attack_2",e.SEF_SummonSword_Rotate_1="008/008_summonSword_rotate_1",e.SEF_Long_Summon="008/008_Long_summon",e.SEF_Long_Hit="008/008_Long_hit",e.SEF_LionRoar="008/008_lionRoar",e.SEF_SwordFormation="008/008_swordFormation",e.Color_PlayerInjured=cc.color(255,71,71),e.Str_NuclearBombPower="999999999",e.Num_NuclearBombPower=999999999,e.Color_NuclearBomb=cc.color(229,255,71),e.Equipment_BgPath="lv_008/sf/equipment/bg/k",e.Equipment_IconPath=["lv_008/sf/equipment/weapon/wuqi","lv_008/sf/equipment/top/shangyi","lv_008/sf/equipment/pants/xiazhuang","lv_008/sf/equipment/ring/jiezhi","lv_008/sf/equipment/pendant/yupei","lv_008/sf/equipment/shoes/xiezi"],e.UIPath_Dia_getEquipment="lv_008/ui/dia_getEquipment",e.UIPath_Dia_infoDetail="lv_008/ui/dia_infoDetail",e.UIPath_Dia_selectChapter="lv_008/ui/dia_selectChapter",e.UIPath_Dia_unlockNewModule="lv_008/ui/dia_unlockNewModule",e.UIPath_Dia_Guide="lv_008/ui/dia_guide",e.UIPath_Dia_DailyGift="lv_008/ui/dia_dailyGift",e.UIPath_Dia_newSkill="lv_008/ui/dia_newSkill",e.UIPath_Dia_unlockNewSkill="lv_008/ui/dia_unlockNewSkill",e.UIPath_Dia_XiuXian="lv_008/ui/dia_XiuXian",e.UIPath_Dia_VideoBox="lv_008/ui/dia_videoBox",e.UIPath_Dia_Revive="lv_008/ui/dia_revive",e.UIPath_Dia_GamingBox="lv_008/ui/dia_openGamingBox2",e.UIPath_Dia_Setting="lv_008/ui/dia_setting",e.UIPath_View_ShiFang="lv_008/ui/view/ShiFangView",e.UIPath_Dia_GongFaDetail="lv_008/ui/dia_GongFaDetail",e.UIPath_GamingUI="lv_008/ui/view/GamingUI_008",e.UIPath_Chapter_Icon="lv_008/sf/chapter/icon/icon_map",e.UIPath_Chapter_Title="lv_008/sf/chapter/title/zi-",e.UIPath_NewSkill_Title="lv_008/sf/unlockNewSkill/title/",e.UIPath_FloatKey="lv_008/float_key",e.UIPath_XiuXian_SmokeNormal="lv_008/ef/ui/ef_smoke_normal",e.UIPath_Btn_LionRoar="lv_008/ui/btn/btn_lionRoar",e.UIPath_Btn_SwordFormation="lv_008/ui/btn/btn_swordFormation",e.KeyPath_VideoItem_Chichen="lv_008/misc/videoItem_chichen",e.KeyPathMap_VideoItem_Weapon=new Map([[301,"lv_008/misc/videoItem_weapon_301"],[304,"lv_008/misc/videoItem_weapon_304"]]),e.JsonPath_XiuXianData="lv_008/json/XiuXianConfig",e.isOpeningBox=!1,e}();o.default=K,function(e){e[e.MoveSpeedBonus=101]="MoveSpeedBonus",e[e.CoolDownTimeBonus=102]="CoolDownTimeBonus",e[e.MagnetRangeBonus=103]="MagnetRangeBonus",e[e.ExpBonus=104]="ExpBonus",e[e.Lucky=105]="Lucky",e[e.MaxHpBonus=106]="MaxHpBonus",e[e.RestoreLife=107]="RestoreLife"}(o.CommonSkillType_008||(o.CommonSkillType_008={})),function(e){e[e.RotatingKnife=201]="RotatingKnife",e[e.Lightning=202]="Lightning",e[e.SixPulseHolySword=203]="SixPulseHolySword",e[e.SummonSword=204]="SummonSword",e[e.Long=205]="Long",e[e.JinLong=206]="JinLong",e[e.TenThousandSnakes=207]="TenThousandSnakes",e[e.LionRoar=208]="LionRoar",e[e.SwordFormation=209]="SwordFormation",e[e.Frostbolt=210]="Frostbolt",e[e.FKnife=211]="FKnife",e[e.Phoenix=212]="Phoenix",e[e.FlowersUAV=213]="FlowersUAV",e[e.RollingLightning=214]="RollingLightning",e[e.Super_RotatingKnife=301]="Super_RotatingKnife",e[e.Super_Lightning=302]="Super_Lightning",e[e.Super_SummonSword=304]="Super_SummonSword",e[e.Super_SixPulseHolySword=303]="Super_SixPulseHolySword",e[e.Super_LionRoar=308]="Super_LionRoar",e[e.Super_Frostbolt=310]="Super_Frostbolt",e[e.Super_FKnife=311]="Super_FKnife",e[e.Super_Phoenix=312]="Super_Phoenix",e[e.Super_FlowersUAV=313]="Super_FlowersUAV",e[e.Super_RollingLightning=314]="Super_RollingLightning"}(n=o.WeaponType_008||(o.WeaponType_008={})),o.NormalExpConfig_008=[0,24,32,48,72,104,144,192,248,312,384,464,552,648,752,864,984,1112,1248,1392,1544,1704,1872,2048,2232,2424,2624,2832,3048,3272,3504,3744,3992,4248,4512,4784,5064,5352,5648,5952,6264,6584,6912,7248,7592,7944,8304,8672,9048,9432,9824,10224,10632,11048,11472,11904,12344,12792,13248,13712,14184,14664,15152,15648,16152,16664,17184,17712,18248,18792,19344,19904,20472,21048,21632,22224,22824,23432,24048,24672,25304,25944,26592,27248,27912,28584,29264,29952,30648,31352,32064,32784,33512,34248,34992,35744,36504,37272,38048],o.GamingExpConfig_008=[0,100,240,480,720,960,1200,1440,1680,1920,2160,2400,2640,2880,3120,3360,3600,3840,4080,4320,4560,4800,5040,5280,5520,5760,6e3,6240,6480,9180],o.SkillConfigMap=new Map([[101,{skillId:101,skillName:"\u51cc\u6ce2\u5fae\u6b65",quality:1,skillDescArr:["\u89d2\u8272\u79fb\u52a8\u901f\u5ea6+10%","\u89d2\u8272\u79fb\u52a8\u901f\u5ea6+20%","\u89d2\u8272\u79fb\u52a8\u901f\u5ea6+30%","\u89d2\u8272\u79fb\u52a8\u901f\u5ea6+40%","\u89d2\u8272\u79fb\u52a8\u901f\u5ea6+50%"],powerRatio:1,powerArr:[.1,.2,.3,.4,.5],countArr:[],coolDownTimeArr:[],scaleArr:[],cirtProb:[],cirtPowerBonus:[]}],[102,{skillId:102,skillName:"\u5de6\u53f3\u5f00\u5f13",quality:1,skillDescArr:["\u6b66\u5668\u51b7\u5374\u65f6\u95f4-10%","\u6b66\u5668\u51b7\u5374\u65f6\u95f4-20%","\u6b66\u5668\u51b7\u5374\u65f6\u95f4-30%","\u6b66\u5668\u51b7\u5374\u65f6\u95f4-40%","\u6b66\u5668\u51b7\u5374\u65f6\u95f4-50%"],powerRatio:1,powerArr:[.1,.2,.3,.4,.5],countArr:[],coolDownTimeArr:[],scaleArr:[],cirtProb:[],cirtPowerBonus:[]}],[103,{skillId:103,skillName:"\u5b9d\u846b\u82a6",quality:1,skillDescArr:["\u89d2\u8272\u5438\u9644\u8303\u56f4+50%","\u89d2\u8272\u5438\u9644\u8303\u56f4+100%","\u89d2\u8272\u5438\u9644\u8303\u56f4+150%","\u89d2\u8272\u5438\u9644\u8303\u56f4+200%","\u89d2\u8272\u5438\u9644\u8303\u56f4+250%"],powerRatio:1,powerArr:[.5,1,1.5,2,2.5],countArr:[],coolDownTimeArr:[],scaleArr:[],cirtProb:[],cirtPowerBonus:[]}],[104,{skillId:104,skillName:"\u4e7e\u5764\u5927\u632a\u79fb",quality:1,skillDescArr:["\u89d2\u8272\u7ecf\u9a8c\u83b7\u53d6+10%","\u89d2\u8272\u7ecf\u9a8c\u83b7\u53d6+20%","\u89d2\u8272\u7ecf\u9a8c\u83b7\u53d6+30%","\u89d2\u8272\u7ecf\u9a8c\u83b7\u53d6+40%","\u89d2\u8272\u7ecf\u9a8c\u83b7\u53d6+50%"],powerRatio:1,powerArr:[.1,.2,.3,.4,.5],countArr:[],coolDownTimeArr:[],scaleArr:[],cirtProb:[],cirtPowerBonus:[]}],[105,{skillId:105,skillName:"\u516b\u5366\u76d8",quality:1,skillDescArr:["\u589e\u52a0\u89d2\u8272\u5e78\u8fd0\u503c","\u589e\u52a0\u89d2\u8272\u5e78\u8fd0\u503c","\u589e\u52a0\u89d2\u8272\u5e78\u8fd0\u503c","\u589e\u52a0\u89d2\u8272\u5e78\u8fd0\u503c","\u589e\u52a0\u89d2\u8272\u5e78\u8fd0\u503c"],powerRatio:1,powerArr:[1,2,3,4,5],countArr:[],coolDownTimeArr:[],scaleArr:[],cirtProb:[],cirtPowerBonus:[]}],[106,{skillId:106,skillName:"\u6613\u7b4b\u7ecf",quality:1,skillDescArr:["\u89d2\u8272\u6700\u5927\u751f\u547d\u503c+40%","\u89d2\u8272\u6700\u5927\u751f\u547d\u503c+80%","\u89d2\u8272\u6700\u5927\u751f\u547d\u503c+120%","\u89d2\u8272\u6700\u5927\u751f\u547d\u503c+160%","\u89d2\u8272\u6700\u5927\u751f\u547d\u503c+200%"],powerRatio:1,powerArr:[.4,.8,1.2,1.6,2],countArr:[],coolDownTimeArr:[],scaleArr:[],cirtProb:[],cirtPowerBonus:[]}],[107,{skillId:107,skillName:"\u5317\u51a5\u795e\u529f",quality:1,skillDescArr:["\u6bcf5\u79d2\u6062\u590d1%\u751f\u547d\u503c","\u6bcf5\u79d2\u6062\u590d2%\u751f\u547d\u503c","\u6bcf5\u79d2\u6062\u590d3%\u751f\u547d\u503c","\u6bcf5\u79d2\u6062\u590d4%\u751f\u547d\u503c","\u6bcf5\u79d2\u6062\u590d5%\u751f\u547d\u503c"],powerRatio:1,powerArr:[.01,.02,.03,.04,.05],countArr:[],coolDownTimeArr:[],scaleArr:[],cirtProb:[],cirtPowerBonus:[]}],[201,{skillId:201,skillName:"\u91d1\u8f6e\u6cd5\u738b",quality:2,skillDescArr:["\u53ec\u55244\u628a\u5200\u5728\u5468\u56f4\u65cb\u8f6c","\u5200\u6570+1\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u5200\u6570\u91cf+1,\u5e76\u63d0\u5347\u4f24\u5bb3","\u5200\u6570+1\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u5200\u6570+1,\u5e76\u63d0\u5347\u4f24\u5bb3"],powerRatio:1,powerArr:[10,15,20,25,30],countArr:[3,5,6,7,8],coolDownTimeArr:[2,2,2,2,2],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[202,{skillId:202,skillName:"\u5929\u96f7\u8bc0",quality:2,skillDescArr:["\u53ef\u4ee5\u53ec\u5524\u95ea\u7535\u75db\u51fb\u654c\u4eba","\u95ea\u7535\u6570\u91cf+1\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u95ea\u7535\u6570\u91cf+1\uff0c\u51b7\u5374-25%","\u95ea\u7535\u6570\u91cf+1\uff0c\u5e76\u4e14\u95ea\u7535\u8303\u56f4+50%","\u95ea\u7535\u6570\u91cf+1\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3"],powerRatio:1.5,powerArr:[30,50,75,100,125],countArr:[2,3,4,5,6],coolDownTimeArr:[3,3,2.5,2.5,2.5],scaleArr:[1,1,1,1.5,1.5],cirtProb:[0,5e3,5e3,5e3,5e3],cirtPowerBonus:[0,50,50,50,50]}],[203,{skillId:203,skillName:"\u516d\u6307\u795e\u529f",quality:2,skillDescArr:["\u53ef\u4ee5\u4f7f\u7528\u5251\u6c14\u653b\u51fb\u654c\u4eba","\u5251\u6c14\u6570\u91cf+1\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u5251\u6c14\u6570\u91cf+1\uff0c\u51b7\u5374-25%","\u5251\u6c14\u6570\u91cf+1\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u5251\u6c14\u6570\u91cf+1\uff0c\u51b7\u5374-25%"],powerRatio:1.2,powerArr:[24,48,60,84,96],countArr:[2,3,4,5,6],coolDownTimeArr:[3,3,2.5,2.5,2],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[204,{skillId:204,skillName:"\u72ec\u95e8\u4e5d\u5251",quality:3,skillDescArr:["\u53ef\u4ee5\u53ec\u5524\u4e09\u628a\u5251\u4fdd\u62a4\u81ea\u5df1","\u53ec\u5524\u5251\u6570\u91cf+1\uff0c,\u5e76\u63d0\u5347\u4f24\u5bb3","\u53ec\u5524\u5251\u6570\u91cf+2","\u53ec\u5524\u5251\u6570\u91cf+1\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u53ec\u5524\u5251\u6570\u91cf+2\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3"],powerRatio:.5,powerArr:[10,20,25,35,50],countArr:[3,4,6,7,9],coolDownTimeArr:[3,3,3,3,3],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[205,{skillId:205,skillName:"\u6e38\u9f99\u620f\u753b",quality:3,skillDescArr:["\u53ec\u5524\u4e00\u6761\u9f99\u4fdd\u62a4\u81ea\u5df1","\u6e38\u9f99\u4f24\u5bb3\u63d0\u5347","\u6e38\u9f99\u6570\u91cf+1,\u6e38\u9f99\u4f24\u5bb3\u5927\u5e45\u63d0\u5347","\u6e38\u9f99\u4f24\u5bb3\u63d0\u5347","\u6e38\u9f99\u6570\u91cf+1\uff0c\u6e38\u9f99\u4f24\u5bb3\u5927\u5e45\u63d0\u5347"],powerRatio:2,powerArr:[40,50,80,100,120],countArr:[1,1,2,2,3],coolDownTimeArr:[3,3,3,3,3],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[206,{skillId:206,skillName:"\u91d1\u9f99",quality:3,skillDescArr:["\u53ec\u55248\u6761\u9f99","\u4f24\u5bb3\u63d0\u9ad8","\u4f24\u5bb3\u63d0\u9ad8","\u4f24\u5bb3\u63d0\u9ad8","\u4f24\u5bb3\u63d0\u9ad8"],powerRatio:2,powerArr:[40,60,100,120,150],countArr:[8,8,8,8,8],coolDownTimeArr:[5,5,5,5,5],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[207,{skillId:207,skillName:"\u4e07\u86c7",quality:3,skillDescArr:["\u53ec\u5524\u4e00\u7fa4\u86c7","\u53ec\u5524\u4e00\u7fa4\u86c7","\u53ec\u5524\u4e00\u7fa4\u86c7","\u53ec\u5524\u4e00\u7fa4\u86c7","\u53ec\u5524\u4e00\u7fa4\u86c7"],powerRatio:2,powerArr:[10,20,25,35,50],countArr:[8,9,10,11,12],coolDownTimeArr:[5,5,5,5,5],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[208,{skillId:208,skillName:"\u72ee\u543c\u529f",quality:2,skillDescArr:["\u8def\u89c1\u4e0d\u5e73\u4e00\u58f0\u543c","\u72ee\u543c\u529f\u8303\u56f4\u6269\u5927\uff0c\u4f24\u5bb3\u63d0\u5347","\u72ee\u543c\u529f\u8303\u56f4\u6269\u5927\uff0c\u4f24\u5bb3\u63d0\u5347","\u5927\u72ee\u543c\u529f\u8303\u56f4\u6269\u5927\uff0c\u4f24\u5bb3\u63d0\u5347","\u72ee\u543c\u529f\u8303\u56f4\u6269\u5927\uff0c\u4f24\u5bb3\u63d0\u5347"],powerRatio:1,powerArr:[30,55,80,105,150],countArr:[1,1,1,1,1],coolDownTimeArr:[3,3,3,3,3],scaleArr:[1,1.2,1.4,1.6,1.8],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[209,{skillId:209,skillName:"\u592a\u6781\u5251\u9635",quality:3,skillDescArr:["\u592a\u6781\u533a\u57df\u5185\uff0c\u591a\u628a\u5251\u4ece\u5929\u964d","\u63d0\u5347\u6bcf\u628a\u5251\u7684\u4f24\u5bb3","\u589e\u52a01\u4e2a\u5251\u9635\uff0c\u5e76\u63d0\u5347\u6bcf\u628a\u5251\u7684\u4f24\u5bb3","\u589e\u52a01\u4e2a\u5251\u9635\uff0c\u5e76\u63d0\u5347\u6bcf\u628a\u5251\u7684\u4f24\u5bb3","\u589e\u52a01\u4e2a\u5251\u9635\uff0c\u5e76\u63d0\u5347\u6bcf\u628a\u5251\u7684\u4f24\u5bb3"],powerRatio:1,powerArr:[20,30,40,60,80],countArr:[3,4,5,6,8],coolDownTimeArr:[3,3,3,3,3],scaleArr:[.9,1,1.1,1.2,1.3],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[210,{skillId:210,skillName:"\u51b0\u9b44\u638c",quality:3,skillDescArr:["\u51b0\u9b44\u638c","\u51b0\u9b44\u638c","\u51b0\u9b44\u638c","\u51b0\u9b44\u638c","\u51b0\u9b44\u638c"],powerRatio:1,powerArr:[30,55,80,105,150],countArr:[2,3,4,5,6],coolDownTimeArr:[3,3,3,3,3],scaleArr:[1,1.2,1.4,1.6,1.8],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[211,{skillId:211,skillName:"\u7a7f\u4e91\u98de\u5200",quality:3,skillDescArr:["\u6254\u51fa\u5c0f\u5200\u653b\u51fb\u654c\u4eba","\u5c0f\u5200\u6570\u91cf+2\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u5c0f\u5200\u6570\u91cf+2\uff0c\u51b7\u5374-25%","\u5c0f\u5200\u6570\u91cf+2\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u5c0f\u5200\u6570\u91cf+1\uff0c\u51b7\u5374-25%"],powerRatio:1.5,powerArr:[24,48,60,84,96],countArr:[2,4,6,8,9],coolDownTimeArr:[3,3,2.5,2.5,2],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[213,{skillId:213,skillName:"\u6458\u53f6\u98de\u82b1",quality:3,skillDescArr:["\u4ee5\u6811\u53f6\u4f5c\u4e3a\u6b66\u5668\uff0c\u4ece\u624b\u4e0a\u5c04\u51fa","\u6811\u53f6+2\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u6811\u53f6+1\uff0c\u51b7\u5374-25%","\u6811\u53f6+2\uff0c\u5e76\u63d0\u5347\u4f24\u5bb3","\u6811\u53f6+1\uff0c\u51b7\u5374-25%"],powerRatio:.5,powerArr:[15,30,30,45,45],countArr:[4,6,7,9,10],coolDownTimeArr:[3,3,2.5,2.5,2],scaleArr:[1,1,1,1,1],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}],[301,{skillId:301,skillName:"\u91d1\u8f6e\u4e07\u4ede",quality:5,skillDescArr:["\u706b\u7130\u5200\u65cb\u8f6c\uff0c\u4e0d\u65f6\u6254\u51fa\u98de\u5200"],powerRatio:1,powerArr:[50],countArr:[8],coolDownTimeArr:[2],scaleArr:[1],cirtProb:[0],cirtPowerBonus:[0]}],[302,{skillId:302,skillName:"\u7535\u95ea\u96f7\u9e23",quality:5,skillDescArr:["\u7535\u95ea\u96f7\u9e23!!"],powerRatio:1,powerArr:[200],countArr:[3],coolDownTimeArr:[2],scaleArr:[1],cirtProb:[0],cirtPowerBonus:[0]}],[303,{skillId:303,skillName:"\u9b54\u8d2f\u5149\u6740\u70ae",quality:5,skillDescArr:["\u53cd\u5f39\uff01\uff01"],powerRatio:1,powerArr:[100],countArr:[6],coolDownTimeArr:[4],scaleArr:[1],cirtProb:[0],cirtPowerBonus:[0]}],[304,{skillId:304,skillName:"\u5251\u5f71\u4e71\u821e",quality:5,skillDescArr:["\u5251\u5f71\u4e71\u821e!!"],powerRatio:1,powerArr:[150],countArr:[1],coolDownTimeArr:[3],scaleArr:[2],cirtProb:[0],cirtPowerBonus:[0]}],[308,{skillId:308,skillName:"\u4f5b\u97f3\u6c38\u7f69",quality:5,skillDescArr:["\u4f5b\u97f3\u6c38\u7f69!!"],powerRatio:1,powerArr:[200],countArr:[1],coolDownTimeArr:[3],scaleArr:[2],cirtProb:[0],cirtPowerBonus:[0]}],[310,{skillId:310,skillName:"\u7384\u51b0\u534e\u821e",quality:5,skillDescArr:["\u7384\u51b0\u534e\u821e!!"],powerRatio:1,powerArr:[150],countArr:[1],coolDownTimeArr:[4.5],scaleArr:[1],cirtProb:[0],cirtPowerBonus:[0]}],[311,{skillId:311,skillName:"\u6d41\u5203\u65e0\u5f71",quality:5,skillDescArr:["\u98de\u5200\u8d85\u6b66!!"],powerRatio:1,powerArr:[25],countArr:[8],coolDownTimeArr:[3],scaleArr:[1],cirtProb:[0],cirtPowerBonus:[0]}],[313,{skillId:313,skillName:"\u98de\u82b1\u9010\u6708",quality:5,skillDescArr:["\u6458\u53f6\u98de\u82b1\u8d85\u6b66"],powerRatio:.8,powerArr:[90],countArr:[10],coolDownTimeArr:[2],scaleArr:[1],cirtProb:[1e3],cirtPowerBonus:[0]}]]),o.SkillConfigMap.set(212,{skillId:212,skillName:"\u706b\u51e4\u51f0",skillDescArr:["\u53ec\u5524\u706b\u51e4\u51f0\u51b2\u51fb\u654c\u4eba","\u53ec\u5524\u706b\u51e4\u51f0\u51b2\u51fb\u654c\u4eba","\u53ec\u5524\u706b\u51e4\u51f0\u51b2\u51fb\u654c\u4eba","\u53ec\u5524\u706b\u51e4\u51f0\u51b2\u51fb\u654c\u4eba","\u53ec\u5524\u706b\u51e4\u51f0\u51b2\u51fb\u654c\u4eba"],powerRatio:1,powerArr:[100,150,200,250,300],countArr:[1,2,3,4,5],coolDownTimeArr:[5,5,5,5,5],scaleArr:[1,1.2,1.4,1.6,1.8],cirtProb:[0],cirtPowerBonus:[0]}),o.SkillConfigMap.set(214,{skillId:214,skillName:"\u6eda\u96f7",skillDescArr:["\u6eda\u96f7","\u6eda\u96f7","\u6eda\u96f7","\u6eda\u96f7","\u6eda\u96f7"],powerRatio:.5,powerArr:[10,20,25,35,50],countArr:[3,4,6,7,9],coolDownTimeArr:[3,3,3,3,3],scaleArr:[1.2,1.2,1.2,1.2,1.2],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}),o.SkillConfigMap.set(310,{skillId:310,skillName:"\u7384\u51b0\u534e\u821e",skillDescArr:["\u7384\u51b0\u534e\u821e"],powerRatio:1,powerArr:[150],countArr:[1],coolDownTimeArr:[4.5],scaleArr:[1],cirtProb:[0],cirtPowerBonus:[0]}),o.SkillConfigMap.set(312,{skillId:312,skillName:"\u706b\u51e4\u51f0\u8d85\u6b66",skillDescArr:["\u53ec\u5524\u706b\u51e4\u51f0\u51b2\u51fb\u654c\u4eba\uff0c\u7559\u4e0b\u706b\u7130\u8f68\u8ff9"],powerRatio:1,powerArr:[100],countArr:[1],coolDownTimeArr:[5],scaleArr:[2],cirtProb:[0],cirtPowerBonus:[0]}),o.SkillConfigMap.set(314,{skillId:314,skillName:"\u6eda\u96f7\u8d85\u6b66",skillDescArr:["\u6eda\u96f7\u8d85\u6b66","\u6eda\u96f7\u8d85\u6b66","\u6eda\u96f7\u8d85\u6b66","\u6eda\u96f7\u8d85\u6b66","\u6eda\u96f7\u8d85\u6b66"],powerRatio:.5,powerArr:[10,20,25,35,50],countArr:[5,6,7,8,10],coolDownTimeArr:[3,3,3,3,3],scaleArr:[1.2,1.2,1.2,1.2,1.2],cirtProb:[0,0,0,0,0],cirtPowerBonus:[0,0,0,0,0]}),o.UnlockSkillDataMap=new Map([[208,{id:208,unlockGradeIndex:0,unlockChapterIndex:0,name:"\u72ee\u543c\u529f",tips:"\u901a\u5173\u7b2c\u4e00\u7ae0\u53ef\u83b7\u5f97\u8be5\u529f\u6cd5",desc:"\u8def\u89c1\u4e0d\u5e73\u4e00\u58f0\u543c",btnPath:"lv_008/ui/btn/btn_lionRoar"}],[209,{id:209,unlockGradeIndex:-1,unlockChapterIndex:-1,name:"\u592a\u6781\u5251\u9635",tips:"\u89c2\u770b\u89c6\u9891\u53ef\u83b7\u5f97\u8be5\u529f\u6cd5",desc:"\u4eba\u5251\u5408\u4e00",btnPath:"lv_008/ui/btn/btn_swordFormation"}]]),o.UnlockModuleDataMap=new Map([[1,{id:1,iconPath:"lv_008/sf/unlockNewModule/icon-1",name:"\u95ef\u8361",desc:"\u6c5f\u6e56\u9669\u6076\uff0c\u4e0d\u884c\u5c31\u64a4"}],[2,{id:2,iconPath:"lv_008/sf/unlockNewModule/icon-2",name:"\u6b66\u4fa0",desc:"\u5927\u4fa0\u4e5f\u662f\u4ece\u5c0f\u867e\u7c73\u5f00\u59cb\u7684"}],[3,{id:3,iconPath:"lv_008/sf/unlockNewModule/icon-3",name:"\u4fee\u8eab",desc:"\u8e0f\u4e0a\u957f\u751f\u4fee\u771f\u4e4b\u65c5"}],[4,{id:4,iconPath:"lv_008/sf/unlockNewModule/icon-4",name:"\u5e02\u574a",desc:"\u5e08\u5085\uff0c\u4f60\u8fd9\u74dc\u4fdd\u719f\u5417\uff1f"}],[5,{id:5,iconPath:"lv_008/sf/unlockNewModule/icon-5",name:"\u529f\u6cd5",desc:"\u4e5d\u9634\u771f\u7ecf\uff1f\u8475\u82b1\u5b9d\u5178\uff01"}],[6,{id:6,iconPath:"lv_008/sf/unlockNewModule/icon-6",name:"\u6e38\u5386",desc:"\u8e0f\u904d\u5c71\u6cb3\uff0c\u900d\u9065\u81ea\u7531"}]]),o.EnemyPrefabDataConfigMap=new Map([[0,{path:"lv_008/enemy/normal/enemy_001",stunNPX:0,stunNPY:219,stunNS:1,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:0,bBNPY:87,bBNS:1}],[1,{path:"lv_008/enemy/normal/enemy_001",stunNPX:0,stunNPY:219,stunNS:1,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:0,bBNPY:87,bBNS:1}],[2,{path:"lv_008/enemy/normal/enemy_002",stunNPX:82,stunNPY:166,stunNS:1,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:18,bBNPY:72,bBNS:1}],[3,{path:"lv_008/enemy/normal/enemy_003",stunNPX:-10,stunNPY:216,stunNS:1,fBNPX:-4,fBNPY:-4,fBNS:1,bBNPX:-14,bBNPY:107,bBNS:1}],[4,{path:"lv_008/enemy/normal/enemy_004",stunNPX:56.7,stunNPY:113.7,stunNS:1,fBNPX:20,fBNPY:14,fBNS:1.2,bBNPX:0,bBNPY:55,bBNS:1}],[5,{path:"lv_008/enemy/normal/enemy_005",stunNPX:-24.7,stunNPY:327.2,stunNS:1.5,fBNPX:8,fBNPY:0,fBNS:1.5,bBNPX:0,bBNPY:137,bBNS:2}],[6,{path:"lv_008/enemy/normal/enemy_006",stunNPX:3.5,stunNPY:280.9,stunNS:1.2,fBNPX:0,fBNPY:5,fBNS:1.7,bBNPX:-18,bBNPY:116,bBNS:2}],[7,{path:"lv_008/enemy/normal/enemy_007",stunNPX:1.45,stunNPY:486.6,stunNS:2,fBNPX:0,fBNPY:0,fBNS:2,bBNPX:-25,bBNPY:212,bBNS:2.5}],[8,{path:"lv_008/enemy/normal/enemy_008",stunNPX:0,stunNPY:155,stunNS:1,fBNPX:9,fBNPY:0,fBNS:1.2,bBNPX:0,bBNPY:64,bBNS:1}],[9,{path:"lv_008/enemy/normal/enemy_009",stunNPX:1.2,stunNPY:321.6,stunNS:1.2,fBNPX:8,fBNPY:0,fBNS:1.7,bBNPX:-20,bBNPY:139,bBNS:2}],[10,{path:"lv_008/enemy/normal/enemy_010",stunNPX:35.2,stunNPY:119.6,stunNS:1,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:0,bBNPY:60,bBNS:1}],[11,{path:"lv_008/enemy/normal/enemy_011",stunNPX:1.2,stunNPY:231.6,stunNS:1.2,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:-17,bBNPY:99,bBNS:1.5}],[12,{path:"lv_008/enemy/normal/enemy_012",stunNPX:-4.2,stunNPY:229.5,stunNS:1,fBNPX:6,fBNPY:13,fBNS:1.5,bBNPX:-21,bBNPY:97,bBNS:1.7}],[13,{path:"lv_008/enemy/normal/enemy_013",stunNPX:29.2,stunNPY:48.9,stunNS:.7,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:0,bBNPY:47,bBNS:1}],[14,{path:"lv_008/enemy/normal/enemy_014",stunNPX:0,stunNPY:228.281,stunNS:.8,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:-8,bBNPY:104,bBNS:1}],[15,{path:"lv_008/enemy/normal/enemy_015",stunNPX:0,stunNPY:217.184,stunNS:.7,fBNPX:2,fBNPY:11,fBNS:1,bBNPX:0,bBNPY:89,bBNS:1}],[16,{path:"lv_008/enemy/normal/enemy_016",stunNPX:-3.99,stunNPY:247.812,stunNS:.8,fBNPX:0,fBNPY:11,fBNS:1,bBNPX:0,bBNPY:112,bBNS:1}],[17,{path:"lv_008/enemy/normal/enemy_017",stunNPX:8.483,stunNPY:254.224,stunNS:.85,fBNPX:0,fBNPY:6,fBNS:1,bBNPX:0,bBNPY:124,bBNS:1}],[18,{path:"lv_008/enemy/normal/enemy_018",stunNPX:0,stunNPY:155,stunNS:1,fBNPX:9,fBNPY:0,fBNS:1.2,bBNPX:0,bBNPY:64,bBNS:1}],[19,{path:"lv_008/enemy/normal/enemy_019",stunNPX:0,stunNPY:155,stunNS:1,fBNPX:9,fBNPY:0,fBNS:1.2,bBNPX:0,bBNPY:64,bBNS:1}],[20,{path:"lv_008/enemy/normal/enemy_020",stunNPX:56.7,stunNPY:113.7,stunNS:1,fBNPX:20,fBNPY:14,fBNS:1.2,bBNPX:0,bBNPY:55,bBNS:1}],[21,{path:"lv_008/enemy/normal/enemy_021",stunNPX:29.2,stunNPY:48.9,stunNS:.7,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:0,bBNPY:47,bBNS:1}],[22,{path:"lv_008/enemy/normal/enemy_022",stunNPX:29.2,stunNPY:48.9,stunNS:.7,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:0,bBNPY:47,bBNS:1}],[23,{path:"lv_008/enemy/normal/enemy_023",stunNPX:29.2,stunNPY:48.9,stunNS:.7,fBNPX:0,fBNPY:0,fBNS:1,bBNPX:0,bBNPY:47,bBNS:1}],[101,{path:"lv_008/enemy/elite/elite_101",stunNPX:0,stunNPY:219,stunNS:1,fBNPX:0,fBNPY:6,fBNS:1,bBNPX:-8,bBNPY:95,bBNS:1}],[103,{path:"lv_008/enemy/elite/elite_103",stunNPX:-10,stunNPY:216,stunNS:1,fBNPX:0,fBNPY:9,fBNS:1,bBNPX:-13,bBNPY:108,bBNS:1}],[105,{path:"lv_008/enemy/elite/elite_105",stunNPX:-24.7,stunNPY:327.2,stunNS:1.5,fBNPX:8,fBNPY:0,fBNS:1.5,bBNPX:-10,bBNPY:127,bBNS:2}],[106,{path:"lv_008/enemy/elite/elite_106",stunNPX:3.5,stunNPY:280.9,stunNS:1.2,fBNPX:8,fBNPY:0,fBNS:1.5,bBNPX:-28,bBNPY:115,bBNS:2}],[107,{path:"lv_008/enemy/elite/elite_107",stunNPX:1.45,stunNPY:486.6,stunNS:2,fBNPX:4,fBNPY:0,fBNS:1.2,bBNPX:-26,bBNPY:102,bBNS:1.7}],[109,{path:"lv_008/enemy/elite/elite_109",stunNPX:1.2,stunNPY:321.6,stunNS:1.2,fBNPX:4,fBNPY:15,fBNS:1.7,bBNPX:-26,bBNPY:145,bBNS:2}],[111,{path:"lv_008/enemy/elite/elite_111",stunNPX:1.2,stunNPY:231.6,stunNS:1.2,fBNPX:5,fBNPY:13,fBNS:1.2,bBNPX:-12,bBNPY:102,bBNS:1.5}],[10101,{path:"lv_008/enemy/boss/boss_101",stunNPX:0,stunNPY:406.9,stunNS:1.5,fBNPX:9,fBNPY:0,fBNS:1,bBNPX:-1,bBNPY:123,bBNS:1.2}],[10106,{path:"lv_008/enemy/boss/boss_106",stunNPX:0,stunNPY:406.9,stunNS:1.5,fBNPX:18,fBNPY:0,fBNS:1,bBNPX:-14,bBNPY:150,bBNS:2.2}],[10107,{path:"lv_008/enemy/boss/boss_107",stunNPX:0,stunNPY:406.9,stunNS:1.5,fBNPX:7,fBNPY:0,fBNS:1,bBNPX:-22,bBNPY:137,bBNS:2}],[10201,{path:"lv_008/enemy/boss/boss_201",stunNPX:0,stunNPY:406.9,stunNS:1.5,fBNPX:0,fBNPY:6,fBNS:1.5,bBNPX:-14,bBNPY:236,bBNS:1.5}],[10301,{path:"lv_008/enemy/boss/boss_301",stunNPX:12,stunNPY:394,stunNS:1,fBNPX:4,fBNPY:0,fBNS:1.4,bBNPX:-6,bBNPY:187,bBNS:2}]]),o.EnemyConfigMap=new Map([[0,{id:0,prefabId:8,moveSpeed:250,armor:0,hp:18,hpRatio:18,damagePoint:2,damagePointRange:2,damagePointRatio:2,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:4e3,i:1001}],isElite:!1,weaponDataArr:[]}],[1,{id:1,prefabId:4,moveSpeed:200,armor:0,hp:50,hpRatio:50,damagePoint:3,damagePointRange:3,damagePointRatio:3,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:3500,i:1001}],isElite:!1,weaponDataArr:[]}],[2,{id:2,prefabId:10,moveSpeed:400,armor:0,hp:40,hpRatio:40,damagePoint:2,damagePointRange:2,damagePointRatio:2,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:5e3,i:1001}],isElite:!1,weaponDataArr:[]}],[3,{id:3,prefabId:13,moveSpeed:400,armor:0,hp:70,hpRatio:70,damagePoint:6,damagePointRange:6,damagePointRatio:6,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:5e3,i:1001}],isElite:!1,weaponDataArr:[]}],[4,{id:4,prefabId:12,moveSpeed:150,armor:0,hp:300,hpRatio:300,damagePoint:10,damagePointRange:10,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:8e3,i:1001}],isElite:!1,weaponDataArr:[]}],[5,{id:5,prefabId:1,moveSpeed:250,armor:0,hp:100,hpRatio:100,damagePoint:15,damagePointRange:15,damagePointRatio:3,isIgnorePlayerArmor:!1,scale:.9,dropData:[{p:3500,i:1001}],isElite:!1,weaponDataArr:[]}],[6,{id:6,prefabId:6,moveSpeed:200,armor:0,hp:250,hpRatio:250,damagePoint:20,damagePointRange:20,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:.7,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[7,{id:7,prefabId:7,moveSpeed:200,armor:0,hp:1500,hpRatio:1500,damagePoint:50,damagePointRange:50,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[8,{id:8,prefabId:2,moveSpeed:400,armor:0,hp:350,hpRatio:350,damagePoint:30,damagePointRange:30,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:4e3,i:1001}],isElite:!1,weaponDataArr:[]}],[9,{id:9,prefabId:3,moveSpeed:250,armor:0,hp:200,hpRatio:200,damagePoint:50,damagePointRange:50,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[10,{id:10,prefabId:11,moveSpeed:200,armor:0,hp:400,hpRatio:400,damagePoint:80,damagePointRange:80,damagePointRatio:8,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[11,{id:11,prefabId:5,moveSpeed:200,armor:0,hp:2150,hpRatio:2150,damagePoint:100,damagePointRange:100,damagePointRatio:15,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:1e4,i:1002}],isElite:!1,weaponDataArr:[]}],[12,{id:12,prefabId:9,moveSpeed:400,armor:0,hp:5e3,hpRatio:5e3,damagePoint:8,damagePointRange:8,damagePointRatio:8,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:1e4,i:1002}],isElite:!1,weaponDataArr:[]}],[13,{id:13,prefabId:101,moveSpeed:200,armor:0,hp:500,hpRatio:500,damagePoint:5,damagePointRange:5,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1013},{p:1e4,i:1014}],isElite:!0,weaponDataArr:[{i:10001,w:100}]}],[14,{id:14,prefabId:106,moveSpeed:200,armor:0,hp:800,hpRatio:800,damagePoint:5,damagePointRange:5,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1013},{p:1e4,i:1014}],isElite:!0,weaponDataArr:[{i:10001,w:100}]}],[15,{id:15,prefabId:103,moveSpeed:200,armor:0,hp:1e3,hpRatio:1e3,damagePoint:5,damagePointRange:5,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1013},{p:1e4,i:1014}],isElite:!0,weaponDataArr:[{i:10001,w:100}]}],[16,{id:16,prefabId:105,moveSpeed:200,armor:0,hp:100,hpRatio:100,damagePoint:10,damagePointRange:10,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1013},{p:1e4,i:1014}],isElite:!0,weaponDataArr:[{i:10001,w:100}]}],[17,{id:17,prefabId:101,moveSpeed:200,armor:0,hp:50,hpRatio:50,damagePoint:2,damagePointRange:2,damagePointRatio:2,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1013},{p:1e4,i:1014}],isElite:!0,weaponDataArr:[{i:10001,w:100}]}],[18,{id:18,prefabId:1,moveSpeed:200,armor:0,hp:150,hpRatio:150,damagePoint:3,damagePointRange:3,damagePointRatio:3,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!1,weaponDataArr:[]}],[19,{id:19,prefabId:6,moveSpeed:100,armor:0,hp:300,hpRatio:300,damagePoint:3,damagePointRange:3,damagePointRatio:3,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!1,weaponDataArr:[]}],[20,{id:20,prefabId:7,moveSpeed:100,armor:0,hp:800,hpRatio:800,damagePoint:5,damagePointRange:5,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!1,weaponDataArr:[]}],[21,{id:21,prefabId:3,moveSpeed:100,armor:0,hp:1040,hpRatio:1040,damagePoint:5,damagePointRange:5,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!1,weaponDataArr:[]}],[22,{id:22,prefabId:11,moveSpeed:150,armor:0,hp:1750,hpRatio:1750,damagePoint:5,damagePointRange:5,damagePointRatio:5,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!1,weaponDataArr:[]}],[23,{id:23,prefabId:13,moveSpeed:150,armor:0,hp:150,hpRatio:150,damagePoint:3,damagePointRange:3,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[{i:20001,w:100}]}],[24,{id:24,prefabId:13,moveSpeed:150,armor:0,hp:150,hpRatio:150,damagePoint:3,damagePointRange:3,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:.8,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[{i:20002,w:100}]}],[25,{id:25,prefabId:101,moveSpeed:200,armor:0,hp:500,hpRatio:500,damagePoint:10,damagePointRange:10,damagePointRatio:2,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[]}],[26,{id:26,prefabId:106,moveSpeed:200,armor:0,hp:8e3,hpRatio:800,damagePoint:15,damagePointRange:15,damagePointRatio:15,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[]}],[27,{id:27,prefabId:12,moveSpeed:250,armor:0,hp:15e3,hpRatio:0,damagePoint:40,damagePointRange:40,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[{i:60002,w:100},{i:60001,w:100}]}],[28,{id:28,prefabId:10101,moveSpeed:250,armor:0,hp:3e4,hpRatio:0,damagePoint:60,damagePointRange:60,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[{i:20005,w:100},{i:60002,w:100}]}],[29,{id:29,prefabId:10106,moveSpeed:200,armor:25,hp:8e4,hpRatio:0,damagePoint:80,damagePointRange:80,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[{i:20005,w:100},{i:20006,w:100},{i:60002,w:100}]}],[30,{id:30,prefabId:10107,moveSpeed:200,armor:50,hp:1e5,hpRatio:0,damagePoint:100,damagePointRange:100,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[{i:20005,w:100},{i:20006,w:100},{i:60002,w:100},{i:60003,w:100}]}],[31,{id:31,prefabId:103,moveSpeed:300,armor:25,hp:8e3,hpRatio:1e3,damagePoint:50,damagePointRange:50,damagePointRatio:8,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[{i:60001,w:100}]}],[32,{id:32,prefabId:111,moveSpeed:300,armor:50,hp:15e3,hpRatio:1e3,damagePoint:80,damagePointRange:80,damagePointRatio:8,isIgnorePlayerArmor:!1,scale:1.2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[]}],[33,{id:33,prefabId:111,moveSpeed:200,armor:50,hp:15e4,hpRatio:0,damagePoint:110,damagePointRange:110,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[{i:20005,w:100},{i:20006,w:100},{i:60002,w:100}]}],[34,{id:34,prefabId:10201,moveSpeed:200,armor:100,hp:2e5,hpRatio:0,damagePoint:150,damagePointRange:150,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[{i:20005,w:100},{i:20006,w:100},{i:60003,w:100},{i:60004,w:100}]}],[35,{id:35,prefabId:111,moveSpeed:200,armor:100,hp:3e5,hpRatio:0,damagePoint:110,damagePointRange:110,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[{i:20005,w:100},{i:20006,w:100},{i:60002,w:100}]}],[36,{id:36,prefabId:10201,moveSpeed:200,armor:200,hp:5e5,hpRatio:0,damagePoint:150,damagePointRange:150,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[{i:20005,w:100},{i:20006,w:100},{i:60003,w:100},{i:60004,w:100}]}],[37,{id:37,prefabId:12,moveSpeed:200,armor:150,hp:5e5,hpRatio:0,damagePoint:200,damagePointRange:200,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[{i:60005,w:100}]}],[38,{id:38,prefabId:14,moveSpeed:220,armor:250,hp:1e6,hpRatio:0,damagePoint:300,damagePointRange:300,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[{i:20009,w:100},{i:1040002,w:100}]}],[39,{id:39,prefabId:103,moveSpeed:250,armor:250,hp:8e5,hpRatio:0,damagePoint:350,damagePointRange:350,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[{p:1e4,i:1012}],isElite:!0,weaponDataArr:[{i:1040003,w:100},{i:1060001,w:100}]}],[40,{id:40,prefabId:10301,moveSpeed:250,armor:300,hp:15e4,hpRatio:0,damagePoint:500,damagePointRange:500,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[]}],[41,{id:41,prefabId:10301,moveSpeed:250,armor:400,hp:15e4,hpRatio:0,damagePoint:500,damagePointRange:600,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[]}],[42,{id:42,prefabId:10301,moveSpeed:250,armor:500,hp:15e4,hpRatio:0,damagePoint:500,damagePointRange:800,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[]}],[43,{id:43,prefabId:10301,moveSpeed:250,armor:500,hp:15e4,hpRatio:0,damagePoint:500,damagePointRange:1e3,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[]}],[44,{id:44,prefabId:10301,moveSpeed:250,armor:600,hp:15e4,hpRatio:0,damagePoint:500,damagePointRange:1200,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[]}],[45,{id:45,prefabId:10301,moveSpeed:250,armor:600,hp:15e4,hpRatio:0,damagePoint:500,damagePointRange:1300,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[]}],[46,{id:46,prefabId:10301,moveSpeed:250,armor:700,hp:15e4,hpRatio:0,damagePoint:500,damagePointRange:1800,damagePointRatio:0,isIgnorePlayerArmor:!1,scale:2,dropData:[],isElite:!0,weaponDataArr:[]}],[47,{id:47,prefabId:14,moveSpeed:250,armor:0,hp:300,hpRatio:200,damagePoint:100,damagePointRange:100,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[48,{id:48,prefabId:15,moveSpeed:200,armor:0,hp:500,hpRatio:200,damagePoint:150,damagePointRange:150,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[49,{id:49,prefabId:16,moveSpeed:250,armor:0,hp:800,hpRatio:200,damagePoint:200,damagePointRange:200,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[50,{id:50,prefabId:17,moveSpeed:250,armor:0,hp:1e3,hpRatio:200,damagePoint:250,damagePointRange:250,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[51,{id:51,prefabId:18,moveSpeed:250,armor:0,hp:200,hpRatio:200,damagePoint:80,damagePointRange:80,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[52,{id:52,prefabId:19,moveSpeed:250,armor:0,hp:400,hpRatio:200,damagePoint:200,damagePointRange:120,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1002}],isElite:!1,weaponDataArr:[]}],[53,{id:53,prefabId:20,moveSpeed:220,armor:0,hp:300,hpRatio:200,damagePoint:120,damagePointRange:120,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[54,{id:54,prefabId:21,moveSpeed:400,armor:0,hp:500,hpRatio:200,damagePoint:200,damagePointRange:200,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[55,{id:55,prefabId:22,moveSpeed:420,armor:0,hp:600,hpRatio:200,damagePoint:250,damagePointRange:250,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1002}],isElite:!1,weaponDataArr:[]}],[56,{id:56,prefabId:23,moveSpeed:450,armor:0,hp:800,hpRatio:200,damagePoint:300,damagePointRange:300,damagePointRatio:10,isIgnorePlayerArmor:!1,scale:1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[]}],[210011,{id:210011,prefabId:8,moveSpeed:300,armor:0,hp:100,hpRatio:0,damagePoint:2,damagePointRange:2,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210021,{id:210021,prefabId:4,moveSpeed:300,armor:0,hp:150,hpRatio:0,damagePoint:7,damagePointRange:7,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210031,{id:210031,prefabId:10,moveSpeed:300,armor:0,hp:200,hpRatio:0,damagePoint:12,damagePointRange:12,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210041,{id:210041,prefabId:13,moveSpeed:300,armor:0,hp:250,hpRatio:0,damagePoint:17,damagePointRange:17,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210051,{id:210051,prefabId:12,moveSpeed:300,armor:0,hp:300,hpRatio:0,damagePoint:22,damagePointRange:22,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210061,{id:210061,prefabId:1,moveSpeed:300,armor:0,hp:350,hpRatio:0,damagePoint:27,damagePointRange:27,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210071,{id:210071,prefabId:6,moveSpeed:300,armor:0,hp:400,hpRatio:0,damagePoint:32,damagePointRange:32,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210081,{id:210081,prefabId:2,moveSpeed:300,armor:0,hp:450,hpRatio:0,damagePoint:37,damagePointRange:37,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210091,{id:210091,prefabId:3,moveSpeed:300,armor:0,hp:610,hpRatio:0,damagePoint:42,damagePointRange:42,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210101,{id:210101,prefabId:7,moveSpeed:300,armor:0,hp:630,hpRatio:0,damagePoint:47,damagePointRange:47,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210111,{id:210111,prefabId:8,moveSpeed:300,armor:0,hp:660,hpRatio:0,damagePoint:52,damagePointRange:52,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210121,{id:210121,prefabId:4,moveSpeed:300,armor:0,hp:700,hpRatio:0,damagePoint:57,damagePointRange:57,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210131,{id:210131,prefabId:10,moveSpeed:300,armor:0,hp:750,hpRatio:0,damagePoint:62,damagePointRange:62,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210141,{id:210141,prefabId:13,moveSpeed:300,armor:0,hp:810,hpRatio:0,damagePoint:67,damagePointRange:67,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210151,{id:210151,prefabId:12,moveSpeed:300,armor:0,hp:880,hpRatio:0,damagePoint:72,damagePointRange:72,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210161,{id:210161,prefabId:1,moveSpeed:300,armor:0,hp:960,hpRatio:0,damagePoint:77,damagePointRange:77,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210171,{id:210171,prefabId:6,moveSpeed:300,armor:0,hp:1050,hpRatio:0,damagePoint:82,damagePointRange:82,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210181,{id:210181,prefabId:2,moveSpeed:300,armor:0,hp:1172,hpRatio:0,damagePoint:87,damagePointRange:87,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210191,{id:210191,prefabId:3,moveSpeed:300,armor:0,hp:1298,hpRatio:0,damagePoint:92,damagePointRange:92,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210201,{id:210201,prefabId:7,moveSpeed:300,armor:0,hp:1430,hpRatio:0,damagePoint:97,damagePointRange:97,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210211,{id:210211,prefabId:8,moveSpeed:300,armor:0,hp:1570,hpRatio:0,damagePoint:102,damagePointRange:102,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210221,{id:210221,prefabId:4,moveSpeed:300,armor:0,hp:1720,hpRatio:0,damagePoint:107,damagePointRange:107,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210231,{id:210231,prefabId:10,moveSpeed:300,armor:0,hp:1882,hpRatio:0,damagePoint:112,damagePointRange:112,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210241,{id:210241,prefabId:13,moveSpeed:300,armor:0,hp:2058,hpRatio:0,damagePoint:117,damagePointRange:117,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210251,{id:210251,prefabId:12,moveSpeed:300,armor:0,hp:2250,hpRatio:0,damagePoint:122,damagePointRange:122,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210261,{id:210261,prefabId:1,moveSpeed:300,armor:0,hp:2460,hpRatio:0,damagePoint:127,damagePointRange:127,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210271,{id:210271,prefabId:6,moveSpeed:300,armor:0,hp:2694,hpRatio:0,damagePoint:132,damagePointRange:132,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210281,{id:210281,prefabId:2,moveSpeed:300,armor:0,hp:2954,hpRatio:0,damagePoint:137,damagePointRange:137,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210291,{id:210291,prefabId:3,moveSpeed:300,armor:0,hp:3240,hpRatio:0,damagePoint:142,damagePointRange:142,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210301,{id:210301,prefabId:7,moveSpeed:300,armor:0,hp:3554,hpRatio:0,damagePoint:147,damagePointRange:147,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210311,{id:210311,prefabId:8,moveSpeed:300,armor:0,hp:3898,hpRatio:0,damagePoint:152,damagePointRange:152,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210321,{id:210321,prefabId:4,moveSpeed:300,armor:0,hp:4274,hpRatio:0,damagePoint:157,damagePointRange:157,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210331,{id:210331,prefabId:10,moveSpeed:300,armor:0,hp:4686,hpRatio:0,damagePoint:162,damagePointRange:162,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210341,{id:210341,prefabId:13,moveSpeed:300,armor:0,hp:5136,hpRatio:0,damagePoint:167,damagePointRange:167,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210351,{id:210351,prefabId:12,moveSpeed:300,armor:0,hp:5628,hpRatio:0,damagePoint:172,damagePointRange:172,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210361,{id:210361,prefabId:1,moveSpeed:300,armor:0,hp:6167,hpRatio:0,damagePoint:177,damagePointRange:177,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210371,{id:210371,prefabId:6,moveSpeed:300,armor:0,hp:6758,hpRatio:0,damagePoint:182,damagePointRange:182,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210381,{id:210381,prefabId:2,moveSpeed:300,armor:0,hp:7406,hpRatio:0,damagePoint:187,damagePointRange:187,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210391,{id:210391,prefabId:3,moveSpeed:300,armor:0,hp:8117,hpRatio:0,damagePoint:192,damagePointRange:192,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210401,{id:210401,prefabId:7,moveSpeed:300,armor:0,hp:8897,hpRatio:0,damagePoint:197,damagePointRange:197,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210411,{id:210411,prefabId:8,moveSpeed:300,armor:0,hp:9752,hpRatio:0,damagePoint:202,damagePointRange:202,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210421,{id:210421,prefabId:4,moveSpeed:300,armor:0,hp:10689,hpRatio:0,damagePoint:207,damagePointRange:207,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210431,{id:210431,prefabId:10,moveSpeed:300,armor:0,hp:11716,hpRatio:0,damagePoint:212,damagePointRange:212,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210441,{id:210441,prefabId:13,moveSpeed:300,armor:0,hp:12842,hpRatio:0,damagePoint:217,damagePointRange:217,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210451,{id:210451,prefabId:12,moveSpeed:300,armor:0,hp:14075,hpRatio:0,damagePoint:222,damagePointRange:222,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210461,{id:210461,prefabId:1,moveSpeed:300,armor:0,hp:15427,hpRatio:0,damagePoint:227,damagePointRange:227,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210471,{id:210471,prefabId:6,moveSpeed:300,armor:0,hp:16908,hpRatio:0,damagePoint:232,damagePointRange:232,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210481,{id:210481,prefabId:2,moveSpeed:300,armor:0,hp:18531,hpRatio:0,damagePoint:237,damagePointRange:237,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210491,{id:210491,prefabId:3,moveSpeed:300,armor:0,hp:20310,hpRatio:0,damagePoint:242,damagePointRange:242,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210501,{id:210501,prefabId:7,moveSpeed:300,armor:0,hp:22260,hpRatio:0,damagePoint:247,damagePointRange:247,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210511,{id:210511,prefabId:8,moveSpeed:300,armor:0,hp:24398,hpRatio:0,damagePoint:252,damagePointRange:252,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210521,{id:210521,prefabId:4,moveSpeed:300,armor:0,hp:26741,hpRatio:0,damagePoint:257,damagePointRange:257,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210531,{id:210531,prefabId:10,moveSpeed:300,armor:0,hp:29309,hpRatio:0,damagePoint:262,damagePointRange:262,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210541,{id:210541,prefabId:13,moveSpeed:300,armor:0,hp:32124,hpRatio:0,damagePoint:267,damagePointRange:267,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210551,{id:210551,prefabId:12,moveSpeed:300,armor:0,hp:35209,hpRatio:0,damagePoint:272,damagePointRange:272,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210561,{id:210561,prefabId:1,moveSpeed:300,armor:0,hp:38591,hpRatio:0,damagePoint:277,damagePointRange:277,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210571,{id:210571,prefabId:6,moveSpeed:300,armor:0,hp:42297,hpRatio:0,damagePoint:282,damagePointRange:282,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210581,{id:210581,prefabId:2,moveSpeed:300,armor:0,hp:46359,hpRatio:0,damagePoint:287,damagePointRange:287,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210591,{id:210591,prefabId:3,moveSpeed:300,armor:0,hp:50811,hpRatio:0,damagePoint:292,damagePointRange:292,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210601,{id:210601,prefabId:7,moveSpeed:300,armor:0,hp:55691,hpRatio:0,damagePoint:297,damagePointRange:297,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210611,{id:210611,prefabId:8,moveSpeed:300,armor:0,hp:61039,hpRatio:0,damagePoint:302,damagePointRange:302,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210621,{id:210621,prefabId:4,moveSpeed:300,armor:0,hp:66901,hpRatio:0,damagePoint:307,damagePointRange:307,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210631,{id:210631,prefabId:10,moveSpeed:300,armor:0,hp:73326,hpRatio:0,damagePoint:312,damagePointRange:312,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210641,{id:210641,prefabId:13,moveSpeed:300,armor:0,hp:80368,hpRatio:0,damagePoint:317,damagePointRange:317,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210651,{id:210651,prefabId:12,moveSpeed:300,armor:0,hp:88086,hpRatio:0,damagePoint:322,damagePointRange:322,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210661,{id:210661,prefabId:1,moveSpeed:300,armor:0,hp:96545,hpRatio:0,damagePoint:327,damagePointRange:327,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210671,{id:210671,prefabId:6,moveSpeed:300,armor:0,hp:105817,hpRatio:0,damagePoint:332,damagePointRange:332,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210681,{id:210681,prefabId:2,moveSpeed:300,armor:0,hp:115979,hpRatio:0,damagePoint:337,damagePointRange:337,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210691,{id:210691,prefabId:3,moveSpeed:300,armor:0,hp:127117,hpRatio:0,damagePoint:342,damagePointRange:342,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210701,{id:210701,prefabId:7,moveSpeed:300,armor:0,hp:139325,hpRatio:0,damagePoint:347,damagePointRange:347,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210711,{id:210711,prefabId:8,moveSpeed:300,armor:0,hp:152705,hpRatio:0,damagePoint:352,damagePointRange:352,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210721,{id:210721,prefabId:4,moveSpeed:300,armor:0,hp:167370,hpRatio:0,damagePoint:357,damagePointRange:357,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210731,{id:210731,prefabId:10,moveSpeed:300,armor:0,hp:183444,hpRatio:0,damagePoint:362,damagePointRange:362,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210741,{id:210741,prefabId:13,moveSpeed:300,armor:0,hp:201061,hpRatio:0,damagePoint:367,damagePointRange:367,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210751,{id:210751,prefabId:12,moveSpeed:300,armor:0,hp:220370,hpRatio:0,damagePoint:372,damagePointRange:372,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210761,{id:210761,prefabId:1,moveSpeed:300,armor:0,hp:241533,hpRatio:0,damagePoint:377,damagePointRange:377,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210771,{id:210771,prefabId:6,moveSpeed:300,armor:0,hp:264729,hpRatio:0,damagePoint:382,damagePointRange:382,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210781,{id:210781,prefabId:2,moveSpeed:300,armor:0,hp:290152,hpRatio:0,damagePoint:387,damagePointRange:387,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210791,{id:210791,prefabId:3,moveSpeed:300,armor:0,hp:318017,hpRatio:0,damagePoint:392,damagePointRange:392,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210801,{id:210801,prefabId:7,moveSpeed:300,armor:0,hp:348558,hpRatio:0,damagePoint:397,damagePointRange:397,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210811,{id:210811,prefabId:8,moveSpeed:300,armor:0,hp:382032,hpRatio:0,damagePoint:402,damagePointRange:402,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210821,{id:210821,prefabId:4,moveSpeed:300,armor:0,hp:418721,hpRatio:0,damagePoint:407,damagePointRange:407,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210831,{id:210831,prefabId:10,moveSpeed:300,armor:0,hp:458933,hpRatio:0,damagePoint:412,damagePointRange:412,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210841,{id:210841,prefabId:13,moveSpeed:300,armor:0,hp:503007,hpRatio:0,damagePoint:417,damagePointRange:417,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210851,{id:210851,prefabId:12,moveSpeed:300,armor:0,hp:551314,hpRatio:0,damagePoint:422,damagePointRange:422,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210861,{id:210861,prefabId:1,moveSpeed:300,armor:0,hp:604260,hpRatio:0,damagePoint:427,damagePointRange:427,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210871,{id:210871,prefabId:6,moveSpeed:300,armor:0,hp:662290,hpRatio:0,damagePoint:432,damagePointRange:432,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210881,{id:210881,prefabId:2,moveSpeed:300,armor:0,hp:725893,hpRatio:0,damagePoint:437,damagePointRange:437,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210891,{id:210891,prefabId:3,moveSpeed:300,armor:0,hp:795605,hpRatio:0,damagePoint:442,damagePointRange:442,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210901,{id:210901,prefabId:7,moveSpeed:300,armor:0,hp:872011,hpRatio:0,damagePoint:447,damagePointRange:447,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210911,{id:210911,prefabId:8,moveSpeed:300,armor:0,hp:955755,hpRatio:0,damagePoint:452,damagePointRange:452,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210921,{id:210921,prefabId:4,moveSpeed:300,armor:0,hp:1047542,hpRatio:0,damagePoint:457,damagePointRange:457,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210931,{id:210931,prefabId:10,moveSpeed:300,armor:0,hp:1148143,hpRatio:0,damagePoint:462,damagePointRange:462,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210941,{id:210941,prefabId:13,moveSpeed:300,armor:0,hp:1258406,hpRatio:0,damagePoint:467,damagePointRange:467,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210951,{id:210951,prefabId:12,moveSpeed:300,armor:0,hp:1379258,hpRatio:0,damagePoint:472,damagePointRange:472,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210961,{id:210961,prefabId:1,moveSpeed:300,armor:0,hp:1511716,hpRatio:0,damagePoint:477,damagePointRange:477,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210971,{id:210971,prefabId:6,moveSpeed:300,armor:0,hp:1656895,hpRatio:0,damagePoint:482,damagePointRange:482,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210981,{id:210981,prefabId:2,moveSpeed:300,armor:0,hp:1816016,hpRatio:0,damagePoint:487,damagePointRange:487,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[210991,{id:210991,prefabId:3,moveSpeed:300,armor:0,hp:1990418,hpRatio:0,damagePoint:492,damagePointRange:492,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}],[211001,{id:211001,prefabId:7,moveSpeed:300,armor:0,hp:2181569,hpRatio:0,damagePoint:497,damagePointRange:497,damagePointRatio:0,isIgnorePlayerArmor:!0,scale:1,dropData:[],isElite:!1,weaponDataArr:[]}]]),o.EnemyConfigMap.set(10201,{id:10201,prefabId:17,moveSpeed:150,hp:150,hpRatio:150,damagePoint:50,damagePointRange:10,damagePointRatio:0,scale:.8,isIgnorePlayerArmor:!1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[{i:20001,w:100}]}),o.EnemyConfigMap.set(10202,{id:10202,prefabId:16,moveSpeed:150,hp:150,hpRatio:150,damagePoint:50,damagePointRange:10,damagePointRatio:0,scale:.8,isIgnorePlayerArmor:!1,dropData:[{p:1e4,i:1001}],isElite:!1,weaponDataArr:[{i:20005,w:100}]}),o.EnemyConfigMap.set(301,{id:301,prefabId:10301,moveSpeed:150,hp:15e4,hpRatio:150,damagePoint:50,damagePointRange:50,damagePointRatio:0,scale:1,isIgnorePlayerArmor:!1,dropData:[{p:1e4,i:1001}],isElite:!0,weaponDataArr:[]}),o.DropItemGroupConfigMap=new Map([[1001,{id:1001,itemIdAndWeightArr:[[1,50]]}],[1002,{id:1002,itemIdAndWeightArr:[[2,50]]}],[1003,{id:1003,itemIdAndWeightArr:[[3,50]]}],[1004,{id:1004,itemIdAndWeightArr:[[5,50]]}],[1005,{id:1005,itemIdAndWeightArr:[[6,50]]}],[1006,{id:1006,itemIdAndWeightArr:[[7,50]]}],[1007,{id:1007,itemIdAndWeightArr:[[1,90],[2,10]]}],[1008,{id:1008,itemIdAndWeightArr:[[1,80],[2,20]]}],[1009,{id:1009,itemIdAndWeightArr:[[1,50],[2,50]]}],[1010,{id:1010,itemIdAndWeightArr:[[2,95],[3,5]]}],[1011,{id:1011,itemIdAndWeightArr:[[5,15],[6,10],[7,75]]}],[1012,{id:1012,itemIdAndWeightArr:[[12,50],[13,40],[14,10]]}],[1013,{id:1013,itemIdAndWeightArr:[[4,100,1]]}],[1014,{id:1014,itemIdAndWeightArr:[[8,50,1],[8,40,2],[8,10,3]]}]]),function(e){e[e.ExpGemstone_1=1]="ExpGemstone_1",e[e.ExpGemstone_2=2]="ExpGemstone_2",e[e.ExpGemstone_3=3]="ExpGemstone_3",e[e.AlchemyPullet=4]="AlchemyPullet",e[e.Magnet=5]="Magnet",e[e.NuclearBomb=6]="NuclearBomb",e[e.Chichen=7]="Chichen",e[e.Weapon=8]="Weapon",e[e.Coin_1=9]="Coin_1",e[e.Coin_2=10]="Coin_2",e[e.Coin_3=11]="Coin_3",e[e.Box_1=12]="Box_1",e[e.Box_2=13]="Box_2",e[e.Box_3=14]="Box_3"}(i=o.DropItemType||(o.DropItemType={})),o.DropItemConfigMap=new Map([[i.ExpGemstone_1,"lv_008/dropItem/001_dou"],[i.ExpGemstone_2,"lv_008/dropItem/001_dou"],[i.ExpGemstone_3,"lv_008/dropItem/001_dou"],[i.AlchemyPullet,"lv_008/dropItem/004_alchemyPullet"],[i.Magnet,"lv_008/dropItem/005_magnet"],[i.NuclearBomb,"lv_008/dropItem/006_nuclearBomb"],[i.Chichen,"lv_008/dropItem/007_chichen"],[i.Weapon,"lv_008/dropItem/008_weapon"],[i.Coin_1,"lv_008/dropItem/009_coin"],[i.Coin_2,"lv_008/dropItem/009_coin"],[i.Coin_3,"lv_008/dropItem/009_coin"]]),o.EnemySkillConfigMap=new Map([[10001,{id:10001,weaponClassId:1,bulletId:101,fireCoolDownTime:2,bulletCount:3,arg_1:0,arg_2:0,arg_3:0}],[20001,{id:20001,weaponClassId:2,bulletId:201,fireCoolDownTime:2,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}],[20002,{id:20002,weaponClassId:2,bulletId:201,fireCoolDownTime:2,bulletCount:3,arg_1:0,arg_2:0,arg_3:0}],[20003,{id:20003,weaponClassId:2,bulletId:201,fireCoolDownTime:2,bulletCount:5,arg_1:0,arg_2:0,arg_3:0}],[20004,{id:20004,weaponClassId:101,bulletId:10002,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}],[20005,{id:20005,weaponClassId:101,bulletId:10002,fireCoolDownTime:1,bulletCount:3,arg_1:0,arg_2:0,arg_3:0}],[20006,{id:20006,weaponClassId:101,bulletId:10002,fireCoolDownTime:1,bulletCount:5,arg_1:0,arg_2:0,arg_3:0}],[20007,{id:20007,weaponClassId:2,bulletId:202,fireCoolDownTime:2,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}],[20008,{id:20008,weaponClassId:2,bulletId:202,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}],[20009,{id:20009,weaponClassId:2,bulletId:202,fireCoolDownTime:1,bulletCount:3,arg_1:0,arg_2:0,arg_3:0}],[20010,{id:20010,weaponClassId:2,bulletId:202,fireCoolDownTime:1,bulletCount:5,arg_1:0,arg_2:0,arg_3:0}],[30001,{id:30001,weaponClassId:3,bulletId:301,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}],[40001,{id:40001,weaponClassId:4,bulletId:401,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}],[50001,{id:50001,weaponClassId:5,bulletId:501,fireCoolDownTime:9,bulletCount:1,arg_1:8,arg_2:0,arg_3:0}],[60001,{id:60001,weaponClassId:6,bulletId:1,fireCoolDownTime:2,bulletCount:1,arg_1:1,arg_2:1,arg_3:0}],[60002,{id:60002,weaponClassId:6,bulletId:1,fireCoolDownTime:1,bulletCount:1,arg_1:1.5,arg_2:1,arg_3:0}],[60003,{id:60003,weaponClassId:6,bulletId:1,fireCoolDownTime:1,bulletCount:1,arg_1:1,arg_2:1,arg_3:0}],[60004,{id:60004,weaponClassId:6,bulletId:1,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:1,arg_3:0}],[60005,{id:60005,weaponClassId:6,bulletId:1,fireCoolDownTime:0,bulletCount:1,arg_1:0,arg_2:1,arg_3:0}],[1060001,{id:1060001,weaponClassId:106,bulletId:50001,fireCoolDownTime:3,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}],[1040001,{id:1040001,weaponClassId:104,bulletId:10001,fireCoolDownTime:2,bulletCount:3,arg_1:0,arg_2:0,arg_3:0}],[1040002,{id:1040002,weaponClassId:104,bulletId:10001,fireCoolDownTime:1,bulletCount:3,arg_1:0,arg_2:0,arg_3:0}],[1040003,{id:1040003,weaponClassId:104,bulletId:10001,fireCoolDownTime:2,bulletCount:5,arg_1:0,arg_2:0,arg_3:0}]]),o.EnemySkillConfigMap.set(70001,{id:70001,weaponClassId:103,bulletId:30001,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}),o.EnemySkillConfigMap.set(80001,{id:80001,weaponClassId:104,bulletId:10003,fireCoolDownTime:1,bulletCount:5,arg_1:0,arg_2:0,arg_3:0}),o.EnemySkillConfigMap.set(90001,{id:90001,weaponClassId:105,bulletId:40001,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}),o.EnemySkillConfigMap.set(100001,{id:100001,weaponClassId:106,bulletId:50001,fireCoolDownTime:1,bulletCount:1,arg_1:0,arg_2:0,arg_3:0}),o.EnemyBulletId2PrefabPathMap=new Map([[101,"lv_008/enemyBullet/eb_knife_101"],[201,"lv_008/enemyBullet/eb_rangeLinear_201"],[202,"lv_008/enemyBullet/eb_rangeLinear_202"],[301,"lv_008/enemyBullet/eb_rangeFall_301"],[401,"lv_008/enemyBullet/eb_explosion_401"],[501,"lv_008/enemyBullet/eb_moveSpeedBuff_501"],[10001,"lv_008/enemyBullet/bb_rangeLinear_route_10001"],[10002,"lv_008/enemyBullet/bb_rangeLinear_route_10002"],[10003,"lv_008/enemyBullet/bb_rangeLinear_route_10003"],[20001,"lv_008/enemyBullet/bb_rangeFall_20001"],[30001,"lv_008/enemyBullet/bb_rangeAttack_30001"],[40001,"lv_008/enemyBullet/bb_rangeAttack2_40001"],[50001,"lv_008/enemyBullet/bb_trackRange_50001"]]),o.EnemySkillId2TSMap=new Map([[1,p.default],[2,u.default],[3,c.default],[4,s.default],[5,l.default],[6,a.default],[7,r.default],[101,f.default],[102,d.default],[103,k.default],[104,F.default],[105,j.default],[106,U.default]]),o.PlayerWeaponId2TsMap=new Map([[n.RotatingKnife,b.default],[n.Lightning,g.default],[n.SixPulseHolySword,P.default],[n.SummonSword,S.default],[n.Long,v.default],[n.JinLong,y.default],[n.TenThousandSnakes,_.default],[n.LionRoar,m.default],[n.SwordFormation,D.default],[n.Frostbolt,C.default],[n.FKnife,V.default],[n.Phoenix,E.default],[n.FlowersUAV,x.default],[n.RollingLightning,G.default],[n.Super_RotatingKnife,R.default],[n.Super_Lightning,O.default],[n.Super_SixPulseHolySword,w.default],[n.Super_SummonSword,B.default],[n.Super_LionRoar,I.default],[n.Super_Frostbolt,N.default],[n.Super_FKnife,A.default],[n.Super_Phoenix,T.default],[n.Super_FlowersUAV,M.default],[n.Super_RollingLightning,L.default]]),function(e){e[e.Walk=0]="Walk",e[e.Run=1]="Run",e[e.Skill_SF=2]="Skill_SF",e[e.Skill_QS=3]="Skill_QS",e[e.Skill_DJ=4]="Skill_DJ"}(o.EnemyAniState||(o.EnemyAniState={})),o.ChapterConfig=[[{id:0,bgm:"008/008_bgm_000",recordTimeArr:[[60,300,600]],mapPath:"lv_008/maps/map_001",enemyGeneratorJSONPathArr:["lv_008/json/chapter/Chapter_001-1"]},{id:1,bgm:"008/008_bgm_001",recordTimeArr:[[60,300,600]],mapPath:"lv_008/maps/map_000",enemyGeneratorJSONPathArr:["lv_008/json/chapter/Chapter_002-1","lv_008/json/chapter/Chapter_002-2"]},{id:2,bgm:"008/008_bgm_002",recordTimeArr:[[60,300,600]],mapPath:"lv_008/maps/map_002",enemyGeneratorJSONPathArr:["lv_008/json/chapter/Chapter_003-1","lv_008/json/chapter/Chapter_003-2","lv_008/json/chapter/Chapter_003-3"]},{id:3,bgm:"008/008_bgm_003",recordTimeArr:[[60,300,600]],mapPath:"lv_008/maps/map_003",enemyGeneratorJSONPathArr:["lv_008/json/chapter/Chapter_004-1"]}],[]],cc.sys.isBrowser&&o.ChapterConfig[0].push({id:4,bgm:"008/008_bgm_003",recordTimeArr:[[60,300,600]],mapPath:"lv_008/maps/map_003",enemyGeneratorJSONPathArr:["lv_008/json/chapter/Chapter_test"]}),o.PlayerLevelInfoConfigMap=new Map([[1,{lv:1,maxHp:140,damagePoint:20,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[2,{lv:2,maxHp:144,damagePoint:21,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[3,{lv:3,maxHp:151,damagePoint:23,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[4,{lv:4,maxHp:161,damagePoint:25,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[5,{lv:5,maxHp:175,damagePoint:28,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[6,{lv:6,maxHp:193,damagePoint:32,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[7,{lv:7,maxHp:214,damagePoint:37,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[8,{lv:8,maxHp:238,damagePoint:43,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[9,{lv:9,maxHp:266,damagePoint:49,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[10,{lv:10,maxHp:298,damagePoint:56,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[11,{lv:11,maxHp:333,damagePoint:64,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[12,{lv:12,maxHp:371,damagePoint:73,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[13,{lv:13,maxHp:413,damagePoint:83,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[14,{lv:14,maxHp:459,damagePoint:93,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[15,{lv:15,maxHp:508,damagePoint:104,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[16,{lv:16,maxHp:560,damagePoint:116,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[17,{lv:17,maxHp:616,damagePoint:129,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[18,{lv:18,maxHp:676,damagePoint:143,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[19,{lv:19,maxHp:739,damagePoint:157,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[20,{lv:20,maxHp:805,damagePoint:172,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[21,{lv:21,maxHp:875,damagePoint:188,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[22,{lv:22,maxHp:949,damagePoint:205,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[23,{lv:23,maxHp:1026,damagePoint:223,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[24,{lv:24,maxHp:1106,damagePoint:241,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[25,{lv:25,maxHp:1190,damagePoint:260,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[26,{lv:26,maxHp:1278,damagePoint:280,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[27,{lv:27,maxHp:1369,damagePoint:301,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[28,{lv:28,maxHp:1463,damagePoint:323,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[29,{lv:29,maxHp:1561,damagePoint:345,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[30,{lv:30,maxHp:1663,damagePoint:368,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[31,{lv:31,maxHp:1768,damagePoint:392,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[32,{lv:32,maxHp:1876,damagePoint:417,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[33,{lv:33,maxHp:1988,damagePoint:443,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[34,{lv:34,maxHp:2104,damagePoint:469,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[35,{lv:35,maxHp:2223,damagePoint:496,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[36,{lv:36,maxHp:2345,damagePoint:524,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[37,{lv:37,maxHp:2471,damagePoint:553,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[38,{lv:38,maxHp:2601,damagePoint:583,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[39,{lv:39,maxHp:2734,damagePoint:613,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[40,{lv:40,maxHp:2870,damagePoint:644,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[41,{lv:41,maxHp:3010,damagePoint:676,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[42,{lv:42,maxHp:3154,damagePoint:709,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[43,{lv:43,maxHp:3301,damagePoint:743,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[44,{lv:44,maxHp:3451,damagePoint:777,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[45,{lv:45,maxHp:3605,damagePoint:812,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[46,{lv:46,maxHp:3763,damagePoint:848,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[47,{lv:47,maxHp:3924,damagePoint:885,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[48,{lv:48,maxHp:4088,damagePoint:923,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[49,{lv:49,maxHp:4256,damagePoint:961,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[50,{lv:50,maxHp:4428,damagePoint:1e3,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[51,{lv:51,maxHp:4603,damagePoint:1040,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[52,{lv:52,maxHp:4781,damagePoint:1081,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[53,{lv:53,maxHp:4963,damagePoint:1123,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[54,{lv:54,maxHp:5149,damagePoint:1165,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[55,{lv:55,maxHp:5338,damagePoint:1208,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[56,{lv:56,maxHp:5530,damagePoint:1252,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[57,{lv:57,maxHp:5726,damagePoint:1297,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[58,{lv:58,maxHp:5926,damagePoint:1343,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[59,{lv:59,maxHp:6129,damagePoint:1389,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}],[60,{lv:60,maxHp:6335,damagePoint:1436,armor:0,moveSpeed:400,restoreLife:0,expBonus:0,lucky:0}]]),o.TrialLevel2ZhangLing=new Map([{layer:1,zhangling:200,inc:5},{layer:2,zhangling:205,inc:5},{layer:3,zhangling:210,inc:5},{layer:4,zhangling:215,inc:5},{layer:5,zhangling:220,inc:25},{layer:6,zhangling:245,inc:5},{layer:7,zhangling:250,inc:5},{layer:8,zhangling:255,inc:5},{layer:9,zhangling:260,inc:100},{layer:10,zhangling:360,inc:10},{layer:11,zhangling:370,inc:10},{layer:12,zhangling:380,inc:10},{layer:13,zhangling:390,inc:10},{layer:14,zhangling:400,inc:30},{layer:15,zhangling:430,inc:10},{layer:16,zhangling:440,inc:10},{layer:17,zhangling:450,inc:10},{layer:18,zhangling:460,inc:105},{layer:19,zhangling:565,inc:15},{layer:20,zhangling:580,inc:15},{layer:21,zhangling:595,inc:15},{layer:22,zhangling:610,inc:15},{layer:23,zhangling:625,inc:35},{layer:24,zhangling:660,inc:15},{layer:25,zhangling:675,inc:15},{layer:26,zhangling:690,inc:15},{layer:27,zhangling:705,inc:110},{layer:28,zhangling:815,inc:20},{layer:29,zhangling:835,inc:20},{layer:30,zhangling:855,inc:20},{layer:31,zhangling:875,inc:20},{layer:32,zhangling:895,inc:40},{layer:33,zhangling:935,inc:20},{layer:34,zhangling:955,inc:20},{layer:35,zhangling:975,inc:20},{layer:36,zhangling:995,inc:115},{layer:37,zhangling:1110,inc:25},{layer:38,zhangling:1135,inc:25},{layer:39,zhangling:1160,inc:25},{layer:40,zhangling:1185,inc:25},{layer:41,zhangling:1210,inc:45},{layer:42,zhangling:1255,inc:25},{layer:43,zhangling:1280,inc:25},{layer:44,zhangling:1305,inc:25},{layer:45,zhangling:1330,inc:120},{layer:46,zhangling:1450,inc:30},{layer:47,zhangling:1480,inc:30},{layer:48,zhangling:1510,inc:30},{layer:49,zhangling:1540,inc:30},{layer:50,zhangling:1570,inc:50},{layer:51,zhangling:1620,inc:30},{layer:52,zhangling:1650,inc:30},{layer:53,zhangling:1680,inc:30},{layer:54,zhangling:1710,inc:125},{layer:55,zhangling:1835,inc:35},{layer:56,zhangling:1870,inc:35},{layer:57,zhangling:1905,inc:35},{layer:58,zhangling:1940,inc:35},{layer:59,zhangling:1975,inc:55},{layer:60,zhangling:2030,inc:35},{layer:61,zhangling:2065,inc:35},{layer:62,zhangling:2100,inc:35},{layer:63,zhangling:2135,inc:130},{layer:64,zhangling:2265,inc:40},{layer:65,zhangling:2305,inc:40},{layer:66,zhangling:2345,inc:40},{layer:67,zhangling:2385,inc:40},{layer:68,zhangling:2425,inc:60},{layer:69,zhangling:2485,inc:40},{layer:70,zhangling:2525,inc:40},{layer:71,zhangling:2565,inc:40},{layer:72,zhangling:2605,inc:135},{layer:73,zhangling:2740,inc:45},{layer:74,zhangling:2785,inc:45},{layer:75,zhangling:2830,inc:45},{layer:76,zhangling:2875,inc:45},{layer:77,zhangling:2920,inc:65},{layer:78,zhangling:2985,inc:45},{layer:79,zhangling:3030,inc:45},{layer:80,zhangling:3075,inc:45},{layer:81,zhangling:3120,inc:140},{layer:82,zhangling:3260,inc:50},{layer:83,zhangling:3310,inc:50},{layer:84,zhangling:3360,inc:50},{layer:85,zhangling:3410,inc:50},{layer:86,zhangling:3460,inc:70},{layer:87,zhangling:3530,inc:50},{layer:88,zhangling:3580,inc:50},{layer:89,zhangling:3630,inc:50},{layer:90,zhangling:3680,inc:145},{layer:91,zhangling:3825,inc:55},{layer:92,zhangling:3880,inc:55},{layer:93,zhangling:3935,inc:55},{layer:94,zhangling:3990,inc:55},{layer:95,zhangling:4045,inc:75},{layer:96,zhangling:4120,inc:55},{layer:97,zhangling:4175,inc:55},{layer:98,zhangling:4230,inc:55},{layer:99,zhangling:4285,inc:150},{layer:100,zhangling:4435,inc:60}].map(function(e){return[e.layer,e.zhangling]})),cc._RF.pop()},{"./enemyWeapon/EnemySkill_Charge_008":"EnemySkill_Charge_008","./enemyWeapon/EnemySkill_Charge_Lite_008":"EnemySkill_Charge_Lite_008","./enemyWeapon/EnemySkill_Explosion_008":"EnemySkill_Explosion_008","./enemyWeapon/EnemySkill_MoveSpeedBoost_008":"EnemySkill_MoveSpeedBoost_008","./enemyWeapon/EnemySkill_RangeFall_008":"EnemySkill_RangeFall_008","./enemyWeapon/EnemySkill_RangeLinear_008":"EnemySkill_RangeLinear_008","./enemyWeapon/EnemySkill_RotatingKnife_008":"EnemySkill_RotatingKnife_008","./enemyWeapon/boss/BossSkill_RangeFall_008":"BossSkill_RangeFall_008","./enemyWeapon/boss/BossSkill_RangeLinear_Route_008":"BossSkill_RangeLinear_Route_008","./enemyWeapon/boss2/BossSkill2_RangeAttack2_008":"BossSkill2_RangeAttack2_008","./enemyWeapon/boss2/BossSkill2_RangeAttack_008":"BossSkill2_RangeAttack_008","./enemyWeapon/boss2/BossSkill2_RangeLinear_008":"BossSkill2_RangeLinear_008","./enemyWeapon/boss2/BossSkill2_TrackRange_008":"BossSkill2_TrackRange_008","./playerWeapon/PlayerWeapon_FlowersUAV_008":"PlayerWeapon_FlowersUAV_008","./playerWeapon/PlayerWeapon_FlyingKnife_008":"PlayerWeapon_FlyingKnife_008","./playerWeapon/PlayerWeapon_Frostbolt_008":"PlayerWeapon_Frostbolt_008","./playerWeapon/PlayerWeapon_JinLong_008":"PlayerWeapon_JinLong_008","./playerWeapon/PlayerWeapon_Lightning_008":"PlayerWeapon_Lightning_008","./playerWeapon/PlayerWeapon_LionRoar_008":"PlayerWeapon_LionRoar_008","./playerWeapon/PlayerWeapon_Long_008":"PlayerWeapon_Long_008","./playerWeapon/PlayerWeapon_Phoenix_008":"PlayerWeapon_Phoenix_008","./playerWeapon/PlayerWeapon_RollingLightning_008":"PlayerWeapon_RollingLightning_008","./playerWeapon/PlayerWeapon_RotatingKnife_008":"PlayerWeapon_RotatingKnife_008","./playerWeapon/PlayerWeapon_SixPulseHolySword_008":"PlayerWeapon_SixPulseHolySword_008","./playerWeapon/PlayerWeapon_SummonSword_008":"PlayerWeapon_SummonSword_008","./playerWeapon/PlayerWeapon_SwordFormation2_008":"PlayerWeapon_SwordFormation2_008","./playerWeapon/PlayerWeapon_TenThousandSnakes_008":"PlayerWeapon_TenThousandSnakes_008","./playerWeapon/super/PlayerWeapon_Super_FKnife_008":"PlayerWeapon_Super_FKnife_008","./playerWeapon/super/PlayerWeapon_Super_FlowersUAV_008":"PlayerWeapon_Super_FlowersUAV_008","./playerWeapon/super/PlayerWeapon_Super_Frostbolt_008":"PlayerWeapon_Super_Frostbolt_008","./playerWeapon/super/PlayerWeapon_Super_Lightning_008":"PlayerWeapon_Super_Lightning_008","./playerWeapon/super/PlayerWeapon_Super_LionRoar_008":"PlayerWeapon_Super_LionRoar_008","./playerWeapon/super/PlayerWeapon_Super_Phoenix_008":"PlayerWeapon_Super_Phoenix_008","./playerWeapon/super/PlayerWeapon_Super_RollingLightning_008":"PlayerWeapon_Super_RollingLightning_008","./playerWeapon/super/PlayerWeapon_Super_RotatingKnife_008":"PlayerWeapon_Super_RotatingKnife_008","./playerWeapon/super/PlayerWeapon_Super_SixPulseHolySword_008":"PlayerWeapon_Super_SixPulseHolySword_008","./playerWeapon/super/PlayerWeapon_Super_SummonSword_008":"PlayerWeapon_Super_SummonSword_008","./quests/QuestsSys_008":"QuestsSys_008"}],Config_Gaming_008:[function(e,t,o){"use strict";cc._RF.push(t,"688a8kPKJRMn4gUjvYzwCYv","Config_Gaming_008"),Object.defineProperty(o,"__esModule",{value:!0}),o.Config_Gaming_008=void 0;var n=function(){function e(){}return e.magnetRange=200,e.Pot_CountLimit=5,e.Pot_initCount=1,e.Pot_KillXXEnemyGenerate_KillCount=100,e.Pot_KillXXEnemyGenerate_Probability=100,e.Pot_DropMagnetOrNuclearBombMinimum=10,e.Pot_DropItemHeight=[25,15,8,15,12,5,10,5,5],e.EnemyBuff_CooldownTime_Stun=5,e.EnemyBuff_CooldownTime_MoveSpeedSlow=5,e.EnemyBuff_CooldownTime_MoveSpeedBoost=5,e.EnemyBuff_CooldownTime_Burn=5,e.EnemyBuff_CooldownTime_DamagePointBoost=5,e.EnemyBuff_Burn_PowerRatio=.2,e.EnemyBuff_Burn_AttackInterval=.5,e.RotatingKnife_PlayerMaxKnifeCount=10,e.RotatingKnife_Base_RotateSpeed=240,e.RotatingKnife_Super_RotateSpeed=360,e.RotatingKnife_Super_ThrowFlyingIntarval=.1,e.Lightning_AttackDis=25e4,e.Lightning_FireInterval=.12,e.SixPulseHolySword_FireInterval=.15,e.SummonSword_bulletRotateSpeed=240,e.Long_MoveSpeed=1200,e.Long_MoveDisSqr=81e4,e.LionRoar_StunPro=1e3,e.LionRoar_StunTime=3,e.Frostbolt_MoveSpeedSlowPro=5e3,e.Frostbolt_MoveSpeedSlowTime=5,e.ChargeSpeed=1200,e}();o.Config_Gaming_008=n,cc._RF.pop()},{}],CurrSkillLayer_008:[function(e,t,o){"use strict";cc._RF.push(t,"37057Lr4D9HQJgIb4yiqSoS","CurrSkillLayer_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/GameMag"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=e("../../utils/SkillUtils_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipsNode=null,t.weaponNode=null,t.commonNode=null,t.currLayout=-1,t.currIndex=-1,t}return i(t,e),t.prototype.onLoad=function(){this.tipsNode.active=!1},t.prototype.onEnable=function(){this.tipsNode.active=!1,this.initEvent(),this.onRefreshUI()},t.prototype.onDisable=function(){this.removeEvent()},t.prototype.onRefreshUI=function(){for(var e=l.default.WeaponIdArr,t=l.default.CommonSkillIdArr,o=function(e){var o=n.commonNode.children[e];if(e<t.length){var i=l.default.SkillStateMap.get(t[e]);c.default.isSkillLevelMax(t[e],i)?o.getChildByName("lbl_lv").getComponent(cc.Label).string="MAX":o.getChildByName("lbl_lv").getComponent(cc.Label).string="LV."+i,r.default.getInstance().getSpriteFrame(s.default.getItemIconPath_skill(s.SkillConfigMap.get(t[e]).skillId)).then(function(e){o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=e})}else o.getChildByName("lbl_lv").getComponent(cc.Label).string="",o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=null},n=this,i=0;i<6;i++)o(i);var a=function(t){var o=u.weaponNode.children[t];if(t<e.length){var n=l.default.SkillStateMap.get(e[t]);c.default.isSkillLevelMax(e[t],n)?o.getChildByName("lbl_lv").getComponent(cc.Label).string="MAX":o.getChildByName("lbl_lv").getComponent(cc.Label).string="LV."+n,r.default.getInstance().getSpriteFrame(s.default.getItemIconPath_skill(s.SkillConfigMap.get(e[t]).skillId)).then(function(e){o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=e})}else o.getChildByName("lbl_lv").getComponent(cc.Label).string="",o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=null},u=this;for(i=0;i<6;i++)a(i)},t.prototype.initEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.removeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.onTouchMove=function(e){var t=e.getLocation(),o=-1,n=-1,i=null;if(this.weaponNode.getBoundingBoxToWorld().contains(t)?(i=this.weaponNode,n=1):(i=this.commonNode,n=2),null!==i)for(var a=i.convertToNodeSpaceAR(t),r=0;r<i.childrenCount;r++)if(Math.abs(a.x-i.children[r].getPosition().x)<=50&&Math.abs(a.y-i.children[r].getPosition().y)<=50){o=r;break}-1===o||n==this.currLayout&&o==this.currIndex||this.onShowSkillDesc(i,o)},t.prototype.onShowSkillDesc=function(e,t){var o;if(e===this.weaponNode){if(this.currLayout=1,o=l.default.WeaponIdArr[t],t>=l.default.WeaponIdArr.length)return}else if(this.currLayout=2,o=l.default.CommonSkillIdArr[t],t>=l.default.CommonSkillIdArr.length)return;this.currIndex=t;var n=e.children[t];this.tipsNode.active=!0;var i=s.SkillConfigMap.get(o),a=i.skillName+": ";if(o<200){var r=l.default.SkillStateMap.get(o);a+=i.skillDescArr[r>=5?4:r]}else a+=i.skillDescArr[0];this.tipsNode.getChildByName("lbl_desc").getComponent(cc.Label).string=a;var c=n.getPosition().x;c>185&&(c=185);var u=this.tipsNode.parent.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.v2(0,100))).y;this.tipsNode.setPosition(c,u),this.tipsNode.getChildByName("bottom").setPosition(this.tipsNode.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.Vec2.ZERO)).x,-44.5)},t.prototype.onTouchEnd=function(){this.tipsNode.active=!1,this.currIndex=-1,this.currLayout=-1},a([d(cc.Node)],t.prototype,"tipsNode",void 0),a([d(cc.Node)],t.prototype,"weaponNode",void 0),a([d(cc.Node)],t.prototype,"commonNode",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../mag/GameMag":"GameMag","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../utils/SkillUtils_008":"SkillUtils_008"}],DX_Breath:[function(e,t,o){"use strict";cc._RF.push(t,"1c078x4MzFB1KRAXOdpGGCO","DX_Breath");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.durTime=1.6,t.maxScale=1.1,t.startScale=1,t.isBeTakenOver=!1,t}return i(t,e),t.prototype.onLoad=function(){this.startScale=this.node.scale},t.prototype.onEnable=function(){this.isBeTakenOver||this.play()},t.prototype.onDisable=function(){this.stop()},t.prototype.stop=function(e){void 0===e&&(e=!1),this.isBeTakenOver=e,cc.Tween.stopAllByTarget(this.node)},t.prototype.play=function(){this.isBeTakenOver=!1,cc.tween(this.node).repeatForever(cc.tween().to(this.durTime/2,{scale:this.maxScale*this.startScale}).to(this.durTime/2,{scale:this.startScale})).start()},a([l(cc.Float)],t.prototype,"durTime",void 0),a([l(cc.Float)],t.prototype,"maxScale",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],DX_NodeShow_UpToBottom:[function(e,t,o){"use strict";cc._RF.push(t,"fdb75qqAEBP47Xo8YUf+QhG","DX_NodeShow_UpToBottom");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./CCTween/DX_Breath"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tweenTime=.2,t.intervalTime=.2,t.delayTime=.1,t.nodeArr=[],t}return i(t,e),t.prototype.onEnable=function(){for(var e=0;e<this.nodeArr.length;e++)this.nodeArr[e].scale=0,this.nodeArr[e].getComponent(r.default)&&this.nodeArr[e].getComponent(r.default).stop(!0)},t.prototype.show=function(){var e=this,t=0;this.schedule(function(){var o=t;cc.tween(e.nodeArr[o]).to(e.tweenTime,{scale:1}).call(function(){e.nodeArr[o].getComponent(r.default)&&e.nodeArr[o].getComponent(r.default).play()}).start(),t++},this.intervalTime,this.nodeArr.length-1,this.delayTime)},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},a([c(cc.Float)],t.prototype,"tweenTime",void 0),a([c(cc.Float)],t.prototype,"intervalTime",void 0),a([c(cc.Float)],t.prototype,"delayTime",void 0),a([c([cc.Node])],t.prototype,"nodeArr",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./CCTween/DX_Breath":"DX_Breath"}],DailyGiftDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"0c319JzGitH6Zo1BhsDcG6Y","DailyGiftDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/VideoManager"),l=e("../../Config_008"),c=e("../../DelegateManager_008"),u=e("../../LocalDataManager_008"),p=e("../../entities/Enums_008"),d=e("../../quests/QuestsSys_008"),f=e("./BaseUIDialog_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=h.inspector,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_video=null,t.light=null,t.func_close=null,t}return i(t,e),t.prototype.onInit=function(e,t){this.onInitBg(e),this.func_close=t,cc.Tween.stopAllByTarget(this.light),cc.tween(this.light).repeatForever(cc.tween().by(1,{angle:120})).start()},t.prototype.onInitEvent=function(){this.btn_video.on(cc.Node.EventType.TOUCH_END,this.onTouchVideoBtn,this),this.bg.on(cc.Node.EventType.TOUCH_END,this.onCloseWithFalse,this)},t.prototype.onRemoveEvent=function(){this.btn_video.off(cc.Node.EventType.TOUCH_END,this.onTouchVideoBtn,this),this.bg.off(cc.Node.EventType.TOUCH_END,this.onCloseWithFalse,this)},t.prototype.onTouchVideoBtn=function(){r.default.getInstance().click(),s.default.getInstance().showVideo(this.onGetReward.bind(this))},t.prototype.onGetReward=function(){r.default.getInstance().playSound(l.default.SEF_BOX_OpenGamingBOX);var e=u.default.getInstance().playerData;e.item_addCountById(p.ItemType_008.c_boxKey,20),e.lastDailyGiftTime=Date.now(),u.default.getInstance().onSaveData(),c.default.onRefreshNumKey.executeDelegates(e.item_getCountById(p.ItemType_008.c_boxKey)),c.default.onShowFloatKey.executeDelegates(20),c.default.onQuestProgressIncr.executeDelegates(d.QuestTargetID.EarnKey,20),this.onClose(!0)},t.prototype.onClose=function(e){var t=this;r.default.getInstance().click(),this.onHide(function(){var o;null===(o=t.func_close)||void 0===o||o.call(t,e)})},t.prototype.onCloseWithFalse=function(){this.onClose(!1)},a([y(cc.Node)],t.prototype,"btn_video",void 0),a([y(cc.Node)],t.prototype,"light",void 0),a([_,g("packages://autoproperty//inspector.js")],t)}(f.default);o.default=m,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../quests/QuestsSys_008":"QuestsSys_008","./BaseUIDialog_008":"BaseUIDialog_008"}],DateUtils:[function(e,t,o){"use strict";cc._RF.push(t,"ab46dsvIWNEhLyfSpYkR8+5","DateUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.isBefore=function(e,t){return e.getTime()<t.getTime()},e.isAfter=function(e,t){return e.getTime()>t.getTime()},e.toString=function(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")},e.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},e.getDuration=function(e,t){var o=Math.abs(e.getTime()-t.getTime()),n=Math.floor(o/864e5),i=Math.floor(o%864e5/36e5),a=Math.floor(o%36e5/6e4),r=Math.floor(o%6e4/1e3);return String(24*n+i).padStart(2,"0")+":"+String(a).padStart(2,"0")+":"+String(r).padStart(2,"0")},e.getDurationFromTimestamp=function(e,t){var o=Math.abs(e-t),n=Math.floor(o/864e5),i=Math.floor(o%864e5/36e5),a=Math.floor(o%36e5/6e4),r=Math.floor(o%6e4/1e3);return String(24*n+i).padStart(2,"0")+":"+String(a).padStart(2,"0")+":"+String(r).padStart(2,"0")},e.getDurationFromTimestamp_mmss=function(e,t){var o=Math.abs(e-t),n=Math.floor(o/864e5),i=Math.floor(o%864e5/36e5),a=Math.floor(o%36e5/6e4),r=Math.floor(o%6e4/1e3);return String(60*(24*n+i)+a).padStart(2,"0")+":"+String(r).padStart(2,"0")},e}();o.default=n,cc._RF.pop()},{}],DebugWeapon_008:[function(e,t,o){"use strict";cc._RF.push(t,"0db0e3HD7JG84JP48rX4u8A","DebugWeapon_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("../DelegateManager_008"),l=e("../GamingData_008"),c=e("../playerWeapon/BasePlayerWeapon_008"),u=e("../utils/SkillUtils_008"),p=cc._decorator,d=p.ccclass,f=p.property,h=p.inspector,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_state=null,t.dia=null,t.btn_skill=null,t.btn_clear=null,t}return i(t,e),t.prototype.onLoad=function(){cc.sys.isBrowser?(this.onInitSkillBtn(),this.dia.active=!1):this.node.active=!1},t.prototype.onEnable=function(){this.dia.active=!1,this.btn_state.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_state,this),this.btn_clear.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_clear,this)},t.prototype.onDisable=function(){this.dia.active=!1,this.btn_state.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_state,this),this.btn_clear.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_clear,this)},t.prototype.onInitSkillBtn=function(){var e=[];r.SkillConfigMap.forEach(function(t){e.push(t.skillId)});var t=!1;e=e.sort(function(e,t){return e-t});for(var o=0;o<e.length;o++){var n=e[o];if(!(n<200)){if(n>300&&!t){t=!0;var i=cc.instantiate(this.btn_skill);i.getComponentInChildren(cc.Label).string="---- \u8d85\u6b66\u5206\u5272\u7ebf ----",i.setParent(this.btn_skill.parent),i.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_Divider,this)}var a=r.SkillConfigMap.get(n).skillName,s=cc.instantiate(this.btn_skill);s.getComponentInChildren(cc.Label).string=n+"."+a,s.setParent(this.btn_skill.parent),s.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_skill.bind(this,n))}}this.btn_skill.active=!1},t.prototype.onTouchBtn_skill=function(e){l.default.SkillStateMap.has(e)?u.default.isSkillLevelMax(e,l.default.SkillStateMap.get(e))?s.default.onShowUIFloatText.executeDelegates("\u8be5\u6b66\u5668\u5df2\u6ee1\u7ea7"):(l.default.onSelectSkill(e),s.default.onShowUIFloatText.executeDelegates("\u5347\u7ea7\u6b66\u5668")):l.default.WeaponIdArr.length>=6?s.default.onShowUIFloatText.executeDelegates("\u6b66\u5668\u6570\u91cf\u5df2\u8fbe\u4e0a\u9650"):l.default.onSelectSkill(e)},t.prototype.onTouchBtn_state=function(){this.dia.active?(this.dia.active=!1,l.default.isGamePause=!1,this.btn_state.getComponentInChildren(cc.Label).string="\u6d4b\u8bd5\u6b66\u5668"):(this.dia.active=!0,l.default.isGamePause=!0,this.btn_state.getComponentInChildren(cc.Label).string="\u5173\u95ed\u9875\u9762")},t.prototype.onTouchBtn_clear=function(){var e=[];l.default.SkillStateMap.forEach(function(t,o){o>200&&e.push(o)});for(var t=0;t<e.length;t++)l.default.SkillStateMap.delete(e[t]);l.default.WeaponIdArr=[];var o=l.default.PlayerNode.getComponents(c.default);for(t=0;t<o.length;t++)o[t].onRecovery()},t.prototype.onTouchBtn_Divider=function(){s.default.onShowUIFloatText.executeDelegates("--- \u8fd9\u662f\u4e00\u6761\u5206\u5272\u7ebf ---")},a([f(cc.Node)],t.prototype,"btn_state",void 0),a([f(cc.Node)],t.prototype,"dia",void 0),a([f(cc.Node)],t.prototype,"btn_skill",void 0),a([f(cc.Node)],t.prototype,"btn_clear",void 0),a([d,h("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../GamingData_008":"GamingData_008","../playerWeapon/BasePlayerWeapon_008":"BasePlayerWeapon_008","../utils/SkillUtils_008":"SkillUtils_008"}],DelegateManager_008:[function(e,t,o){"use strict";cc._RF.push(t,"045adTkjyZOg5b9a8pQ4P8F","DelegateManager_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/Delegate"),i=function(){function e(){}return e.onClear=function(){for(var t=Object.keys(e),o=0;o<t.length;o++)e[t[o]]instanceof n.Delegate&&e[t[o]].clear()},e.onShowUIFloatText=new n.Delegate,e.onShowRedPoint=new n.Delegate,e.onHideRedPoint=new n.Delegate,e.onShowUIFloatEnergyReduce=new n.Delegate,e.onRefreshGoldBar=new n.Delegate,e.onRefreshEnergyBar=new n.Delegate,e.onRefreshZiJinYeBar=new n.Delegate,e.onRefreshNumLingQi=new n.Delegate,e.onRefreshNumZhanLing=new n.Delegate,e.onRefreshStartGameBtnUI=new n.Delegate,e.onRefreshNumKey=new n.Delegate,e.onRefreshTotalScoreUI=new n.Delegate,e.onRefreshGongFaUI=new n.Delegate,e.onHideGetEquipmentDia=new n.Delegate,e.onShowDia=new n.Delegate,e.onRemoveDia=new n.Delegate,e.onCloseSomeoneDia=new n.Delegate,e.onTryShowVideoBoxDia=new n.Delegate,e.onRefreshCurrChapter=new n.Delegate,e.onBossRoundClearSomeItem=new n.Delegate,e.onGameSuccShowTeleportBlue=new n.Delegate,e.onScoreChange=new n.Delegate,e.onUnlockSkill=new n.Delegate,e.onShowTouchGuide=new n.Delegate,e.onHideTouchGuide=new n.Delegate,e.onShowFloatKey=new n.Delegate,e.onSetFloatKeyAni=new n.Delegate,e.onQuestProgressIncr=new n.Delegate,e.onQuestComplete=new n.Delegate,e.onReceiveQuestReward=new n.Delegate,e.onRefreshQuests=new n.Delegate,e.onClickQuestGo=new n.Delegate,e.onQuestGoMainUIView=new n.Delegate,e.onHideCurrSkillLayer=new n.Delegate,e.onLearnNewSkill=new n.Delegate,e.onRotatingKnifeResetBulletAngle=new n.Delegate,e.onRotatingKnifeRemoveBullet=new n.Delegate,e.onRotatingKnifePickUpKnife=new n.Delegate,e.onChangeGameCameraOrtho=new n.Delegate,e.test_log=new n.Delegate,e}();o.default=i,window.testLog=function(){i.test_log.executeDelegates()},cc._RF.pop()},{"../../Utils/Delegate":"Delegate"}],Delegate:[function(e,t,o){"use strict";cc._RF.push(t,"b85c5Io+CJAWIg0NUqjYSxZ","Delegate"),Object.defineProperty(o,"__esModule",{value:!0}),o.Delegate=void 0;var n=function(){function e(){this.delegates=new Map}return e.prototype.addDelegate=function(e,t){this.delegates.set(t,e)},e.prototype.removeDelegate=function(e,t){if(t)this.delegates.get(t)===e&&this.delegates.delete(t);else{var o=[];this.delegates.forEach(function(t,n){t===e&&o.push(n)});for(var n=0,i=o;n<i.length;n++){var a=i[n];this.delegates.delete(a)}}},e.prototype.executeDelegates=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.delegates.forEach(function(t,o){t.apply(o,e)})},e.prototype.clear=function(){this.delegates.clear()},e}();o.Delegate=n,cc._RF.pop()},{}],DiaNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"76236tN0JVFAo4G5YIUF2JY","DiaNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../mag/GameMag"),l=e("../Config_008"),c=e("../DelegateManager_008"),u=e("../GamingData_008"),p=e("../LocalDataManager_008"),d=cc._decorator,f=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.diaMap=new Map,t.lastTime=0,t.diaQueue=[],t.diaState=0,t.currDiaPath="",t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){c.default.onShowDia.addDelegate(this.onShowDia,this),c.default.onRemoveDia.addDelegate(this.onRemoveDia,this),c.default.onCloseSomeoneDia.addDelegate(this.onCloseSomeoneDia,this),c.default.onTryShowVideoBoxDia.addDelegate(this.onTryShowVideoBoxDia,this)},t.prototype.onDestroy=function(){c.default.onShowDia.removeDelegate(this.onShowDia,this),c.default.onRemoveDia.removeDelegate(this.onRemoveDia,this),c.default.onCloseSomeoneDia.removeDelegate(this.onCloseSomeoneDia,this),c.default.onTryShowVideoBoxDia.removeDelegate(this.onTryShowVideoBoxDia,this)},t.prototype.onShowDia=function(e){for(var t=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];if(this.lastTime=Date.now(),this.diaState>0&&e!==l.default.UIPath_Dia_Rewards&&this.currDiaPath!==e&&this.onAddDiaToQueue.apply(this,r([e],o)),this.diaState+=1,this.currDiaPath=e,this.diaMap.has(e)&&this.diaMap.get(e)){var i=this.diaMap.get(e);i.setSiblingIndex(i.parent.childrenCount),i.active=!0,i.emit.apply(i,r(["onInit",this.node],o))}else s.default.getInstance().getPrefab(e).then(function(n){if(null!==n&&!t.diaMap.has(e)){var i=cc.instantiate(n);i.setParent(t.node),i.setSiblingIndex(i.parent.childrenCount),i.setPosition(0,0),i.emit.apply(i,r(["onInit",t.node],o)),t.diaMap.set(e,i)}})},t.prototype.onRemoveDia=function(e){this.diaMap.has(e)&&(this.diaMap.get(e).destroy(),this.diaMap.delete(e))},t.prototype.onCloseSomeoneDia=function(){var e=this;this.diaState-=1,this.diaState=Math.max(0,this.diaState),l.default.isOpeningBox||this.scheduleOnce(function(){if(0===e.diaState&&e.diaQueue.length>0){var t=e.diaQueue.shift();e.onShowDia.apply(e,r([t.path],t.args))}},0)},t.prototype.onTryShowVideoBoxDia=function(){if(o.showTime<1)o.showTime+=1;else{var e=!0;Date.now()-this.lastTime<50&&(e=!1),e&&(p.default.getInstance().playerData.guideTimes<1||u.default.isTrialMode||(o.showTime+=1,o.showTime<=6&&o.showTime%2==1||(o.showTime<=6||Math.random()<.5)&&this.onShowDia(l.default.UIPath_Dia_VideoBox)))}},t.prototype.onAddDiaToQueue=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.diaQueue.length>0&&this.diaQueue[this.diaQueue.length-1].path===e?this.diaQueue[this.diaQueue.length-1].args=t:this.diaQueue.push({path:e,args:t})},t.showTime=0,o=a([f],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../../mag/GameMag":"GameMag","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../GamingData_008":"GamingData_008","../LocalDataManager_008":"LocalDataManager_008"}],Dijkstra:[function(e,t,o){"use strict";cc._RF.push(t,"017727OucVNP7y2jcmrDr3t","Dijkstra"),Object.defineProperty(o,"__esModule",{value:!0}),o.Dijkstra=void 0;var n=e("./KeyValuePair"),i=e("./Multimap"),a=e("./Vector2"),r=function(){function e(){}return e.buildRoadmap=function(e,t){for(var o=0;o<t.length;++o){for(var r=0;r<t.length;++r)e.queryVisibility(t[o].position,t[r].position,e.getAgentRadius(0))&&t[o].neighbors.push(r);for(var s=0;s<4;++s)t[o].distToGoal[s]=Number.POSITIVE_INFINITY}for(o=0;o<4;++o){var l=new i.Multimap,c=new i.Multimap;for(t[o].distToGoal[o]=0,c[o]=l.keyValue.push(new n.KeyValuePair(0,o));0!=l.keyValue.length;){var u=l.keyValue[0].Value;for(l.keyValue.shift(),c[u]=l.keyValue[l.keyValue.length-1],r=0;r<t[u].neighbors.length;++r){var p=t[u].neighbors[r],d=a.Vector2.abs(t[p].position.moins(t[u].position));t[p].distToGoal[o]>t[u].distToGoal[o]+d&&(t[p].distToGoal[o]=t[u].distToGoal[o]+d,c[p]==l.keyValue[l.keyValue.length-1]?c[p]=l.keyValue.push(new n.KeyValuePair(t[p].distToGoal[o],p)):l.keyValue.push(new n.KeyValuePair(t[p].distToGoal[o],p)))}}}},e}();o.Dijkstra=r,cc._RF.pop()},{"./KeyValuePair":"KeyValuePair","./Multimap":"Multimap","./Vector2":"Vector2"}],DropItemLight_Yellow_008:[function(e,t,o){"use strict";cc._RF.push(t,"70de3ial0BHHqN6uX5oDyPx","DropItemLight_Yellow_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_sprite_cx=null,t.ani_sprite_xh=null,t.ani_cx="ani_cx",t.ani_xh="ani_xh",t}return i(t,e),t.prototype.onLoad=function(){this.node.on("onShow",this.onShowSpineAni,this)},t.prototype.onDestroy=function(){this.node.off("onShow",this.onShowSpineAni,this)},t.prototype.onEnable=function(){this.ani_sprite_cx.node.opacity=0,this.ani_sprite_cx.node.getComponent(cc.Sprite).spriteFrame=null,this.ani_sprite_xh.node.opacity=0,this.ani_sprite_xh.node.getComponent(cc.Sprite).spriteFrame=null},t.prototype.onDisable=function(){this.unschedule(this.onChangeSpineAni)},t.prototype.onShowSpineAni=function(){this.ani_sprite_cx.play(this.ani_cx),this.scheduleOnce(this.onChangeSpineAni,.3),this.ani_sprite_cx.node.opacity=255},t.prototype.onChangeSpineAni=function(){this.ani_sprite_cx.node.opacity=0,this.ani_sprite_cx.node.getComponent(cc.Sprite).spriteFrame=null,this.ani_sprite_xh.node.opacity=255,this.ani_sprite_xh.play(this.ani_xh)},a([l(cc.Animation)],t.prototype,"ani_sprite_cx",void 0),a([l(cc.Animation)],t.prototype,"ani_sprite_xh",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],DropItemMag_008:[function(e,t,o){"use strict";cc._RF.push(t,"deb93VomSNJbYgVL0rRcGtx","DropItemMag_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../Utils/RandomUtils"),c=e("../../mag/AudioMag"),u=e("../../mag/NodePoolManager"),p=e("./Config_008"),d=e("./DelegateManager_008"),f=e("./EffectMag_008"),h=e("./GamingData_008"),_=e("./dropItem/BaseDropItem_008"),y=e("./dropItem/BoxDropItem_008"),g=cc._decorator,m=g.ccclass,v=(g.property,new cc.Vec2(0,100)),b=new cc.Vec2(0,200),P=new cc.Vec2(0,-100),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currDropItemCount=0,t.dropItemArr=[],t.isOnMagnet=!1,t.magnetTimer=0,t.boxArr=[],t.MagnetIgnoreIdArr=[p.DropItemType.NuclearBomb,p.DropItemType.Magnet,p.DropItemType.Box_1,p.DropItemType.Box_2,p.DropItemType.Box_3],t.currRecordCount=0,t.activationEventMap=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this,this.onInitActivationEvent()},t.prototype.onEnable=function(){d.default.onBossRoundClearSomeItem.addDelegate(this.onBossRoundClearDropItem,this)},t.prototype.onDisable=function(){d.default.onBossRoundClearSomeItem.removeDelegate(this.onBossRoundClearDropItem,this)},t.prototype.onAddExpGemstoneToList=function(e){this.dropItemArr.push(e)},t.prototype.onRecoveryDropItem=function(e){e.onRecovery(),this.currDropItemCount-=1;var t=this.dropItemArr.indexOf(e);-1!==t&&this.dropItemArr.splice(t,1)},t.prototype.onRecoveryBox=function(e){u.default.getInstance().recoveryNode(p.default.Key_Box,e.node);var t=this.boxArr.indexOf(e);-1!==t&&this.boxArr.splice(t,1)},t.prototype.onBossRoundClearDropItem=function(){for(var e=[p.DropItemType.Magnet,p.DropItemType.NuclearBomb,p.DropItemType.Weapon,p.DropItemType.Box_1,p.DropItemType.Box_2,p.DropItemType.Box_3],t=h.default.PlayerNode,o=p.default.DropItemFlyingSpeed_Magnet,n=this.dropItemArr.length-1;n>=0;n--){var i=this.dropItemArr[n],a=i.dropItemId;if(e.includes(a))this.currDropItemCount-=1,this.dropItemArr.splice(n,1),i.onRecovery();else{if(t.getPosition().sub(this.node.getPosition()).magSqr()>o*o){var r=this.node.getPosition().sub(t.getPosition()).normalize(),s=Math.atan2(r.y,r.x);this.node.x=t.getPosition().x+o*Math.cos(s),this.node.y=t.getPosition().y+o*Math.sin(s)}i.onSetFlyTarget(t,o)}}for(n=this.boxArr.length-1;n>=0;n--){var l=this.boxArr[n];this.onRecoveryBox(l)}},t.prototype.lateUpdate=function(e){if(!h.default.isGamePause){for(var t=h.default.PlayerNode,o=h.default.PlayerNode.getPosition(),n=h.default.PlayerMagnetRange,i=this.isOnMagnet?p.default.DropItemFlyingSpeed_Magnet:p.default.DropItemFlyingSpeed,a=this.dropItemArr.length-1;a>=0;a--){var r=this.dropItemArr[a];if(this.isOnMagnet){if(this.MagnetIgnoreIdArr.includes(r.dropItemId))continue;r.onSetFlyTarget(t,i)}else o.sub(r.node.getPosition()).magSqr()<=n&&r.onSetFlyTarget(t,i)}this.magnetTimer>0&&(this.magnetTimer-=e,this.magnetTimer<=0&&(this.isOnMagnet=!1,this.onStopMagnet()))}},t.prototype.onEnemyDropLogic=function(e,t,o,n){var i,a,r=[];n&&this.onBossDropKey(e);for(var s=0;s<t.length;s++)if(l.RandomUtils.getRandomProbability_10000()+h.default.PlayerGamingInfo.lucky<t[s].p&&p.DropItemGroupConfigMap.has(t[s].i)){for(var c=p.DropItemGroupConfigMap.get(t[s].i),u=0,d=0;d<c.itemIdAndWeightArr.length;d++)u+=c.itemIdAndWeightArr[d][1];var f=0,_=l.RandomUtils.getRandomInt(0,u);for(d=0;d<c.itemIdAndWeightArr.length;d++)if(f+=c.itemIdAndWeightArr[d][1],(h.default.isEquipRotatingKnife||c.itemIdAndWeightArr[d][0]!==p.DropItemType.Weapon)&&_<f){for(var y=null!==(a=null===(i=c.itemIdAndWeightArr[d])||void 0===i?void 0:i[2])&&void 0!==a?a:1,g=0;g<y;g++)r.push(c.itemIdAndWeightArr[d][0]);break}}var m=r.length;if(m>1){var v=360/m*Math.PI/180;for(s=0;s<m;s++){var b=s*v,P=e.x+240*Math.cos(b),S=e.y+240*Math.sin(b);this.onDropItem(cc.v2(P,S),r[s])}}else for(s=0;s<m;s++)this.onDropItem(e,r[s])},t.prototype.onBossDropKey=function(e){return r(this,void 0,void 0,function(){var t,o,n,i,a,r,l;return s(this,function(s){switch(s.label){case 0:o=360,n=360/(t=10)*Math.PI/180,i=0,s.label=1;case 1:return i<t?(a=i*n,r=e.x+o*Math.cos(a),l=e.y+o*Math.sin(a),this.onDropItem(cc.v2(r,l),p.DropItemType.AlchemyPullet),[4,this.wait(0)]):[3,4];case 2:if(s.sent(),!h.default.isGaming)return[3,4];s.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.onDropItem=function(e,t){if(p.DropItemConfigMap.has(t)){if(h.default.isTrialMode)return;if(this.currDropItemCount>=p.default.MaxDropItemCount)return;this.currDropItemCount+=1;var o=u.default.getInstance().getNodeNotNull(p.DropItemConfigMap.get(t));if(null!==o){var n=u.default.getInstance().getNodeNotNull(p.default.Key_DropItem);n.setParent(h.default.GameObjNode),n.setPosition(e.add(v));var i=n.getComponent(_.default);cc.tween(n).bezierBy(.5,b,b,P).call(this.onAddExpGemstoneToList.bind(this,i)).start(),i.onInit(t,o,this.onActivation.bind(this)),h.default.isGameWin&&i.onSetFlyTarget(h.default.PlayerNode,p.default.DropItemFlyingSpeed_Magnet)}}else{if(h.default.isTrialMode)return;if(t>=p.DropItemType.Box_1&&t<=p.DropItemType.Box_3){var a=u.default.getInstance().getNodeNotNull(p.default.Key_Box);if(null!==a){a.setParent(h.default.GameObjNode),a.setPosition(e.add(v)),cc.tween(a).bezierBy(.5,b,b,P).start();var r=a.getComponent(y.default);r.onInit(t+1-p.DropItemType.Box_1,this.onRecoveryBox.bind(this,r)),this.boxArr.push(r)}}}},t.prototype.onMagnet=function(){c.default.getInstance().playSound_loop(p.default.SEF_Magnet),h.default.func_onPlayerEFStateChange_Magnet&&h.default.func_onPlayerEFStateChange_Magnet(!0),this.isOnMagnet=!0,this.magnetTimer=p.default.MagnetItemDuration},t.prototype.onStopMagnet=function(){c.default.getInstance().stopSound_loop(p.default.SEF_Magnet),this.isOnMagnet=!1,this.magnetTimer=-1,h.default.func_onPlayerEFStateChange_Magnet&&h.default.func_onPlayerEFStateChange_Magnet(!1)},t.prototype.onStopGame=function(){this.isOnMagnet=!1,this.magnetTimer=-1,this.currRecordCount=0,this.dropItemArr=[],this.boxArr=[],this.currDropItemCount=0},t.prototype.onActivation=function(e,t){this.activationEventMap.has(e)&&this.activationEventMap.get(e)(),this.onRecoveryDropItem(t)},t.prototype.onInitActivationEvent=function(){var e=this;this.activationEventMap=new Map,this.activationEventMap.set(p.DropItemType.ExpGemstone_1,function(){c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp_Expstone,50),h.default.onIncreaseExp(10)}),this.activationEventMap.set(p.DropItemType.ExpGemstone_2,function(){c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp_Expstone,50),h.default.onIncreaseExp(200)}),this.activationEventMap.set(p.DropItemType.ExpGemstone_3,function(){c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp_Expstone,50),h.default.onIncreaseExp(1e3)}),this.activationEventMap.set(p.DropItemType.AlchemyPullet,function(){c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp,50),h.default.onPickUpAlchemyPullet()}),this.activationEventMap.set(p.DropItemType.Magnet,function(){h.default.currPickUpItemCount+=1,c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp,50),e.onMagnet()}),this.activationEventMap.set(p.DropItemType.NuclearBomb,function(){h.default.currPickUpItemCount+=1,c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp,50),f.default.ins.onPlayNuclearBombAni(h.default.PlayerNode.getPosition())}),this.activationEventMap.set(p.DropItemType.Chichen,function(){h.default.currPickUpItemCount+=1,c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp,50),h.default.onEatChichen()}),this.activationEventMap.set(p.DropItemType.Weapon,function(){h.default.currPickUpItemCount+=1,c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp,50),d.default.onRotatingKnifePickUpKnife.executeDelegates()}),this.activationEventMap.set(p.DropItemType.Coin_1,function(){c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp_Coin,50),h.default.onPickUpCoin(5)}),this.activationEventMap.set(p.DropItemType.Coin_2,function(){c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp_Coin,50),h.default.onPickUpCoin(20)}),this.activationEventMap.set(p.DropItemType.Coin_3,function(){c.default.getInstance().playSound_intervalLimit(p.default.SEF_PickUp_Coin,50),h.default.onPickUpCoin(50)})},t.prototype.wait=function(e){var t=this;return new Promise(function(o){t.scheduleOnce(o,e)})},t.ins=null,o=a([m],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../Utils/RandomUtils":"RandomUtils","../../mag/AudioMag":"AudioMag","../../mag/NodePoolManager":"NodePoolManager","./Config_008":"Config_008","./DelegateManager_008":"DelegateManager_008","./EffectMag_008":"EffectMag_008","./GamingData_008":"GamingData_008","./dropItem/BaseDropItem_008":"BaseDropItem_008","./dropItem/BoxDropItem_008":"BoxDropItem_008"}],Dx_BtnToggle:[function(e,t,o){"use strict";cc._RF.push(t,"b11d6u677pIV6qkQVUAw9Sg","Dx_BtnToggle");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sf_checked=null,t.sf_unChecked=null,t.m_sprite=null,t.isChecked=!0,t.m_onClickCB=null,t}return i(t,e),t.prototype.onLoad=function(){this.m_sprite=this.node.getComponent(cc.Sprite),this.m_sprite.spriteFrame=this.sf_checked},t.prototype.start=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.isChecked=!e.isChecked,e.onRefresh(),e.m_onClickCB&&e.m_onClickCB(e.isChecked)},this)},t.prototype.onRefresh=function(){this.m_sprite.spriteFrame=this.isChecked?this.sf_checked:this.sf_unChecked},t.prototype.addListener=function(e){this.m_onClickCB=e},t.prototype.removeAllListener=function(){this.m_onClickCB=null},a([l(cc.SpriteFrame)],t.prototype,"sf_checked",void 0),a([l(cc.SpriteFrame)],t.prototype,"sf_unChecked",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],EF_BackHome_008:[function(e,t,o){"use strict";cc._RF.push(t,"0fe35F2mV9MKpeEDub+TUpd","EF_BackHome_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("../GamingData_008"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAlive=!1,t}return i(t,e),t.prototype.onEnable=function(){var e=this;this.isAlive=!1,this.node.opacity=0,cc.tween(this.node).to(1,{opacity:255}).call(function(){e.isAlive=!0}).start(),this.node.zIndex=cc.macro.MIN_ZINDEX+150,this.node.on(r.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(r.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(){this.node.getPosition().sub(s.default.PlayerNode.getPosition()).magSqr()<=6400&&this.onBackHome()},t.prototype.onBackHome=function(){this.isAlive&&(this.isAlive=!1,s.default.isGamePause=!0,window.isCanCtrl=!0,s.default.func_onShowResultView())},t.prototype.onRecovery=function(){this.node.destroy()},a([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],EF_BossInitPos_008:[function(e,t,o){"use strict";cc._RF.push(t,"e2795jFcQVEPai9Cv/Puh/x","EF_BossInitPos_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=cc._decorator,u=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t.cb=null,t}return i(t,e),t.prototype.onInit=function(e,t){this.timer=e,this.cb=t},t.prototype.update=function(e){l.default.isGamePause||(this.timer-=e,this.timer<=0&&(this.cb&&this.cb(),this.onRecovery()))},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.Key_EF_BossInitPos,this.node)},a([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],EF_EnemyDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"7ac13EpWtJEwag4Tt1uKm89","EF_EnemyDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=["\u554a\u554a\u554a\uff0c\u6211\u8ddf\u4f60\u62fc\u4e86","\u53ef\u6076\uff0c\u6211\u5200\u5462\uff01","\u5996\u50e7\uff0c\u675f\u624b\u5c31\u64d2\u5427\uff01","\u6211\u4e00\u5b9a\u4f1a\u56de\u6765\u7684\uff01","\u597d\u50cf\u6709\u4ec0\u4e48\u8fc7\u53bb\u4e86","\u7d2f\u4e86...\u6bc1\u706d\u5427","\u5144\u5f1f\u4eec\uff0c\u4e0a\u554a","\u6211\u6765\u5e26\u5934\u51b2\u950b","\u6211\u561e\u4e2a\u9017"],h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbl=null,t.followNode=null,t.timer=0,t}return i(t,e),t.prototype.onInit=function(e,t){this.followNode=e,this.offset=t},t.prototype.onEnable=function(){this.node.scale=0,cc.tween(this.node).to(.4,{scale:1.8}).start(),this.lbl.string=f[r.RandomUtils.getRandomFormArray(f)],this.timer=2},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node)},t.prototype.lateUpdate=function(e){c.default.isGamePause||(this.followNode.parent?(this.timer-=e,this.timer<0?this.onRecovery():this.node.setPosition(this.followNode.getPosition().add(this.offset))):this.onRecovery())},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_EF_EnemyDia,this.node)},a([d(cc.Label)],t.prototype,"lbl",void 0),a([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],EF_PickUpWeapon_008:[function(e,t,o){"use strict";cc._RF.push(t,"170b2IMXxhBs7Ieamt2pIvH","EF_PickUpWeapon_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){var e=this;this.node.scale=2,this.node.setPosition(0,400),this.node.getComponent(sp.Skeleton).setAnimation(0,"animation",!0),cc.tween(this.node).delay(1).call(function(){e.onRecovery()}).start()},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.Key_EF_PickUpWeapon,this.node)},a([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008"}],EfNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"7f082NlKcRHjbiE+wyNv9Jm","EfNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Utils/RandomUtils"),c=e("../../../mag/NodePoolManager"),u=e("../Config_008"),p=e("../DelegateManager_008"),d=cc._decorator,f=d.ccclass,h=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){p.default.onShowFloatKey.addDelegate(this.onShowFloatKey,this)},t.prototype.onDestroy=function(){p.default.onShowFloatKey.removeDelegate(this.onShowFloatKey,this)},t.prototype.onShowFloatKey=function(e){return r(this,void 0,void 0,function(){var t,o,n,i=this;return s(this,function(a){switch(a.label){case 0:return[4,c.default.getInstance().onInitNodePool({key:u.default.UIPath_FloatKey,prePath:u.default.UIPath_FloatKey,count:5})];case 1:for(a.sent(),t=function(){var e=c.default.getInstance().getNodeNotNull(u.default.UIPath_FloatKey);if(null!==e){e.setParent(o.node),e.setPosition(0,0);var t,n,a=l.RandomUtils.getRandomBoolean();t=l.RandomUtils.getRandomInt(-160,-100),n=a?l.RandomUtils.getRandomInt(-150,50):l.RandomUtils.getRandomInt(50,150);var r=cc.v2(n/2,t+150),s=cc.v2(n/2,t+120);cc.tween(e).bezierBy(.5,r,s,cc.v2(n,t)).bezierBy(.1,r.mul(.1),s.mul(.1),cc.v2(n,0).mul(.1)).bezierBy(.05,r.mul(.05),s.mul(.05),cc.v2(n,0).mul(.05)).delay(.2+.75*Math.random()).call(function(){i.setFloatKeyAni2(e)}).start()}},o=this,n=0;n<e;n++)t();return[2]}})})},t.prototype.setFloatKeyAni2=function(e){var t=cc.v2(200,100),o=this.node.convertToNodeSpaceAR(t);cc.tween(e).to(.2,{x:o.x,y:o.y}).call(function(){c.default.getInstance().recoveryNode(u.default.UIPath_FloatKey,e)}).start()},a([f],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008"}],EffectMag_008:[function(e,t,o){"use strict";cc._RF.push(t,"429eb+zoVpJ1L4xqTPbtuEJ","EffectMag_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../mag/GameMag"),s=e("../../mag/NodePoolManager"),l=e("./Config_008"),c=e("./DelegateManager_008"),u=e("./GamingData_008"),p=e("./effect/EF_BossInitPos_008"),d=e("./effect/EF_EnemyDia_008"),f=e("./misc/AniEffectNode_008"),h=e("./misc/EffectNode_008"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.effectNode_low=null,t.effectNode_high=null,t.effectNode_dia=null,t.effectNode_stun=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this,c.default.onGameSuccShowTeleportBlue.addDelegate(this.onShowTeleportBlue,this)},t.prototype.onDestroy=function(){c.default.onGameSuccShowTeleportBlue.removeDelegate(this.onShowTeleportBlue,this)},t.prototype.start=function(){},t.prototype.onPlaySparkAni=function(e){var t=s.default.getInstance().getNode(l.default.Key_EF_Spark);null!==t&&(t.setParent(this.effectNode_high),t.setPosition(this.node.convertToNodeSpaceAR(e)),t.getComponent(h.default).onInit(this.onRecoveryNode.bind(this,l.default.Key_EF_Spark,t)))},t.prototype.onPlayNuclearBombAni=function(){var e=s.default.getInstance().getNodeNotNull(l.default.Key_EF_NuclearBomb);if(null!==e){e.setParent(this.effectNode_high);var t=cc.find("Canvas");e.setPosition(this.effectNode_high.convertToNodeSpaceAR(cc.v2(t.width/2,t.height/2)))}},t.prototype.onPlayEnemyDieEffect=function(e,t,o){var n=s.default.getInstance().getNodeNotNull(l.default.Key_EF_EnemyDie);null!==n&&(n.setParent(this.effectNode_high),n.setPosition(e),n.getComponent(f.default).onInit(this.onRecoveryNode.bind(this,l.default.Key_EF_EnemyDie,n)),cc.tween(n).by(o,{x:t.x,y:t.y}).start())},t.prototype.getRunRoute=function(){var e=s.default.getInstance().getNodeNotNull(l.default.Key_EF_RunRoute);return null!==e&&(e.setParent(u.default.GameObjNode),e.zIndex=cc.macro.MIN_ZINDEX+50),e},t.prototype.onTryShowEnemyDia=function(e,t){if(!(Math.random()>.5)){var o=s.default.getInstance().getNode(l.default.Key_EF_EnemyDia);null!==o&&(o.setParent(this.effectNode_dia),o.setPosition(e.getPosition().add(t)),o.getComponent(d.default).onInit(e,t))}},t.prototype.onShowBossInitPos=function(e,t,o){var n=s.default.getInstance().getNodeNotNull(l.default.Key_EF_BossInitPos);null!==n?(n.setParent(u.default.GameObjNode),n.setPosition(e),n.zIndex=cc.macro.MIN_ZINDEX+200,n.getComponent(p.default).onInit(t,o)):o&&o()},t.prototype.onShowTeleportBlue=function(e){var t=this;r.default.getInstance().getPrefab(l.default.Path_TeleportBlue).then(function(o){if(null!==o){var n=cc.instantiate(o);n.setParent(u.default.GameObjNode),n.setPosition(e),n.zIndex=cc.macro.MIN_ZINDEX+200}else t.scheduleOnce(function(){u.default.func_onShowResultView()},3)})},t.prototype.onRecoveryNode=function(e,t){s.default.getInstance().recoveryNode(e,t)},t.ins=null,a([g(cc.Node)],t.prototype,"effectNode_low",void 0),a([g(cc.Node)],t.prototype,"effectNode_high",void 0),a([g(cc.Node)],t.prototype,"effectNode_dia",void 0),a([g(cc.Node)],t.prototype,"effectNode_stun",void 0),o=a([y],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../mag/GameMag":"GameMag","../../mag/NodePoolManager":"NodePoolManager","./Config_008":"Config_008","./DelegateManager_008":"DelegateManager_008","./GamingData_008":"GamingData_008","./effect/EF_BossInitPos_008":"EF_BossInitPos_008","./effect/EF_EnemyDia_008":"EF_EnemyDia_008","./misc/AniEffectNode_008":"AniEffectNode_008","./misc/EffectNode_008":"EffectNode_008"}],EffectNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"c331d44vdZGKo9c8PBWJ5vC","EffectNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=cc._decorator,l=s.ccclass,c=s.property,u=s.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.duration=.5,t}return i(t,e),t.prototype.onInit=function(e){this.spine.setAnimation(0,this.spine.animation,!1),this.scheduleOnce(e,this.duration)},t.prototype.onInitByNodePoolKey=function(e){this.spine.setAnimation(0,this.spine.animation,!1),this.scheduleOnce(this.onRecovery.bind(this,e),this.duration)},t.prototype.onRecovery=function(e){r.default.getInstance().recoveryNode(e,this.node)},a([c(sp.Skeleton)],t.prototype,"spine",void 0),a([c(cc.Float)],t.prototype,"duration",void 0),a([l,u("008/SpineEffectNode")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager"}],EnemyBuff_Burn_008:[function(e,t,o){"use strict";cc._RF.push(t,"233ed6uvdBBJYyQznKVffIp","EnemyBuff_Burn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("./BaseEnemyBuff_008"),l=cc._decorator,c=l.ccclass,u=(l.property,new cc.Color(255,87,0)),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buffId=5,t.efNodeKey=r.default.Key_EnemyBuff_Burn,t.power=10,t.damageInterval=1,t.damageTimer=0,t}return i(t,e),t.prototype.onInit=function(e,t){this.isAlive=!0,this.baseEnemyTs=e,this.timer=t[0],this.cooldownTime=t[1],this.power=t[2],this.damageInterval=t[3],this.onBuffStart(),this.onLoadEffectNode(),this.damageTimer=0},t.prototype.onBuffStart=function(){},t.prototype.onBuffUpdate=function(e){this.damageTimer+=e,this.damageTimer>=this.damageInterval&&(this.damageTimer-=this.damageInterval,this.onAttackEnemy())},t.prototype.onAttackEnemy=function(){this.baseEnemyTs.node.emit(r.default.e_OnEnemyAttacked,this.power,1,!1,u)},t.prototype.onBuffEnd=function(){},t.prototype.onInitEffectNode=function(){this.efNode.setParent(this.baseEnemyTs.actNode),this.efNode.setPosition(this.baseEnemyTs.prefabData.bBNPX,this.baseEnemyTs.prefabData.bBNPY),this.efNode.scale=this.baseEnemyTs.prefabData.bBNS},a([c],t)}(s.default);o.default=p,cc._RF.pop()},{"../Config_008":"Config_008","./BaseEnemyBuff_008":"BaseEnemyBuff_008"}],EnemyBuff_DamagePointUp_008:[function(e,t,o){"use strict";cc._RF.push(t,"46394PAMjBFnqwdqnLF6PHV","EnemyBuff_DamagePointUp_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("./BaseEnemyBuff_008"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buffId=3,t.efNodeKey=r.default.Key_EnemyBuff_DamagePointUp,t.addValue=0,t.addValue_range=0,t}return i(t,e),t.prototype.onBuffStart=function(){this.addValue=this.baseEnemyTs.damagePoint,this.addValue_range=this.baseEnemyTs.damagePoint_range,this.baseEnemyTs.damagePoint+=this.addValue,this.baseEnemyTs.damagePoint_range+=this.addValue_range},t.prototype.onBuffUpdate=function(){},t.prototype.onBuffEnd=function(){this.baseEnemyTs.damagePoint-=this.addValue,this.baseEnemyTs.damagePoint_range-=this.addValue_range},t.prototype.onInitEffectNode=function(){this.efNode.setParent(this.baseEnemyTs.node),this.efNode.setPosition(this.baseEnemyTs.prefabData.fBNPX,this.baseEnemyTs.prefabData.fBNPY),this.efNode.scale=this.baseEnemyTs.prefabData.fBNS,this.efNode.setSiblingIndex(0)},a([c],t)}(s.default));o.default=u,cc._RF.pop()},{"../Config_008":"Config_008","./BaseEnemyBuff_008":"BaseEnemyBuff_008"}],EnemyBuff_MoveSpeedBoost_008:[function(e,t,o){"use strict";cc._RF.push(t,"6b09bsR23dFMp5ws5cfMRqG","EnemyBuff_MoveSpeedBoost_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("./BaseEnemyBuff_008"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buffId=1,t.efNodeKey=r.default.Key_EnemyBuff_MoveSpeedBoost,t}return i(t,e),t.prototype.onBuffStart=function(){this.baseEnemyTs.movementTs.moveSpeedRatio*=2},t.prototype.onBuffUpdate=function(){},t.prototype.onBuffEnd=function(){this.baseEnemyTs.movementTs.moveSpeedRatio*=.5},t.prototype.onInitEffectNode=function(){this.efNode.setParent(this.baseEnemyTs.node),this.efNode.setPosition(this.baseEnemyTs.prefabData.fBNPX,this.baseEnemyTs.prefabData.fBNPY),this.efNode.scale=this.baseEnemyTs.prefabData.fBNS,this.efNode.setSiblingIndex(0)},a([c],t)}(s.default));o.default=u,cc._RF.pop()},{"../Config_008":"Config_008","./BaseEnemyBuff_008":"BaseEnemyBuff_008"}],EnemyBuff_MoveSpeedSlow_008:[function(e,t,o){"use strict";cc._RF.push(t,"f0c35t8vdNNrZpjWNNTFCN1","EnemyBuff_MoveSpeedSlow_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("./BaseEnemyBuff_008"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buffId=4,t.efNodeKey=r.default.Key_EnemyBuff_MoveSpeedSlow,t}return i(t,e),t.prototype.onBuffStart=function(){this.baseEnemyTs.movementTs.moveSpeedRatio*=.5},t.prototype.onBuffUpdate=function(){},t.prototype.onBuffEnd=function(){this.baseEnemyTs.movementTs.moveSpeedRatio*=2},t.prototype.onInitEffectNode=function(){this.efNode.setParent(this.baseEnemyTs.actNode),this.efNode.setPosition(this.baseEnemyTs.prefabData.bBNPX,this.baseEnemyTs.prefabData.bBNPY),this.efNode.scale=this.baseEnemyTs.prefabData.bBNS},a([c],t)}(s.default));o.default=u,cc._RF.pop()},{"../Config_008":"Config_008","./BaseEnemyBuff_008":"BaseEnemyBuff_008"}],EnemyBuff_Stun_008:[function(e,t,o){"use strict";cc._RF.push(t,"8f886GdpXVCgpxEad/hq1Vc","EnemyBuff_Stun_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("../EffectMag_008"),l=e("./BaseEnemyBuff_008"),c=cc._decorator,u=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buffId=2,t.efNodeKey=r.default.Key_EnemyBuff_Stun,t}return i(t,e),t.prototype.onBuffStart=function(){this.baseEnemyTs.movementTs.changeStopMoveState(1)},t.prototype.onBuffUpdate=function(){this.onRefreshPos()},t.prototype.onBuffEnd=function(){this.baseEnemyTs.movementTs.changeStopMoveState(-1)},t.prototype.onInitEffectNode=function(){this.efNodePosOffset=cc.v2(this.baseEnemyTs.prefabData.stunNPX,this.baseEnemyTs.prefabData.stunNPY),this.efNode.setParent(s.default.ins.effectNode_stun),this.efNode.scale=this.baseEnemyTs.prefabData.stunNS,this.onRefreshPos()},t.prototype.onRefreshPos=function(){if(this.efNode){var e=this.baseEnemyTs.actNode.convertToWorldSpaceAR(this.efNodePosOffset);this.efNode.setPosition(s.default.ins.effectNode_stun.convertToNodeSpaceAR(e))}},a([u],t)}(l.default));o.default=p,cc._RF.pop()},{"../Config_008":"Config_008","../EffectMag_008":"EffectMag_008","./BaseEnemyBuff_008":"BaseEnemyBuff_008"}],EnemyBullet_Explosion_008:[function(e,t,o){"use strict";cc._RF.push(t,"fefc708rhdGlLruyZfHQUjL","EnemyBullet_Explosion_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.circleCollider=null,t.actNode=null,t.tipsNode=null,t.bulletNode=null,t.state=0,t.timer=0,t}return i(t,e),t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onInit=function(e,t){this.isAlive=!0,this.power=e,this.prefabKey=t,this.circleCollider.enabled=!1,this.state=0,this.timer=.8;var o=this.tipsNode.convertToWorldSpaceAR(cc.Vec2.ZERO);this.tipsNode.removeFromParent(),this.tipsNode.setParent(l.default.GameObjNode),this.tipsNode.setPosition(l.default.GameObjNode.convertToNodeSpaceAR(o)),this.tipsNode.zIndex=cc.macro.MIN_ZINDEX+50,this.bulletNode.scale=2},t.prototype.update=function(e){l.default.isGamePause||(0===this.state?(this.timer-=e,this.bulletNode.scale=this.lerp(2,.8,1-this.timer/.8),this.timer<=0&&(this.state=1,this.timer=.12,this.circleCollider.enabled=!0)):1===this.state&&(this.bulletNode.scale=this.lerp(.8,5,1-this.timer/.12),this.timer-=e,this.timer<=0&&this.onRecovery()))},t.prototype.onCollisionEnter=function(e){this.isAlive&&e.node.group===s.default.STR_NodeGroup_Player&&l.default.onAttackPlayer(!0,this.power,!1)},t.prototype.onRecovery=function(){this.isAlive&&(this.isAlive=!1,this.circleCollider.enabled=!1,this.tipsNode.removeFromParent(),this.tipsNode.setParent(this.actNode),this.tipsNode.setPosition(0,0),r.default.getInstance().recoveryNode(this.prefabKey,this.node))},t.prototype.lerp=function(e,t,o){return e+(t-e)*o},a([p(cc.CircleCollider)],t.prototype,"circleCollider",void 0),a([p(cc.Node)],t.prototype,"actNode",void 0),a([p(cc.Node)],t.prototype,"tipsNode",void 0),a([p(cc.Node)],t.prototype,"bulletNode",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],EnemyBullet_KnifeColliderNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"544a1iD2oRGiLUU4YCqvc/F","EnemyBullet_KnifeColliderNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../DelegateManager_008"),u=e("../EffectMag_008"),p=e("../GamingData_008"),d=e("../playerBullet/FlyingKnife_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.circleCollider=null,t.weaponTs=null,t.power=0,t.func_removeSelfKnife=null,t.enemyNode=null,t.cooldownKnifeArr=[],t}return i(t,e),t.prototype.onInit=function(e,t,o,n){this.weaponTs=e,this.enemyNode=t,this.power=o,this.func_removeSelfKnife=n,this.circleCollider.enabled=!0},t.prototype.onEnable=function(){this.node.on(l.default.e_OnChangeEnemyKnifeColliderNodeState,this.onChangeColliderState,this),this.cooldownKnifeArr=[]},t.prototype.onDisable=function(){this.node.off(l.default.e_OnChangeEnemyKnifeColliderNodeState,this.onChangeColliderState,this)},t.prototype.onChangeColliderState=function(e){this.circleCollider.enabled=e},t.prototype.onCollisionStay=function(e){if(e.node.group===l.default.STR_NodeGroup_PlayerBullet&&1===e.tag){if(!e.node.parent)return;this.checkCollisionPlayerKnife(e.node)}else e.node.group===l.default.STR_NodeGroup_Player&&e instanceof cc.CircleCollider&&this.checkCollisionPlayer(e)},t.prototype.onCollisionExit=function(e){e.node.group===l.default.STR_NodeGroup_Player&&(this.cooldownKnifeArr=[])},t.prototype.checkCollisionPlayerKnife=function(e){if(!p.default.isGamePause)for(var t=e.getPosition(),o=cc.misc.degreesToRadians(e.angle),n=cc.v2(e.getPosition().x+375*Math.cos(o),e.getPosition().y+375*Math.sin(o)),i=this.enemyNode.getPosition(),a=0;a<this.weaponTs.knifeArr.length;a++){var r=cc.misc.degreesToRadians(this.weaponTs.knifeArr[a].angle),s=cc.v2(i.x+360*Math.cos(r),i.y+360*Math.sin(r));if(this.lineSegmentIntersenctionLineSegment(t,n,i,s)){this.onHitPlayerKnife(e,this.weaponTs.knifeArr[a]);break}}},t.prototype.lineSegmentIntersenctionLineSegment=function(e,t,o,n){var i=(e.x-t.x)*(o.y-n.y)-(e.y-t.y)*(o.x-n.x);if(0===i)return!1;var a=((e.x-o.x)*(o.y-n.y)-(e.y-o.y)*(o.x-n.x))/i,r=-((e.x-t.x)*(e.y-o.y)-(e.y-t.y)*(e.x-o.x))/i;return a>=0&&a<=1&&r>=0&&r<=1},t.prototype.checkCollisionPlayer=function(e){if(!p.default.isGamePause)for(var t=e.node,o=t.getPosition().add(cc.v2(e.offset.x*t.scaleX,e.offset.y*t.scaleY)),n=e.radius*t.scale,i=this.enemyNode.getPosition(),a=0;a<this.weaponTs.knifeArr.length;a++){var r=this.weaponTs.knifeArr[a],s=this.cooldownKnifeArr.indexOf(r),l=cc.misc.degreesToRadians(r.angle),c=cc.v2(i.x+360*Math.cos(l),i.y+360*Math.sin(l));this.isSegmentIntersectCircle(i,c,o,n)?-1===s&&(p.default.onAttackPlayer(!0,this.power,!1),this.cooldownKnifeArr.push(r)):-1!==s&&this.cooldownKnifeArr.splice(s,1)}},t.prototype.isSegmentIntersectCircle=function(e,t,o,n){var i=e.sub(o).magSqr(),a=t.sub(o).magSqr(),r=n*n;if(i<=r||a<=r)return!0;var s=e.sub(t).magSqr(),l=((o.x-e.x)*(t.x-e.x)+(o.y-e.y)*(t.y-e.y))/s;return cc.v2(e.x+l*(t.x-e.x),e.y+l*(t.y-e.y)).sub(o).magSqr()<=r},t.prototype.onHitPlayerKnife=function(e,t){r.default.getInstance().playSound(l.default.SEF_WWHit),u.default.ins.onPlaySparkAni(e.convertToWorldSpaceAR(l.default.KnifeSparkEffectOffset)),this.onFireFlyingKnife(t),this.onRemoveSelfKnife(t),c.default.onRotatingKnifeRemoveBullet.executeDelegates(e)},t.prototype.onFireFlyingKnife=function(e){var t=s.default.getInstance().getNodeNotNull(l.default.Key_FlyingKnife);null!==t&&(t.opacity=0,t.setParent(p.default.GameObjNode),t.getComponent(d.default).onInit(e.getChildByName("sprite"),this.power,3))},t.prototype.onRemoveSelfKnife=function(e){this.func_removeSelfKnife&&this.func_removeSelfKnife(e)},a([_(cc.CircleCollider)],t.prototype,"circleCollider",void 0),a([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../EffectMag_008":"EffectMag_008","../GamingData_008":"GamingData_008","../playerBullet/FlyingKnife_008":"FlyingKnife_008"}],EnemyBullet_RangeAttack2_Circle_008:[function(e,t,o){"use strict";cc._RF.push(t,"ba86960S3dGbJnhSXO0mtIe","EnemyBullet_RangeAttack2_Circle_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../Utils/MathUtils"),c=e("../../../../Utils/RandomUtils"),u=e("../../../../mag/NodePoolManager"),p=e("../../Config_008"),d=e("../../GamingData_008"),f=e("./EnemyBullet_RangeAttack2_Obj_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.rotatingSpeed=-120,t.tips=null,t.state=0,t.timer=0,t}return i(t,e),t.prototype.onInit=function(e,t,o){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return this.power=e,this.preKey=o,this.state=-1,this.tips.scale=0,this.bulletKeyPath=this.preKey+"_obj",u.default.getInstance().isHasNodePool(this.bulletKeyPath)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:this.bulletKeyPath,prePath:this.bulletKeyPath,count:3})];case 1:n.sent(),n.label=2;case 2:return this.state=0,this.timer=t,this.waitTime=t,[2]}})})},t.prototype.onEnable=function(){this.node.on(p.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(p.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){d.default.isGamePause||(this.timer-=e,this.sprite.angle+=this.rotatingSpeed*e,0===this.state?(this.tips.scale=l.default.lerp(0,1,Math.min(1-this.timer/this.waitTime,1)),this.timer<=0&&(this.tips.scale=0,this.onFire())):1===this.state&&this.timer<=0&&this.onFire())},t.prototype.onFire=function(){this.state=1,this.timer=.035;var e=u.default.getInstance().getNodeNotNull(this.bulletKeyPath);if(null!==e){e.setParent(d.default.enemyBulletNode_middle);var t=this.getBulletInitPos(),o=this.getBulletMoveDir(t),n=this.node.getPosition(),i=l.default.closestPointOnLine(t,o,n);e.setPosition(i),e.angle=cc.misc.radiansToDegrees(Math.atan2(o.y,o.x));var a=2*i.sub(t).mag()/e.scaleX;e.getComponent(f.default).onInit(this.power,a,this.bulletKeyPath)}},t.prototype.getBulletInitPos=function(){var e=this.node.width/2-50,t=this.node.getPosition(),o=c.RandomUtils.getRandomRadians();return cc.v2(t.x+e*Math.cos(o),t.y+e*Math.sin(o))},t.prototype.getBulletMoveDir=function(e){var t=this.node.getPosition().sub(e).normalize();return cc.v2(t).rotate(1.5*Math.random()-.75).normalize()},t.prototype.onRecovery=function(){this.sprite.angle=0,u.default.getInstance().recoveryNode(this.preKey,this.node)},a([y(cc.Node)],t.prototype,"sprite",void 0),a([y(cc.Float)],t.prototype,"rotatingSpeed",void 0),a([y(cc.Node)],t.prototype,"tips",void 0),a([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../../Utils/MathUtils":"MathUtils","../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","./EnemyBullet_RangeAttack2_Obj_008":"EnemyBullet_RangeAttack2_Obj_008"}],EnemyBullet_RangeAttack2_Obj_008:[function(e,t,o){"use strict";cc._RF.push(t,"1506aIPnWpJpLckAggC+owT","EnemyBullet_RangeAttack2_Obj_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collider=null,t.effectNode=null,t.effectAniName="hen",t.effectAnimDuration=.33,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.power=e,this.preKeyPath=o,this.collider.size.width=t,this.timer=this.effectAnimDuration;var n=this.effectNode.getComponent(sp.Skeleton);if(n)n.setAnimation(0,this.effectAniName,!1);else{var i=this.effectNode.getComponent(cc.Animation);i&&i.play()}},t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){l.default.isGamePause||(this.timer-=e,this.timer<=0&&this.onRecovery())},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Player&&l.default.onAttackPlayer(!1,this.power,!1)},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(this.preKeyPath,this.node)},a([p(cc.BoxCollider)],t.prototype,"collider",void 0),a([p(cc.Node)],t.prototype,"effectNode",void 0),a([p(cc.String)],t.prototype,"effectAniName",void 0),a([p(cc.Float)],t.prototype,"effectAnimDuration",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],EnemyBullet_RangeAttack_008:[function(e,t,o){"use strict";cc._RF.push(t,"cd8dagv2iJMQ5mXo8PETr8c","EnemyBullet_RangeAttack_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/MathUtils"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fill=null,t.tips=null,t.efNode=null,t.collider=null,t.activeTime=1.03,t.state=0,t.timer=0,t}return i(t,e),t.prototype.onInit=function(e,t,o,n){this.power=e,this.fillTime=o,this.preKey=n,this.tips.opacity=255,this.fill.opacity=255,this.fill.scale=0,this.collider.enabled=!1,this.efNode.active=!1,this.state=0,this.timer=t},t.prototype.update=function(e){c.default.isGamePause||(0===this.state?(this.timer-=e,this.timer<=0&&(this.state=1,this.timer=0)):1===this.state?(this.timer+=e,this.fill.scale=r.default.lerp(0,1,Math.min(this.timer/this.fillTime,1)),this.timer>=this.fillTime&&this.onAwake()):2===this.state&&(this.timer-=e,this.timer<=0&&this.onRecovery()))},t.prototype.onAwake=function(){this.state=2,this.timer=this.activeTime,this.tips.opacity=0,this.fill.opacity=0,this.efNode.active=!0,this.collider.enabled=!0},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Player&&c.default.onAttackPlayer(!1,this.power,!1)},t.prototype.onRecovery=function(){this.efNode.active=!1,s.default.getInstance().recoveryNode(this.preKey,this.node)},a([d(cc.Node)],t.prototype,"fill",void 0),a([d(cc.Node)],t.prototype,"tips",void 0),a([d(cc.Node)],t.prototype,"efNode",void 0),a([d(cc.CircleCollider)],t.prototype,"collider",void 0),a([d(cc.Float)],t.prototype,"activeTime",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../Utils/MathUtils":"MathUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],EnemyBullet_RangeFall_008:[function(e,t,o){"use strict";cc._RF.push(t,"1ed25GDaJFIsr8Nyy0zAnhS","EnemyBullet_RangeFall_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.circleCollider=null,t.actNode=null,t.tipsNode=null,t.bulletNode=null,t.state=0,t.timer=0,t}return i(t,e),t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onInit=function(e,t){this.isAlive=!0,this.power=e,this.prefabKey=t,this.circleCollider.enabled=!1,this.state=0,this.timer=.5;var o=this.tipsNode.convertToWorldSpaceAR(cc.Vec2.ZERO);this.tipsNode.removeFromParent(),this.tipsNode.setParent(l.default.GameObjNode),this.tipsNode.setPosition(l.default.GameObjNode.convertToNodeSpaceAR(o)),this.tipsNode.zIndex=cc.macro.MIN_ZINDEX+50,this.bulletNode.opacity=0,this.bulletNode.scale=.2,this.bulletNode.y=800},t.prototype.update=function(e){l.default.isGamePause||(0===this.state?(this.timer-=e,this.timer<=0&&(this.state=1,this.bulletNode.opacity=255,this.timer=.5)):1===this.state?(this.bulletNode.y=this.lerp(800,0,1-this.timer/.5),this.timer-=e,this.timer<=0&&(this.state=2,this.bulletNode.y=0,this.circleCollider.enabled=!0,this.timer=.12)):2===this.state&&(this.timer-=e,this.bulletNode.scale=this.lerp(.2,1.2,1-this.timer/.12),this.timer<=0&&this.onRecovery()))},t.prototype.onCollisionEnter=function(e){this.isAlive&&e.node.group===s.default.STR_NodeGroup_Player&&l.default.onAttackPlayer(!1,this.power,!1)},t.prototype.onRecovery=function(){this.isAlive&&(this.isAlive=!1,this.circleCollider.enabled=!1,this.tipsNode.removeFromParent(),this.tipsNode.setParent(this.actNode),this.tipsNode.setPosition(0,0),r.default.getInstance().recoveryNode(this.prefabKey,this.node))},t.prototype.lerp=function(e,t,o){return e+(t-e)*o},a([p(cc.CircleCollider)],t.prototype,"circleCollider",void 0),a([p(cc.Node)],t.prototype,"actNode",void 0),a([p(cc.Node)],t.prototype,"tipsNode",void 0),a([p(cc.Node)],t.prototype,"bulletNode",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],EnemyBullet_RangeLinear_008:[function(e,t,o){"use strict";cc._RF.push(t,"872a4SzNlBLJKb/8hLHZEwz","EnemyBullet_RangeLinear_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveSpeed=400,t}return i(t,e),t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onInit=function(e,t,o,n){this.isAlive=!0,this.moveDir=e,this.power=t,this.life=o,this.prefabKey=n,this.node.angle=cc.misc.radiansToDegrees(Math.atan2(e.y,e.x))},t.prototype.update=function(e){l.default.isGamePause||(this.life-=e,this.life<=0?this.onRecovery():(this.node.x+=this.moveDir.x*this.moveSpeed*e,this.node.y+=this.moveDir.y*this.moveSpeed*e))},t.prototype.onCollisionEnter=function(e){this.isAlive&&e.node.group===s.default.STR_NodeGroup_Player&&l.default.onAttackPlayer(!1,this.power,!1)},t.prototype.onRecovery=function(){this.isAlive&&(this.isAlive=!1,r.default.getInstance().recoveryNode(this.prefabKey,this.node))},a([p(cc.Float)],t.prototype,"moveSpeed",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],EnemyBullet_RangeLinear_Route_008:[function(e,t,o){"use strict";cc._RF.push(t,"d29e2J+7XFGFLqI83NOkaxM","EnemyBullet_RangeLinear_Route_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveSpeed=600,t.route=null,t.circleCollider=null,t.count=0,t}var o;return i(t,e),o=t,t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.on(s.default.e_OnBulletAwake,this.onAwake,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.off(s.default.e_OnBulletAwake,this.onAwake,this)},t.prototype.onInit=function(e,t,o,n,i,a){void 0===a&&(a=0),this.isAlive=!0,this.delayTime=e,this.moveDir=t,this.power=o,this.life=n,this.bulletPrefabPath=i,this.count=a,this.circleCollider.enabled=!1,this.node.opacity=0,this.node.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.route.setParent(l.default.GameObjNode),this.route.setPosition(this.node.getPosition()),this.route.zIndex=cc.macro.MIN_ZINDEX+50,this.route.angle=this.node.angle,this.route.width=n*this.moveSpeed,this.route.opacity=255},t.prototype.update=function(e){l.default.isGamePause||(this.delayTime>0?(this.delayTime-=e,this.delayTime<0&&this.onAwake()):(this.life-=e,this.life<0?this.onRecovery():(this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed)))},t.prototype.onAwake=function(){this.delayTime=-1,this.circleCollider.enabled=!0,this.node.opacity=255,this.route.opacity=0,this.count>0&&this.onFireNext()},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Player&&l.default.onAttackPlayer(!1,this.power,!1)},t.prototype.onFireNext=function(){var e=r.default.getInstance().getNodeNotNull(this.bulletPrefabPath);if(null!==e){e.setParent(l.default.enemyBulletNode_middle),e.setPosition(this.node.getPosition());var t=this.moveDir;e.getComponent(o).onInit(.2,t,this.power,this.life,this.bulletPrefabPath,--this.count)}},t.prototype.onRecovery=function(){this.isAlive&&(this.isAlive=!1,this.route.setParent(this.node),r.default.getInstance().recoveryNode(this.bulletPrefabPath,this.node))},a([p(cc.Float)],t.prototype,"moveSpeed",void 0),a([p(cc.Node)],t.prototype,"route",void 0),a([p(cc.CircleCollider)],t.prototype,"circleCollider",void 0),o=a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],EnemyBullet_RotatingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"22104D3TWFDjpdvCse0AX5P","EnemyBullet_RotatingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../DelegateManager_008"),u=e("../EffectMag_008"),p=e("../GamingData_008"),d=e("../playerBullet/FlyingKnife_008"),f=e("../utils/ZIndexUtils_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.indexOffset=420,t.bulletRotateSpeed=180,t.power=20,t.isAlive=!1,t.func_removeSelf=null,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.func_removeSelf=e,this.isAlive=!0,this.bulletRotateSpeed=t,this.power=o},t.prototype.lateUpdate=function(e){this.node.opacity=p.default.RenderRect.contains(this.node.getPosition())?255:0;var t=this.node.getPosition().y+(this.node.angle%360>180?this.indexOffset:0);this.node.zIndex=f.default.getFormatZIndex_centerPosY(t,p.default.PlayerNode.y),p.default.isGamePause||(this.node.angle+=e*this.bulletRotateSpeed)},t.prototype.onRemoveSelf=function(){this.isAlive=!1,this.func_removeSelf&&this.func_removeSelf()},t.prototype.onFireFlyingKnife=function(){var e=s.default.getInstance().getNodeNotNull(l.default.Key_FlyingKnife);null!==e&&(e.opacity=0,e.setParent(p.default.GameObjNode),e.getComponent(d.default).onInit(this.node.getChildByName("sprite"),this.power,3))},t.prototype.onCollisionEnter=function(e){if(this.isAlive)if(e.node.group===l.default.STR_NodeGroup_PlayerBullet&&1===e.tag){if(!e.node.parent)return;r.default.getInstance().playSound(l.default.SEF_WWHit),u.default.ins.onPlaySparkAni(e.node.convertToWorldSpaceAR(l.default.KnifeSparkEffectOffset)),this.onFireFlyingKnife(),this.onRemoveSelf(),c.default.onRotatingKnifeRemoveBullet.executeDelegates(e.node)}else e.node.group===l.default.STR_NodeGroup_Player&&p.default.onAttackPlayer(!0,this.power,!1)},a([y(cc.Integer)],t.prototype,"indexOffset",void 0),a([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../EffectMag_008":"EffectMag_008","../GamingData_008":"GamingData_008","../playerBullet/FlyingKnife_008":"FlyingKnife_008","../utils/ZIndexUtils_008":"ZIndexUtils_008"}],EnemyBullet_TrackRange_008:[function(e,t,o){"use strict";cc._RF.push(t,"e3f95MX5pFKPoPgTGpwlJJA","EnemyBullet_TrackRange_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/MathUtils"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collider=null,t.tips=null,t.fill=null,t.effectNode_x=null,t.effectNode_s=null,t.moveSpeed=250,t.targetNode=null,t}return i(t,e),t.prototype.onInit=function(e,t,o,n){this.power=e,this.preKeyPath=n,this.targetNode=c.default.PlayerNode,this.state=0,this.timer=t,this.colliderTimer=0,this.fillTime=t,this.trackTime=o,this.effectNode_x.opacity=0,this.effectNode_s.opacity=0,this.effectNodeScale=this.effectNode_s.scale,this.effectNode_s.removeFromParent(),this.effectNode_s.setParent(c.default.GameObjNode),this.effectNode_s.setPosition(this.node.getPosition()),this.effectNode_s.zIndex=cc.macro.MAX_ZINDEX-200,this.effectNode_s.scale=this.effectNodeScale*this.node.scale,this.collider.enabled=!1,this.fill.scale=0,this.tips.opacity=255},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){if(!c.default.isGamePause){this.timer-=e;var t=this.targetNode.getPosition().sub(this.node.getPosition()).normalize();if(this.node.x+=t.x*e*this.moveSpeed,this.node.y+=t.y*e*this.moveSpeed,this.effectNode_s.setPosition(this.node.getPosition()),0===this.state)this.fill.scale=r.default.lerp(0,1,Math.min(1-this.timer/this.fillTime,1)),this.timer<=0&&(this.state=1,this.fill.scale=0,this.tips.opacity=0,this.timer=this.trackTime,this.effectNode_s.opacity=255,this.effectNode_x.opacity=255);else if(1===this.state&&(this.colliderTimer-=e,this.colliderTimer<=0?(this.colliderTimer=.25,this.collider.enabled=!0):this.colliderTimer>=.05||(this.collider.enabled=!1),this.timer<=0))return void this.onRecovery()}},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Player&&c.default.onAttackPlayer(!1,this.power,!1)},t.prototype.onRecovery=function(){this.effectNode_x.opacity=0,this.effectNode_s.opacity=0,this.effectNode_s.removeFromParent(),this.effectNode_s.setParent(this.node),this.effectNode_s.setPosition(0,0),this.effectNode_s.scale=this.effectNodeScale,s.default.getInstance().recoveryNode(this.preKeyPath,this.node)},a([d(cc.CircleCollider)],t.prototype,"collider",void 0),a([d(cc.Node)],t.prototype,"tips",void 0),a([d(cc.Node)],t.prototype,"fill",void 0),a([d(cc.Node)],t.prototype,"effectNode_x",void 0),a([d(cc.Node)],t.prototype,"effectNode_s",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../Utils/MathUtils":"MathUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],EnemyManager_008:[function(e,t,o){"use strict";cc._RF.push(t,"d5eefcsdzBKwZeg3234F1V8","EnemyManager_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../Utils/RandomUtils"),c=e("../../mag/GameMag"),u=e("../../mag/NodePoolManager"),p=e("./Config_008"),d=e("./DelegateManager_008"),f=e("./EffectMag_008"),h=e("./GamingData_008"),_=e("./enemy/BaseEnemy_008"),y=e("./entities/Entities_008"),g=cc._decorator,m=g.ccclass,v=g.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hpBarNodeParentNode=null,t.tiemr_autoResetPos=0,t.enemyGenerateData=null,t.generatorIndex=0,t.enemyGeneratorArr=null,t.lastTime=900,t.enemyArr=[],t.currEnemyCount=0,t.bossArr=[],t.groupInitPosState=0,t.isOnNuclearBomb=!1,t.nearestEnemyArr=null,t.isUpdateNearestEnemyArr=!1,t.onScreenEnemyArr=null,t.isUpdateOnScreenEnemyArr=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this,h.default.HpBarNode=this.hpBarNodeParentNode,h.default.func_onSkillInScreenEnemy=this.onKillInScreenEnemy.bind(this),this.nearestEnemyArr=[];for(var e=0;e<10;e++)this.nearestEnemyArr.push(null)},t.prototype.onInit=function(e){var t=this;return new Promise(function(o){c.default.getInstance().getJson(e).then(function(e){null!==e?(t.enemyGenerateData=Object.values(e)[0],t.onInitByData.apply(t,t.enemyGenerateData)):(h.default.timer=0,t.tiemr_autoResetPos=0,t.generatorIndex=0,t.enemyGeneratorArr=[],t.currEnemyCount=0,t.groupInitPosState=0),o(null)})})},t.prototype.onInitByData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enemyGenerateData=e,this.lastTime=0;for(var o=[],n=0;n<this.enemyGenerateData.length;n++)this.enemyGenerateData[n].time+this.enemyGenerateData[n].generateTime>this.lastTime&&(this.lastTime=this.enemyGenerateData[n].time+this.enemyGenerateData[n].generateTime),this.enemyGenerateData[n].targetId>=0&&(o.includes(this.enemyGenerateData[n].targetId)||o.push(this.enemyGenerateData[n].targetId));this.onPreLoadEnemyPrefab(o),h.default.timer=0,this.tiemr_autoResetPos=0,this.generatorIndex=0,this.enemyGeneratorArr=[],this.currEnemyCount=0,this.groupInitPosState=0},t.prototype.onPreLoadEnemyPrefab=function(e){for(var t=[],o=0;o<e.length;o++){var n=p.EnemyConfigMap.get(e[o]).prefabId,i=this.getEnemyPrefabPathById(n);t.includes(i)||t.push(i)}c.default.getInstance().preLoadPrefab(t)},t.prototype.onStopGame=function(){this.isOnNuclearBomb=!1,this.enemyGeneratorArr=[],this.enemyArr=[],this.bossArr=[],this.currEnemyCount=0;for(var e=0;e<10;e++)this.nearestEnemyArr[e]=null;this.onScreenEnemyArr=null,this.unscheduleAllCallbacks()},t.prototype.update=function(e){if(!h.default.isGamePause){if(this.isUpdateNearestEnemyArr=!1,this.isUpdateOnScreenEnemyArr=!1,!h.default.isGameTimePause&&(h.default.timer+=e,h.default.func_refreshTimeLabel&&h.default.func_refreshTimeLabel(h.default.timer),!this.isOnNuclearBomb)){this.onTrySetGenerator();for(var t=this.enemyGeneratorArr.length-1;t>=0;t--)this.enemyGeneratorArr[t].update(e)&&this.enemyGeneratorArr.splice(t,1)}this.tiemr_autoResetPos+=e,this.tiemr_autoResetPos>p.default.AutoResetEnemyPosInterval&&(this.tiemr_autoResetPos=0,this.onAutoResetPos())}},t.prototype.onDestroy=function(){},t.prototype.onTrySetGenerator=function(){if(!(this.generatorIndex>=this.enemyGenerateData.length))for(;h.default.timer>this.enemyGenerateData[this.generatorIndex].time;){var e=this.enemyGenerateData[this.generatorIndex];if(e.targetId>=0){var t=e.generateTime/(e.generateCount-1>0?e.generateCount-1:1),o=e.generateCount-1,n=p.EnemyConfigMap.get(e.targetId);h.default.isGameTimePause?this.enemyGeneratorArr.push(new y.EnemyGenerator(this.onTryGenerateEnemy_boss.bind(this,n,e),e.time,t,o,0)):e.isGroup?this.enemyGeneratorArr.push(new y.EnemyGenerator(this.onTryGenerateEnemy_group.bind(this,n,e),e.time,t,o,0)):this.enemyGeneratorArr.push(new y.EnemyGenerator(this.onTryGenerateEnemy_normal.bind(this,n,e),e.time,t,o,0))}else this.onSpecialEvent(e.targetId);if(this.generatorIndex+=1,this.generatorIndex>=this.enemyGenerateData.length)break}},t.prototype.onTryGenerateEnemy_normal=function(e,t){return r(this,void 0,void 0,function(){var o,n,i;return s(this,function(a){switch(a.label){case 0:return this.currEnemyCount>=p.default.MaxEnemyCount?[2]:(o=this.getEnemyPrefabPathById(e.prefabId),u.default.getInstance().isHasNodePool(o)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:o,prePath:o,count:1})]);case 1:a.sent(),a.label=2;case 2:return null===(n=u.default.getInstance().getNodeNotNull(o))?[2]:(i=this.getEnemyInitPos(),n.setParent(h.default.GameObjNode),n.setPosition(i),n.getComponent(_.default).onInit(h.default.PlayerNode,this.onRecoveryEnemy.bind(this,n,o),this.onPreRecoveryEnemy.bind(this,n,o),e,t),this.currEnemyCount+=1,this.enemyArr.push(n),[2])}})})},t.prototype.onTryGenerateEnemy_group=function(e,t){return r(this,void 0,void 0,function(){var o,n,i,a,r,l,c,p,d,f,y,g,m;return s(this,function(s){switch(s.label){case 0:return o=this.getEnemyPrefabPathById(e.prefabId),u.default.getInstance().isHasNodePool(o)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:o,prePath:o,count:1})];case 1:s.sent(),s.label=2;case 2:n=this.getEnemyCornerPos_group(),i=n.sub(h.default.PlayerNode.getPosition()).normalize(),a=n.add(i.mul(200)),r=[3,5,5,5,5,3],l=120,c=cc.v2(i).rotate(.5*Math.PI),p=0,s.label=3;case 3:if(!(p<r.length))return[3,6];for(d=r[p],f=a.add(i.mul(p*l)),y=0;y<d;y++){if(null===(g=u.default.getInstance().getNodeNotNull(o)))return[2];g.setParent(h.default.GameObjNode),m=f.add(c.mul(d*l*-.5+y*l)),g.setPosition(m),g.getComponent(_.default).onInit(h.default.PlayerNode,this.onRecoveryEnemy.bind(this,g,o),this.onPreRecoveryEnemy.bind(this,g,o),e,t),this.currEnemyCount+=1,this.enemyArr.push(g)}return[4,this.wait(0)];case 4:s.sent(),s.label=5;case 5:return p++,[3,3];case 6:return[2]}})})},t.prototype.onTryGenerateEnemy_boss=function(e,t){return r(this,void 0,void 0,function(){var o,n,i,a=this;return s(this,function(r){switch(r.label){case 0:return o=this.getEnemyPrefabPathById(e.prefabId),u.default.getInstance().isHasNodePool(o)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:o,prePath:o,count:1})];case 1:r.sent(),r.label=2;case 2:return null===(n=u.default.getInstance().getNodeNotNull(o))?[2]:(i=this.getBossInitPos(),this.bossArr.push(n),f.default.ins.onShowBossInitPos(i,3,function(){n.active=!0,a.enemyArr.push(n),n.getComponent(_.default).onInit(h.default.PlayerNode,a.onRecoveryEnemy.bind(a,n,o),a.onPreRecoveryEnemy.bind(a,n,o),e,t,!0)}),n.setParent(h.default.GameObjNode),n.setPosition(i),n.active=!1,this.currEnemyCount+=1,[2])}})})},t.prototype.getEnemyPrefabPathById=function(e){var t;return p.EnemyPrefabDataConfigMap.has(e)?t=p.EnemyPrefabDataConfigMap.get(e).path:(cc.log("\u6ca1\u6709\u8fd9\u4e2a\u9884\u5236id ==> "+e),t=p.EnemyPrefabDataConfigMap.get(0).path),t},t.prototype.getEnemyInitPos=function(){var e=cc.Vec2.ZERO,t=l.RandomUtils.getRandomInt(0,3),o=h.default.gameCameraNode.x,n=h.default.gameCameraNode.y,i=h.default.cameraHalfWidth,a=h.default.gameCamera.orthoSize;return 0===t?(e.y=n+a+l.RandomUtils.getRandomInt(200,500),e.x=o+l.RandomUtils.getRandomInt(-i-300,i+300)):1===t?(e.y=n-a-l.RandomUtils.getRandomInt(400,700),e.x=o+l.RandomUtils.getRandomInt(-i-300,i+300)):2===t?(e.x=o-i-l.RandomUtils.getRandomInt(200,500),e.y=n+l.RandomUtils.getRandomInt(-a-300,a+300)):3===t&&(e.x=o+i+l.RandomUtils.getRandomInt(200,500),e.y=n+l.RandomUtils.getRandomInt(-a-300,a+300)),e},t.prototype.getBossInitPos=function(){var e=h.default.limitRectCenterPoint,t=Math.random()*Math.PI*2;return cc.v2(e.x+800*Math.cos(t),e.y+800*Math.sin(t))},t.prototype.getEnemyCornerPos_group=function(){var e=cc.v2(0,0),t=this.groupInitPosState%4;return e=0===t?cc.v2(h.default.PlayerNode.getPosition().x-h.default.cameraHalfWidth,h.default.PlayerNode.getPosition().y+h.default.cameraHalfHeight):1===t?cc.v2(h.default.PlayerNode.getPosition().x-h.default.cameraHalfWidth,h.default.PlayerNode.getPosition().y-h.default.cameraHalfHeight):2===t?cc.v2(h.default.PlayerNode.getPosition().x+h.default.cameraHalfWidth,h.default.PlayerNode.getPosition().y+h.default.cameraHalfHeight):cc.v2(h.default.PlayerNode.getPosition().x+h.default.cameraHalfWidth,h.default.PlayerNode.getPosition().y-h.default.cameraHalfHeight),this.groupInitPosState+=l.RandomUtils.getRandomInt(1,2),e},t.prototype.onPreRecoveryEnemy=function(e,t){var o=this.enemyArr.indexOf(e);-1!==o&&(this.currEnemyCount-=1,this.enemyArr.splice(o,1)),-1!==(o=this.bossArr.indexOf(e))&&(this.bossArr.splice(o,1),0===this.bossArr.length&&(h.default.timer>this.lastTime?0===this.currEnemyCount&&h.default.onGameSucc():(h.default.gameTimePauseState-=1,this.onEndSurroundPlayer()))),this.scheduleOnce(function(){u.default.getInstance().recoveryNode(t,e)},.8)},t.prototype.onRecoveryEnemy=function(e,t){u.default.getInstance().recoveryNode(t,e)},t.prototype.onAutoResetPos=function(){if(!h.default.isGameTimePause)for(var e=0;e<this.enemyArr.length;e++)this.enemyArr[e].getPosition().sub(h.default.PlayerNode.getPosition()).magSqr()>p.default.AudoResetEnemyPosDisThreshold&&this.enemyArr[e].getComponent(_.default).onResetPos(this.getEnemyInitPos())},t.prototype.onSpecialEvent=function(e){var t=this;-1===e?(h.default.func_onEFStateChange_EnemyTide&&h.default.func_onEFStateChange_EnemyTide(!0,function(){t.scheduleOnce(function(){h.default.func_onEFStateChange_EnemyTide&&h.default.func_onEFStateChange_EnemyTide(!1,function(){})},3)}),d.default.onChangeGameCameraOrtho.executeDelegates(2,1.3*p.default.CameraOrthoSize)):-2===e?this.onClearScene():-3===e?(this.onClearScene(),this.onSurroundPlayer(),h.default.gameTimePauseState+=1,d.default.onBossRoundClearSomeItem.executeDelegates(),d.default.onChangeGameCameraOrtho.executeDelegates(2,p.default.CameraOrthoSize)):-4===e?d.default.onChangeGameCameraOrtho.executeDelegates(2,1.3*p.default.CameraOrthoSize):-5===e&&d.default.onChangeGameCameraOrtho.executeDelegates(2,p.default.CameraOrthoSize)},t.prototype.onRecoveryAllEnemy=function(){for(var e=0;e<this.enemyArr.length;e++)this.enemyArr[e].emit(p.default.e_OnExitBattleRoundRecoveryGameObjNode);this.enemyArr=[],this.currEnemyCount=0},t.prototype.onRemoveAllEnemyGenerator=function(){this.enemyGeneratorArr=[]},t.prototype.onClearScene=function(){this.onRecoveryAllEnemy(),this.onRemoveAllEnemyGenerator()},t.prototype.onEndSurroundPlayer=function(){h.default.isLimitMoveRect=!1,this.onRecoveryAllFence()},t.prototype.onSurroundPlayer=function(){return r(this,void 0,void 0,function(){var e,t,o,n,i,a;return s(this,function(r){switch(r.label){case 0:return this.fenceArr=[],e=1500,t=cc.v2(h.default.PlayerNode.getPosition()),o=Math.ceil(2*e*Math.PI/90),h.default.isLimitMoveRect=!0,h.default.limitRectCenterPoint=t,h.default.limitRectRadius=e-50,h.default.limitRectRadiusSqr=h.default.limitRectRadius*h.default.limitRectRadius,[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Fence,prePath:p.default.Path_Fence,count:1})];case 1:r.sent(),n=2*Math.PI/o,i=0,r.label=2;case 2:return i<o?(null!==(a=u.default.getInstance().getNodeNotNull(p.default.Key_Fence))&&(a.setParent(h.default.GameObjNode),a.x=t.x+e*Math.cos(n*i),a.y=t.y+e*Math.sin(n*i),a.on(p.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecoveryFence.bind(this,a),this),this.fenceArr.push(a)),i%10!=0?[3,4]:[4,this.wait(0)]):[3,5];case 3:r.sent(),r.label=4;case 4:return i++,[3,2];case 5:return[2]}})})},t.prototype.onRecoveryFence=function(e){e.off(p.default.e_OnExitBattleRoundRecoveryGameObjNode),u.default.getInstance().recoveryNode(p.default.Key_Fence,e)},t.prototype.onRecoveryAllFence=function(){if(null!==this.fenceArr){for(var e=0;e<this.fenceArr.length;e++)this.fenceArr[e].emit(p.default.e_OnExitBattleRoundRecoveryGameObjNode);this.fenceArr=null}},t.prototype.onKillInScreenEnemy=function(){return r(this,void 0,void 0,function(){var e,t,o,n;return s(this,function(i){switch(i.label){case 0:if(this.isOnNuclearBomb)return[2];this.isOnNuclearBomb=!0,e=new cc.Rect,t=cc.winSize.width*h.default.gameCamera.orthoSize/cc.winSize.height,e.x=h.default.gameCameraNode.x-t,e.y=h.default.gameCameraNode.y-h.default.gameCamera.orthoSize-100,e.width=2*t,e.height=2*h.default.gameCamera.orthoSize+200,o=0,n=this.enemyArr.length-1,i.label=1;case 1:return n>=0&&this.isOnNuclearBomb?e.contains(this.enemyArr[n].getPosition())?(this.enemyArr[n].emit(p.default.e_OnEnemyAttacked_NuclearBomb,p.default.Num_NuclearBombPower,p.default.Color_NuclearBomb),(o+=1)>=25?(o=0,[4,this.wait(0)]):[3,3]):[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return n--,[3,1];case 4:return this.isOnNuclearBomb=!1,[2]}})})},t.prototype.onCheat_jumpTime=function(e){if(!h.default.isGameTimePause){h.default.timer,h.default.timer+=e;var t=this.generatorIndex;if(!(t>=this.enemyGenerateData.length)){for(;h.default.timer>this.enemyGenerateData[t].time;){if(-3===this.enemyGenerateData[t].targetId){h.default.timer=this.enemyGenerateData[t].time+.016;break}if((t+=1)>=this.enemyGenerateData.length){h.default.timer=this.enemyGenerateData[this.enemyGenerateData.length-1].time+.016;break}}h.default.func_refreshTimeLabel&&h.default.func_refreshTimeLabel(h.default.timer),this.onTrySetGenerator();for(var o=this.enemyGeneratorArr.length-1;o>=0;o--)this.enemyGeneratorArr[o].update(0)?this.enemyGeneratorArr.splice(o,1):this.enemyGeneratorArr[o].jumpTime(h.default.timer)&&this.enemyGeneratorArr.splice(o,1)}}},t.prototype.wait=function(e){var t=this;return new Promise(function(o){t.scheduleOnce(o,e)})},t.prototype.updateNearestEnemyArr=function(){if(!this.isUpdateNearestEnemyArr)if(this.isUpdateNearestEnemyArr=!0,this.updateOnScreenEnemyArr(),this.onScreenEnemyArr.length>10)for(var e=h.default.PlayerNode.getPosition(),t=0,o=0;o<10;o++){for(var n=Number.MAX_VALUE,i=-1,a=0;a<this.onScreenEnemyArr.length;a++){var r=e.sub(this.onScreenEnemyArr[a].getPosition()).magSqr();r>t&&r<n&&(i=a,n=r)}-1!==i&&(t=n,this.nearestEnemyArr[o]=this.onScreenEnemyArr[i])}else{var s=this.onScreenEnemyArr.length;for(o=0;o<s;o++)this.nearestEnemyArr[o]=this.onScreenEnemyArr[o];for(o=s;o<10;o++)this.nearestEnemyArr[o]=null}},t.prototype.updateOnScreenEnemyArr=function(){if(!this.isUpdateOnScreenEnemyArr){this.isUpdateOnScreenEnemyArr=!0,this.onScreenEnemyArr=[];for(var e=0;e<this.enemyArr.length;e++)this.enemyArr[e].opacity<=0||this.onScreenEnemyArr.push(this.enemyArr[e])}},t.prototype.getNearestEnemyPos=function(){return this.updateNearestEnemyArr(),this.nearestEnemyArr[0]?this.nearestEnemyArr[0].getPosition():null},t.prototype.getNearestEnemy=function(){return this.updateNearestEnemyArr(),this.nearestEnemyArr[0]?this.nearestEnemyArr[0]:null},t.prototype.getRandomEnemyPos=function(){return this.updateOnScreenEnemyArr(),this.onScreenEnemyArr.length>0?this.onScreenEnemyArr[l.RandomUtils.getRandomFormArray(this.onScreenEnemyArr)].getPosition():null},t.prototype.getRandomEnemy=function(){return this.updateOnScreenEnemyArr(),this.onScreenEnemyArr.length>0?this.onScreenEnemyArr[l.RandomUtils.getRandomFormArray(this.onScreenEnemyArr)]:null},t.prototype.getRandomEnemyInRange=function(e){this.updateOnScreenEnemyArr();for(var t=[],o=e*e,n=h.default.PlayerNode.getPosition(),i=0;i<this.onScreenEnemyArr.length;i++)this.onScreenEnemyArr[i].getPosition().sub(n).magSqr()<=o&&t.push(this.onScreenEnemyArr[i]);return t.length>0?t[l.RandomUtils.getRandomFormArray(t)]:null},t.prototype.getRandomEnemyPosInRange=function(e){var t=this.getRandomEnemyInRange(e);return null!==t?t.getPosition():null},t.prototype.getEnemyInRange=function(e,t){for(var o=[],n=t*t,i=0;i<this.enemyArr.length;i++)this.enemyArr[i].getPosition().sub(e).magSqr()<=n&&o.push(this.enemyArr[i]);return o},t.prototype.getNearestEnemyPoss=function(e){return this.updateNearestEnemyArr(),e>10&&(e=10),this.nearestEnemyArr.slice(0,e)},t.prototype.isBoss=function(e){return this.bossArr.includes(e)},t.ins=null,a([v(cc.Node)],t.prototype,"hpBarNodeParentNode",void 0),o=a([m],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../Utils/RandomUtils":"RandomUtils","../../mag/GameMag":"GameMag","../../mag/NodePoolManager":"NodePoolManager","./Config_008":"Config_008","./DelegateManager_008":"DelegateManager_008","./EffectMag_008":"EffectMag_008","./GamingData_008":"GamingData_008","./enemy/BaseEnemy_008":"BaseEnemy_008","./entities/Entities_008":"Entities_008"}],EnemyMovement_Group_008:[function(e,t,o){"use strict";cc._RF.push(t,"2f3efjHKmlG+K2nFOwt4dfP","EnemyMovement_Group_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../RVO2/Vector2"),s=e("../Config_008"),l=e("../GameManager_008"),c=e("./BaseEnemyMovement_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.agent=null,t.moveDir=null,t}return i(t,e),t.prototype.onInit=function(t,o){e.prototype.onInit.call(this,t,o),null!==this.agent?l.default.ins.addAgent(this.agent,this.node):this.agent=l.default.ins.addNewAgent(this.node),this.agent.maxSpeed_=s.default.GroupEnemyMoveSpeed,this.agent.radius_=this.baseEnemyTs.circleCollider.radius*this.node.scale+1,this.agent.avoidenceWeight_=1,this.moveDir=null,this.startPos=this.node.getPosition()},t.prototype.onRemove=function(){this.node=null,this.baseEnemyTs=null,l.default.ins.removeAgent(this.agent.id_),e.prototype.onRemove.call(this)},t.prototype.onUpdate=function(e,t){this.enabled&&(null===this.moveDir&&(this.moveDir=t,this.baseEnemyTs.scaleXNode.scaleX=this.moveDir.x>=0?1:-1),l.default.ins.setAgentPrefVelocity(this.agent.index_,new r.Vector2(this.moveDir.x,this.moveDir.y).mul_k(s.default.GroupEnemyMoveSpeed)),this.node.setPosition(l.default.ins.getAgentPosition(this.agent.index_)),!this.baseEnemyTs.circleCollider.enabled&&this.startPos.sub(this.node.getPosition()).magSqr()>=1024e4&&this.baseEnemyTs.onRecovery())},t.prototype.onResetPos=function(){},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../RVO2/Vector2":"Vector2","../Config_008":"Config_008","../GameManager_008":"GameManager_008","./BaseEnemyMovement_008":"BaseEnemyMovement_008"}],EnemyMovement_Normal_008:[function(e,t,o){"use strict";cc._RF.push(t,"5d9fd60xDhJwplTqO4BVnVf","EnemyMovement_Normal_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BaseEnemyMovement_008"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([l],t)}(r.default));o.default=c,cc._RF.pop()},{"./BaseEnemyMovement_008":"BaseEnemyMovement_008"}],EnemyMovement_RVO2Agent_008:[function(e,t,o){"use strict";cc._RF.push(t,"7ca45tT1SdBHJmxFY0hgOs9","EnemyMovement_RVO2Agent_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../RVO2/Vector2"),s=e("../GameManager_008"),l=e("../GamingData_008"),c=e("./BaseEnemyMovement_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.agent=null,t}return i(t,e),t.prototype.onInit=function(t,o){e.prototype.onInit.call(this,t,o),null!==this.agent?s.default.ins.addAgent(this.agent,this.node):this.agent=s.default.ins.addNewAgent(this.node),this.agent.maxSpeed_=2*this.baseEnemyTs.moveSpeed,this.agent.radius_=this.baseEnemyTs.circleCollider.radius*this.node.scale+1,this.agent.avoidenceWeight_=this.baseEnemyTs.isElite?500:1e4},t.prototype.onRemove=function(){this.node=null,this.baseEnemyTs=null,s.default.ins.removeAgent(this.agent.id_),e.prototype.onRemove.call(this)},t.prototype.onUpdate=function(e,t,o,n){if(!this.enabled||this.stopMoveState>0)return s.default.ins.setAgentPosition(this.agent.index_,this.node.getPosition()),void s.default.ins.setAgentPrefVelocity(this.agent.index_,new r.Vector2(0,0));n?(this.node.x+=t.x*o*e,this.node.y+=t.y*o*e,s.default.ins.setAgentPosition(this.agent.index_,this.node.getPosition()),s.default.ins.setAgentPrefVelocity(this.agent.index_,r.Vector2.Zero)):(s.default.ins.setAgentPrefVelocity(this.agent.index_,new r.Vector2(t.x,t.y).mul_k(o*this.moveSpeedRatio)),0!==o&&(this.baseEnemyTs.scaleXNode.scaleX=t.x>=0?1:-1),this.node.setPosition(s.default.ins.getAgentPosition(this.agent.index_)))},t.prototype.onRun=function(e,t,o){this.baseEnemyTs.scaleXNode.scaleX=t.x>=0?1:-1,l.default.isLimitMoveRect&&this.node.getPosition().sub(l.default.limitRectCenterPoint).magSqr()>l.default.limitRectRadiusSqr&&(o=0,t.x=0,t.y=0),this.node.x+=t.x*o*e,this.node.y+=t.y*o*e,s.default.ins.setAgentPosition(this.agent.index_,this.node.getPosition()),s.default.ins.setAgentPrefVelocity(this.agent.index_,new r.Vector2(t.x,t.y))},t.prototype.onResetPos=function(e){this.node.setPosition(e),this.agent.position_.x=e.x,this.agent.position_.y=e.y},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../RVO2/Vector2":"Vector2","../GameManager_008":"GameManager_008","../GamingData_008":"GamingData_008","./BaseEnemyMovement_008":"BaseEnemyMovement_008"}],EnemySkill_Charge_008:[function(e,t,o){"use strict";cc._RF.push(t,"01a9a/foMtEzopQ6EDvyQI+","EnemySkill_Charge_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../Config_Gaming_008"),p=e("../EffectMag_008"),d=e("../GamingData_008"),f=e("./BaseEnemySkill_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t.state=0,t.runDistanceSqr=0,t.runRouteNode=null,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(){return this.onResetData(),[2]})})},t.prototype.onResetData=function(){this.state=0,this.timer=1,this.runDistanceSqr=u.Config_Gaming_008.ChargeSpeed*this.weaponData.arg_2*u.Config_Gaming_008.ChargeSpeed*this.weaponData.arg_2},t.prototype.onRecovery=function(){this.onRecoveryRunRoute(),e.prototype.onRecovery.call(this)},t.prototype.onUpdate=function(e,t,o){t&&(this.enemyTs.movementTs.getStopMoveState()||this.onRunLogic(e,o))},t.prototype.onChangeRunState=function(e){if(this.state!==e)if(this.state=e,0===e)this.enemyTs.onChangeAni(c.EnemyAniState.Walk,!0),this.enemyTs.setAnimationSpeed(1),this.timer=1,this.onRecoveryRunRoute();else if(1===e){if(this.timer=1,this.runRouteNode=p.default.ins.getRunRoute(),null!==this.runRouteNode){this.runRouteNode.setPosition(this.node.getPosition().x,this.node.getPosition().y+this.enemyTs.circleCollider.offset.y*this.node.scaleY),this.runDir=d.default.PlayerNode.getPosition().sub(this.node.getPosition()).normalize(),this.runRouteNode.angle=cc.misc.radiansToDegrees(Math.atan2(this.runDir.y,this.runDir.x));var t=this.runRouteNode.getChildByName("sprite");t.width=u.Config_Gaming_008.ChargeSpeed*this.weaponData.arg_2,t.height=2*this.enemyTs.circleCollider.radius*this.node.scaleY+20}}else 2===e?this.timer=this.weaponData.arg_1:3===e?(this.enemyTs.onChangeAni(c.EnemyAniState.Run,!0),this.enemyTs.setAnimationSpeed(1),this.timer=this.weaponData.arg_2):4===e?(this.timer=.1,this.enemyTs.onSetMovementState(!1)):(this.enemyTs.onChangeAni(c.EnemyAniState.Walk,!0),this.enemyTs.setAnimationSpeed(1),this.enemyTs.onSetMovementState(!0),this.timer=this.fireCoolDownTime,this.onRecoveryRunRoute())},t.prototype.onRunLogic=function(e,t){this.timer-=e,0===this.state?(this.enemyTs.onSetMovementState(!0),this.timer<0&&this.runDistanceSqr>=t&&this.onChangeRunState(1)):1===this.state?(this.enemyTs.onSetMovementState(!1),this.runDir=d.default.PlayerNode.getPosition().sub(this.node.getPosition()).normalize(),this.runRouteNode.angle=cc.misc.radiansToDegrees(Math.atan2(this.runDir.y,this.runDir.x)),this.timer<0&&this.onChangeRunState(2)):2===this.state?(this.enemyTs.onSetMovementState(!1),this.timer<0&&this.onChangeRunState(3)):3===this.state?(this.enemyTs.onSetMovementState(!1),this.enemyTs.movementTs.onRun(e,this.runDir,u.Config_Gaming_008.ChargeSpeed),this.timer<0&&this.onChangeRunState(4)):4===this.state?(this.enemyTs.movementTs.onRun(e,this.runDir,0),this.timer<0&&this.onChangeRunState(5)):this.timer<0&&(this.onResetData(),this.enemyTs.onChangeUsingSkill())},t.prototype.onRecoveryRunRoute=function(){null!==this.runRouteNode&&(l.default.getInstance().recoveryNode(c.default.Key_EF_RunRoute,this.runRouteNode),this.runRouteNode=null)},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EffectMag_008":"EffectMag_008","../GamingData_008":"GamingData_008","./BaseEnemySkill_008":"BaseEnemySkill_008"}],EnemySkill_Charge_Lite_008:[function(e,t,o){"use strict";cc._RF.push(t,"467acdxUmlEv6mUDeA/yxMw","EnemySkill_Charge_Lite_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EnemySkill_Charge_008"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onChangeRunState=function(t){e.prototype.onChangeRunState.call(this,t),1===t&&(this.timer=.1)},a([l],t)}(r.default));o.default=c,cc._RF.pop()},{"./EnemySkill_Charge_008":"EnemySkill_Charge_008"}],EnemySkill_Explosion_008:[function(e,t,o){"use strict";cc._RF.push(t,"bc0b9DEoP9BLqWAFc0eHGnx","EnemySkill_Explosion_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=e("../enemyBullet/EnemyBullet_Explosion_008"),d=e("./BaseEnemySkill_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onResetData=function(){},t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.bulletPrefabPath=c.EnemyBulletId2PrefabPathMap.get(this.weaponData.bulletId),[4,l.default.getInstance().onInitNodePool({key:this.bulletPrefabPath,prePath:this.bulletPrefabPath,count:1})];case 1:return e.sent(),[2]}})})},t.prototype.onUpdate=function(e,t,o){o<1e4&&this.onFire()},t.prototype.onFire=function(){var e=l.default.getInstance().getNodeNotNull(this.bulletPrefabPath);null!==e&&(e.setParent(u.default.enemyBulletNode_middle),e.setPosition(this.node.getPosition()),e.getComponent(p.default).onInit(this.enemyTs.damagePoint_range,this.bulletPrefabPath),this.enemyTs.onRecovery())},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../enemyBullet/EnemyBullet_Explosion_008":"EnemyBullet_Explosion_008","./BaseEnemySkill_008":"BaseEnemySkill_008"}],EnemySkill_MoveSpeedBoost_008:[function(e,t,o){"use strict";cc._RF.push(t,"5a3c2KYSSJMP6tvstuqcPIS","EnemySkill_MoveSpeedBoost_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../Config_Gaming_008"),p=e("../EffectMag_008"),d=e("../EnemyManager_008"),f=e("../enemyBuff/EnemyBuff_MoveSpeedBoost_008"),h=e("./BaseEnemySkill_008"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.lastState=0,t.bulletNode=null,t}return i(t,e),t.prototype.onResetData=function(){this.state=0,this.timer=1},t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.bulletPrefabPath=c.EnemyBulletId2PrefabPathMap.get(this.weaponData.bulletId),this.onResetData(),[4,l.default.getInstance().onInitNodePool({key:this.bulletPrefabPath,prePath:this.bulletPrefabPath,count:1})];case 1:return e.sent(),[2]}})})},t.prototype.onUpdate=function(e,t){t&&(this.timer-=e,0===this.state?this.timer<0&&this.onFire():1===this.state?(this.enemyTs.onSetMovementState(!1),this.timer<=0?(this.onBuffLogic(),this.onRecoveryBulletNode(),this.state=2,this.timer=this.fireCoolDownTime,this.enemyTs.onSetMovementState(!0)):Math.ceil(this.timer/.5)!==this.lastState&&(this.lastState=Math.ceil(this.timer/.5),this.onBuffLogic())):2===this.state&&this.timer<=0&&this.enemyTs.onChangeUsingSkill())},t.prototype.onFire=function(){this.bulletNode=l.default.getInstance().getNodeNotNull(this.bulletPrefabPath),null!==this.bulletNode&&(this.bulletNode.setParent(p.default.ins.effectNode_low),this.bulletNode.setPosition(this.node.getPosition()),this.state=1,this.timer=3,this.lastState=Math.ceil(this.timer/.5))},t.prototype.onBuffLogic=function(){for(var e=d.default.ins.getEnemyInRange(this.node.getPosition(),1e3),t=0;t<e.length;t++)e[t].emit(c.default.e_OnTryAddBuffToEnemy,f.default,[this.weaponData.arg_1,u.Config_Gaming_008.EnemyBuff_CooldownTime_MoveSpeedBoost])},t.prototype.onRecoveryBulletNode=function(){null!==this.bulletNode&&(l.default.getInstance().recoveryNode(this.bulletPrefabPath,this.bulletNode),this.bulletNode=null)},t.prototype.onRecovery=function(){this.onRecoveryBulletNode(),e.prototype.onRecovery.call(this)},a([y],t)}(h.default));o.default=g,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EffectMag_008":"EffectMag_008","../EnemyManager_008":"EnemyManager_008","../enemyBuff/EnemyBuff_MoveSpeedBoost_008":"EnemyBuff_MoveSpeedBoost_008","./BaseEnemySkill_008":"BaseEnemySkill_008"}],EnemySkill_RangeFall_008:[function(e,t,o){"use strict";cc._RF.push(t,"27b499LVGpERY2Xqqtb8DQ7","EnemySkill_RangeFall_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=e("../enemyBullet/EnemyBullet_RangeFall_008"),d=e("./BaseEnemySkill_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t}return i(t,e),t.prototype.onResetData=function(){this.state=0,this.timer=1,this.currFireCount=0},t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.onResetData(),this.bulletPrefabPath=c.EnemyBulletId2PrefabPathMap.get(this.weaponData.bulletId),[4,l.default.getInstance().onInitNodePool({key:this.bulletPrefabPath,prePath:this.bulletPrefabPath,count:1})];case 1:return e.sent(),[2]}})})},t.prototype.onUpdate=function(e,t,o){t&&(this.timer-=e,0===this.state?this.timer<=0?o<81e4?(this.state=1,this.timer=.5,this.enemyTs.onSetMovementState(!1)):this.enemyTs.onSetMovementState(!0):this.enemyTs.onSetMovementState(!1):1===this.state?(this.enemyTs.onSetMovementState(!1),this.timer<=0&&this.onFire()):2===this.state&&this.timer<=0&&this.enemyTs.onChangeUsingSkill(),this.enemyTs.scaleXNode.scaleX=u.default.PlayerNode.getPosition().sub(this.node.getPosition()).x>=0?1:-1)},t.prototype.onFire=function(){this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.state=2,this.timer=this.fireCoolDownTime):this.timer=.2;var e=l.default.getInstance().getNodeNotNull(this.bulletPrefabPath);if(null!==e){e.setParent(u.default.enemyBulletNode_middle);var t=u.default.PlayerNode.getPosition().add(u.default.PlayerMoveDir.mul(1*u.default.PlayerGamingInfo.moveSpeed));e.setPosition(t),e.getComponent(p.default).onInit(this.enemyTs.damagePoint_range,this.bulletPrefabPath)}},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../enemyBullet/EnemyBullet_RangeFall_008":"EnemyBullet_RangeFall_008","./BaseEnemySkill_008":"BaseEnemySkill_008"}],EnemySkill_RangeLinear_008:[function(e,t,o){"use strict";cc._RF.push(t,"d109dcKGHdM+5RG6j3Iv/He","EnemySkill_RangeLinear_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=e("../enemyBullet/EnemyBullet_RangeLinear_008"),d=e("./BaseEnemySkill_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t}return i(t,e),t.prototype.onResetData=function(){this.state=0,this.timer=1},t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.state=-1,e=this.node.getChildByName("firePoint_range"),this.firePos=null!==e?cc.v2(e.getPosition()):cc.v2(0,.5*this.node.height),this.onResetData(),this.bulletPrefabPath=c.EnemyBulletId2PrefabPathMap.get(this.weaponData.bulletId),[4,l.default.getInstance().onInitNodePool({key:this.bulletPrefabPath,prePath:this.bulletPrefabPath,count:3})];case 1:return t.sent(),this.state=0,[2]}})})},t.prototype.onUpdate=function(e,t,o){if(t){if(this.timer-=e,0===this.state)if(this.timer<=0)if(o<81e4){this.state=1,this.enemyTs.onSetMovementState(!1);var n=this.enemyTs.onChangeAni(c.EnemyAniState.Skill_SF,!1);this.timer=.75*n}else this.enemyTs.onSetMovementState(!0);else this.enemyTs.onSetMovementState(!1);else 1===this.state?(this.enemyTs.onSetMovementState(!1),this.timer<=0&&this.onFire()):2===this.state&&this.timer<=0&&this.enemyTs.onChangeUsingSkill();this.enemyTs.scaleXNode.scaleX=u.default.PlayerNode.getPosition().sub(this.node.getPosition()).x>=0?1:-1}},t.prototype.onFire=function(){this.state=2,this.timer=this.fireCoolDownTime,this.enemyTs.onSetMovementState(!0),this.enemyTs.onChangeAni(c.EnemyAniState.Walk,!0);for(var e=u.default.enemyBulletNode_middle.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.firePos)),t=u.default.PlayerNode.getPosition().sub(e).normalize(),o=this.bulletCount,n=cc.misc.degreesToRadians(10),i=n*(o-1)*-.5,a=0;a<o;a++){var r=l.default.getInstance().getNodeNotNull(this.bulletPrefabPath);if(null!==r){r.setParent(u.default.enemyBulletNode_middle),r.setPosition(e);var s=cc.v2(t).rotate(cc.misc.degreesToRadians(i+n*a));r.getComponent(p.default).onInit(s,this.enemyTs.damagePoint_range,5,this.bulletPrefabPath)}}},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../enemyBullet/EnemyBullet_RangeLinear_008":"EnemyBullet_RangeLinear_008","./BaseEnemySkill_008":"BaseEnemySkill_008"}],EnemySkill_RotatingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"1cebbBu8zxMWrBSeLipJG9y","EnemySkill_RotatingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../EffectMag_008"),u=e("../GamingData_008"),p=e("../enemyBullet/EnemyBullet_RotatingKnife_008"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.knifeArr=[],t}return i(t,e),t.prototype.onResetData=function(){},t.prototype.onInitWeapon=function(){return a(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.weight=0,this.enemyTs.invulnerableState+=1,this.bulletPrefabPath=l.EnemyBulletId2PrefabPathMap.get(this.weaponData.bulletId),this.knifeCenterPos=cc.v2(0,.33*this.enemyTs.size_height),[4,s.default.getInstance().onInitNodePool({key:this.bulletPrefabPath,prePath:this.bulletPrefabPath,count:3})];case 1:return e.sent(),this.onInitKnife(this.bulletPrefabPath),this.state=1,[2]}})})},t.prototype.onRecovery=function(){this.onRecoveryAllKnife(),e.prototype.onRecovery.call(this)},t.prototype.onUpdate=function(e,t){if(1===this.state)this.updateKnife();else if(2===this.state&&!t)return},t.prototype.onInitKnife=function(e){for(var t=0;t<this.bulletCount;t++){var o=s.default.getInstance().getNodeNotNull(e);null!==o&&(o.setParent(u.default.GameObjNode),o.getComponent(p.default).onInit(this.onRemoveKnife.bind(this,o),180,this.enemyTs.damagePoint),this.knifeArr.push(o))}this.updateKnife(),this.onResetKnifeAngle()},t.prototype.onRecoveryAllKnife=function(){for(var e=0;e<this.knifeArr.length;e++)s.default.getInstance().recoveryNode(this.bulletPrefabPath,this.knifeArr[e]);this.knifeArr=[]},t.prototype.onResetKnifeAngle=function(){var e=this.knifeArr.length;if(e>0)for(var t=this.knifeArr[0].angle,o=360/e,n=0;n<e;n++)this.knifeArr[n].angle=o*n+t},t.prototype.onRemoveKnife=function(e){var t=this.knifeArr.indexOf(e);-1!==t&&(this.knifeArr.splice(t,1),s.default.getInstance().recoveryNode(this.bulletPrefabPath,e),0===this.knifeArr.length&&(this.enemyTs.invulnerableState-=1,this.onShowDia(),this.enemyTs.removeSkill(this)))},t.prototype.updateKnife=function(){for(var e=this.node.getPosition().add(this.knifeCenterPos),t=0;t<this.knifeArr.length;t++)this.knifeArr[t].setPosition(e)},t.prototype.onShowDia=function(){var e=cc.v2(.3*this.enemyTs.size_width,.85*this.enemyTs.size_height);c.default.ins.onTryShowEnemyDia(this.node,e)},t}(e("./BaseEnemySkill_008").default);o.default=d,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../EffectMag_008":"EffectMag_008","../GamingData_008":"GamingData_008","../enemyBullet/EnemyBullet_RotatingKnife_008":"EnemyBullet_RotatingKnife_008","./BaseEnemySkill_008":"BaseEnemySkill_008"}],EnemyTrail_008:[function(e,t,o){"use strict";cc._RF.push(t,"98c5cGz0klOpLNIiYiCQisw","EnemyTrail_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],EnergyBar_008:[function(e,t,o){"use strict";cc._RF.push(t,"f97d3WiYLhO8K6//yVwtR3C","EnergyBar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../DelegateManager_008"),s=e("../../LocalDataManager_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbl_count=null,t.lbl_restoreTip=null,t}return i(t,e),t.prototype.onLoad=function(){r.default.onRefreshEnergyBar.addDelegate(this.onRefreshCount,this)},t.prototype.onEnable=function(){this.lbl_restoreTip.string=""},t.prototype.start=function(){this.schedule(this.onAutoRefreshUI,1,cc.macro.REPEAT_FOREVER,1)},t.prototype.onDestroy=function(){this.unschedule(this.onAutoRefreshUI),r.default.onRefreshEnergyBar.removeDelegate(this.onRefreshCount,this)},t.prototype.onRefreshCount=function(e){this.lbl_count.string=e.toString()},t.prototype.onAutoRefreshUI=function(){this.lbl_restoreTip&&(this.lbl_restoreTip.string=s.default.getInstance().getEnergyRecoveryTime())},a([u(cc.Label)],t.prototype,"lbl_count",void 0),a([u(cc.Label)],t.prototype,"lbl_restoreTip",void 0),a([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008"}],Entities_008:[function(e,t,o){"use strict";cc._RF.push(t,"e7d6csnp8tFhaxDE/fR7b4Q","Entities_008"),Object.defineProperty(o,"__esModule",{value:!0}),o.GongFaBonusData=o.ShiFang_JiShiItemData=o.UnlockSkillData=o.UnlockModuleData=o.EquipmentData=o.EnemyPrefabData=o.ChapterData=o.EnemySkillData=o.BoxData=o.BoxItemRewardData=o.SkillConfigData=o.PlayerLevelInfoData=o.EnemyGenerator=o.GeneratorDataConfig=o.EnemyGenerateData=o.EnemyData=o.DropItemGroupData=o.DropData=o.PlayerGamingInfo_008=o.PlayerData_008=void 0;var n=e("../../../Utils/MathUtils"),i=function(){function e(){this.dataVersion=-1,this.lv=1,this.curExp=0,this.isGuideAlchemy=!1,this.numberOfAlchemy=0,this.alchemyTimer=0,this.alchemyTotalTime=0,this.coinCount=0,this.energy=0,this.energy_lastRecoveryTime=0,this.equipmentDataArr=[null,null,null,null,null,null],this.itemData_id=[],this.itemData_count=[],this.lastQuestTime=Date.now(),this.dailyQuestIds=[],this.receivedQuestIds=[],this.dailyQuestTargetProgress=[],this.totalQuestTargetProgress=[],this.dailyActivation=0,this.activationRewardRecord=[],this.isUnlockTrial=!1,this.isUnlockXiuShen=!0,this.isUnlockShiFang=!0,this.isUnlockGongFa=!0,this.isUnlockExplore=!1,this.curTrialLayer=1,this.passTrialLayer=0,this.maxTrialLayer=0,this.failTrialCount=0,this.lastResetTrialTime=0,this.trialRewardRecord=[],this.trialExchangeData=[],this.trialRewardData=[],this.trialCanReceiveCount=1,this.lastExploreTime=(new Date).getTime(),this.foxDateTimes=0,this.guideTimes=0}return e.prototype.item_init=function(e,t){this.itemData_id.push(e),this.itemData_count.push(t)},e.prototype.sortItemsById=function(){var e=this,t=this.itemData_id.map(function(t,o){return{id:t,count:e.itemData_count[o]}});t.sort(function(e,t){return e.id-t.id});var o=t.map(function(e){return e.id}),n=t.map(function(e){return e.count});this.itemData_id=o,this.itemData_count=n},e.prototype.item_getCountById=function(e){var t=0,o=n.default.binarySearchIndex(this.itemData_id,e);return-1!==o&&(t=this.itemData_count[o]),t},e.prototype.item_checkCountById=function(e,t){return this.item_getCountById(e)>=t},e.prototype.item_addCountById=function(e,t){var o=n.default.binarySearchIndex(this.itemData_id,e);return t=Number.isNaN(t)?0:t,-1===o||Number.isNaN(this.itemData_count[o])?(this.item_init(e,t),this.sortItemsById(),t):(this.itemData_count[o]+=t,this.itemData_count[o])},e}();o.PlayerData_008=i;o.PlayerGamingInfo_008=function(){};o.DropData=function(){};o.DropItemGroupData=function(){};o.EnemyData=function(){};o.EnemyGenerateData=function(){};o.GeneratorDataConfig=function(){};var a=function(){function e(e,t,o,n,i){this.initTime=0,this.timer=0,this.lastTime=0,this.interval=0,this.repeat=0,this.callback=null,this.delay=0,this.callback=e,this.initTime=t,this.interval=o,this.repeat=n,this.timer=i>0?-i:0,this.lastTime=-o}return e.prototype.update=function(e){for(this.timer+=e;this.timer>=this.lastTime+this.interval&&(this.callback(),this.lastTime+=this.interval,this.repeat-=1,!(this.repeat<0)););return this.repeat<0},e.prototype.jumpTime=function(e){if(e-=this.initTime,this.interval>0){var t=Math.floor((this.timer-this.lastTime+e)/this.interval);this.repeat-=t,this.lastTime+=this.interval*t}else this.repeat=-1;return this.timer+=e,this.repeat<0},e}();o.EnemyGenerator=a;o.PlayerLevelInfoData=function(){};o.SkillConfigData=function(){};o.BoxItemRewardData=function(){};o.BoxData=function(){};o.EnemySkillData=function(){};o.ChapterData=function(){};o.EnemyPrefabData=function(){};o.EquipmentData=function(){};o.UnlockModuleData=function(){};o.UnlockSkillData=function(){};o.ShiFang_JiShiItemData=function(){};o.GongFaBonusData=function(){},cc._RF.pop()},{"../../../Utils/MathUtils":"MathUtils"}],Enums_008:[function(e,t,o){"use strict";cc._RF.push(t,"1c12agkkHlFn63ImAWrYdII","Enums_008"),Object.defineProperty(o,"__esModule",{value:!0}),o.GongFa_BonusInfoName=o.ShiFang_JiShi_ItemAcquisitionMethod_008=o.RedPointIndex_008=o.MainUIViewId_008=o.InfoType_008=o.ItemType_008=void 0,function(e){e[e.c_coin=1e4]="c_coin",e[e.c_boxKey=10001]="c_boxKey",e[e.c_energy=10002]="c_energy",e[e.c_lingqi=10003]="c_lingqi",e[e.c_active=10004]="c_active",e[e.c_zijinye=10005]="c_zijinye",e[e.c_zhanling=10006]="c_zhanling",e[e.f_rotatingKnife=15201]="f_rotatingKnife",e[e.i_xiuxian_dujieDan_1=2e4]="i_xiuxian_dujieDan_1",e[e.i_xiuxian_dujieDan_2=20001]="i_xiuxian_dujieDan_2",e[e.xx_xx=20020]="xx_xx"}(o.ItemType_008||(o.ItemType_008={})),function(e){e[e.DamagePoint=0]="DamagePoint",e[e.HP=1]="HP",e[e.Armor=2]="Armor",e[e.MoveSpeed=3]="MoveSpeed",e[e.RestoreLife=4]="RestoreLife",e[e.ExpBonus=5]="ExpBonus",e[e.Lucky=6]="Lucky",e[e.CritProb=7]="CritProb",e[e.CritPowerBonus=8]="CritPowerBonus",e[e.InjuryFree_range=9]="InjuryFree_range",e[e.InjuryFree_melee=10]="InjuryFree_melee"}(o.InfoType_008||(o.InfoType_008={})),function(e){e.Role="role",e.Chapter="chapter",e.XiuXian="xiuxian",e.ShiFang="ShiFang",e.GongFa="GongFa"}(o.MainUIViewId_008||(o.MainUIViewId_008={})),function(e){e[e.None=0]="None",e[e.Quest=1]="Quest",e[e.Explore=2]="Explore",e[e.TrialLayer=3]="TrialLayer",e[e.XiuShen=4]="XiuShen",e[e.Chapter=5]="Chapter"}(o.RedPointIndex_008||(o.RedPointIndex_008={})),function(e){e[e.Free=0]="Free",e[e.Video=1]="Video",e[e.Coin=1e4]="Coin",e[e.ZiJinYe=10005]="ZiJinYe"}(o.ShiFang_JiShi_ItemAcquisitionMethod_008||(o.ShiFang_JiShi_ItemAcquisitionMethod_008={})),function(e){e.basePowerBonus="basePowerBonus",e.superPowerBonus="superPowerBonus",e.ignoreArmorProp="ignoreArmorProp",e.bulletLifeBonus="bulletLifeBonus",e.bulletDurCount="bulletDurCount",e.dotPowerBonus="dotPowerBonus",e.dotTimeBonus="dotTimeBonus"}(o.GongFa_BonusInfoName||(o.GongFa_BonusInfoName={})),cc._RF.pop()},{}],EquipmentNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"5c960c+aw5A7pEQ+nwNEFPv","EquipmentNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("../../LocalDataManager_008"),u=e("../../utils/EquipmentUtils_008"),p=cc._decorator,d=p.ccclass,f=p.property,h=p.inspector,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=0,t.bg=null,t.i_type=null,t.icon=null,t.lbl_lv=null,t.ani_eqmK=null,t.ami_change=null,t}return i(t,e),t.prototype.onLoad=function(){this.ani_eqmK=this.node.getChildByName("equipmentKEffectNode").getChildByName("ani_eqmK").getComponent(cc.Animation),this.ami_change=this.node.getChildByName("equipmentKEffectNode").getChildByName("ani_change").getComponent(cc.Animation)},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onShowDetail,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onShowDetail,this)},t.prototype.onRefresh=function(e,t,o){if(void 0===o&&(o=!1),this.ani_eqmK.node.opacity=0,t>0){this.i_type.opacity=0,this.lbl_lv.node.opacity=255,this.lbl_lv.string="lv"+t;var n=u.EquipmentUtils_008.getEquipmentLvIndex(t);u.EquipmentUtils_008.setEquipmentNodeIcon(this.icon,this.type,n),e>=3&&(this.ani_eqmK.node.opacity=255,this.ani_eqmK.play("ani_eqmK_"+e))}else this.i_type.opacity=255,this.lbl_lv.node.opacity=0,this.icon.spriteFrame=null;u.EquipmentUtils_008.setEquipmentNodeBg(this.bg,e),o&&this.ami_change.play()},t.prototype.onShowDetail=function(){if(window.isCanCtrl){var e=c.default.getInstance().playerData.equipmentDataArr[this.type];null!==e&&(r.default.getInstance().click(),l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_getEquipment,null,e))}},a([f(cc.Integer)],t.prototype,"type",void 0),a([f(cc.Sprite)],t.prototype,"bg",void 0),a([f(cc.Node)],t.prototype,"i_type",void 0),a([f(cc.Sprite)],t.prototype,"icon",void 0),a([f(cc.Label)],t.prototype,"lbl_lv",void 0),a([d,h("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../utils/EquipmentUtils_008":"EquipmentUtils_008"}],EquipmentUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"3899fqRZT1ApKcTln+29HhQ","EquipmentUtils_008"),Object.defineProperty(o,"__esModule",{value:!0}),o.EquipmentUtils_008=void 0;var n=e("../../../Utils/RandomUtils"),i=e("../../../mag/GameMag"),a=e("../Config_008"),r=e("../entities/Entities_008"),s=["\u6b66\u5668","\u4e0a\u8863","\u4e0b\u88c5","\u6212\u6307","\u7389\u4f69","\u978b\u5b50"],l=[30,30,20,10,10,10],c=l.reduce(function(e,t){return e+t}),u=[20,35,35,9,1],p=["\u666e\u901a\u7684","\u7cbe\u826f\u7684","\u4f18\u79c0\u7684","\u53f2\u8bd7\u7684","\u4f20\u8bf4\u7684","\u795e\u8bdd\u7684"],d=u.reduce(function(e,t){return e+t}),f=u.length-1,h=[100,105,115,135,170,230],_=[[0,1],[1,2],[1,3],[4,5],[5,6],[3,6]],y=[[[20,21,23,25,28,32,37,43,49,56,64,73,83,93,104,116,129,143,157,172,188,205,223,241,260,280,301,323,345,368,392,417,443,469,496,524,553,583,613,644,676,709,743,777,812,848,885,923,961,1e3,1040,1081,1123,1165,1208,1252,1297,1343,1389,1436],[28,29,30,32,35,39,43,48,53,60,67,74,83,92,102,112,123,135,148,161,175,190,205,221,238,256,274,293,312,333,354,375,398,421,445,469,494,520,547,574,602,631,660,690,721,753,785,818,851,886,921,956,993,1030,1068,1106,1145,1185,1226,1267]],[[42,44,46,49,53,58,65,72,80,90,100,112,124,138,153,168,185,203,222,242,263,285,308,332,357,384,411,439,469,499,531,563,597,632,667,704,742,781,821,861,903,947,991,1036,1082,1129,1178,1227,1277,1329,1381,1435,1489,1545,1602,1659,1718,1778,1839,1901],[3,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120]],[[70,72,76,81,88,97,107,119,133,149,167,186,207,230,254,280,308,338,370,403,438,475,513,553,595,639,685,732,781,832,884,938,994,1052,1112,1173,1236,1301,1367,1435,1505,1577,1651,1726,1803,1882,1962,2044,2128,2214,2302,2391,2482,2575,2669,2765,2863,2963,3065,3168],[2,3,4,4,5,6,6,7,8,9,9,10,11,11,12,13,13,14,15,16,16,17,18,18,19,20,20,21,22,23,23,24,25,25,26,27,27,28,29,30,30,31,32,32,33,34,34,35,36,37,37,38,39,39,40,41,41,42,43,44]],[[10,30,50,70,90,110,130,150,170,200,230,260,290,320,350,380,410,440,470,500,530,560,590,620,650,680,710,740,770,800,830,860,890,920,950,980,1010,1040,1070,1100,1130,1160,1190,1220,1250,1280,1310,1340,1370,1400,1430,1460,1490,1520,1550,1580,1610,1640,1670,1700],[2,10,18,26,34,42,50,58,66,74,82,90,98,106,114,122,130,138,146,154,162,170,178,186,194,202,210,218,226,234,242,250,258,266,274,282,290,298,306,314,322,330,338,346,354,362,370,378,386,394,402,410,418,426,434,442,450,458,466,474]],[[8,40,72,104,136,168,200,232,264,296,328,360,392,424,456,488,520,552,584,616,648,680,712,744,776,808,840,872,904,936,968,1e3,1032,1064,1096,1128,1160,1192,1224,1256,1288,1320,1352,1384,1416,1448,1480,1512,1544,1576,1608,1640,1672,1704,1736,1768,1800,1832,1864,1896],[16,56,96,136,176,216,256,296,336,376,416,456,496,536,576,616,656,696,736,776,816,856,896,936,976,1016,1056,1096,1136,1176,1216,1256,1296,1336,1376,1416,1456,1496,1536,1576,1616,1656,1696,1736,1776,1816,1856,1896,1936,1976,2016,2056,2096,2136,2176,2216,2256,2296,2336,2376]],[[3,5,6,7,8,10,11,12,14,15,16,18,19,20,21,23,24,25,27,28,29,31,32,33,34,36,37,38,40,41,42,44,45,46,47,49,50,51,53,54,55,57,58,59,60,62,63,64,66,67,68,70,71,72,73,75,76,77,79,80],[4,14,24,34,44,54,64,74,84,94,104,114,124,134,144,154,164,174,184,194,204,214,224,234,244,254,264,274,284,294,304,314,324,334,344,354,364,374,384,394,404,414,424,434,444,454,464,474,484,494,504,514,524,534,544,554,564,574,584,594]]],g=[["\u5200","\u94c1\u6bdb\u5200","\u6708\u5149\u5200","\u7d2b\u8346\u5200","\u706b\u7130\u5200","\u91d1\u8f89\u5200"],["\u521d\u7ea7\u50e7\u8863","\u4e2d\u7ea7\u50e7\u8863","\u9ad8\u7ea7\u50e7\u8863","\u91d1\u521a\u50e7\u8863","\u7f57\u6c49\u50e7\u8863","\u5c0a\u8005\u50e7\u8863"],["\u7c97\u5e03\u50e7\u88e4","\u4e1d\u7ef8\u50e7\u88e4","\u7ed2\u5e03\u50e7\u88e4","\u91d1\u4e1d\u50e7\u88e4","\u9f99\u9cde\u50e7\u88e4","\u4f5b\u5149\u50e7\u88e4"],["\u7d20\u5fc3\u6212","\u9752\u83b2\u6212","\u84dd\u6d77\u6212","\u9752\u83b2\u6212","\u534e\u4e25\u6212","\u65e0\u4e0a\u6212"],["\u4f5b\u5149\u5c0f\u4f69","\u4f5b\u5fc3\u4f69","\u6148\u60b2\u4f69","\u83b2\u82b1\u5b9d\u4f69","\u8888\u88df\u745e\u5149","\u4f5b\u5149\u666e\u7167"],["\u8888\u88df\u62d6\u978b","\u7f57\u6c49\u5e03\u978b","\u7ed2\u5e03\u50e7\u9774","\u91d1\u4e1d\u50e7\u9774","\u7d2b\u8346\u50e7\u9774","\u4f5b\u5149\u50e7\u9774"]],m=[new cc.Color(255,255,255),new cc.Color(141,246,64),new cc.Color(50,208,254),new cc.Color(234,124,254),new cc.Color(254,229,60),new cc.Color(254,91,69)],v=[new cc.Color(79,78,78),new cc.Color(39,39,39),new cc.Color(39,39,39),new cc.Color(39,39,39),new cc.Color(39,39,39),new cc.Color(91,5,3)],b=function(){function e(){}return e.getRandomEquipmentType=function(){for(var e=0,t=c,o=n.RandomUtils.getRandomInt(0,t-1),i=0,a=0;a<l.length;a++)if(o<(i+=l[a])){e=a;break}return e},e.getRandomQuality=function(e){for(var t=0,o=d,i=n.RandomUtils.getRandomInt(0,o-1),a=0,r=0;r<u.length;r++)if(i<(a+=u[r])){t=r;break}return t===f?e<=10&&(t=f-1):e>=30&&(t=f),t},e.getRandomLv=function(e){var t=e>1?e-1:1,o=e<60?e+1:60;return n.RandomUtils.getRandomInt(t,o)},e.getInfoOffsetValue=function(e,t){var o=h[e>0?e-1:0],i=h[e],a=n.RandomUtils.getRandomInt(100*o,100*i);return Math.ceil(t*a*1e-4)},e.isHighestQuality=function(e){return e>=f},e.getRandomEquipment=function(e,t){var o=new r.EquipmentData;o.type=this.getRandomEquipmentType(),o.quality=this.getRandomQuality(t),o.lv=this.getRandomLv(e),o.infoTypeArr=_[o.type],o.infoValueArr=[];for(var n=0;n<o.infoTypeArr.length;n++){var i=n,a=y[o.type][i][o.lv],s=this.getInfoOffsetValue(o.quality,a);o.infoValueArr.push(s)}return o},e.getEquipmentTypeDescByType=function(e){var t;return null!==(t=null==s?void 0:s[e])&&void 0!==t?t:"\u672a\u77e5\u90e8\u4f4d"},e.getEquipmentQualityDesc=function(e){var t;return null!==(t=null==p?void 0:p[e])&&void 0!==t?t:"\u5f02\u5e38\u7684"},e.getEquipmentLvIndex=function(e){return e<60?Math.ceil(e/10):6},e.getEquipmentName=function(e,t){var o,n,i=this.getEquipmentLvIndex(t);return null!==(n=null===(o=null==g?void 0:g[e])||void 0===o?void 0:o[i])&&void 0!==n?n:"\u88c5\u5907"},e.getEquipmentFullName=function(e,t,o){return this.getEquipmentQualityDesc(o)+this.getEquipmentName(e,t)},e.setEquipmentNodeBg=function(e,t){i.default.getInstance().getSpriteFrame(a.default.Equipment_BgPath+t).then(function(t){e.spriteFrame=t})},e.setEquipmentNodeIcon=function(e,t,o){i.default.getInstance().getSpriteFrame(a.default.Equipment_IconPath[t]+o).then(function(t){e.spriteFrame=t})},e.setEquipmentNameLabelNodeColor=function(e,t){e.color=m[t],e.getComponent(cc.LabelOutline).color=v[t]},e}();o.EquipmentUtils_008=b,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/GameMag":"GameMag","../Config_008":"Config_008","../entities/Entities_008":"Entities_008"}],ExitUI:[function(e,t,o){"use strict";cc._RF.push(t,"3782bbJdBJHiaaJ5sGQ7NFM","ExitUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../config/GameConfig"),s=e("../game/mag/GameManager"),l=e("../game/mag/UIMag"),c=e("./BaseUI"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_yes=null,t.btn_no=null,t}return i(t,e),t.prototype.onOnLoad=function(){this.btn_yes=this.actNode.getChildByName("btn_yes"),this.btn_no=this.actNode.getChildByName("btn_no")},t.prototype.start=function(){this.addBtnEvent(this.btn_yes),this.addBtnEvent(this.btn_no)},t.prototype.onOnClickBtn=function(e){switch(e.target){case this.btn_yes:this.onYes();break;case this.btn_no:this.onNo()}},t.prototype.onYes=function(){s.default.ins.onStopGame(),l.default.ins.HideUI(l.UIType.ExitUI,!1,null),l.default.ins.HideUI(l.UIType.GameUI,!0,function(){l.default.ins.ShowUI(l.UIType.StartUI,!0,null)})},t.prototype.onNo=function(){l.default.ins.HideUI(l.UIType.ExitUI,!0,function(){r.default.isGamePause=!1})},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../config/GameConfig":"GameConfig","../game/mag/GameManager":"GameManager","../game/mag/UIMag":"UIMag","./BaseUI":"BaseUI"}],ExpBarNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"1c0f07+D0JPNL6doYxVv8/2","ExpBarNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../GamingData_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.expBar=null,t.sf_1=null,t.sf_2=null,t.ani_2=null,t}return i(t,e),t.prototype.onRefreshExpBar=function(e,t){var o=this;t?(cc.Tween.stopAllByTarget(this.expBar),this.unscheduleAllCallbacks(),cc.tween(this.expBar).to(.2,{fillRange:e}).call(function(){e>=1&&(o.expBar.spriteFrame=o.sf_2,o.ani_2.play(),o.scheduleOnce(function(){o.expBar.fillRange=0,o.expBar.spriteFrame=o.sf_1,r.default.func_refreshExpLvLabel&&r.default.func_refreshExpLvLabel(r.default.currLv+1)},.6))}).start()):this.expBar.fillRange=e},a([c(cc.Sprite)],t.prototype,"expBar",void 0),a([c(cc.SpriteFrame)],t.prototype,"sf_1",void 0),a([c(cc.SpriteFrame)],t.prototype,"sf_2",void 0),a([c(cc.Animation)],t.prototype,"ani_2",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../GamingData_008":"GamingData_008"}],ExploreBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"ce647cQGxpFgrw8qVIBTev9","ExploreBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("../../LocalDataManager_008"),u=e("../../entities/Enums_008"),p=cc._decorator,d=p.ccclass,f=(p.property,p.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.times=0,t}return i(t,e),t.prototype.onEnable=function(){c.default.getInstance().playerData.isUnlockExplore?this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this):this.node.active=!1},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this)},t.prototype.update=function(e){if(c.default.getInstance().playerData.isUnlockExplore&&(this.times+=e,!(this.times<60))){this.times=0;var t=c.default.getInstance().playerData;t.isUnlockExplore&&t.lastExploreTime+6e4<Date.now()&&l.default.onShowRedPoint.executeDelegates(u.RedPointIndex_008.Explore)}},t.prototype.onTouchBtn=function(){window.isCanCtrl&&(r.default.getInstance().click(),l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_Explore))},a([d],t)}(cc.Component));o.default=f,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008"}],ExploreDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"a3250vZzVhFxZ2Iu7FtmM3X","ExploreDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/AudioMag"),c=e("../../../../mag/VideoManager"),u=e("../../Config_008"),p=e("../../DelegateManager_008"),d=e("../../LocalDataManager_008"),f=e("../../entities/Enums_008"),h=e("../../quests/QuestsSys_008"),_=e("./BaseUIDialog_008"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnReward=null,t.btnClose=null,t.btnQuick=null,t.btnQuickVideo=null,t.keyIncr=null,t.coinIncr=null,t.lingqiIncr=null,t.totalTime=null,t.quickCost=null,t.items=null,t.m_exploreTime=0,t.m_timer=0,t.m_totalTimeStr="\u6e38\u5386\u65f6\u95f4\uff1a{0}",t}return i(t,e),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return d.default.getInstance().playerData.isUnlockExplore},enumerable:!1,configurable:!0}),t.prototype.onInit=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];e.prototype.onInitBg.call(this,t),this.onInitData(),this.onRefreshUI()},t.prototype.onInitEvent=function(){this.btnClose.node.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.btnReward.node.on(cc.Node.EventType.TOUCH_END,this.onClickReward,this),this.btnQuick.node.on(cc.Node.EventType.TOUCH_END,this.onClickQuick,this),this.btnQuickVideo.node.on(cc.Node.EventType.TOUCH_END,this.onClickQuick,this)},t.prototype.onRemoveEvent=function(){},t.prototype.update=function(e){this.isEnabled&&(this.m_timer+=e,this.m_timer>=1&&(this.m_timer=0,this.m_exploreTime=Math.min(this.m_exploreTime+1,21600),this.onRefreshUI()))},t.prototype.onInitData=function(){var e=d.default.getInstance().playerData,t=new Date,o=e.lastExploreTime,n=t.getTime()-o,i=Math.floor(n/1e3);this.m_exploreTime=Math.min(i,21600),this.m_timer=0,this.m_exploreTime=this.isEnabled?this.m_exploreTime:0},t.prototype.onRefreshUI=function(){var e,t=this,o=this.getRewardItems(this.m_exploreTime);this.items.children.forEach(function(e,t){var n=o[t];e.active=!!n}),this.getRewardItems(this.m_exploreTime).forEach(function(e){return r(t,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return(o=this.items.children.find(function(t){return Number(t.name)===e.itemId}))?[3,2]:[4,window.questUtil_008.getRewardItem(e.itemId,e.count)];case 1:o=n.sent(),n.label=2;case 2:return(t=o).name=e.itemId.toString(),t.getChildByName("num").getComponent(cc.Label).string=e.count.toString(),t.active=e.count>0,t.parent=this.items,[2]}})})});var n=d.default.getInstance().playerData;null===(e=this.items.getComponent(cc.Layout))||void 0===e||e.updateLayout(),this.quickCost.string="-5",this.keyIncr.string="+2",this.coinIncr.string="+3",this.lingqiIncr.string="+10",this.lingqiIncr.node.parent.active=n.isUnlockXiuShen,this.totalTime.string=this.m_totalTimeStr.replace("{0}",this.onGetTimeStr()),this.btnReward.interactable=this.m_exploreTime>=60,this.btnQuick.node.active=n.item_getCountById(f.ItemType_008.c_energy)>=5,this.btnQuickVideo.node.active=!this.btnQuick.node.active},t.prototype.onGetTimeStr=function(){return Math.floor(this.m_exploreTime/3600)+"\u5c0f\u65f6"+Math.floor(this.m_exploreTime%3600/60)+"\u5206\u949f"},t.prototype.getRewardItems=function(e){var t=function(t){return Math.floor(e/60)*t},o=d.default.getInstance().playerData,n=[{itemId:f.ItemType_008.c_coin,count:t(3)},{itemId:f.ItemType_008.c_boxKey,count:t(2)}];return o.isUnlockXiuShen&&n.push({itemId:f.ItemType_008.c_lingqi,count:t(10)}),JSON.parse(JSON.stringify(n))},t.prototype.onClickClose=function(){p.default.onCloseSomeoneDia.executeDelegates(),this.onHide(function(){})},t.prototype.onClickReward=function(){if(!(this.m_exploreTime<60)){l.default.getInstance().click();var e=d.default.getInstance().playerData,t=this.getRewardItems(this.m_exploreTime);t.forEach(function(t){e.item_addCountById(t.itemId,t.count)}),p.default.onHideRedPoint.executeDelegates(f.RedPointIndex_008.Explore),this.m_exploreTime=0,e.lastExploreTime=(new Date).getTime(),d.default.getInstance().onSaveData(),this.onRefreshUI(),p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_Rewards,t)}},t.prototype.onClickQuick=function(){var e=this,t=d.default.getInstance().playerData,o=function(){l.default.getInstance().click();var o=e.getRewardItems(3600);o.forEach(function(e){t.item_addCountById(e.itemId,e.count)}),p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_Rewards,o)};if(!(t.item_getCountById(f.ItemType_008.c_energy)<5))return p.default.onQuestProgressIncr.executeDelegates(h.QuestTargetID.QuickExplore,1),t.item_addCountById(f.ItemType_008.c_energy,-5),p.default.onShowUIFloatEnergyReduce.executeDelegates(5,this.btnQuick.node),o();c.default.getInstance().showVideo(o)},a([m(cc.Button)],t.prototype,"btnReward",void 0),a([m(cc.Button)],t.prototype,"btnClose",void 0),a([m(cc.Button)],t.prototype,"btnQuick",void 0),a([m(cc.Button)],t.prototype,"btnQuickVideo",void 0),a([m(cc.Label)],t.prototype,"keyIncr",void 0),a([m(cc.Label)],t.prototype,"coinIncr",void 0),a([m(cc.Label)],t.prototype,"lingqiIncr",void 0),a([m(cc.Label)],t.prototype,"totalTime",void 0),a([m(cc.Label)],t.prototype,"quickCost",void 0),a([m(cc.Node)],t.prototype,"items",void 0),a([g],t)}(_.default);o.default=v,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../quests/QuestsSys_008":"QuestsSys_008","./BaseUIDialog_008":"BaseUIDialog_008"}],ExpstoneShowNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"53507QhIM5KLZCJEY/4ErR9","ExpstoneShowNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.sfArr=[],t}return i(t,e),t.prototype.onEnable=function(){this.node.on(r.default.e_RefreshExpstoneSF,this.onRefresh,this)},t.prototype.onDisable=function(){this.node.off(r.default.e_RefreshExpstoneSF,this.onRefresh,this)},t.prototype.onRefresh=function(e){this.sprite.spriteFrame=this.sfArr[e-r.DropItemType.ExpGemstone_1]},a([c(cc.Sprite)],t.prototype,"sprite",void 0),a([c([cc.SpriteFrame])],t.prototype,"sfArr",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Config_008":"Config_008"}],FightUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"6a5b41JzYVLWaExGaOcg6kQ","FightUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.calculateDamage=function(e,t){return(1*e+0)/(e+(1*t+0))*e},e}();o.default=n,cc._RF.pop()},{}],FloatItemsUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"73339MxNWtEWZ0+X7vMrQII","FloatItemsUtils_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){window.floatItemsUtils_008=this},t.prototype.playCollectItemAnim=function(e,t,o,n){var i=this;return void 0===n&&(n=10),new Promise(function(a){t instanceof cc.Node&&(t=t.convertToWorldSpaceAR(cc.v3(0,0))),o instanceof cc.Node&&(o=o.convertToWorldSpaceAR(cc.v3(0,0))),t=cc.v2(t),o=cc.v2(o);for(var r=[1,2,3,5,7,10],s=0;s<r.length;s++)for(var l=r[s],c=function(c){var u;e instanceof cc.Node?(u=cc.instantiate(e)).parent=i.node:((u=new cc.Node).parent=i.node,u.addComponent(cc.Sprite).spriteFrame=e);var p=t.add(cc.Vec2.random(cc.Vec2.ZERO,(u.width>>1)*s).multiply(cc.v2(1,.5))),d=u.parent.convertToNodeSpaceAR(t),f=u.parent.convertToNodeSpaceAR(p),h=u.parent.convertToNodeSpaceAR(o),_=--n<=0||s===r.length-1&&c===l-1,y=.05*(s+c);cc.tween(u).set({x:d.x,y:f.y,angle:360*Math.random(),scale:0}).parallel(cc.tween(u).to(.3,{y:d.y+200},{easing:function(e){return Math.abs((1-e)*Math.sin(e*Math.PI*2))}}),cc.tween(u).to(.3,{x:f.x}),cc.tween(u).to(.3,{scale:1,angle:0},{easing:cc.easing.expoOut})).delay(.5+y).to(.5,{position:cc.v3(h),scale:0}).call(function(){_&&a(),u.destroy()}).start()},u=0;u<l&&n>0;u++)c(u)})},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],FloatPair:[function(e,t,o){"use strict";cc._RF.push(t,"dfbbbwxX55GSbazLjagSF6O","FloatPair"),Object.defineProperty(o,"__esModule",{value:!0}),o.FloatPair=void 0;var n=function(){function e(e,t){this._a=e,this._b=t}return e.inf=function(e,t){return e._a<t._a||!(t._a<e._a)&&e._b<t._b},e.inf_equal=function(e,t){return e._a==t._a&&e._b==t._b||e<t},e.sup=function(t,o){return!e.inf_equal(t,o)},e.sup_equal=function(){return!e.inf},e}();o.FloatPair=n,cc._RF.pop()},{}],FloatTextMag_008:[function(e,t,o){"use strict";cc._RF.push(t,"c2b2fpxYUZH8ojvzBytKv21","FloatTextMag_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Utils/RandomUtils"),s=e("../../Utils/StringUtils"),l=e("../../mag/NodePoolManager"),c=e("./Config_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.floatTextPre=null,t.currFloatTextCount=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this},t.prototype.onDestroy=function(){},t.prototype.onShowDamageFloatText=function(e,t,o,n){if(void 0===n&&(n=cc.Color.WHITE),!(this.currFloatTextCount>=c.default.MaxFloatTextCount)){var i=l.default.getInstance().getNodeNotNull(c.default.Key_FloatText);i.setParent(this.node),i.setPosition(t,o),i.getComponent(cc.Label).string=s.default.numberDispose(e,4),i.scale=0,i.opacity=255,i.color=n,cc.tween(i).parallel(cc.tween().to(.4,{scale:.01*r.RandomUtils.getRandomInt(90,110)},{easing:"backOut"}).delay(.2).to(.25,{opacity:0,scale:0}),cc.tween().by(.25,{y:r.RandomUtils.getRandomInt(140,200),x:r.RandomUtils.getRandomInt(-80,80)})).call(this.onRecoveryFloatText.bind(this,i)).start(),this.currFloatTextCount+=1}},t.prototype.onShowDamageFloatText_Cirt=function(e,t,o,n){if(void 0===n&&(n=cc.Color.WHITE),!(this.currFloatTextCount>=c.default.MaxFloatTextCount)){var i=l.default.getInstance().getNodeNotNull(c.default.Key_FloatText);i.setParent(this.node),i.setPosition(t,o),i.getComponent(cc.Label).string=s.default.numberDispose(e,4),i.scale=0,i.opacity=255,i.color=cc.Color.YELLOW,cc.tween(i).parallel(cc.tween().to(.2,{scale:.01*r.RandomUtils.getRandomInt(90,110)},{easing:"backOut"}).delay(.4).to(.25,{opacity:0,scale:0}),cc.tween().by(.25,{y:r.RandomUtils.getRandomInt(140,200),x:r.RandomUtils.getRandomInt(-80,80)})).call(this.onRecoveryFloatText.bind(this,i)).start(),this.currFloatTextCount+=1}},t.prototype.onRecoveryFloatText=function(e){this.currFloatTextCount-=1,l.default.getInstance().recoveryNode(c.default.Key_FloatText,e)},t.ins=null,a([d(cc.Prefab)],t.prototype,"floatTextPre",void 0),o=a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../Utils/RandomUtils":"RandomUtils","../../Utils/StringUtils":"StringUtils","../../mag/NodePoolManager":"NodePoolManager","./Config_008":"Config_008"}],FloatTextManager:[function(e,t,o){"use strict";cc._RF.push(t,"0ddbatxWlpBHbj+aS+25I3O","FloatTextManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./FloatTextUI"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab_floatText=null,t.nodePool_floatText=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this,this.initNodePool()},t.prototype.showFloatText=function(e){var t=this.getFloatTextNode(e);t.setParent(this.node),t.setSiblingIndex(0)},t.prototype.initNodePool=function(){this.nodePool_floatText=new cc.NodePool(r.default);for(var e=0;e<5;e++){var t=cc.instantiate(this.prefab_floatText);this.nodePool_floatText.put(t)}},t.prototype.getFloatTextNode=function(e){var t=null;return this.nodePool_floatText.size()>0?t=this.nodePool_floatText.get(e):(t=cc.instantiate(this.prefab_floatText),this.nodePool_floatText.put(t),this.getFloatTextNode(e))},t.prototype.unuseFloatText=function(e){this.nodePool_floatText.put(e)},t.ins=null,a([c(cc.Prefab)],t.prototype,"prefab_floatText",void 0),o=a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./FloatTextUI":"FloatTextUI"}],FloatTextUI:[function(e,t,o){"use strict";cc._RF.push(t,"d2d3fzxnOFCnKb71+iAsyze","FloatTextUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./FloatTextManager"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.reuse=function(e){var t=this.node.getComponentInChildren(cc.Label);t.node.y=0,t.node.opacity=255,t.string=e,this.playAni(t.node)},t.prototype.playAni=function(e){var t=this;cc.tween(e).delay(.5).to(1.5,{opacity:0}).delay(.5).call(function(){r.default.ins.unuseFloatText(t.node)}).start()},a([l],t)}(cc.Component));o.default=c,cc._RF.pop()},{"./FloatTextManager":"FloatTextManager"}],FlyingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"7bd3eauDm5PUYw4Fertz9+t","FlyingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boxCollider=null,t.sprite=null,t.power=0,t.timer=0,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.sprite.spriteFrame=e.getComponent(cc.Sprite).spriteFrame,this.sprite.node.width=e.width*e.scaleX,this.sprite.node.height=e.height*e.scaleY,this.boxCollider.size.width=this.sprite.node.width,this.boxCollider.size.height=this.sprite.node.height;var n=e.convertToWorldSpaceAR(cc.v2(this.sprite.node.width/2,0));this.node.setPosition(c.default.GameObjNode.convertToNodeSpaceAR(n)),this.node.angle=e.parent.angle,this.moveDir=e.parent.getPosition().sub(c.default.PlayerNode.getPosition()).normalize(),this.power=t,this.timer=o,r.default.getInstance().playSound(l.default.SEF_KnifeFlying)},t.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){e.node.opacity=255},0),this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){c.default.isGamePause||(this.node.angle+=1800*e,this.node.setPosition(this.node.getPosition().add(this.moveDir.mul(800*e))),this.node.opacity=c.default.RenderRect.contains(this.node.getPosition())?255:0,this.timer-=e,this.timer<=0&&this.onRecovery())},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(r.default.getInstance().playSound_intervalLimit(l.default.SEF_WEHit,80),e.node.emit(l.default.e_OnEnemyAttacked,this.power,0))},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_FlyingKnife,this.node)},a([d(cc.BoxCollider)],t.prototype,"boxCollider",void 0),a([d(cc.Sprite)],t.prototype,"sprite",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],FoxDateBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"cca6bql4AtCeKazQrF1D5Ib","FoxDateBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("../../GamingData_008"),u=e("../../LocalDataManager_008"),p=cc._decorator,d=p.ccclass,f=(p.property,p.inspector),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dir=cc.v2(1,0),t.speed=100,t.times=0,t._isShow=!1,t}return i(t,e),Object.defineProperty(t.prototype,"isShow",{get:function(){return this._isShow},set:function(e){this.times=Math.floor(5*Math.random()+5),this._isShow=e,e?(this.dir=cc.Vec2.random(cc.Vec2.ONE,1),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this),this.node.opacity<255&&cc.tween(this.node).to(.5,{opacity:255}).start()):(this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this),this.node.opacity>0&&cc.tween(this.node).to(.2,{opacity:0}).start())},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.node.opacity=0,this.isShow=!1},t.prototype.update=function(t){return e.prototype.update.call(this,t),c.default.isGaming?this.isShow=!1:c.default.isTrialMode?this.isShow=!1:u.default.getInstance().playerData.foxDateTimes>=4?this.isShow=!1:(this.node.setPosition(this.node.getPosition().add(this.dir.mul(this.speed*t))),(this.node.x+this.node.width/2>this.node.parent.width/2||this.node.x-this.node.width/2<-this.node.parent.width/2)&&(this.dir.x*=-1),(this.node.y+this.node.height/2>this.node.parent.height/2||this.node.y-this.node.height/2<-this.node.parent.height/2)&&(this.dir.y*=-1),this.node.parent.getBoundingBox().contains(this.node.parent.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)))||(this.node.setPosition(0,0),this.node.opacity=0,this.isShow=!0),this.times-=t,void(this.times<=0&&(this.isShow=!this.isShow)))},t.prototype.onTouchBtn=function(){window.isCanCtrl&&(r.default.getInstance().click(),this.node.opacity=0,this.isShow=!1,l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_FoxDate))},a([d,f("packages://inspector/inspectors/comps/button.js")],t)}(cc.Button);o.default=h,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../LocalDataManager_008":"LocalDataManager_008"}],FoxDateDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"9aac252wnVBHog9CrubcU6z","FoxDateDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/VideoManager"),s=e("../../DelegateManager_008"),l=e("../../LocalDataManager_008"),c=e("../../utils/FoxDateUtils_008"),u=e("../../utils/PlayerInfoUtils_008"),p=e("./BaseUIDialog_008"),d=cc._decorator,f=d.ccclass,h=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBtn=null,t.videoBtn=null,t}return i(t,e),t.prototype.onInit=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.onInitBg(e)},t.prototype.onInitEvent=function(){var e=this;this.closeBtn.node.on(cc.Node.EventType.TOUCH_END,function(){e.onHide(function(){})},this),this.videoBtn.node.on(cc.Node.EventType.TOUCH_END,this.onVideo,this)},t.prototype.onRemoveEvent=function(){this.closeBtn.node.off(cc.Node.EventType.TOUCH_END),this.videoBtn.node.off(cc.Node.EventType.TOUCH_END)},t.prototype.onVideo=function(){var e=this;this.onHide(function(){var t=l.default.getInstance().playerData;r.default.getInstance().showVideo(function(){var o=u.default.getTotalScore(t);t.foxDateTimes++;var n=u.default.getTotalScore(t);s.default.onShowUIFloatText.executeDelegates("\u53cc\u4fee\u6210\u529f"),e.scheduleOnce(function(){s.default.onShowUIFloatText.executeDelegates("\u653b\u51fb\u529b+"+c.default.getBaseScoreByInfoType(t,0))},.5),e.scheduleOnce(function(){s.default.onScoreChange.executeDelegates(o,n)},1.5),s.default.onRefreshTotalScoreUI.executeDelegates(n),l.default.getInstance().onSaveData()})})},a([h(cc.Button)],t.prototype,"closeBtn",void 0),a([h(cc.Button)],t.prototype,"videoBtn",void 0),a([f],t)}(p.default);o.default=_,cc._RF.pop()},{"../../../../mag/VideoManager":"VideoManager","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../utils/FoxDateUtils_008":"FoxDateUtils_008","../../utils/PlayerInfoUtils_008":"PlayerInfoUtils_008","./BaseUIDialog_008":"BaseUIDialog_008"}],FoxDateUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"ef131siYPJMf7o1jg4M9fge","FoxDateUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PlayerInfoUtils_008"),i=[0,50,80,100,150],a=function(){function e(){}return e.getBaseScoreByInfoType=function(e,t){switch(t){case 0:return i[e.foxDateTimes];default:return 0}},e.getInfoByPlayerData=function(e,t){switch(t){case 0:var o=e.foxDateTimes;return i.reduce(function(e,t,n){return n<=o?e+t:e},0);default:return 0}},e.getTotalScore=function(e){return n.default.getBaseScoreByInfoType(0)*this.getInfoByPlayerData(e,0)},e}();o.default=a,cc._RF.pop()},{"./PlayerInfoUtils_008":"PlayerInfoUtils_008"}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"261dfNDDZxFwa5uAjgj9/w7","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.ModeId=0,e.isGamePause=!0,e.playerMoveSpeedRate=1,e.isPlayerOnDefense=!1,e}();o.default=n,cc._RF.pop()},{}],GameMag:[function(e,t,o){"use strict";cc._RF.push(t,"5ce08rS1cZDT5ChX7PvVfaM","GameMag");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){this.bundle=null}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.init=function(){return n(this,void 0,void 0,function(){var e=this;return i(this,function(){return[2,new Promise(function(t,o){cc.assetManager.loadBundle("gameRes",function(n){n&&(console.log(n,"\u52a0\u8f7dgameRes bundle\u5931\u8d25"),o()),console.log("\u52a0\u8f7dgameRes bundle\u5b8c\u6210"),cc.assetManager.loadBundle("game",function(n,i){n?(console.log(n,"\u52a0\u8f7dgame bundle\u5931\u8d25"),o()):(e.bundle=i,console.log("\u52a0\u8f7dgame bundle\u5b8c\u6210"),t&&t(null))})})})]})})},e.prototype.loadPrefab=function(t,o){e._casePrefabRes[t]?o(e._casePrefabRes[t]):this.bundle.load(t,cc.Prefab,function(n,i){n?cc.log(n):(e._casePrefabRes[t]=i,o(i))})},e.prototype.loadLevel=function(t,o){var n=this;if(e._caseLevelPreRes.has(t))return e._caseLevelPreUseTimes.set(t,20),n.tryReleaseLevelRes(),void o(e._caseLevelPreRes.get(t));window.waitingStartFunc&&window.waitingStartFunc("\u8d44\u6e90\u52a0\u8f7d\u4e2d...",!0),this.bundle.load(t,cc.Prefab,function(e,t){window.waitingFunc&&window.waitingFunc(e/t)},function(i,a){window.waitingEndFunc&&window.waitingEndFunc(),i?cc.log(i):(e._caseLevelPreRes.set(t,a),e._caseLevelPreUseTimes.set(t,20),n.tryReleaseLevelRes(),o(a))})},e.prototype.tryReleaseLevelRes=function(){var t=[];e._caseLevelPreUseTimes.forEach(function(o,n){o>1?e._caseLevelPreUseTimes.set(n,o-1):t.push(n)});for(var o=0;o<t.length;o++)e._caseLevelPreUseTimes.has(t[o])&&e._caseLevelPreUseTimes.delete(t[o]),e._caseLevelPreRes.has(t[o])&&e._caseLevelPreRes.delete(t[o])},e.prototype.getPrefab=function(t){return n(this,void 0,Promise,function(){var o=this;return i(this,function(){return[2,new Promise(function(n){e._casePrefabRes[t]?n(e._casePrefabRes[t]):o.bundle?o.bundle.load(t,cc.Prefab,function(o,i){o&&(cc.log(o),n(null)),e._casePrefabRes[t]=i,n(i)}):n(null)})]})})},e.prototype.getSpriteFrame=function(t){return n(this,void 0,Promise,function(){var o=this;return i(this,function(){return[2,new Promise(function(n){e._caseSpriteFrameRes[t]?n(e._caseSpriteFrameRes[t]):o.bundle?o.bundle.load(t,cc.SpriteFrame,function(o,i){o&&(cc.log(o),n(null)),e._caseSpriteFrameRes[t]=i,n(i)}):n(null)})]})})},e.prototype.getJson=function(e){return n(this,void 0,Promise,function(){var t=this;return i(this,function(){return[2,new Promise(function(o){if(t.bundle){var n=t;t.bundle.load(e,cc.JsonAsset,function(t,i){t&&(cc.log(t),o(null));var a=i.json;n.bundle.release(e,cc.JsonAsset),o(a)})}else o(null)})]})})},e.prototype.preLoadPrefab=function(e){this.bundle&&this.bundle.preload(e,cc.Prefab)},e._casePrefabRes={},e._caseSpriteFrameRes={},e._caseLevelPreRes=new Map,e._caseLevelPreUseTimes=new Map,e}();o.default=a,cc._RF.pop()},{}],GameManager_008:[function(e,t,o){"use strict";cc._RF.push(t,"9b728cnN05E2br5w7jfpwT+","GameManager_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../RVO2/Simulator"),s=e("../../RVO2/Vector2"),l=e("../../Utils/MathUtils"),c=e("../../mag/GameMag"),u=e("./Config_008"),p=e("./DelegateManager_008"),d=e("./DropItemMag_008"),f=e("./GamingData_008"),h=e("./PotMag_008"),_=e("./VideoDropItemMag_008"),y=e("./player/Player_008"),g=cc._decorator,m=g.ccclass,v=g.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enemyBulletNode_middle=null,t.enemyBulletNode_high=null,t.gameCamera=null,t.playerNode=null,t.gameObjNode=null,t.mapParentNode=null,t.changeGameCameraOrthoTimer=0,t.changeGameCameraOrthoDuration=0,t.changeGameCameraOrthoStartValue=0,t.changeGameCameraOrthoTargetValue=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this,f.default.enemyBulletNode_middle=this.enemyBulletNode_middle,f.default.enemyBulletNode_high=this.enemyBulletNode_high,f.default.gameCamera=this.gameCamera,f.default.gameCameraNode=this.gameCamera.node,f.default.GameObjNode=this.gameObjNode,p.default.onChangeGameCameraOrtho.addDelegate(this.onChangeGameCameraOrtho,this)},t.prototype.onDestroy=function(){p.default.onChangeGameCameraOrtho.removeDelegate(this.onChangeGameCameraOrtho,this)},t.prototype.onEnable=function(){this.onInitSimulator()},t.prototype.update=function(e){f.default.isGamePause||(this.updateGameCameraOrtho(e),f.default.updateCameraRect(),r.Simulator.Instance().setTimeStep(e),r.Simulator.Instance().doStep())},t.prototype.onInitSimulator=function(){r.Simulator.Instance().clear(),r.Simulator.Instance().setAgentDefaults(120,6,5,0,60,100)},t.prototype.addNewAgent=function(e){var t=new s.Vector2(e.getPosition().x,e.getPosition().y);return r.Simulator.Instance().addNewAgent(t)},t.prototype.addAgent=function(e,t){var o=new s.Vector2(t.getPosition().x,t.getPosition().y);r.Simulator.Instance().addAgent(e,o)},t.prototype.removeAgent=function(e){return r.Simulator.Instance().removeAgent(e)},t.prototype.setAgentPrefVelocity=function(e,t){r.Simulator.Instance().setAgentPrefVelocity(e,t)},t.prototype.getAgentPosition=function(e){var t=r.Simulator.Instance().getAgentPosition(e);return cc.v2(t.x,t.y)},t.prototype.setAgentPosition=function(e,t){r.Simulator.Instance().setAgentPosition(e,new s.Vector2(t.x,t.y))},t.prototype.setAgentAvoidenceWeight=function(e,t){r.Simulator.Instance().setAgentAvoidenceWeight(e,t)},t.prototype.onStartGame=function(e){var t=cc.winSize.height/1280;this.gameCamera.orthoSize=u.default.CameraOrthoSize*t,f.default.cameraHalfWidth=cc.winSize.width*this.gameCamera.orthoSize/cc.winSize.height,f.default.cameraHalfHeight=this.gameCamera.orthoSize,this.playerNode.getComponent(y.default).onInit(e),h.default.ins.onStartGame(),_.default.ins.onStartGame()},t.prototype.onStopGame=function(){d.default.ins.onStopGame(),h.default.ins.onStopGame(),_.default.ins.onStopGame(),this.mapParentNode.destroyAllChildren(),this.playerNode.getComponent(y.default).onStopGame(),this.onRcoverySomeNode()},t.prototype.onRcoverySomeNode=function(){for(var e,t,o,n=f.default.GameObjNode,i=n.childrenCount-1;i>=0;i--)null===(e=n.children[i])||void 0===e||e.emit(u.default.e_OnExitBattleRoundRecoveryGameObjNode);for(i=this.enemyBulletNode_high.childrenCount-1;i>=0;i--)null===(t=this.enemyBulletNode_high.children[i])||void 0===t||t.emit(u.default.e_OnExitBattleRoundRecoveryGameObjNode);for(i=this.enemyBulletNode_middle.childrenCount-1;i>=0;i--)null===(o=this.enemyBulletNode_middle.children[i])||void 0===o||o.emit(u.default.e_OnExitBattleRoundRecoveryGameObjNode)},t.prototype.onLoadMap=function(e){var t=this;return new Promise(function(o){c.default.getInstance().getPrefab(e).then(function(e){if(null!==e){var n=cc.instantiate(e);n.setParent(t.mapParentNode),n.setPosition(0,0)}o(null)})})},t.prototype.onChangeGameCameraOrtho=function(e,t){this.changeGameCameraOrthoDuration=e,this.changeGameCameraOrthoTimer=0;var o=cc.winSize.height/1280;this.changeGameCameraOrthoTargetValue=t*o,this.changeGameCameraOrthoStartValue=this.gameCamera.orthoSize},t.prototype.updateGameCameraOrtho=function(e){if(!(this.changeGameCameraOrthoTimer>=this.changeGameCameraOrthoDuration)){this.changeGameCameraOrthoTimer+=e;var t=Math.min(this.changeGameCameraOrthoTimer/this.changeGameCameraOrthoDuration,1);this.gameCamera.orthoSize=l.default.lerp(this.changeGameCameraOrthoStartValue,this.changeGameCameraOrthoTargetValue,t),f.default.cameraHalfWidth=cc.winSize.width*this.gameCamera.orthoSize/cc.winSize.height,f.default.cameraHalfHeight=this.gameCamera.orthoSize}},t.ins=null,a([v(cc.Node)],t.prototype,"enemyBulletNode_middle",void 0),a([v(cc.Node)],t.prototype,"enemyBulletNode_high",void 0),a([v(cc.Camera)],t.prototype,"gameCamera",void 0),a([v(cc.Node)],t.prototype,"playerNode",void 0),a([v(cc.Node)],t.prototype,"gameObjNode",void 0),a([v(cc.Node)],t.prototype,"mapParentNode",void 0),o=a([m],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../RVO2/Simulator":"Simulator","../../RVO2/Vector2":"Vector2","../../Utils/MathUtils":"MathUtils","../../mag/GameMag":"GameMag","./Config_008":"Config_008","./DelegateManager_008":"DelegateManager_008","./DropItemMag_008":"DropItemMag_008","./GamingData_008":"GamingData_008","./PotMag_008":"PotMag_008","./VideoDropItemMag_008":"VideoDropItemMag_008","./player/Player_008":"Player_008"}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"0bcf3dbPYNKqISk4FhJ69ok","GameManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../config/GameConfig"),s=e("../../config/LevelConfig"),l=e("./GameMag"),c=cc._decorator,u=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currLevelNode=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this},t.prototype.onStartGame=function(){var e=this,t=r.default.ModeId;r.default.isGamePause=!0,l.default.getInstance().loadLevel(s.default.config[t].prePath,function(t){var o=cc.instantiate(t);e.node.addChild(o),e.currLevelNode=o})},t.prototype.onStopGame=function(){r.default.isGamePause=!0,null!=this.currLevelNode&&(this.currLevelNode.destroy(),this.currLevelNode=null)},t.prototype.OnRefreshGame=function(){var e=this,t=r.default.ModeId;this.onStopGame(),l.default.getInstance().loadLevel(s.default.config[t].prePath,function(t){var o=cc.instantiate(t);e.node.addChild(o),e.currLevelNode=o})},t.ins=null,o=a([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../config/GameConfig":"GameConfig","../../config/LevelConfig":"LevelConfig","./GameMag":"GameMag"}],GameUI:[function(e,t,o){"use strict";cc._RF.push(t,"f6c3eo1J31HO5JgqSn8KfmK","GameUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../config/GameConfig"),s=e("../game/mag/AudioMag"),l=e("../game/mag/GameManager"),c=e("../game/mag/UIMag"),u=e("./BaseUI"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_back=null,t}return i(t,e),t.prototype.onOnLoad=function(){this.btn_back=this.actNode.getChildByName("btn_back")},t.prototype.onEnable=function(){this.addBtnEvent(this.btn_back),this.btn_back.active=7!==r.default.ModeId,7!==r.default.ModeId&&s.default.getInstance().playBGM(s.AudioType.bgm_game)},t.prototype.onDisable=function(){s.default.getInstance().playBGM(s.AudioType.bgm_start),this.remvoeBtnEvent(this.btn_back)},t.prototype.onOnClickBtn=function(e){switch(s.default.getInstance().click(),e.target){case this.btn_back:this.onBack()}},t.prototype.onBack=function(){r.default.isGamePause?(l.default.ins.onStopGame(),c.default.ins.HideUI(c.UIType.GameUI,!0,function(){c.default.ins.ShowUI(c.UIType.StartUI,!0,null)})):(r.default.isGamePause=!0,c.default.ins.ShowUI(c.UIType.ExitUI,!0,null))},a([d],t)}(u.default));o.default=f,cc._RF.pop()},{"../config/GameConfig":"GameConfig","../game/mag/AudioMag":"AudioMag","../game/mag/GameManager":"GameManager","../game/mag/UIMag":"UIMag","./BaseUI":"BaseUI"}],GamingData_008:[function(e,t,o){"use strict";cc._RF.push(t,"ed7e8bBPPdLGaHQW/51/a72","GamingData_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/RandomUtils"),i=e("../../mag/AudioMag"),a=e("../../mag/VideoManager"),r=e("./Config_008"),s=e("./Config_Gaming_008"),l=e("./DelegateManager_008"),c=e("./FloatTextMag_008"),u=e("./entities/Entities_008"),p=e("./entities/Enums_008"),d=e("./player/Player_008"),f=e("./playerWeapon/BasePlayerWeapon_008"),h=e("./utils/FightUtils_008"),_=e("./utils/PlayerInfoUtils_008"),y=e("./utils/SkillUtils_008"),g=function(){function e(){}return Object.defineProperty(e,"gameTimePauseState",{get:function(){return this._gameTimePauseState},set:function(e){this._gameTimePauseState=e,this.isGameTimePause=e>0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PlayerCurrHp",{get:function(){return this.PlayerGamingInfo.currHp},set:function(e){e>this.PlayerGamingInfo.maxHp?this.PlayerGamingInfo.currHp=this.PlayerGamingInfo.maxHp:this.PlayerGamingInfo.currHp=e<0?0:e},enumerable:!1,configurable:!0}),e.onEatChichen=function(){this.PlayerCurrHp+=.5*this.PlayerGamingInfo.maxHp,e.func_onPlayerEFStateChange_RestoreLife&&e.func_onPlayerEFStateChange_RestoreLife(!0)},e.onPickUpAlchemyPullet=function(e){void 0===e&&(e=1),this.currPickUpAlchemyPulletCount+=e,this.func_refreshPickUpAlchemyPulletLbl&&this.func_refreshPickUpAlchemyPulletLbl(this.currPickUpAlchemyPulletCount)},e.onPickUpCoin=function(e){this.currPickUpCoinCount+=e,this.func_refreshPickUpCoinLbl&&this.func_refreshPickUpCoinLbl(this.currPickUpCoinCount)},e.onInitData=function(e){this.isGaming=!0,this.isGameWin=!1,this.isLimitMoveRect=!1,this.currLv=1,this.currExp=0,this.currUpgradeNeedExp=r.GamingExpConfig_008[this.currLv],this.isPlayerOnLevelUpState=!1,this.currKillEnemyCount=0,this.currKillBossCount=0,this.currPickUpCoinCount=0,this.currPickUpAlchemyPulletCount=0,this.currPickUpItemCount=0,this.isRevived=!1,this.playerInvulnerableTime=0,y.default.onInitEnableSkillArr(),y.default.SkillCountLimit_Common=6,y.default.SkillCountLimit_Weapon=6,this.CommonSkillIdArr=[],this.SkillStateMap=new Map,this.WeaponIdArr=[],this.isEquipRotatingKnife=!1,this.PlayerGamingInfo=new u.PlayerGamingInfo_008,this.PlayerGamingInfo.base_maxHp=Math.ceil(_.default.getPlayerInfoByInfoType(e,p.InfoType_008.HP)),this.PlayerGamingInfo.base_damagePoint=Math.ceil(_.default.getPlayerInfoByInfoType(e,p.InfoType_008.DamagePoint)),this.PlayerGamingInfo.base_moveSpeed=_.default.getPlayerInfoByInfoType(e,p.InfoType_008.MoveSpeed),this.PlayerGamingInfo.base_restoreLife=.01*_.default.getPlayerInfoByInfoType(e,p.InfoType_008.RestoreLife),this.PlayerGamingInfo.base_expBonus=1+1e-4*_.default.getPlayerInfoByInfoType(e,p.InfoType_008.ExpBonus),this.PlayerGamingInfo.base_lucky=.1*_.default.getPlayerInfoByInfoType(e,p.InfoType_008.Lucky),this.PlayerGamingInfo.maxHp=this.PlayerGamingInfo.base_maxHp,this.PlayerGamingInfo.damagePoint=this.PlayerGamingInfo.base_damagePoint,this.PlayerGamingInfo.moveSpeed=this.PlayerGamingInfo.base_moveSpeed,this.PlayerGamingInfo.coolDownTimeBonus=0,this.PlayerGamingInfo.restoreLife=0,this.PlayerGamingInfo.expBonus=this.PlayerGamingInfo.base_expBonus,this.PlayerGamingInfo.lucky=this.PlayerGamingInfo.base_lucky,this.PlayerGamingInfo.magnetRange=s.Config_Gaming_008.magnetRange,this.PlayerGamingInfo.critProb=_.default.getPlayerInfoByInfoType(e,p.InfoType_008.CritProb),this.PlayerGamingInfo.critPowerBonus=_.default.getPlayerInfoByInfoType(e,p.InfoType_008.CritPowerBonus),this.PlayerGamingInfo.armor=_.default.getPlayerInfoByInfoType(e,p.InfoType_008.Armor),this.PlayerGamingInfo.injuryFree_melee=_.default.getPlayerInfoByInfoType(e,p.InfoType_008.InjuryFree_melee),this.PlayerGamingInfo.injuryFree_range=_.default.getPlayerInfoByInfoType(e,p.InfoType_008.InjuryFree_range),this.PlayerGamingInfo.currHp=this.PlayerGamingInfo.maxHp,this.PlayerMagnetRange=this.PlayerGamingInfo.magnetRange*this.PlayerGamingInfo.magnetRange},e.updateCameraRect=function(){this.ScreenRect.x=this.gameCameraNode.x-this.cameraHalfWidth,this.ScreenRect.y=this.gameCameraNode.y-this.gameCamera.orthoSize,this.ScreenRect.width=2*this.cameraHalfWidth,this.ScreenRect.height=2*this.gameCamera.orthoSize,this.RenderRect.x=this.ScreenRect.x-125,this.RenderRect.y=this.ScreenRect.y-125,this.RenderRect.width=this.ScreenRect.width+250,this.RenderRect.height=this.ScreenRect.height+250,this.ColliderRect.x=this.ScreenRect.x-200,this.ColliderRect.y=this.ScreenRect.y-200,this.ColliderRect.width=this.ScreenRect.width+400,this.ColliderRect.height=this.ScreenRect.height+400},e.onAttackPlayer=function(e,t,o){if(!(this.PlayerCurrHp<=0||this.playerInvulnerableTime>0)){a.default.getInstance().onShake(150),i.default.getInstance().playSound_intervalLimit(r.default.SEF_PlayerInjured,150);var n=h.default.calculateDamage(t,o?0:this.PlayerGamingInfo.armor),s=e?this.PlayerGamingInfo.injuryFree_melee:this.PlayerGamingInfo.injuryFree_range;(n=Math.ceil(t-s))>1?(this.PlayerCurrHp-=n,c.default.ins.onShowDamageFloatText(n.toString(),this.PlayerNode.getPosition().x,this.PlayerNode.getPosition().y+220,r.default.Color_PlayerInjured)):(this.PlayerCurrHp-=1,c.default.ins.onShowDamageFloatText("1",this.PlayerNode.getPosition().x,this.PlayerNode.getPosition().y+220,r.default.Color_PlayerInjured)),this.func_onPlayerPlayHitAni&&this.func_onPlayerPlayHitAni(),this.PlayerCurrHp<=0&&this.onGameFail()}},e.onIncreaseExp=function(e){this.isGameWin||(this.currExp+=e*this.PlayerGamingInfo.expBonus,this.currExp>=this.currUpgradeNeedExp&&this.onPlayerLevelUp(),this.func_refreshExpBarFillRange&&this.func_refreshExpBarFillRange(this.currExp/this.currUpgradeNeedExp))},e.onGameFail=function(){var e=this;this.isGamePause=!0,this.func_onPlayPlayerFailAni&&this.func_onPlayPlayerFailAni(),window.isCanCtrl=!1,setTimeout(function(){window.isCanCtrl=!0,e.isRevived?e.func_onShowResultView&&e.func_onShowResultView():(e.isRevived=!0,l.default.onShowDia.executeDelegates(r.default.UIPath_Dia_Revive))},1e3)},e.onRevive=function(){this.isGamePause=!1,this.PlayerCurrHp=this.PlayerGamingInfo.maxHp,this.func_onPlayRevive&&this.func_onPlayRevive()},e.onGameSucc=function(){var e=this;this.isGameWin=!0,this.timer+=1,setTimeout(function(){l.default.onGameSuccShowTeleportBlue.executeDelegates(e.limitRectCenterPoint),e.func_onShowGameWinCountDown&&e.func_onShowGameWinCountDown(10)},1e3)},e.onPlayerLevelUp=function(){var e=this;this.isPlayerOnLevelUpState||(this.func_onPlayerEFStateChange_LevelUp&&this.func_onPlayerEFStateChange_LevelUp(),this.isPlayerOnLevelUpState=!0,this.isGamePause=!0,setTimeout(function(){e.func_showSelectSkillView&&e.func_showSelectSkillView()},1e3))},e.onGetRandomSkill=function(){var e=[];return e.push(y.default.getRandomWeapon(e,this.SkillStateMap,this.WeaponIdArr,this.CommonSkillIdArr)),e.push(y.default.getRandomSkillId(e,this.SkillStateMap,this.WeaponIdArr,this.CommonSkillIdArr)),e.push(y.default.getRandomSkillId(e,this.SkillStateMap,this.WeaponIdArr,this.CommonSkillIdArr)),e.sort(function(){return Math.random()-.5})},e.isCanSelectSkill=function(e){return!(e>0)||(e>100&&e<=200?!!y.default.isCanLearnNewCommonSkill(this.CommonSkillIdArr.length)||this.CommonSkillIdArr.includes(e):!!y.default.isCanLearnNewWeaponSkill(this.WeaponIdArr.length)||this.WeaponIdArr.includes(e))},e.onPlayerLevelUpEnd=function(){this.isGamePause=!1,l.default.onRotatingKnifeResetBulletAngle.executeDelegates(),this.isPlayerOnLevelUpState=!1,this.currExp-=this.currUpgradeNeedExp,this.currLv+=1,this.func_refreshExpLvLabel&&this.func_refreshExpLvLabel(this.currLv),this.currUpgradeNeedExp=this.currLv<r.GamingExpConfig_008.length?r.GamingExpConfig_008[this.currLv]:r.GamingExpConfig_008[r.GamingExpConfig_008.length-1],this.func_refreshExpBarFillRange&&this.func_refreshExpBarFillRange(0,!1)},e.onSelectSkill=function(e,t){if(e>=100){var o=1;if(this.SkillStateMap.has(e))o=this.SkillStateMap.get(e)+1,this.SkillStateMap.set(e,o);else if(this.SkillStateMap.set(e,1),e<200)this.CommonSkillIdArr.push(e);else if(e<300)this.PlayerNode.getComponent(d.default).onEquipWeaponByWeaponType(e);else if(e<400){for(var i=this.PlayerNode.getComponents(f.default),a=e-100,c=0;c<i.length;c++)i[c].skillId===a&&i[c].onRecovery();this.PlayerNode.getComponent(d.default).onEquipWeaponByWeaponType(e),this.SkillStateMap.set(a,y.default.getSkillMaxLevel(a))}if(e<200)switch(o-=1,e){case r.CommonSkillType_008.MoveSpeedBonus:this.PlayerGamingInfo.moveSpeed=this.PlayerGamingInfo.base_moveSpeed*(1+r.SkillConfigMap.get(r.CommonSkillType_008.MoveSpeedBonus).powerArr[o]);break;case r.CommonSkillType_008.CoolDownTimeBonus:this.PlayerGamingInfo.coolDownTimeBonus=r.SkillConfigMap.get(r.CommonSkillType_008.CoolDownTimeBonus).powerArr[o];break;case r.CommonSkillType_008.MagnetRangeBonus:this.PlayerGamingInfo.magnetRange=s.Config_Gaming_008.magnetRange*(1+r.SkillConfigMap.get(r.CommonSkillType_008.MagnetRangeBonus).powerArr[o]),this.PlayerMagnetRange=this.PlayerGamingInfo.magnetRange*this.PlayerGamingInfo.magnetRange;break;case r.CommonSkillType_008.ExpBonus:this.PlayerGamingInfo.expBonus=this.PlayerGamingInfo.base_expBonus+r.SkillConfigMap.get(r.CommonSkillType_008.ExpBonus).powerArr[o];break;case r.CommonSkillType_008.Lucky:this.PlayerGamingInfo.lucky=this.PlayerGamingInfo.base_lucky+r.SkillConfigMap.get(r.CommonSkillType_008.Lucky).powerArr[o];break;case r.CommonSkillType_008.MaxHpBonus:var u=this.PlayerGamingInfo.maxHp;this.PlayerGamingInfo.maxHp=this.PlayerGamingInfo.base_maxHp*(1+r.SkillConfigMap.get(r.CommonSkillType_008.MaxHpBonus).powerArr[o]),this.PlayerCurrHp+=this.PlayerGamingInfo.maxHp-u;break;case r.CommonSkillType_008.RestoreLife:this.PlayerGamingInfo.restoreLife=this.PlayerGamingInfo.base_restoreLife+r.SkillConfigMap.get(r.CommonSkillType_008.RestoreLife).powerArr[o];break;default:console.log("\u4e09\u9009\u4e00\u751f\u6548\u65f6\uff0c\u51fa\u73b0\u4e86\u4e00\u4e2a\u5f02\u5e38\u6570\u636e ==> "+e)}var p=this.PlayerNode.getComponents(f.default);for(c=0;c<p.length;c++)p[c].isAlive?p[c].onResetData():console.log("\u8be5\u6b66\u5668\u65e0\u6548\u4e86 "+p[c]);l.default.onLearnNewSkill.executeDelegates()}else switch(e){case r.DropItemType.AlchemyPullet:this.onPickUpAlchemyPullet(t||1);break;case r.DropItemType.Chichen:this.onEatChichen();break;case r.DropItemType.Coin_1:case r.DropItemType.Coin_2:case r.DropItemType.Coin_3:this.onPickUpCoin(t||n.RandomUtils.getRandomInt(50,200));break;default:console.log("\u6361\u5230\u4e00\u4e2a\u65e0\u6548\u7269\u54c1\uff1a"+e)}},e.getBoxRewardData=function(){var e=this,t=3===this.currOpenBoxLv?5:2===this.currOpenBoxLv?3:1,o=[],i=[];this.SkillStateMap.forEach(function(e,t){if(t>100&&t<200){var o=y.default.getSkillMaxLevel(t);if(e<o)for(var n=e;n<o;n++)i.push(t)}}),this.SkillStateMap.forEach(function(t,n){if(n>200&&n<300){var i=y.default.getSkillMaxLevel(n);if(t<i)for(var a=t;a<i;a++)o.push(n);else if(y.default.isCanLearnSuperWeapon(n,e.SkillStateMap)){var r=n+100;o.push(r)}}});var a=[];o.length>1&&a.push({rewardId:o.splice(n.RandomUtils.getRandomFormArray(o),1)[0],rewardCount:1}),i.length>1&&a.push({rewardId:i.splice(n.RandomUtils.getRandomFormArray(i),1)[0],rewardCount:1});var s=o.concat(i),l=7-a.length;if(s.length>l)for(var c=0;c<l;c++)a.push({rewardId:s.splice(n.RandomUtils.getRandomFormArray(s),1)[0],rewardCount:1});else for(c=0;c<s.length;c++)a.push({rewardId:s[c],rewardCount:1});for(a.push({rewardId:r.DropItemType.Coin_1,rewardCount:5}),a.push({rewardId:r.DropItemType.Coin_1,rewardCount:10}),a.push({rewardId:r.DropItemType.Coin_2,rewardCount:50}),a.push({rewardId:r.DropItemType.Coin_2,rewardCount:100}),a.push({rewardId:r.DropItemType.Coin_3,rewardCount:150}),a.push({rewardId:r.DropItemType.Coin_3,rewardCount:200}),a.push({rewardId:r.DropItemType.AlchemyPullet,rewardCount:1}),a.push({rewardId:r.DropItemType.AlchemyPullet,rewardCount:2}),a.push({rewardId:r.DropItemType.AlchemyPullet,rewardCount:3}),c=a.length;c<16;c++)a.push({rewardId:r.DropItemType.Coin_2,rewardCount:50});a=(a=(a=a.sort(function(){return Math.random()-.5})).sort(function(){return Math.random()-.5})).sort(function(){return Math.random()-.5});var u=[];for(c=0;c<t;c++){for(var p=n.RandomUtils.getRandomInt(0,15);u.includes(p);)p=n.RandomUtils.getRandomInt(0,15);u.push(p)}return{boxItemRewardDataArr:a,rewardIndexArr:u}},e.isGaming=!1,e.isGamePause=!0,e.isGameWin=!1,e.currMainUISelectIndex=-1,e.currGrade=0,e.currChapterIndex=0,e.currChapterProgress=0,e.timer=0,e.isGameTimePause=!1,e._gameTimePauseState=0,e.isLimitMoveRect=!1,e.gameCamera=null,e.gameCameraNode=null,e.PlayerNode=null,e.PlayerMoveDir=cc.v2(0,0),e.playerCircleColliderPos=cc.v2(0,0),e.playerCircleColliderRadius=80,e.GameObjNode=null,e.HpBarNode=null,e.enemyBulletNode_middle=null,e.enemyBulletNode_high=null,e.cameraHalfWidth=360,e.cameraHalfHeight=1e3,e.RenderRect=new cc.Rect,e.ScreenRect=new cc.Rect,e.ColliderRect=new cc.Rect,e.currLv=1,e.currExp=0,e.currUpgradeNeedExp=100,e.currKillEnemyCount=0,e.currKillBossCount=0,e.currPickUpCoinCount=0,e.currPickUpAlchemyPulletCount=0,e.currPickUpItemCount=0,e.currOpenBoxLv=3,e.isRevived=!1,e.playerInvulnerableTime=0,e.SkillStateMap=null,e.CommonSkillIdArr=[],e.WeaponIdArr=[],e.isEquipRotatingKnife=!1,e.PlayerGamingInfo=null,e.PlayerMagnetRange=9e4,e.func_refreshExpBarFillRange=null,e.func_refreshExpLvLabel=null,e.func_refreshTimeLabel=null,e.func_refreshPickUpAlchemyPulletLbl=null,e.func_refreshPickUpCoinLbl=null,e.func_showSelectSkillView=null,e.func_onSkillInScreenEnemy=null,e.func_onPlayerEFStateChange_Magnet=null,e.func_onEFStateChange_EnemyTide=null,e.func_onPlayerEFStateChange_RestoreLife=null,e.func_onPlayerEFStateChange_LevelUp=null,e.func_onPlayPlayerFailAni=null,e.func_onPlayRevive=null,e.func_onShowResultView=null,e.func_onShowGameWinCountDown=null,e.func_onPlayerPickUpWeapon=null,e.func_onPlayerPlayHitAni=null,e.isPlayerOnLevelUpState=!1,e.isTrialMode=!1,e}();o.default=g,window.DX_logData=function(){console.log(g.prototype)},cc._RF.pop()},{"../../Utils/RandomUtils":"RandomUtils","../../mag/AudioMag":"AudioMag","../../mag/VideoManager":"VideoManager","./Config_008":"Config_008","./Config_Gaming_008":"Config_Gaming_008","./DelegateManager_008":"DelegateManager_008","./FloatTextMag_008":"FloatTextMag_008","./entities/Entities_008":"Entities_008","./entities/Enums_008":"Enums_008","./player/Player_008":"Player_008","./playerWeapon/BasePlayerWeapon_008":"BasePlayerWeapon_008","./utils/FightUtils_008":"FightUtils_008","./utils/PlayerInfoUtils_008":"PlayerInfoUtils_008","./utils/SkillUtils_008":"SkillUtils_008"}],GamingUI_008:[function(e,t,o){"use strict";cc._RF.push(t,"c4fbf6N74JJI6Ue7OGAY0pO","GamingUI_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../Utils/StringUtils"),l=e("../Config_008"),c=e("../DelegateManager_008"),u=e("../DropItemMag_008"),p=e("../GamingData_008"),d=e("./misc/ExpBarNode_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.expBarNodeTs=null,t.lbl_lv=null,t.lbl_time=null,t.lbl_pickUp_alchemyPullet=null,t.lbl_pickUp_coin=null,t.btn_pause=null,t.currSkillTitle=null,t.currSkillLayer=null,t.pauseView=null,t.spine_magnet=null,t.ani_enemyTide=null,t.guide=null,t.selectSkillView=null,t.resultView=null,t.gameWinCountDownNode=null,t.btn_showResult=null,t.countDownTime=10,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){p.default.func_refreshExpBarFillRange=this.onRefreshExpBar.bind(this),p.default.func_refreshExpLvLabel=this.onRefreshLvLabel.bind(this),p.default.func_refreshTimeLabel=this.onRefreshTimeLable.bind(this),p.default.func_refreshPickUpAlchemyPulletLbl=this.onRefreshLbl_PickUpAlchemyPullet.bind(this),p.default.func_refreshPickUpCoinLbl=this.onRefreshLbl_PickUpCoin.bind(this),p.default.func_showSelectSkillView=this.onShowSelectSkillView.bind(this),p.default.func_onPlayerEFStateChange_Magnet=this.onEFStateChange_Magnet.bind(this),p.default.func_onEFStateChange_EnemyTide=this.onEFStateChange_EnemyTide.bind(this),p.default.func_onShowResultView=this.onShowResultView.bind(this),p.default.func_onShowGameWinCountDown=this.onShowGameWinCountDown.bind(this),c.default.onHideCurrSkillLayer.addDelegate(this.onHideCurrSkillLayer,this),this.btn_pause.on(cc.Node.EventType.TOUCH_END,this.onShowPauseView,this),this.btn_showResult.on(cc.Node.EventType.TOUCH_END,this.onShowResultView,this),this.pauseView.active=!1,this.resultView.active=!1,this.selectSkillView.active=!1,this.currSkillTitle.active=!1,this.currSkillLayer.active=!1,this.gameWinCountDownNode.active=!1,this.onRefreshExpBar(0,!1),this.onRefreshLvLabel(1),this.onRefreshTimeLable(0),this.onRefreshLbl_PickUpAlchemyPullet(0),this.onRefreshLbl_PickUpCoin(0),this.onEFStateChange_Magnet(!1),this.ani_enemyTide.node.opacity=0,this.guide.active=!0,this.node.off(cc.Node.EventType.TOUCH_START,this.onStartGame,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onStartGame,this)},t.prototype.onStartGame=function(){p.default.isGamePause=!1,p.default.gameTimePauseState=0,this.guide.active=!1,this.node.off(cc.Node.EventType.TOUCH_START,this.onStartGame,this);for(var e=p.default.PlayerNode.getPosition(),t=[1,1,1,1,1,1,l.DropItemType.Box_2,1,1,1,1,1,1,1],o=t.length,n=0;n<o;n++){var i=r.RandomUtils.getRandomInt(400,500),a=n*(360/o)*r.RandomUtils.getRandomInt(80,120)*.01*Math.PI/180,s=cc.v2(e.x+i*Math.cos(a),e.y+i*Math.sin(a));u.default.ins.onDropItem(s,t[n])}},t.prototype.onDisable=function(){this.btn_pause.off(cc.Node.EventType.TOUCH_END,this.onShowPauseView,this),this.btn_showResult.off(cc.Node.EventType.TOUCH_END,this.onShowResultView,this),c.default.onHideCurrSkillLayer.removeDelegate(this.onHideCurrSkillLayer,this)},t.prototype.onEFStateChange_Magnet=function(e){this.spine_magnet.opacity=e?255:0},t.prototype.onEFStateChange_EnemyTide=function(e,t){if(e){var o=this.ani_enemyTide.play("ani_enemyTide_show");this.scheduleOnce(t,o.duration)}else o=this.ani_enemyTide.play("ani_enemyTide_hide"),this.scheduleOnce(t,o.duration)},t.prototype.onRefreshLbl_PickUpAlchemyPullet=function(e){this.lbl_pickUp_alchemyPullet.string=e.toString()},t.prototype.onRefreshLbl_PickUpCoin=function(e){this.lbl_pickUp_coin.string=e.toString()},t.prototype.onRefreshExpBar=function(e,t){void 0===t&&(t=!0),this.expBarNodeTs.onRefreshExpBar(e,t)},t.prototype.onRefreshLvLabel=function(e){this.lbl_lv.string=e.toString()},t.prototype.onRefreshTimeLable=function(e){this.lbl_time.string=s.default.Format_Time_mmss(e)},t.prototype.onShowSelectSkillView=function(){this.selectSkillView.active=!0,this.refreshCurrSkillLayerPos(!1),this.currSkillLayer.active=!1,this.currSkillTitle.active=!1},t.prototype.onShowPauseView=function(){window.isCanCtrl&&(p.default.isGamePause=!0,this.pauseView.active=!0,this.refreshCurrSkillLayerPos(!1),this.currSkillLayer.active=!0,this.currSkillTitle.active=!0,this.currSkillLayer.opacity=0,this.currSkillTitle.opacity=0,cc.tween(this.currSkillLayer).to(.4,{opacity:255},{easing:"fade"}).start(),cc.tween(this.currSkillTitle).to(.4,{opacity:255},{easing:"fade"}).start())},t.prototype.onShowGameWinCountDown=function(e){this.gameWinCountDownNode.active=!0,this.countDownTime=e-1,this.refreshGameWinCountDown(),this.schedule(this.refreshGameWinCountDown,1,e-1,1)},t.prototype.refreshGameWinCountDown=function(){this.countDownTime-=1,this.gameWinCountDownNode.getChildByName("lbl_countDown").getComponent(cc.Label).string="\u7ed3\u7b97\u5012\u8ba1\u65f6\uff1a"+this.countDownTime,this.countDownTime<0&&this.onShowResultView()},t.prototype.onShowResultView=function(){this.resultView.active||(this.gameWinCountDownNode.active=!1,this.unschedule(this.refreshGameWinCountDown),this.resultView.active=!0,this.currSkillLayer.active=!0,this.currSkillTitle.active=!0,this.currSkillLayer.opacity=0,this.currSkillTitle.opacity=0,cc.tween(this.currSkillLayer).to(.4,{opacity:255},{easing:"fade"}).start(),cc.tween(this.currSkillTitle).to(.4,{opacity:255},{easing:"fade"}).start(),this.refreshCurrSkillLayerPos(!0))},t.prototype.refreshCurrSkillLayerPos=function(e){e?(this.currSkillTitle.active=!1,this.currSkillTitle.getComponent(cc.Widget).isAlignTop=!1,this.currSkillTitle.setPosition(0,215),this.currSkillLayer.getComponent(cc.Widget).isAlignTop=!1,this.currSkillLayer.setPosition(0,215)):(this.currSkillTitle.active=!0,this.currSkillTitle.getComponent(cc.Widget).isAlignTop=!0,this.currSkillTitle.getComponent(cc.Widget).top=100,this.currSkillTitle.getComponent(cc.Widget).updateAlignment(),this.currSkillLayer.getComponent(cc.Widget).isAlignTop=!0,this.currSkillLayer.getComponent(cc.Widget).top=128,this.currSkillLayer.getComponent(cc.Widget).updateAlignment())},t.prototype.onHideCurrSkillLayer=function(){this.currSkillLayer.active=!1,this.currSkillTitle.active=!1},a([_(d.default)],t.prototype,"expBarNodeTs",void 0),a([_(cc.Label)],t.prototype,"lbl_lv",void 0),a([_(cc.Label)],t.prototype,"lbl_time",void 0),a([_(cc.Label)],t.prototype,"lbl_pickUp_alchemyPullet",void 0),a([_(cc.Label)],t.prototype,"lbl_pickUp_coin",void 0),a([_(cc.Node)],t.prototype,"btn_pause",void 0),a([_(cc.Node)],t.prototype,"currSkillTitle",void 0),a([_(cc.Node)],t.prototype,"currSkillLayer",void 0),a([_(cc.Node)],t.prototype,"pauseView",void 0),a([_(cc.Node)],t.prototype,"spine_magnet",void 0),a([_(cc.Animation)],t.prototype,"ani_enemyTide",void 0),a([_(cc.Node)],t.prototype,"guide",void 0),a([_(cc.Node)],t.prototype,"selectSkillView",void 0),a([_(cc.Node)],t.prototype,"resultView",void 0),a([_(cc.Node)],t.prototype,"gameWinCountDownNode",void 0),a([_(cc.Node)],t.prototype,"btn_showResult",void 0),a([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../Utils/StringUtils":"StringUtils","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../DropItemMag_008":"DropItemMag_008","../GamingData_008":"GamingData_008","./misc/ExpBarNode_008":"ExpBarNode_008"}],GetEquipmentDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"7c6c3JDt7pHkaMQrRE4r1NU","GetEquipmentDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("../../utils/EquipmentUtils_008"),u=e("../../utils/PlayerInfoUtils_008"),p=e("./BaseUIDialog_008"),d=cc._decorator,f=d.ccclass,h=d.property,_=d.inspector,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currNode=null,t.newNode=null,t.lbl_closeTips=null,t.btn_use=null,t.btn_discard=null,t.sfArr_state=[],t.currEquipment=null,t.newEquipment=null,t}return i(t,e),t.prototype.onInitEvent=function(){null===this.newEquipment?(this.bg.on(cc.Node.EventType.TOUCH_END,this.onClose,this),this.lbl_closeTips.opacity=255):(this.btn_discard.on(cc.Node.EventType.TOUCH_END,this.onDiscard,this),this.btn_use.on(cc.Node.EventType.TOUCH_END,this.onUse,this),this.lbl_closeTips.opacity=0)},t.prototype.onRemoveEvent=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this.onClose,this),this.btn_discard.off(cc.Node.EventType.TOUCH_END,this.onDiscard,this),this.btn_use.off(cc.Node.EventType.TOUCH_END,this.onUse,this)},t.prototype.onClose=function(){r.default.getInstance().click(),this.onHide(null)},t.prototype.onInit=function(e,t,o){this.onInitBg(e),this.newEquipment=t,this.currEquipment=o,null!==o?(this.currNode.active=!0,this.onRefreshUI(this.currNode,o)):this.currNode.active=!1,null!==t?(this.newNode.active=!0,this.newNode.y=this.currNode.active?-220:0,this.onRefreshUI_new(t,o)):this.newNode.active=!1},t.prototype.onRefreshUI=function(e,t){var o=e.getChildByName("e"),n=o.getChildByName("equipmentKEffectNode").getChildByName("ani_eqmK").getComponent(cc.Animation);n.node.opacity=0;var i=o.getChildByName("bg").getComponent(cc.Sprite),a=o.getChildByName("icon").getComponent(cc.Sprite),r=o.getChildByName("lbl_lv").getComponent(cc.Label),s=o.getChildByName("lbl_type").getComponent(cc.Label),l=e.getChildByName("infoNode"),p=l.getChildByName("lbl_name").getComponent(cc.Label),d=l.getChildByName("layout_1"),f=l.getChildByName("layout_2");if(null===t){c.EquipmentUtils_008.setEquipmentNodeBg(i,0),a.spriteFrame=null,r.string="",s.string="",p.string="\u65e0\u88c5\u5907",c.EquipmentUtils_008.setEquipmentNameLabelNodeColor(p.node,0);for(var h=0;h<d.childrenCount;h++)d.children[h].opacity=0}else{t.quality>=3&&(n.node.opacity=255,n.play("ani_eqmK_"+t.quality)),c.EquipmentUtils_008.setEquipmentNodeBg(i,t.quality);var _=c.EquipmentUtils_008.getEquipmentLvIndex(t.lv);for(c.EquipmentUtils_008.setEquipmentNodeIcon(a,t.type,_),r.string="Lv"+t.lv,s.string=c.EquipmentUtils_008.getEquipmentTypeDescByType(t.type),p.string=c.EquipmentUtils_008.getEquipmentFullName(t.type,t.lv,t.quality),c.EquipmentUtils_008.setEquipmentNameLabelNodeColor(p.node,t.quality),h=0;h<d.childrenCount;h++)if(h<t.infoTypeArr.length){d.children[h].opacity=255;var y=d.children[h].getChildByName("lbl_infoName").getComponent(cc.Label),g=d.children[h].getChildByName("lbl_value").getComponent(cc.Label);y.string=u.default.getInfoNameByInfoType(t.infoTypeArr[h]),g.string=t.infoValueArr[h].toString()}else d.children[h].opacity=0}for(h=0;h<f.childrenCount;h++)f.children[h].opacity=0},t.prototype.onRefreshUI_new=function(e,t){var o;this.onRefreshUI(this.newNode,e);var n=this.newNode.getChildByName("infoNode"),i=u.default.getEquipmentScore(t),a=u.default.getEquipmentScore(e)-i;n.getChildByName("scoreBg").getChildByName("lbl").getComponent(cc.Label).string=a>=0?"+"+a:a.toString();for(var r=n.getChildByName("layout_1"),s=0;s<e.infoTypeArr.length;s++){var l=r.children[s].getChildByName("state").getComponent(cc.Sprite),c=e.infoValueArr[s],p=null!==(o=null==t?void 0:t.infoValueArr[s])&&void 0!==o?o:0;c>p?(l.spriteFrame=this.sfArr_state[0],this.setStateAni(l.node,!0)):c<p?(l.spriteFrame=this.sfArr_state[1],this.setStateAni(l.node,!1)):l.spriteFrame=null}this.scheduleOnce(function(){for(var t=0,o=0;o<e.infoTypeArr.length;o++){var n=r.children[o].getChildByName("lbl_value").width;n>t&&(t=n)}var i=25+t;for(o=0;o<e.infoTypeArr.length;o++)r.children[o].getChildByName("state").x=i},0)},t.prototype.setStateAni=function(e,t){cc.Tween.stopAllByTarget(e),t?(e.y=-5,cc.tween(e).repeatForever(cc.tween().to(.2,{y:0}).to(.2,{y:-5})).start()):(e.y=0,cc.tween(e).repeatForever(cc.tween().to(.2,{y:-5}).to(.2,{y:0})).start())},t.prototype.onDiscard=function(){var e=this;r.default.getInstance().playSound(s.default.SEF_DiscardNewEquipment),s.default.isOpeningBox=!1,this.onHide(function(){l.default.onHideGetEquipmentDia.executeDelegates(!1,e.newEquipment,e.currEquipment)})},t.prototype.onUse=function(){var e=this;r.default.getInstance().playSound(s.default.SEF_EquipNewEquipment),s.default.isOpeningBox=!1,this.onHide(function(){l.default.onHideGetEquipmentDia.executeDelegates(!0,e.newEquipment,e.currEquipment)})},a([h(cc.Node)],t.prototype,"currNode",void 0),a([h(cc.Node)],t.prototype,"newNode",void 0),a([h(cc.Node)],t.prototype,"lbl_closeTips",void 0),a([h(cc.Node)],t.prototype,"btn_use",void 0),a([h(cc.Node)],t.prototype,"btn_discard",void 0),a([h([cc.SpriteFrame])],t.prototype,"sfArr_state",void 0),a([f,_("packages://autoproperty//inspector.js")],t)}(p.default);o.default=y,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../utils/EquipmentUtils_008":"EquipmentUtils_008","../../utils/PlayerInfoUtils_008":"PlayerInfoUtils_008","./BaseUIDialog_008":"BaseUIDialog_008"}],GoldBar_008:[function(e,t,o){"use strict";cc._RF.push(t,"220cbsXTXBJf72QyK9rb0ek","GoldBar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../DelegateManager_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbl_count=null,t}return i(t,e),t.prototype.onLoad=function(){r.default.onRefreshGoldBar.addDelegate(this.onRefreshCount,this)},t.prototype.start=function(){},t.prototype.onDestroy=function(){r.default.onRefreshGoldBar.removeDelegate(this.onRefreshCount,this)},t.prototype.onRefreshCount=function(e){this.lbl_count.string=e.toString()},a([c(cc.Label)],t.prototype,"lbl_count",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../DelegateManager_008":"DelegateManager_008"}],GongFaDetailDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"488aa028wJJMbfN3zbWaT2G","GongFaDetailDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/VideoManager"),l=e("../../Config_008"),c=e("../../DelegateManager_008"),u=e("../../LocalDataManager_008"),p=e("./BaseUIDialog_008"),d=cc._decorator,f=d.ccclass,h=d.property,_=d.inspector,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.btn_upgrade=null,t.btn_seal=null,t.btn_brokeTheSeal=null,t.lbl_name=null,t.lbl_lv=null,t.lbl_progress=null,t.progress=null,t.icon=null,t.sc=null,t.layout=null,t.sp_upgrade=null,t.skillId=0,t}return i(t,e),t.prototype.onInit=function(e,t,o,n){this.onInitBg(e),this.sc.scrollToTop(),this.skillId=t,this.refreshUI(o,n),this.sp_upgrade.node.opacity=0},t.prototype.onInitEvent=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_close,this),this.btn_upgrade.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_upgrade,this),this.btn_seal.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_seal,this),this.btn_brokeTheSeal.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_brokeTheSeal,this),cc.sys.isBrowser&&this.icon.node.on(cc.Node.EventType.TOUCH_END,this.onCheatAddFragment,this)},t.prototype.onRemoveEvent=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onClickBtn_close,this),this.btn_upgrade.off(cc.Node.EventType.TOUCH_END,this.onClickBtn_upgrade,this),this.btn_seal.off(cc.Node.EventType.TOUCH_END,this.onClickBtn_seal,this),this.btn_brokeTheSeal.off(cc.Node.EventType.TOUCH_END,this.onClickBtn_brokeTheSeal,this),cc.sys.isBrowser&&this.icon.node.off(cc.Node.EventType.TOUCH_END,this.onCheatAddFragment,this)},t.prototype.refreshUI=function(e,t){var o,n,i=l.SkillConfigMap.get(this.skillId),a=15e3+this.skillId,r=u.default.getInstance().playerData.item_getCountById(a),s=u.default.getInstance().gongfa_getLvById(this.skillId),c=window.gongFaUtils_008.getUpgradeNeedFragmentCountByLv(this.skillId,s),p=c<0;t&&(this.lbl_name.node.color=window.gongFaUtils_008.getNameLabelColorByQuality(t)),this.lbl_name.string=i.skillName,this.lbl_lv.string="LV."+s,e&&(this.icon.spriteFrame=e),p?(this.progress.progress=1,this.lbl_progress.string="\u5df2\u6ee1\u7ea7"):(this.progress.progress=r/c,this.lbl_progress.string=r+"/"+c),u.default.getInstance().gongfa_isSeal(this.skillId)?(this.btn_seal.active=!1,this.btn_brokeTheSeal.active=!0,this.btn_upgrade.active=!1):(this.btn_seal.active=!0,this.btn_brokeTheSeal.active=!1,this.btn_upgrade.active=!0);var d=this.layout.getComponentsInChildren(cc.Label),f=d.shift();f.string=i.skillDescArr[0];for(var h=0;h<d.length;h++)d[h].node.active=!1;var _=null!==(n=null===(o=window.gongFaUtils_008.GongFaBonusConfigMap.get(this.skillId))||void 0===o?void 0:o[0])&&void 0!==n?n:null;if(null!==_){var y=Object.keys(_),g=y.indexOf("lv");-1!==g&&y.splice(g,1);var m=y.indexOf("needFragment");for(-1!==m&&y.splice(m,1),h=y.length-1;h>=0;h--)-1===_[y[h]]&&y.splice(h,1);for(h=0;h<y.length;h++){var v=null;d.length<h+1?(v=cc.instantiate(f.node).getComponent(cc.Label)).node.setParent(this.layout):(v=d[h]).node.active=!0,v.string=window.gongFaUtils_008.getInfoDesc(this.skillId,s,y[h]),v.node.color=window.gongFaUtils_008.getNameLabelColorByQuality(_[y[h]])}}},t.prototype.onClickBtn_close=function(){r.default.getInstance().click(),this.onHide(function(){})},t.prototype.onClickBtn_upgrade=function(){r.default.getInstance().click();var e=u.default.getInstance().gongfa_getLvById(this.skillId),t=window.gongFaUtils_008.getUpgradeNeedFragmentCountByLv(this.skillId,e);if(t<0)c.default.onShowUIFloatText.executeDelegates("\u5df2\u6ee1\u7ea7");else{var o=15e3+this.skillId;u.default.getInstance().playerData.item_getCountById(o)<t?c.default.onShowUIFloatText.executeDelegates("\u788e\u7247\u6570\u91cf\u4e0d\u8db3"):(u.default.getInstance().playerData.item_addCountById(o,-t),u.default.getInstance().gongfa_setLvById(this.skillId,e+1),u.default.getInstance().onSaveData(),c.default.onRefreshGongFaUI.executeDelegates(),this.sp_upgrade.node.opacity=255,this.sp_upgrade.setAnimation(0,"animation",!1),this.refreshUI())}},t.prototype.onClickBtn_seal=function(){var e=this;if(r.default.getInstance().click(),this.skillId!==l.WeaponType_008.RotatingKnife){var t=u.default.getInstance().playerData;t.gongfa_idArr.filter(function(e){return!t.gongfa_sealArr.includes(e)}).length<=4?c.default.onShowUIFloatText.executeDelegates("\u5f00\u542f\u7684\u529f\u6cd5\u4e0d\u80fd\u4f4e\u4e8e4\u4e2a"):s.default.getInstance().showVideo(function(){u.default.getInstance().gongfa_setSeal(e.skillId),u.default.getInstance().onSaveData(),c.default.onRefreshGongFaUI.executeDelegates(),e.refreshUI()})}else c.default.onShowUIFloatText.executeDelegates("\u672c\u547d\u529f\u6cd5\u4e0d\u53ef\u5c01\u5370")},t.prototype.onClickBtn_brokeTheSeal=function(){r.default.getInstance().click(),u.default.getInstance().gongfa_brokeTheSeal(this.skillId),u.default.getInstance().onSaveData(),c.default.onRefreshGongFaUI.executeDelegates(),this.refreshUI()},t.prototype.onCheatAddFragment=function(){},a([h(cc.Node)],t.prototype,"btn_close",void 0),a([h(cc.Node)],t.prototype,"btn_upgrade",void 0),a([h(cc.Node)],t.prototype,"btn_seal",void 0),a([h(cc.Node)],t.prototype,"btn_brokeTheSeal",void 0),a([h(cc.Label)],t.prototype,"lbl_name",void 0),a([h(cc.Label)],t.prototype,"lbl_lv",void 0),a([h(cc.Label)],t.prototype,"lbl_progress",void 0),a([h(cc.ProgressBar)],t.prototype,"progress",void 0),a([h(cc.Sprite)],t.prototype,"icon",void 0),a([h(cc.ScrollView)],t.prototype,"sc",void 0),a([h(cc.Node)],t.prototype,"layout",void 0),a([h(sp.Skeleton)],t.prototype,"sp_upgrade",void 0),a([f,_("packages://autoproperty//inspector.js")],t)}(p.default);o.default=y,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","./BaseUIDialog_008":"BaseUIDialog_008"}],GongFaUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"8eafa0rig1EfZIu/vG7n9DO","GongFaUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/StringUtils"),i=function(){function e(){this.ColorArr_name=[new cc.Color(51,51,51),new cc.Color(54,94,65),new cc.Color(27,76,110),new cc.Color(91,47,116),new cc.Color(99,68,28),new cc.Color(132,19,19)],this.InfoNameMap=new Map([["basePowerBonus","\u57fa\u7840\u4f24\u5bb3"],["superPowerBonus","\u8d85\u6b66\u4f24\u5bb3"],["ignoreArmorProp","\u65e0\u89c6\u654c\u4eba\u62a4\u7532\u6bd4\u4f8b"],["bulletLifeBonus","\u5b50\u5f39\u6301\u7eed\u65f6\u95f4"],["bulletDurCount","\u5b50\u5f39\u7a7f\u900f\u6570\u91cf"],["dotPowerBonus","\u5f02\u5e38\u72b6\u6001\u4f24\u5bb3"],["dotTimeBonus","\u5f02\u5e38\u72b6\u6001\u6301\u7eed\u65f6\u95f4"]]),this.GongFaBonusConfigMap=new Map}return e.prototype.getUpgradeNeedFragmentCountByLv=function(e,t){var o,n,i,a=null!==(o=this.GongFaBonusConfigMap.get(e))&&void 0!==o?o:this.GongFaBonusConfigMap.get(201);return null!==(i=null===(n=null==a?void 0:a[t+1])||void 0===n?void 0:n.needFragment)&&void 0!==i?i:-1},e.prototype.getNameLabelColorByQuality=function(e){var t,o;return null!==(o=null===(t=this.ColorArr_name)||void 0===t?void 0:t[e])&&void 0!==o?o:this.ColorArr_name[1]},e.prototype.getInfoBonus=function(e,t,o){var n;if(this.GongFaBonusConfigMap.has(e)){var i=this.GongFaBonusConfigMap.get(e);if(-1===(null!==(n=null==i?void 0:i[0][o])&&void 0!==n?n:-1))return 0;for(var a=0,r=1;r<=t;r++)a+=i[r][o];return a}return 0},e.prototype.getInfoDesc=function(e,t,o){var i,a,r=null!==(i=this.InfoNameMap.get(o))&&void 0!==i?i:"\u672a\u77e5\u5c5e\u6027",s=this.getInfoBonus(e,t,o);switch(o){case"basePowerBonus":case"superPowerBonus":case"ignoreArmorProp":case"dotPowerBonus":a=n.default.formatAsPercentage(s);break;case"bulletLifeBonus":case"dotTimeBonus":a=s.toFixed(1)+"s";break;default:a=s.toString()}return r+" + "+a+" "},e}();o.default=i,window.gongFaUtils_008=new i,cc._RF.pop()},{"../../../Utils/StringUtils":"StringUtils"}],GongFaView_008:[function(e,t,o){"use strict";cc._RF.push(t,"a9583s72C9Aw6PBdJTZUoge","GongFaView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/AudioMag"),c=e("../../../../mag/GameMag"),u=e("../../../../mag/VideoManager"),p=e("../../Config_008"),d=e("../../DelegateManager_008"),f=e("../../LocalDataManager_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=h.inspector,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pre_gongfa=null,t.layout_skill_unlock=null,t.layout_skill_lock=null,t.sfArr_bg=[],t.skillItemToSkillIdMap=null,t}return i(t,e),t.prototype.onLoad=function(){this.onInitAllGongFaItem(),d.default.onRefreshGongFaUI.addDelegate(this.onRefreshUI,this)},t.prototype.onDestroy=function(){d.default.onRefreshGongFaUI.removeDelegate(this.onRefreshUI,this)},t.prototype.onInitAllGongFaItem=function(){this.skillItemToSkillIdMap=new Map;var e=[],t=-1;p.SkillConfigMap.forEach(function(o){o.skillId>=200&&o.skillId<300&&(t=0,window.gongFaUtils_008.GongFaBonusConfigMap.has(o.skillId)?e.push(o):console.log(o.skillName+" \u6ca1\u6709\u529f\u6cd5\u914d\u7f6e \u6682\u4e0d\u5728\u529f\u6cd5ui\u663e\u793a")),(t>=1||o.skillId>=300)&&(t=1)});for(var o=f.default.getInstance().playerData,n=0;n<e.length;n++){var i=cc.instantiate(this.pre_gongfa);this.skillItemToSkillIdMap.set(i,e[n].skillId);var a=o.gongfa_idArr.includes(e[n].skillId);i.setParent(a?this.layout_skill_unlock:this.layout_skill_lock),this.initItemUI(i,a,e[n],!0)}this.layout_skill_unlock.getComponent(cc.Layout).updateLayout()},t.prototype.initItemUI=function(e,t,o,n){var i;void 0===n&&(n=!1);var a=e.getChildByName("bg"),r=a.getComponent(cc.Sprite),s=a.getChildByName("lbl_name").getComponent(cc.Label),l=a.getChildByName("icon").getComponent(cc.Sprite),u=a.getChildByName("heng1").getChildByName("lbl_lv").getComponent(cc.Label),d=a.getChildByName("heng2").getChildByName("progress").getComponent(cc.ProgressBar),h=a.getChildByName("heng2").getChildByName("lbl_progress").getComponent(cc.Label),_=a.getChildByName("btn_unlock"),y=a.getChildByName("feng"),g=a.getChildByName("heng1"),m=a.getChildByName("heng2"),v=15e3+o.skillId,b=f.default.getInstance().playerData.item_getCountById(v),P=f.default.getInstance().gongfa_getLvById(o.skillId),S=window.gongFaUtils_008.getUpgradeNeedFragmentCountByLv(o.skillId,P),w=null!==(i=null==o?void 0:o.quality)&&void 0!==i?i:1+Math.ceil(4*Math.random());e.getComponent(cc.Button).interactable=t,s.string=o.skillName,s.node.color=window.gongFaUtils_008.getNameLabelColorByQuality(P>=0?w:0),y.active=f.default.getInstance().gongfa_isSeal(o.skillId),S>=0?(d.progress=b/S,h.string=b+"/"+S):(d.progress=1,h.string="\u5df2\u6ee1\u7ea7"),c.default.getInstance().getSpriteFrame(p.default.getItemIconPath_box(o.skillId)).then(function(e){l.spriteFrame=e}),l.setMaterial(0,cc.Material.getBuiltinMaterial(t?cc.Material.BUILTIN_NAME.SPRITE:cc.Material.BUILTIN_NAME.GRAY_SPRITE)),g.opacity=t?255:0,m.y=t?-120:-86,_.active=!t,t?r.spriteFrame=this.sfArr_bg[w]:cc.find("Background/layout/videoIcon",_).active=b<S,u.string="\u7b49\u7ea7 "+P,n&&(e.off(cc.Node.EventType.TOUCH_END),_.off(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_item.bind(this,e,w),this),_.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_itemUnlock.bind(this,e),this),e.active=!1,e.active=!0)},t.prototype.refreshItemUI=function(e,t){if(f.default.getInstance().playerData.gongfa_idArr.includes(t)&&e.parent===this.layout_skill_lock)return e.setParent(this.layout_skill_unlock),void this.initItemUI(e,!0,p.SkillConfigMap.get(t),!1);var o=e.getChildByName("bg"),n=o.getChildByName("heng1").getChildByName("lbl_lv").getComponent(cc.Label),i=o.getChildByName("heng2").getChildByName("progress").getComponent(cc.ProgressBar),a=o.getChildByName("heng2").getChildByName("lbl_progress").getComponent(cc.Label),r=o.getChildByName("btn_unlock"),s=o.getChildByName("feng"),l=15e3+t,c=f.default.getInstance().playerData.item_getCountById(l),u=f.default.getInstance().gongfa_getLvById(t),d=window.gongFaUtils_008.getUpgradeNeedFragmentCountByLv(t,u);s.active=f.default.getInstance().gongfa_isSeal(t),n.string="\u7b49\u7ea7 "+u,d>=0?(i.progress=c/d,a.string=c+"/"+d):(i.progress=1,a.string="\u5df2\u6ee1\u7ea7"),cc.find("Background/layout/videoIcon",r).active=c<d},t.prototype.onRefreshUI=function(){var e=this;this.skillItemToSkillIdMap.forEach(function(t,o){e.refreshItemUI(o,t)})},t.prototype.onClickBtn_item=function(e,t){if(window.isCanCtrl){var o=this.skillItemToSkillIdMap.get(e);if(!(f.default.getInstance().gongfa_getLvById(o)<0)){l.default.getInstance().click();var n=e.getChildByName("bg").getChildByName("icon").getComponent(cc.Sprite);d.default.onShowDia.executeDelegates(p.default.UIPath_Dia_GongFaDetail,o,n.spriteFrame,t)}}},t.prototype.onClickBtn_itemUnlock=function(e){var t=this;if(window.isCanCtrl){var o=this.skillItemToSkillIdMap.get(e),n=15e3+o,i=f.default.getInstance().playerData.item_getCountById(n),a=f.default.getInstance().gongfa_getLvById(o),l=window.gongFaUtils_008.getUpgradeNeedFragmentCountByLv(o,a),h=i<l,_=function(){return r(t,void 0,void 0,function(){var t,i=this;return s(this,function(a){switch(a.label){case 0:return[4,new Promise(function(e){c.default.getInstance().getSpriteFrame(p.default.Path_IconSkill+o).then(function(t){d.default.onShowDia.executeDelegates(p.default.UIPath_Dia_unlockNewSkill,t,p.SkillConfigMap.get(o).skillDescArr[0],e)})})];case 1:return a.sent(),h||f.default.getInstance().playerData.item_addCountById(n,-l),f.default.getInstance().gongfa_setLvById(o,0),f.default.getInstance().onUnlockSkill(o),f.default.getInstance().onSaveData(),d.default.onUnlockSkill.executeDelegates(o),e.setParent(this.layout_skill_unlock),t=p.SkillConfigMap.get(o),this.scheduleOnce(function(){i.initItemUI(e,!0,t,!1)},0),[2]}})})};h?u.default.getInstance().showVideo(_):_()}},a([y(cc.Prefab)],t.prototype,"pre_gongfa",void 0),a([y(cc.Node)],t.prototype,"layout_skill_unlock",void 0),a([y(cc.Node)],t.prototype,"layout_skill_lock",void 0),a([y([cc.SpriteFrame])],t.prototype,"sfArr_bg",void 0),a([_,g("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008"}],GuideDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"ec12d8PKz1Bu6ItGWnk5axe","GuideDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Config_008"),s=e("../../DelegateManager_008"),l=e("./BaseUIDialog_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=c.inspector,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask=null,t.finger=null,t.graphics=null,t.currRect=new cc.Rect,t.func_comp=null,t}return i(t,e),t.prototype.onShow=function(){this.node.active=!0,this.onInitEvent()},t.prototype.onHide=function(e){this.onRemoveEvent(),this.node.active=!1,this.node.destroy(),e&&e()},t.prototype.onInit=function(e,t,o){this.onInitBg(e),this.currIndex=0,this.targetNodeArr=t,this.func_comp=o,this.graphics=this.mask.getComponent(cc.Mask)._graphics,this.graphics.fillColor=cc.Color.WHITE,this.onRefreshUI()},t.prototype.onInitEvent=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onRemoveEvent=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onRefreshUI=function(){var e=this,t=this.targetNodeArr[this.currIndex],o=t.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.mask.convertToNodeSpaceAR(cc.v2(o.x-(t.anchorX-0)*t.width,o.y-(t.anchorY-0)*t.height));this.scheduleOnce(function(){e.graphics.clear(),e.graphics.rect(n.x,n.y,t.width,t.height),e.graphics.fill()},0),this.currRect.x=n.x,this.currRect.y=n.y,this.currRect.width=t.width,this.currRect.height=t.height;var i=cc.v2(o.x+(t.anchorX-.5)*t.width,o.y-(t.anchorY-.5)*t.height);this.finger.setPosition(this.finger.parent.convertToNodeSpaceAR(i))},t.prototype.onNext=function(){this.currIndex+=1,this.currIndex<this.targetNodeArr.length?this.onRefreshUI():this.onClose()},t.prototype.onClose=function(){this.func_comp&&this.func_comp(),this.onHide(function(){s.default.onRemoveDia.executeDelegates(r.default.UIPath_Dia_Guide)})},t.prototype.onTouchEnd=function(e){var t=this.mask.convertToNodeSpaceAR(e.getLocation());this.currRect.contains(t)&&(this.targetNodeArr[this.currIndex].emit(cc.Node.EventType.TOUCH_END,e),this.onNext())},a([p(cc.Node)],t.prototype,"mask",void 0),a([p(cc.Node)],t.prototype,"finger",void 0),a([u,d("packages://autoproperty//inspector.js")],t)}(l.default);o.default=f,cc._RF.pop()},{"../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","./BaseUIDialog_008":"BaseUIDialog_008"}],Guide_TouchMove:[function(e,t,o){"use strict";cc._RF.push(t,"257b2LFkSNHgq+teYEUvMXg","Guide_TouchMove");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_finger=null,t}return i(t,e),t.prototype.onEnable=function(){var e=133,t=cc.v2(0,e),o=cc.v2(200,e),n=cc.v2(0,-e),i=cc.v2(-200,-e),a=cc.v2(-200,e),r=cc.v2(200,-e);cc.tween(this.m_finger).repeatForever(cc.tween().bezierBy(1,t,o,cc.v2(200,0)).bezierBy(1,n,i,cc.v2(-200,0)).bezierBy(1,t,a,cc.v2(-200,0)).bezierBy(1,n,r,cc.v2(200,0))).start()},t.prototype.logH=function(){var e=180*Math.PI/180,t=4/3*((1-Math.cos(e/2))/Math.sin(e/2));console.log(" h ==> "+t)},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.m_finger),this.m_finger.setPosition(0,0)},a([l(cc.Node)],t.prototype,"m_finger",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],HpBarNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"c31b7ymdLpH8Ktq6WwhPFKI","HpBarNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../GamingData_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fillBar=null,t.targetNode=null,t.offset=cc.Vec2.ZERO,t}return i(t,e),t.prototype.onInitHpBar=function(e,t){return this.targetNode=e,this.offset=t,this.node.opacity=0,this.node.setPosition(this.targetNode.getPosition().add(this.offset)),this.onRefreshFillBar.bind(this)},t.prototype.lateUpdate=function(){this.node.setPosition(this.targetNode.getPosition().add(this.offset)),this.node.opacity=r.default.RenderRect.contains(this.node.getPosition())?255:0},t.prototype.onRefreshFillBar=function(e){this.fillBar.fillRange=e},a([c(cc.Sprite)],t.prototype,"fillBar",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GamingData_008":"GamingData_008"}],InfiniteMap_008:[function(e,t,o){"use strict";cc._RF.push(t,"1eac2cUQ5BM8YC82mCx7uOm","InfiniteMap_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../Utils/RandomUtils"),c=e("./GamingData_008"),u=e("./misc/SceneOrnament_Bg_008"),p=e("./misc/SceneOrnament_Obj_008"),d=e("./misc/ZIndex_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=f.inspector,g=[3,0,1,2,7,4,5,6,11,8,9,10,15,12,13,14],m=[1,2,3,0,5,6,7,4,9,10,11,8,13,14,15,12],v=[12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11],b=[4,5,6,7,8,9,10,11,12,13,14,15,0,1,2,3],P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileNode=null,t.ornamentNode=null,t.ornamentArr_bg=[],t.ornamentArr_bgObj=[],t.ornamentArr_obj=[],t.ornamentArr_bgCenter=[],t.posXArr=[0,0],t.posYArr=[0,0],t.tileArr=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this.tileNode.children[0];this.tileArr.push(e);var t=e.width,o=e.height;this.tileWidth=t,this.tileHeight=o;for(var n=0;n<15;n++){var i=cc.instantiate(e);i.setParent(this.tileNode),this.tileArr.push(i)}for(n=0;n<4;n++)for(var a=o*(1.5-n),r=0;r<4;r++){var s=4*n+r,l=t*(-1.5+r);this.tileArr[s].setPosition(l,a),this.onInitOrnament(this.tileArr[s])}},t.prototype.onInitOrnament=function(e){return r(this,void 0,void 0,function(){var t,o,n,i,a,r,c,f;return s(this,function(){if(t=.5*-e.width,o=.5*e.width,n=.5*-e.height,i=.5*e.height,this.ornamentArr_bg.length>0)for(a=Math.random()<.7?2:1,r=0;r<a;r++)c=l.RandomUtils.getRandomFormArray(this.ornamentArr_bg),(f=cc.instantiate(this.ornamentArr_bg[c])).setParent(e),f.setPosition(l.RandomUtils.getRandomInt(t,o),l.RandomUtils.getRandomInt(n,i)),f.addComponent(u.default);if(this.ornamentArr_bgObj.length>0)for(a=Math.random()<.8?1:0,r=0;r<a;r++)c=l.RandomUtils.getRandomFormArray(this.ornamentArr_bgObj),(f=cc.instantiate(this.ornamentArr_bgObj[c])).setParent(e),f.setPosition(l.RandomUtils.getRandomInt(t,o),l.RandomUtils.getRandomInt(n,i)),f.addComponent(u.default);if(this.ornamentArr_obj.length>0)for(a=Math.random()<.6?1:0,r=0;r<a;r++)c=l.RandomUtils.getRandomFormArray(this.ornamentArr_obj),(f=cc.instantiate(this.ornamentArr_obj[c])).setParent(e),f.setPosition(l.RandomUtils.getRandomInt(t,o),l.RandomUtils.getRandomInt(n,i)),f.addComponent(p.default),f.addComponent(d.default);if(this.ornamentArr_bgCenter.length>0)for(a=Math.random()<.25?1:0,r=0;r<a;r++)c=l.RandomUtils.getRandomFormArray(this.ornamentArr_bgCenter),(f=cc.instantiate(this.ornamentArr_bgCenter[c])).setParent(e),f.setPosition(0,0),f.addComponent(u.default);return[2]})})},t.prototype.start=function(){this.refreshPosData()},t.prototype.refreshPosData=function(){this.posXArr[0]=this.tileArr[1].getPosition().x,this.posXArr[1]=this.tileArr[2].getPosition().x,this.posYArr[0]=this.tileArr[4].getPosition().y,this.posYArr[1]=this.tileArr[8].getPosition().y},t.prototype.lateUpdate=function(){var e=c.default.gameCameraNode.getPosition();e.x<this.posXArr[0]?this.onMoveBgNode_RightToLeft():e.x>this.posXArr[1]&&this.onMoveBgNode_LeftToRight(),e.y>this.posYArr[0]?this.onMoveBgNode_BottomToTop():e.y<this.posYArr[1]&&this.onMoveBgNode_TopToBottom()},t.prototype.onMoveBgNode_RightToLeft=function(){var e=this.tileArr.slice(),t=e[0].getPosition().x-this.tileWidth;e[3].setPosition(t,e[3].getPosition().y),e[7].setPosition(t,e[7].getPosition().y),e[11].setPosition(t,e[11].getPosition().y),e[15].setPosition(t,e[15].getPosition().y);for(var o=0;o<16;o++)this.tileArr[o]=e[g[o]];this.refreshPosData()},t.prototype.onMoveBgNode_LeftToRight=function(){var e=this.tileArr.slice(),t=e[3].getPosition().x+this.tileWidth;e[0].setPosition(t,e[0].getPosition().y),e[4].setPosition(t,e[4].getPosition().y),e[8].setPosition(t,e[8].getPosition().y),e[12].setPosition(t,e[12].getPosition().y);for(var o=0;o<16;o++)this.tileArr[o]=e[m[o]];this.refreshPosData()},t.prototype.onMoveBgNode_BottomToTop=function(){var e=this.tileArr.slice(),t=e[0].getPosition().y+this.tileHeight;e[12].setPosition(e[12].getPosition().x,t),e[13].setPosition(e[13].getPosition().x,t),e[14].setPosition(e[14].getPosition().x,t),e[15].setPosition(e[15].getPosition().x,t);for(var o=0;o<16;o++)this.tileArr[o]=e[v[o]];this.refreshPosData()},t.prototype.onMoveBgNode_TopToBottom=function(){var e=this.tileArr.slice(),t=e[12].getPosition().y-this.tileHeight;e[0].setPosition(e[0].getPosition().x,t),e[1].setPosition(e[1].getPosition().x,t),e[2].setPosition(e[2].getPosition().x,t),e[3].setPosition(e[3].getPosition().x,t);for(var o=0;o<16;o++)this.tileArr[o]=e[b[o]];this.refreshPosData()},a([_(cc.Node)],t.prototype,"tileNode",void 0),a([_(cc.Node)],t.prototype,"ornamentNode",void 0),a([_([cc.Prefab])],t.prototype,"ornamentArr_bg",void 0),a([_([cc.Prefab])],t.prototype,"ornamentArr_bgObj",void 0),a([_([cc.Prefab])],t.prototype,"ornamentArr_obj",void 0),a([_([cc.Prefab])],t.prototype,"ornamentArr_bgCenter",void 0),a([h,y("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=P,cc._RF.pop()},{"../../Utils/RandomUtils":"RandomUtils","./GamingData_008":"GamingData_008","./misc/SceneOrnament_Bg_008":"SceneOrnament_Bg_008","./misc/SceneOrnament_Obj_008":"SceneOrnament_Obj_008","./misc/ZIndex_008":"ZIndex_008"}],InfoDetailDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"c37aa+YlA9MmYKxILls+iOh","InfoDetailDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/TweenUtils"),s=e("../../../../mag/AudioMag"),l=e("../../entities/Enums_008"),c=e("../../utils/PlayerInfoUtils_008"),u=e("./BaseUIDialog_008"),p=cc._decorator,d=p.ccclass,f=p.property,h=p.inspector,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.lbl_score=null,t.lbl_hp=null,t.lbl_damagePoint=null,t.lbl_armor=null,t.lbl_moveSpeed=null,t.lbl_restoreLife=null,t.lbl_expBonus=null,t.lbl_lucky=null,t}return i(t,e),t.prototype.onInit=function(e,t){this.onInitBg(e);var o=c.default.getTotalScore(t);r.default.labelValueProxy(this.lbl_score,.5,0,o),this.lbl_damagePoint.string=c.default.getPlayerInfoByInfoType(t,l.InfoType_008.DamagePoint).toString(),this.lbl_hp.string=c.default.getPlayerInfoByInfoType(t,l.InfoType_008.HP).toString(),this.lbl_armor.string=c.default.getPlayerInfoByInfoType(t,l.InfoType_008.Armor).toString(),this.lbl_moveSpeed.string=c.default.getPlayerInfoByInfoType(t,l.InfoType_008.MoveSpeed).toString(),this.lbl_restoreLife.string=c.default.getPlayerInfoByInfoType(t,l.InfoType_008.RestoreLife).toString(),this.lbl_expBonus.string=c.default.getPlayerInfoByInfoType(t,l.InfoType_008.ExpBonus).toString(),this.lbl_lucky.string=c.default.getPlayerInfoByInfoType(t,l.InfoType_008.Lucky).toString()},t.prototype.onInitEvent=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onClose,this)},t.prototype.onRemoveEvent=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onClose,this)},t.prototype.onClose=function(){s.default.getInstance().click(),this.onHide(null)},a([f(cc.Node)],t.prototype,"btn_close",void 0),a([f(cc.Label)],t.prototype,"lbl_score",void 0),a([f(cc.Label)],t.prototype,"lbl_hp",void 0),a([f(cc.Label)],t.prototype,"lbl_damagePoint",void 0),a([f(cc.Label)],t.prototype,"lbl_armor",void 0),a([f(cc.Label)],t.prototype,"lbl_moveSpeed",void 0),a([f(cc.Label)],t.prototype,"lbl_restoreLife",void 0),a([f(cc.Label)],t.prototype,"lbl_expBonus",void 0),a([f(cc.Label)],t.prototype,"lbl_lucky",void 0),a([d,h("packages://autoproperty//inspector.js")],t)}(u.default);o.default=_,cc._RF.pop()},{"../../../../Utils/TweenUtils":"TweenUtils","../../../../mag/AudioMag":"AudioMag","../../entities/Enums_008":"Enums_008","../../utils/PlayerInfoUtils_008":"PlayerInfoUtils_008","./BaseUIDialog_008":"BaseUIDialog_008"}],ItemUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"faeaf15SrtFIY2NDnsKJnw2","ItemUtils_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],Joystick_common:[function(e,t,o){"use strict";cc._RF.push(t,"6f631sjGoJDI6TM2LwE5iA5","Joystick_common");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radius=50,t.bg=null,t.handle=null,t.dir=null,t.isTouching=!1,t.startTouchPos=cc.Vec2.ZERO,t.moveDir=cc.Vec2.ZERO,t.touchEventTarget=null,t.touchMoveEvent=null,t.touchStartEvent=null,t.touchEndEvent=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this.node.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.updateAlignment(),this.bg=this.node.getChildByName("bg"),this.handle=this.bg.getChildByName("handle"),this.dir=this.bg.getChildByName("dir"),null!==this.dir&&(this.dir.opacity=0)},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchJoystick_start,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchJoystick_move,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchJoystick_end,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchJoystick_end,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchJoystick_start,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchJoystick_move,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchJoystick_end,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchJoystick_end,this)},t.prototype.onTouchJoystick_start=function(e){this.isTouching=!0,this.startTouchPos=e.getLocation(),this.bg.opacity=255,this.bg.setPosition(this.node.convertToNodeSpaceAR(this.startTouchPos)),this.handle.setPosition(0,0),this.touchStartEvent&&this.touchStartEvent()},t.prototype.onTouchJoystick_move=function(e){var t=e.getLocation().sub(this.startTouchPos);this.moveDir=t.normalize(),t.mag()<this.radius?this.handle.setPosition(t):this.handle.setPosition(this.moveDir.mul(this.radius)),null!==this.dir&&(this.dir.opacity=255,this.dir.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))),this.touchMoveEvent&&this.touchMoveEvent.call(this.touchEventTarget,this.moveDir)},t.prototype.onTouchJoystick_end=function(){this.isTouching&&(null!==this.dir&&(this.dir.opacity=0),this.isTouching=!1,this.bg.opacity=0,this.touchEndEvent&&this.touchEndEvent())},t.prototype.addEvent=function(e,t){this.touchMoveEvent=e,this.touchEventTarget=t},t.prototype.addEvent_StartEnd=function(e,t){this.touchStartEvent=e,this.touchEndEvent=t},t.prototype.removeEvent=function(){this.touchMoveEvent=null},a([l(cc.Float)],t.prototype,"radius",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],KdTree:[function(e,t,o){"use strict";cc._RF.push(t,"d6359USgm5JIphmmHh6hikR","KdTree"),Object.defineProperty(o,"__esModule",{value:!0}),o.KdTree=void 0;var n=e("./Agent"),i=e("./AgentTreeNode"),a=e("./FloatPair"),r=e("./Obstacle"),s=e("./ObstacleTreeNode"),l=e("./RVOMath"),c=e("./Simulator"),u=e("./Vector2"),p=function(){function e(){this.MAX_LEAF_SIZE=10,this.agents_=[],this.agentTree_=[]}return e.prototype.clear=function(){this.agents_=[],this.agentTree_=[],this.obstacleTree_=null},e.prototype.buildAgentTree=function(){for(var e=c.Simulator.Instance().getNumAgents(),t=0;t<e;++t)this.agents_[t]=c.Simulator.Instance().agents_[t];for(t=0;t<2*e;++t)this.agentTree_[t]=new i.AgentTreeNode;0!=e&&this.buildAgentTreeRecursive(0,e,0)},e.prototype.buildAgentTreeRecursive=function(e,t,o){this.agentTree_[o].begin=e,this.agentTree_[o].end=t,this.agentTree_[o].minX=this.agentTree_[o].maxX=this.agents_[e].position_.x,this.agentTree_[o].minY=this.agentTree_[o].maxY=this.agents_[e].position_.y;for(var n=e+1;n<t;++n)this.agentTree_[o].maxX=Math.max(this.agentTree_[o].maxX,this.agents_[n].position_.x),this.agentTree_[o].minX=Math.min(this.agentTree_[o].minX,this.agents_[n].position_.x),this.agentTree_[o].maxY=Math.max(this.agentTree_[o].maxY,this.agents_[n].position_.y),this.agentTree_[o].minY=Math.min(this.agentTree_[o].minY,this.agents_[n].position_.y);if(t-e>this.MAX_LEAF_SIZE){for(var i=this.agentTree_[o].maxX-this.agentTree_[o].minX>this.agentTree_[o].maxY-this.agentTree_[o].minY,a=i?.5*(this.agentTree_[o].maxX+this.agentTree_[o].minX):.5*(this.agentTree_[o].maxY+this.agentTree_[o].minY),r=e,s=t;r<s;){for(;r<s&&(i?this.agents_[r].position_.x:this.agents_[r].position_.y)<a;)++r;for(;s>r&&(i?this.agents_[s-1].position_.x:this.agents_[s-1].position_.y)>=a;)--s;if(r<s){var l=this.agents_[r];this.agents_[r]=this.agents_[s-1],this.agents_[s-1]=l,++r,--s}}r==e&&(++r,++s),this.agentTree_[o].left=o+1,this.agentTree_[o].right=o+2*(r-e),this.buildAgentTreeRecursive(e,r,this.agentTree_[o].left),this.buildAgentTreeRecursive(r,t,this.agentTree_[o].right)}},e.prototype.computeAgentNeighbors=function(e,t){this.queryAgentTreeRecursive(e,t,0)},e.prototype.queryAgentTreeRecursive=function(e,t,o){if(this.agentTree_[o].end-this.agentTree_[o].begin<=this.MAX_LEAF_SIZE)for(var i=this.agentTree_[o].begin;i<this.agentTree_[o].end;++i)e.insertAgentNeighbor(this.agents_[i],n.Agent.rangeSq);else{var a=l.RVOMath.sqr(Math.max(0,this.agentTree_[this.agentTree_[o].left].minX-e.position_.x))+l.RVOMath.sqr(Math.max(0,e.position_.x-this.agentTree_[this.agentTree_[o].left].maxX))+l.RVOMath.sqr(Math.max(0,this.agentTree_[this.agentTree_[o].left].minY-e.position_.y))+l.RVOMath.sqr(Math.max(0,e.position_.y-this.agentTree_[this.agentTree_[o].left].maxY)),r=l.RVOMath.sqr(Math.max(0,this.agentTree_[this.agentTree_[o].right].minX-e.position_.x))+l.RVOMath.sqr(Math.max(0,e.position_.x-this.agentTree_[this.agentTree_[o].right].maxX))+l.RVOMath.sqr(Math.max(0,this.agentTree_[this.agentTree_[o].right].minY-e.position_.y))+l.RVOMath.sqr(Math.max(0,e.position_.y-this.agentTree_[this.agentTree_[o].right].maxY));a<r?a<n.Agent.rangeSq&&(this.queryAgentTreeRecursive(e,n.Agent.rangeSq,this.agentTree_[o].left),r<n.Agent.rangeSq&&this.queryAgentTreeRecursive(e,n.Agent.rangeSq,this.agentTree_[o].right)):r<n.Agent.rangeSq&&(this.queryAgentTreeRecursive(e,n.Agent.rangeSq,this.agentTree_[o].right),a<n.Agent.rangeSq&&this.queryAgentTreeRecursive(e,n.Agent.rangeSq,this.agentTree_[o].left))}},e.prototype.buildObstacleTree=function(){this.obstacleTree_=new s.ObstacleTreeNode;for(var e=[],t=0;t<c.Simulator.Instance().obstacles_.length;++t)e[t]=c.Simulator.Instance().obstacles_[t];this.obstacleTree_=this.buildObstacleTreeRecursive(e)},e.prototype.buildObstacleTreeRecursive=function(e){if(0==e.length)return null;for(var t=new s.ObstacleTreeNode,o=0,n=e.length,i=e.length,p=0;p<e.length;++p){for(var d=0,f=0,h=(R=e[p]).nextObstacle_,_=0;_<e.length;++_)if(p!=_){var y=(C=e[_]).nextObstacle_,g=u.Vector2.leftOf(R.point_,h.point_,C.point_),m=u.Vector2.leftOf(R.point_,h.point_,y.point_);g>=-l.RVOMath.RVO_EPSILON&&m>=-l.RVOMath.RVO_EPSILON?++d:g<=l.RVOMath.RVO_EPSILON&&m<=l.RVOMath.RVO_EPSILON?++f:(++d,++f);var v=new a.FloatPair(Math.max(d,f),Math.min(d,f)),b=new a.FloatPair(Math.max(n,i),Math.min(n,i));if(a.FloatPair.sup_equal(v,b))break}v=new a.FloatPair(Math.max(d,f),Math.min(d,f)),b=new a.FloatPair(Math.max(n,i),Math.min(n,i)),a.FloatPair.inf(v,b)&&(n=d,i=f,o=p)}for(var P=[],S=0;S<n;++S)P[S]=null;var w=[];for(S=0;S<i;++S)w[S]=null;var R,I=0,D=0;for(h=(R=e[p=o]).nextObstacle_,_=0;_<e.length;++_)if(p!=_){var C;if(y=(C=e[_]).nextObstacle_,g=u.Vector2.leftOf(R.point_,h.point_,C.point_),m=u.Vector2.leftOf(R.point_,h.point_,y.point_),g>=-l.RVOMath.RVO_EPSILON&&m>=-l.RVOMath.RVO_EPSILON)P[I++]=e[_];else if(g<=l.RVOMath.RVO_EPSILON&&m<=l.RVOMath.RVO_EPSILON)w[D++]=e[_];else{var N=u.Vector2.det(h.point_.moins(R.point_),C.point_.moins(R.point_))/u.Vector2.det(h.point_.moins(R.point_),C.point_.moins(y.point_)),O=y.point_.moins(C.point_).mul_k(N),B=C.point_.plus(O),A=new r.Obstacle;A.point_=B,A.prevObstacle_=C,A.nextObstacle_=y,A.isConvex_=!0,A.unitDir_=C.unitDir_,A.id_=c.Simulator.Instance().obstacles_.length,c.Simulator.Instance().obstacles_.push(A),C.nextObstacle_=A,y.prevObstacle_=A,g>0?(P[I++]=C,w[D++]=A):(w[D++]=C,P[I++]=A)}}return t.obstacle=R,t.left=this.buildObstacleTreeRecursive(P),t.right=this.buildObstacleTreeRecursive(w),t},e.prototype.computeObstacleNeighbors=function(e,t){this.queryObstacleTreeRecursive(e,t,this.obstacleTree_)},e.prototype.queryObstacleTreeRecursive=function(e,t,o){if(null!=o){var n=o.obstacle,i=n.nextObstacle_,a=u.Vector2.leftOf(n.point_,i.point_,e.position_);this.queryObstacleTreeRecursive(e,t,a>=0?o.left:o.right),l.RVOMath.sqr(a)/u.Vector2.absSq(i.point_.moins(n.point_))<t&&(a<0&&e.insertObstacleNeighbor(o.obstacle,t),this.queryObstacleTreeRecursive(e,t,a>=0?o.right:o.left))}},e.prototype.queryVisibility=function(e,t,o){return this.queryVisibilityRecursive(e,t,o,this.obstacleTree_)},e.prototype.queryVisibilityRecursive=function(e,t,o,n){if(null==n)return!0;var i=n.obstacle,a=i.nextObstacle_,r=u.Vector2.leftOf(i.point_,a.point_,e),s=u.Vector2.leftOf(i.point_,a.point_,t),c=1/u.Vector2.absSq(a.point_.moins(i.point_));if(r>=0&&s>=0)return this.queryVisibilityRecursive(e,t,o,n.left)&&(l.RVOMath.sqr(r)*c>=l.RVOMath.sqr(o)&&l.RVOMath.sqr(s)*c>=l.RVOMath.sqr(o)||this.queryVisibilityRecursive(e,t,o,n.right));if(r<=0&&s<=0)return this.queryVisibilityRecursive(e,t,o,n.right)&&(l.RVOMath.sqr(r)*c>=l.RVOMath.sqr(o)&&l.RVOMath.sqr(s)*c>=l.RVOMath.sqr(o)||this.queryVisibilityRecursive(e,t,o,n.left));if(r>=0&&s<=0)return this.queryVisibilityRecursive(e,t,o,n.left)&&this.queryVisibilityRecursive(e,t,o,n.right);var p=u.Vector2.leftOf(e,t,i.point_),d=u.Vector2.leftOf(e,t,a.point_),f=1/u.Vector2.absSq(t.moins(e));return p*d>=0&&l.RVOMath.sqr(p)*f>l.RVOMath.sqr(o)&&l.RVOMath.sqr(d)*f>l.RVOMath.sqr(o)&&this.queryVisibilityRecursive(e,t,o,n.left)&&this.queryVisibilityRecursive(e,t,o,n.right)},e}();o.KdTree=p,cc._RF.pop()},{"./Agent":"Agent","./AgentTreeNode":"AgentTreeNode","./FloatPair":"FloatPair","./Obstacle":"Obstacle","./ObstacleTreeNode":"ObstacleTreeNode","./RVOMath":"RVOMath","./Simulator":"Simulator","./Vector2":"Vector2"}],KeyValuePair:[function(e,t,o){"use strict";cc._RF.push(t,"5afcdlPV9xB15VP7CoWYnfm","KeyValuePair"),Object.defineProperty(o,"__esModule",{value:!0}),o.KeyValuePair=void 0;o.KeyValuePair=function(e,t){this.Key=e,this.Value=t},cc._RF.pop()},{}],LC_008:[function(e,t,o){"use strict";cc._RF.push(t,"35bd5qO75ZIo4rmKJUDR5fv","LC_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../config/GameConfig"),c=e("../../mag/AudioMag"),u=e("../../mag/GameMag"),p=e("../../mag/GameManager"),d=e("../../mag/NodePoolManager"),f=e("../../mag/ObjectPoolManager"),h=e("../../mag/UIMag"),_=e("../000_common/Joystick_common"),y=e("./Config_008"),g=e("./Config_Gaming_008"),m=e("./DelegateManager_008"),v=e("./EnemyManager_008"),b=e("./GameManager_008"),P=e("./GamingData_008"),S=e("./LocalDataManager_008"),w=e("./quests/QuestsSys_008"),R=e("./utils/QuestsUtil_008"),I=e("./utils/XiuXianUtils_008"),D=cc._decorator,C=D.ccclass,N=D.property;cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0,cc.dynamicAtlasManager.maxFrameSize=1200,cc.dynamicAtlasManager.maxAtlasCount=4;var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.mainUI=null,t.gameNode=null,t.gameManager=null,t.gamingUI=null,t.joystick=null,t.isPreStart=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){return r(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return o.ins=this,this.bg.active=!0,this.gameNode.active=!1,this.mainUI.active=!1,cc.director.getCollisionManager().enabled=!0,window.onExitGame_008=this.onExitGame.bind(this),window.isCanCtrl=!0,P.default.isGamePause=!0,S.default.getInstance().onLoadData()&&this.scheduleOnce(function(){e.onStartGame(0,0,0)},0),[4,R.default.instance.loadData()];case 1:return t.sent(),w.default.instance.registerEvent(),[4,I.default.onLoadConfigData(y.default.JsonPath_XiuXianData)];case 2:return t.sent(),this.mainUI.active=!0,this.bg.active=!1,this.scheduleOnce(function(){m.default.onRefreshQuests.executeDelegates(),R.default.instance.onCheckRedPoint()},0),[2]}})})},t.prototype.onDestroy=function(){m.default.onClear()},t.prototype.start=function(){l.default.isGamePause=!1,u.default.getInstance().preLoadPrefab([y.default.UIPath_Dia_getEquipment,y.default.UIPath_Dia_GamingBox])},t.prototype.onStartGame=function(e,t,o){var n=this;if(!this.isPreStart){this.isPreStart=!0,P.default.currChapterIndex=t,P.default.currGrade=e,P.default.currChapterProgress=o;var i=[];i.push({key:y.default.Key_DropItem,prePath:y.default.Path_DropItem,count:50}),i.push({key:y.default.Key_Pot,prePath:y.default.Path_Pot,count:g.Config_Gaming_008.Pot_CountLimit}),i.push({key:y.default.Key_Box,prePath:y.default.Path_Box,count:1}),y.DropItemConfigMap.forEach(function(e,t){i.push({key:e,prePath:e,count:1===t?50:1})}),i.push({key:y.default.Key_FloatText,prePath:y.default.Path_FloatText,count:20}),i.push({key:y.default.Key_HpBar,prePath:y.default.Path_HpBar,count:1}),i.push({key:y.default.Key_BossHpBar,prePath:y.default.Path_BossHpBar,count:1}),i.push({key:y.default.Key_EF_Spark,prePath:y.default.Path_EF_Spark,count:1}),i.push({key:y.default.Key_EF_NuclearBomb,prePath:y.default.Path_EF_NuclearBomb,count:1}),i.push({key:y.default.Key_EF_NuclearBomb_Z,prePath:y.default.Path_EF_NuclearBomb_Z,count:15}),i.push({key:y.default.Key_FlyingKnife,prePath:y.default.Path_FlyingKnife,count:3}),i.push({key:y.default.Key_EF_PickUpWeapon,prePath:y.default.Path_EF_PickUpWeapon,count:9}),i.push({key:y.default.Key_EF_RunRoute,prePath:y.default.Path_EF_RunRoute,count:1}),i.push({key:y.default.Key_EF_EnemyDia,prePath:y.default.Path_EF_EnemyDia,count:5}),i.push({key:y.default.Key_EF_BossInitPos,prePath:y.default.Path_EF_BossInitPos,count:1}),window.waitingStartFunc&&window.waitingStartFunc("\u51c6\u5907\u8fdb\u5165\u6c5f\u6e56...",!0);var a=y.ChapterConfig[e][t];this.onInitGamingUI().then(function(){return d.default.getInstance().onInitNodePoolArr(i,window.waitingFunc)}).then(function(){return n.gameManager.onLoadMap(a.mapPath)}).then(function(){return v.default.ins.onInit(a.enemyGeneratorJSONPathArr[o])}).then(function(){cc.director.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH),window.waitingEndFunc&&window.waitingEndFunc(),!cc.sys.isNative&&cc.sys.isBrowser&&(cc.debug.setDisplayStats(!1),cc.debug.setDisplayStats(!0)),P.default.onInitData(S.default.getInstance().playerData),n.mainUI.active=!1,n.gameNode.active=!0,n.gamingUI.active=!0,n.gameManager.onStartGame(n.joystick),n.isPreStart=!1,S.default.getInstance().playerData.numAdventures+=1,S.default.getInstance().onSaveData(),c.default.getInstance().playBGM(a.bgm)})}},t.prototype.onStopGame=function(){v.default.ins.onStopGame(),this.gameManager.onStopGame(),this.gameNode.active=!1,this.gamingUI.active=!1,this.mainUI.active=!0,c.default.getInstance().playBGM(c.AudioType.bgm_start),c.default.getInstance().stopSound_allLoop()},t.prototype.onExitGame=function(){cc.director.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH),d.default.getInstance().clearAll(),f.ObjectPoolManager.getInstance().clearAll(),p.default.ins.onStopGame(),h.default.ins.HideUI(h.UIType.GameUI,!1,function(){h.default.ins.ShowUI(h.UIType.StartUI,!0,null)})},t.prototype.onInitGamingUI=function(){return r(this,void 0,void 0,function(){var e=this;return s(this,function(){return[2,new Promise(function(t){null===e.gamingUI?u.default.getInstance().loadPrefab(y.default.UIPath_GamingUI,function(o){null!==o&&(e.gamingUI=cc.instantiate(o),e.gamingUI.setParent(e.node.getChildByName("uiNode")),e.gamingUI.active=!1,e.gamingUI.setSiblingIndex(0),e.joystick=e.gamingUI.getChildByName("joystick").getComponent(_.default)),t(null)}):t(null)})]})})},t.ins=null,a([N(cc.Node)],t.prototype,"bg",void 0),a([N(cc.Node)],t.prototype,"mainUI",void 0),a([N(cc.Node)],t.prototype,"gameNode",void 0),a([N(b.default)],t.prototype,"gameManager",void 0),o=a([C],t)}(cc.Component);o.default=O,cc._RF.pop()},{"../../../config/GameConfig":"GameConfig","../../mag/AudioMag":"AudioMag","../../mag/GameMag":"GameMag","../../mag/GameManager":"GameManager","../../mag/NodePoolManager":"NodePoolManager","../../mag/ObjectPoolManager":"ObjectPoolManager","../../mag/UIMag":"UIMag","../000_common/Joystick_common":"Joystick_common","./Config_008":"Config_008","./Config_Gaming_008":"Config_Gaming_008","./DelegateManager_008":"DelegateManager_008","./EnemyManager_008":"EnemyManager_008","./GameManager_008":"GameManager_008","./GamingData_008":"GamingData_008","./LocalDataManager_008":"LocalDataManager_008","./quests/QuestsSys_008":"QuestsSys_008","./utils/QuestsUtil_008":"QuestsUtil_008","./utils/XiuXianUtils_008":"XiuXianUtils_008"}],LevelConfig:[function(e,t,o){"use strict";cc._RF.push(t,"c21bcFE+ohE84sagCWB9atp","LevelConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.config=[{id:0,name:"\u9f99\u9aa8\u7248\u672c",prePath:"prefab/lv/lv_001"},{id:1,name:"\u6df1\u6d77\u9c7c\u7248\u672c",prePath:"prefab/lv/lv_002"},{id:2,name:"\u67aa\u7248\u672c",prePath:"prefab/lv/lv_003"},{id:3,name:"\u5347\u5b98\u7248\u672c",prePath:"prefab/lv/lv_004"},{id:4,name:"\u5c71\u6d77\u7ecf\u7248\u672c",prePath:"prefab/lv/lv_005"},{id:5,name:"\u661f\u7403\u7248\u672c",prePath:"prefab/lv/lv_006"},{id:6,name:"\u7ec6\u80de\u7248\u672c",prePath:"prefab/lv/lv_007"},{id:7,name:"\u8f6c\u5200\u73a9\u6cd5",prePath:"lv_008/lv_008"}],e}();o.default=n,cc._RF.pop()},{}],Line:[function(e,t,o){"use strict";cc._RF.push(t,"69e7fSGxlJFvqYkisKpBQt+","Line"),Object.defineProperty(o,"__esModule",{value:!0}),o.Line=void 0;o.Line=function(){},cc._RF.pop()},{}],LingQiBar_008:[function(e,t,o){"use strict";cc._RF.push(t,"e8fc0x1nOhM9Ik/Lq1gJaCG","LingQiBar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../DelegateManager_008"),s=e("../../LocalDataManager_008"),l=e("../../entities/Enums_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t._curNum=0,t}return i(t,e),t.prototype.onLoad=function(){r.default.onRefreshNumLingQi.addDelegate(this.onRefreshNumLingQi,this)},t.prototype.onEnable=function(){this._curNum=Number(this.label.string),this.label.string=s.default.getInstance().playerData.item_getCountById(l.ItemType_008.c_lingqi).toFixed(0)},t.prototype.onRefreshNumLingQi=function(e){var t=this;cc.tween(this.label.node).set({z:this._curNum}).to(.3,{z:e},{easing:function(e){return t.label.string=Math.floor(t.label.node.z).toString(),e}}).call(function(){t._curNum=e,t.label.string=e.toString()}).start()},a([p(cc.Label)],t.prototype,"label",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008"}],LoadingUI:[function(e,t,o){"use strict";cc._RF.push(t,"0c5e3SdcCJDsb49i9GrTH2R","LoadingUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../scripts/game/mag/AudioMag"),c=e("../scripts/game/mag/GameMag"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_progressBar=null,t.currFillProgress=0,t.totalCount=2,t.currProgress=0,t}return i(t,e),t.prototype.start=function(){return r(this,void 0,void 0,function(){var e=this;return s(this,function(){return this.sp_progressBar.fillRange=0,cc.director.preloadScene("MainScene"),this.totalCount=2,this.currProgress=1,this.currFillProgress=0,c.default.getInstance().init().then(function(){return e.addProgress(),l.default.getInstance().init()}).then(function(){e.addProgress()}),[2]})})},t.prototype.update=function(){this.currFillProgress<this.currProgress/this.totalCount&&(this.currFillProgress+=.02,this.refreshProgress())},t.prototype.addProgress=function(){this.currProgress+=1,this.currProgress>this.totalCount&&(this.currFillProgress=.8,this.scheduleOnce(function(){l.default.getInstance().playBGM(l.AudioType.bgm_start),cc.director.loadScene("MainScene")},.5)),this.refreshProgress()},t.prototype.refreshProgress=function(){this.sp_progressBar.fillRange=this.currFillProgress},a([d(cc.Sprite)],t.prototype,"sp_progressBar",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../scripts/game/mag/AudioMag":"AudioMag","../scripts/game/mag/GameMag":"GameMag"}],LocalDataManager_008:[function(e,t,o){"use strict";cc._RF.push(t,"8f1b56byzdEnoxtGMnkQzuh","LocalDataManager_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Utils/DateUtils"),i=e("../../Utils/MathUtils"),a=e("../../Utils/RandomUtils"),r=e("../../Utils/StringUtils"),s=e("./Config_008"),l=e("./DelegateManager_008"),c=e("./entities/Entities_008"),u=e("./entities/Enums_008"),p=e("./quests/QuestsSys_008"),d=e("./utils/ShiFangUtils_008"),f=function(){function e(){this.playerData=null}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.onLoadData=function(){var e=!1,t=localStorage.getItem(s.default.LOCALDATA_KEY);this.playerData=new c.PlayerData_008;var o=this.playerData.item_addCountById;if(this.playerData.item_addCountById=function(e,t){var n=o.call(this,e,t);switch(e){case u.ItemType_008.c_coin:l.default.onRefreshGoldBar.executeDelegates(n);break;case u.ItemType_008.c_energy:l.default.onRefreshEnergyBar.executeDelegates(n);break;case u.ItemType_008.c_boxKey:l.default.onRefreshNumKey.executeDelegates(n);break;case u.ItemType_008.c_zijinye:l.default.onRefreshZiJinYeBar.executeDelegates(n);break;case u.ItemType_008.c_zhanling:l.default.onRefreshNumZhanLing.executeDelegates(n)}return n},t){var n=JSON.parse(t);Object.assign(this.playerData,n)}else e=!0;return this.onCheckData(),this.onSaveData(),this.onInitEvent(),e},e.prototype.onInitEvent=function(){},e.prototype.onCheckData=function(){if(this.playerData.dataVersion<0&&(this.playerData.dataVersion=0,this.playerData.lv=1,this.playerData.curExp=0,this.playerData.isGuideAlchemy=!1,this.playerData.numberOfAlchemy=20,this.playerData.alchemyTimer=0,this.playerData.alchemyTotalTime=0),this.playerData.dataVersion<1&&(this.playerData.dataVersion=1,this.playerData.coinCount=0),this.playerData.dataVersion<2&&(this.playerData.dataVersion=2,this.playerData.energy=50,this.playerData.energy_lastRecoveryTime=Date.now(),this.playerData.equipmentDataArr=[null,null,null,null,null,null],this.playerData.highestChapterId_normal=0,this.playerData.chapterTimeRecordArr_normal=[0],this.playerData.highestChapterId_elite=0,this.playerData.chapterTimeRecordArr_elite=[0],this.playerData.numAdventures=0,this.playerData.isGuideRoleAndBox=!1,this.playerData.unlockedWeaponArr=[],this.playerData.unlockedCommonSkillArr=[],this.playerData.lastDailyGiftTime=0),this.playerData.dataVersion<3&&(this.playerData.dataVersion=3,this.playerData.itemData_id=[],this.playerData.itemData_count=[],this.playerData.item_init(u.ItemType_008.c_coin,this.playerData.coinCount),this.playerData.item_init(u.ItemType_008.c_energy,this.playerData.energy),this.playerData.item_init(u.ItemType_008.c_boxKey,this.playerData.numberOfAlchemy),this.playerData.sortItemsById()),this.playerData.dataVersion<4){this.playerData.dataVersion=4,this.playerData.dailyQuestIds=[],this.playerData.dailyQuestTargetProgress=[],this.playerData.totalQuestTargetProgress=[],this.playerData.receivedQuestIds=[],this.playerData.lastQuestTime=0,this.playerData.dailyActivation=0,this.playerData.activationRewardRecord=[];for(var e=[101,102,103,104,201,202,203,204,205],t=0;t<e.length;t++){var o=this.playerData.unlockedCommonSkillArr.indexOf(e[t]);-1!==o?this.playerData.unlockedCommonSkillArr.splice(o,1):-1!==(o=this.playerData.unlockedWeaponArr.indexOf(e[t]))&&this.playerData.unlockedWeaponArr.splice(o,1)}this.playerData.unlockedSuperWeaponArr=[]}if(this.playerData.dataVersion<5){for(this.playerData.dataVersion=5,this.playerData.chapterProgress_normal=[],this.playerData.chapterProgress_elite=[],t=0;t<this.playerData.highestChapterId_normal+1;t++)this.playerData.chapterProgress_normal.push(t<this.playerData.highestChapterId_normal?1:0);for(t=0;t<this.playerData.highestChapterId_elite+1;t++)this.playerData.chapterProgress_elite.push(t<this.playerData.highestChapterId_elite?1:0);for(this.playerData.xiuXianData=[1,0,0,0,0],this.playerData.sortItemsById(),this.playerData.shifang_nextRefreshTime=0,this.playerData.shifang_numOfTodayGetZiJinYe=0,this.playerData.shifang_lastGetZiJinYeTime=0,this.playerData.shifang_numOfGetFragment=0,this.playerData.shifang_jishiItemData=[],this.playerData.gongfa_idArr=[],this.playerData.gongfa_lvArr=[],this.playerData.gongfa_sealArr=[],this.gongfa_setLvById(201,0),this.gongfa_setLvById(202,0),this.gongfa_setLvById(203,0),this.gongfa_setLvById(205,0),t=0;t<this.playerData.unlockedWeaponArr.length;t++)this.gongfa_setLvById(this.playerData.unlockedWeaponArr[t],0);this.onUnlockSkill(201),this.onUnlockSkill(202),this.onUnlockSkill(203),this.onUnlockSkill(205)}},e.prototype.onSaveData=function(){localStorage.setItem(s.default.LOCALDATA_KEY,JSON.stringify(this.playerData))},e.prototype.getHighestChapterId=function(e){return 0===e?this.playerData.highestChapterId_normal:this.playerData.highestChapterId_elite},e.prototype.setHighestChapterId=function(e,t){0===e?this.playerData.highestChapterId_normal<t&&(this.playerData.highestChapterId_normal=t):this.playerData.highestChapterId_elite<t&&(this.playerData.highestChapterId_elite=t)},e.prototype.getChapterTimeRecord=function(e,t){return 0===t?e<this.playerData.chapterTimeRecordArr_normal.length?this.playerData.chapterTimeRecordArr_normal[e]:0:e<this.playerData.chapterTimeRecordArr_elite.length?this.playerData.chapterTimeRecordArr_elite[e]:0},e.prototype.setChapterTimeRecord=function(e,t,o){if(0===t)if(e<this.playerData.chapterTimeRecordArr_normal.length)this.playerData.chapterTimeRecordArr_normal[e]<o&&(this.playerData.chapterTimeRecordArr_normal[e]=o);else for(var n=this.playerData.chapterTimeRecordArr_normal.length;n<e+1;n++)this.playerData.chapterTimeRecordArr_normal.push(n===e?o:0);else if(e<this.playerData.chapterTimeRecordArr_elite.length)this.playerData.chapterTimeRecordArr_elite[e]<o&&(this.playerData.chapterTimeRecordArr_elite[e]=o);else for(n=this.playerData.chapterTimeRecordArr_elite.length;n<e+1;n++)this.playerData.chapterTimeRecordArr_elite.push(n===e?o:0)},e.prototype.getChapterProgress=function(e,t){var o;return t<(o=0===e?this.playerData.chapterProgress_normal:this.playerData.chapterProgress_elite).length?o[t]:0},e.prototype.setChapterProgress=function(e,t,o){var n;if(t<(n=0===e?this.playerData.chapterProgress_normal:this.playerData.chapterProgress_elite).length)n[t]=Math.max(o,n[t]);else for(var i=n.length;i<t+1;i++)n.push(i===t?o:0);o>=s.ChapterConfig[e][t].enemyGeneratorJSONPathArr.length&&this.setHighestChapterId(e,t+1)},e.prototype.onUnlockSkill=function(e){e<200?this.playerData.unlockedCommonSkillArr.includes(e)||this.playerData.unlockedCommonSkillArr.push(e):this.playerData.unlockedWeaponArr.includes(e)||this.playerData.unlockedWeaponArr.push(e)},e.prototype.isSkillUnlocked=function(e){return e<200?this.playerData.unlockedCommonSkillArr.includes(e):this.playerData.unlockedWeaponArr.includes(e)},e.prototype.getCoinCount=function(){return this.playerData.item_getCountById(u.ItemType_008.c_coin)},e.prototype.addCoin=function(e){this.playerData.item_addCountById(u.ItemType_008.c_coin,e)},e.prototype.tryUseEnergy=function(e){return this.playerData.item_getCountById(u.ItemType_008.c_energy)>=e&&(this.playerData.item_addCountById(u.ItemType_008.c_energy,-e),!0)},e.prototype.getEnergyCount=function(){return this.playerData.item_getCountById(u.ItemType_008.c_energy)},e.prototype.getEnergyRecoveryTime=function(){for(var e=Date.now(),t=e-this.playerData.energy_lastRecoveryTime,o=0;t>=1e3*s.default.EnergyRecoveryTime;)this.playerData.energy_lastRecoveryTime+=1e3*s.default.EnergyRecoveryTime,t=e-this.playerData.energy_lastRecoveryTime,o++;if(o>0){var n=this.playerData.item_getCountById(u.ItemType_008.c_energy);if(n<s.default.MaxEnergyRecoveryCount){var i=n+o;i>s.default.MaxEnergyRecoveryCount&&(o-=i-s.default.MaxEnergyRecoveryCount),this.playerData.item_addCountById(u.ItemType_008.c_energy,o),this.onSaveData(),l.default.onRefreshEnergyBar.executeDelegates(n+o),l.default.onRefreshStartGameBtnUI.executeDelegates()}}return this.getEnergyCount()>=s.default.MaxEnergyRecoveryCount?(this.playerData.energy_lastRecoveryTime=e,""):(t=s.default.EnergyRecoveryTime-Math.floor(t/1e3),r.default.Format_Time_mmss(t))},e.prototype.tryUpdateDailyQuests=function(){var e,t,o,n=this,i=new Date;if(!(0!==this.playerData.lastQuestTime&&(i.setHours(4,0,0,0),i.getTime()<=this.playerData.lastQuestTime))){var r=null!==(e=this.playerData.dailyQuestIds.filter(function(e){return window.questUtil_008.getQuestTemplate(e)}))&&void 0!==e?e:[];this.playerData.lastQuestTime=i.getTime(),this.playerData.dailyQuestIds=[],this.playerData.dailyQuestTargetProgress=[];for(var l=0,c=null!==(o=null===(t=this.playerData.receivedQuestIds)||void 0===t?void 0:t.filter(function(e){return window.questUtil_008.getQuestTemplate(e)}))&&void 0!==o?o:[];l<c.length;l++){var u=c[l];this.playerData.receivedQuestIds.splice(this.playerData.receivedQuestIds.indexOf(u),1)}for(var d=window.questUtil_008.getQuestsByType(p.QuestType.Daily).filter(function(e){return!(r.includes(e.id)||!n.playerData.isUnlockXiuShen&&e.targetId===p.QuestTargetID.XiuShen||!n.playerData.isUnlockExplore&&e.targetId===p.QuestTargetID.QuickExplore)}),f=[];f.length<s.default.DailyQuestsCount&&d.length>0;)u=d.splice(a.RandomUtils.getRandomInt(0,d.length-1),1)[0].id,f.push(u);for(;f.length<s.default.DailyQuestsCount&&r.length>0;)u=r.splice(a.RandomUtils.getRandomInt(0,r.length-1),1)[0],f.push(u);f.sort(function(e,t){var o=window.questUtil_008.getQuestTemplate(e),n=window.questUtil_008.getQuestTemplate(t),i=function(e){return 0+e.progress+e.targetId<<10};return i(o)-i(n)}),this.playerData.dailyActivation=0,this.playerData.activationRewardRecord=[],this.playerData.dailyQuestIds=f}},e.prototype.getQuestsRefreshTime=function(){var e=Date.now();this.playerData.lastQuestTime||(this.tryUpdateDailyQuests(),l.default.onRefreshQuests.executeDelegates(),this.onSaveData());var t=new Date(this.playerData.lastQuestTime);t.setDate(t.getDate()+1),t.setHours(4,0,0,0);var o=(t.getTime()-e)/1e3;if(o>0){var n=o;return r.default.Format_Leading_0(Math.floor(n/3600).toString(),2)+":"+r.default.Format_Leading_0(Math.floor(n%3600/60).toString(),2)+":"+r.default.Format_Leading_0(Math.floor(n%60).toString(),2)}return this.tryUpdateDailyQuests(),l.default.onRefreshQuests.executeDelegates(),this.onSaveData(),"00:00:00"},e.prototype.getDailyQuestTargetProgress=function(e){var t;return null!==(t=this.playerData.dailyQuestTargetProgress[e])&&void 0!==t?t:0},e.prototype.getTotalQuestTargetProgress=function(e){var t;return null!==(t=this.playerData.totalQuestTargetProgress[e])&&void 0!==t?t:0},e.prototype.onGetReward=function(e){this.playerData.item_addCountById(e.itemId,e.count),e.itemId===u.ItemType_008.c_boxKey?l.default.onRefreshNumKey.executeDelegates(this.playerData.item_getCountById(u.ItemType_008.c_boxKey)):e.itemId===u.ItemType_008.c_coin&&l.default.onRefreshGoldBar.executeDelegates(this.getCoinCount())},e.prototype.onTryRefreshShiFangData=function(){var e=new Date,t=new Date(this.playerData.shifang_nextRefreshTime);n.default.isAfter(e,t)&&(e.setDate(e.getDate()+1),e.setHours(4,0,0,0),this.playerData.shifang_nextRefreshTime=e.getTime(),this.playerData.shifang_numOfTodayGetZiJinYe=0,this.playerData.shifang_lastGetZiJinYeTime=0,this.playerData.shifang_jishiItemData=d.default.generateJishiItemData(),this.onSaveData())},e.prototype.onRefreshJiShi=function(){this.playerData.shifang_jishiItemData=d.default.generateJishiItemData(),this.onSaveData()},e.prototype.gongFa_initOne=function(e,t){this.playerData.gongfa_idArr.push(e),this.playerData.gongfa_lvArr.push(t)},e.prototype.gongfa_sortById=function(){var e=this,t=this.playerData.gongfa_idArr.map(function(t,o){return{id:t,lv:e.playerData.gongfa_lvArr[o]}});t.sort(function(e,t){return e.id-t.id});var o=t.map(function(e){return e.id}),n=t.map(function(e){return e.lv});this.playerData.gongfa_idArr=o,this.playerData.gongfa_lvArr=n},e.prototype.gongfa_getLvById=function(e){var t=i.default.binarySearchIndex(this.playerData.gongfa_idArr,e);return-1!==t?this.playerData.gongfa_lvArr[t]:-1},e.prototype.gongfa_setLvById=function(e,t){var o=i.default.binarySearchIndex(this.playerData.gongfa_idArr,e);-1!==o?this.playerData.gongfa_lvArr[o]=t:(this.gongFa_initOne(e,t),this.gongfa_sortById())},e.prototype.gongfa_setSeal=function(e){this.playerData.gongfa_sealArr.includes(e)||this.playerData.gongfa_sealArr.push(e)},e.prototype.gongfa_isSeal=function(e){return this.playerData.gongfa_sealArr.includes(e)},e.prototype.gongfa_brokeTheSeal=function(e){var t=this.playerData.gongfa_sealArr.indexOf(e);-1!==t&&this.playerData.gongfa_sealArr.splice(t,1)},e._instance=null,e}();o.default=f,cc._RF.pop()},{"../../Utils/DateUtils":"DateUtils","../../Utils/MathUtils":"MathUtils","../../Utils/RandomUtils":"RandomUtils","../../Utils/StringUtils":"StringUtils","./Config_008":"Config_008","./DelegateManager_008":"DelegateManager_008","./entities/Entities_008":"Entities_008","./entities/Enums_008":"Enums_008","./quests/QuestsSys_008":"QuestsSys_008","./utils/ShiFangUtils_008":"ShiFangUtils_008"}],LocalDataManager:[function(e,t,o){"use strict";cc._RF.push(t,"65140emNw5PI4AW7ueubXwg","LocalDataManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.gameData=null}return e.getInstance=function(){return null==e._instance&&(e._instance=new e,e._instance.init()),e._instance},e.prototype.init=function(){var e=this.readData();this.gameData=null!=e&&null!=e&&""!=e?JSON.parse(e):new i,this.updateData(),this.saveData()},e.prototype.readData=function(){return localStorage.getItem("DX_DYCXY_LU_GAMEDATA")},e.prototype.saveData=function(){localStorage.setItem("DX_DYCXY_LU_GAMEDATA",JSON.stringify(this.gameData))},e.prototype.updateData=function(){this.gameData.dataVersion<1&&(this.gameData.dataVersion=1,this.gameData.signProgress=0,this.gameData.lastSignData="\u65e0")},e.prototype.getSignData=function(){return{signProgress:this.gameData.signProgress,lastSignData:this.gameData.lastSignData}},e.prototype.setSignData=function(e,t){this.gameData.signProgress=e,this.gameData.lastSignData=t,this.saveData()},e._instance=null,e}();o.default=n;var i=function(){this.dataVersion=0,this.signProgress=0,this.lastSignData=""};cc._RF.pop()},{}],LogSpineAnimationNameAndDuration:[function(e,t,o){"use strict";cc._RF.push(t,"21306iRksZCPpUVsfMeLiUO","LogSpineAnimationNameAndDuration");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,r.menu),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){var e=this.node.getComponent(sp.Skeleton);if(e){for(var t=Object.keys(e.skeletonData.skeletonJson.animations),o="",n=0;n<t.length;n++){var i=e.findAnimation(t[n]).duration.toString(),a=i.indexOf(".");-1!==a&&(i=i.substring(0,Math.min(a+3,i.length))),o+=t[n]+"  "+i+"\n"}console.log(o)}else console.log("\u8be5\u8282\u70b9\u4e0a\u6ca1\u6709spine\u7ec4\u4ef6")},a([s,l("Log/SpineData")],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],MainUIScrollView_008:[function(e,t,o){"use strict";cc._RF.push(t,"4b92cjBD8NNsK3rQ8lW7dMY","MainUIScrollView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sc=null,t.targetNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.sc.inertia=!1,this.sc.elastic=!1},t.prototype.onEnable=function(){this.sc.node.on("scroll-began",this.onScrollBegan,this),this.sc.node.on("scroll-ended",this.onScrollEnded,this)},t.prototype.onDisable=function(){this.sc.node.off("scroll-began",this.onScrollBegan,this),this.sc.node.off("scroll-ended",this.onScrollEnded,this)},t.prototype.update=function(){this.sc.isScrolling()||(this.sc.enabled=0===this.targetNode.x&&window.isCanCtrl)},t.prototype.onScrollBegan=function(){window.isCanCtrl=!1},t.prototype.onScrollEnded=function(){window.isCanCtrl=!0},a([l(cc.ScrollView)],t.prototype,"sc",void 0),a([l(cc.Node)],t.prototype,"targetNode",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],MainUI_008:[function(e,t,o){"use strict";cc._RF.push(t,"822e5wroGlOu4AdjGhoi9sw","MainUI_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/AudioMag"),c=e("../../../mag/GameMag"),u=e("../Config_008"),p=e("../DelegateManager_008"),d=e("../GamingData_008"),f=e("../LC_008"),h=e("../LocalDataManager_008"),_=e("../entities/Enums_008"),y=e("../quests/QuestsSys_008"),g=e("./misc/ViewBtn_008"),m=cc._decorator,v=m.ccclass,b=m.property,P=m.inspector,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainViewMask=null,t.viewNode=null,t.viewBtnNode=null,t.moveViewNode=null,t.diaNode=null,t.btn_exit=null,t.btn_setting=null,t.guideBtnArr=[],t.guideBtnArr2=[],t.guideBtnArr3=[],t.exploreBtn=null,t.currSelectViewIndex=-1,t.currLeftView=null,t.currCenterView=null,t.currRightView=null,t.viewConfigData=[{index:0,name:"ShiFang",prePath:"lv_008/ui/view/ShiFangView",isUnlockTip:"\u5b8c\u6210\u7b2c1\u7ae0\u540e\u5f00\u542f"},{index:1,name:"role",prePath:""},{index:2,name:"chapter",prePath:""},{index:3,name:"xiuxian",prePath:"lv_008/ui/dia_XiuXian",isUnlockTip:"\u5b8c\u6210\u7b2c1\u7ae0\u540e\u5f00\u542f"},{index:4,name:"GongFa",prePath:"lv_008/ui/view/GongFaView",isUnlockTip:"\u5b8c\u6210\u7b2c1\u7ae0\u540e\u5f00\u542f"}],t.touchTimer=0,t.isMovingView=!1,t}return i(t,e),t.prototype.onLoad=function(){this.onInitViewSortArr(),this.mainViewMask.enabled=!0},t.prototype.onDestroy=function(){},t.prototype.onInitViewSortArr=function(){var e=this;this.viewSortArr=[],this.viewBtnSortArr=[],this.enabledViewIndexArr=[];for(var t=function(t){var n=t,i=o.viewConfigData[t].name,a=o.viewNode.getChildByName(i+"View");if(null===a){var r=new cc.Node("temp");r.setParent(o.viewNode),r.y=0,o.viewSortArr.push(r);var s=o.viewConfigData[t].prePath;""!==s&&c.default.getInstance().loadPrefab(s,function(t){if(null!==t){var o=cc.instantiate(t);o.name=i,o.setParent(e.viewNode),o.x=r.x,o.y=0,e.viewSortArr[n]=o,o.emit("onInit",null,!1),e.currCenterView===r&&(e.currCenterView=o),e.currLeftView===r&&(e.currLeftView=o),e.currRightView===r&&(e.currRightView=o),r.destroy()}})}else o.viewSortArr.push(a);var l=o.viewBtnNode.getChildByName("viewBtn_"+i);switch(o.viewBtnSortArr.push(l),n){default:o.enabledViewIndexArr.push(n);break;case 0:h.default.getInstance().playerData.isUnlockShiFang&&o.enabledViewIndexArr.push(n);break;case 3:h.default.getInstance().playerData.isUnlockXiuShen&&o.enabledViewIndexArr.push(n);break;case 4:h.default.getInstance().playerData.isUnlockGongFa&&o.enabledViewIndexArr.push(n)}},o=this,n=0;n<this.viewConfigData.length;n++)t(n);this.onQuestGo(_.MainUIViewId_008.Chapter)},t.prototype.onEnable=function(){var e=this;this.onHideTouchGuide(),u.default.isOpeningBox=!1,d.default.isGaming=!1;for(var t=0;t<this.viewBtnSortArr.length;t++){var o=t;this.viewBtnSortArr[t].on(cc.Node.EventType.TOUCH_END,this.onChangeView.bind(this,o),this)}this.moveViewNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.moveViewNode.on(cc.Node.EventType.TOUCH_MOVE,this.onMovingView,this),this.moveViewNode.on(cc.Node.EventType.TOUCH_END,this.onMoveViewEnd,this),this.moveViewNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onMoveViewEnd,this),this.moveViewNode._touchListener.swallowTouches=!1,this.btn_exit.on(cc.Node.EventType.TOUCH_END,this.onExit,this),this.btn_setting.on(cc.Node.EventType.TOUCH_END,this.onOpenSetting,this);var n=h.default.getInstance().playerData;p.default.onRefreshEnergyBar.executeDelegates(n.item_getCountById(_.ItemType_008.c_energy)),p.default.onRefreshGoldBar.executeDelegates(n.item_getCountById(_.ItemType_008.c_coin)),p.default.onRefreshNumKey.executeDelegates(n.item_getCountById(_.ItemType_008.c_boxKey)),p.default.onRefreshZiJinYeBar.executeDelegates(n.item_getCountById(_.ItemType_008.c_zijinye));var i=function(){var t=[n.isUnlockShiFang,!0,!0,n.isUnlockXiuShen,n.isUnlockGongFa];e.viewBtnNode.children.forEach(function(e,o){return e.getComponent(cc.Button).interactable=t[o]})};n.isGuideRoleAndBox||1!==n.numAdventures||p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_unlockNewModule,[1,2],function(){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_Guide,e.guideBtnArr,function(){n.guideTimes++,n.isGuideRoleAndBox=!0,h.default.getInstance().onSaveData()})}),!n.isUnlockTrial&&h.default.getInstance().getHighestChapterId(0)>=1&&this.scheduleOnce(function(){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_Guide,e.guideBtnArr2,function(){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_Trial,!0),n.isUnlockTrial=!0,h.default.getInstance().onSaveData(),i()})},.1),h.default.getInstance().getChapterProgress(0,1)>0&&!n.isUnlockExplore&&this.scheduleOnce(function(){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_unlockNewModule,[6],function(){n.isUnlockExplore=!0,h.default.getInstance().onSaveData(),e.exploreBtn.active=!0;var t=window.questUtil_008.getQuestsByType(y.QuestType.Daily).find(function(e){return e.targetId===y.QuestTargetID.QuickExplore});t&&(n.dailyQuestIds.unshift(t.id),p.default.onRefreshQuests.executeDelegates())})},.1),i(),this.scheduleOnce(this.onTryShowVideoBoxDia,0),p.default.onQuestGoMainUIView.addDelegate(this.onQuestGo,this)},t.prototype.onDisable=function(){for(var e=0;e<this.viewBtnSortArr.length;e++)this.viewBtnSortArr[e].off(cc.Node.EventType.TOUCH_END);this.moveViewNode.off(cc.Node.EventType.TOUCH_MOVE,this.onMovingView,this),this.moveViewNode.off(cc.Node.EventType.TOUCH_END,this.onMoveViewEnd,this),this.moveViewNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onMoveViewEnd,this),this.btn_exit.off(cc.Node.EventType.TOUCH_END,this.onExit,this),this.btn_setting.off(cc.Node.EventType.TOUCH_END,this.onOpenSetting,this),p.default.onQuestGoMainUIView.removeDelegate(this.onQuestGo,this)},t.prototype.update=function(e){this.touchTimer+=e,this.touchTimer>8&&(this.touchTimer=0,p.default.onShowTouchGuide.executeDelegates())},t.prototype.onHideTouchGuide=function(){this.touchTimer=0,p.default.onHideTouchGuide.executeDelegates()},t.prototype.onTouchStart=function(){this.onHideTouchGuide()},t.prototype.onMovingView=function(e){if(this.onHideTouchGuide(),window.isCanCtrl){if(!this.isMovingView){if(!(Math.abs(e.getStartLocation().x-e.getLocation().x)>=20))return;this.isMovingView=!0}this.currCenterView.x+=e.getDelta().x,null!==this.currLeftView&&(this.currLeftView.x+=e.getDelta().x,this.currLeftView.opacity=255),null!==this.currRightView&&(this.currRightView.x+=e.getDelta().x,this.currRightView.opacity=255)}},t.prototype.onMoveViewEnd=function(e){this.onHideTouchGuide(),window.isCanCtrl&&this.isMovingView&&(this.isMovingView=!1,window.isCanCtrl=!1,Math.abs(e.getStartLocation().x-e.getLocation().x)>=200?e.getLocation().x-e.getStartLocation().x>0?null!==this.currLeftView?this.onMoveLeftViewToMiddle():this.recoveryView():null!==this.currRightView?this.onMoveRightViewToMiddle():this.recoveryView():this.recoveryView(),this.scheduleOnce(function(){window.isCanCtrl=!0},.075))},t.prototype.recoveryView=function(){if(cc.tween(this.currCenterView).to(.075,{x:0}).start(),null!==this.currLeftView){var e=this.currLeftView;cc.tween(e).to(.075,{x:-720}).call(function(){e.opacity=0}).start()}if(this.currRightView){var t=this.currRightView;cc.tween(t).to(.075,{x:720}).call(function(){t.opacity=0}).start()}},t.prototype.onMoveLeftViewToMiddle=function(){var e=this,t=this.currCenterView,o=this.getLeftView(this.currSelectViewIndex),n=this.getViewIndex(o);cc.tween(t).to(.075,{x:720}).call(function(){t.opacity=0,e.refreshCurrThreeView(e.currSelectViewIndex,n)}).start(),cc.tween(o).to(.075,{x:0}).start(),this.currSelectViewIndex=this.enabledViewIndexArr.indexOf(n),this.onRefreshViewBtnState(this.currSelectViewIndex)},t.prototype.onMoveRightViewToMiddle=function(){var e=this,t=this.currCenterView,o=this.getRightView(this.currSelectViewIndex),n=this.getViewIndex(o);cc.tween(t).to(.075,{x:-720}).call(function(){t.opacity=0,e.refreshCurrThreeView(e.currSelectViewIndex,n)}).start(),cc.tween(o).to(.075,{x:0}).start(),this.currSelectViewIndex=this.enabledViewIndexArr.indexOf(n),this.onRefreshViewBtnState(this.currSelectViewIndex)},t.prototype.getViewIndex=function(e){return null===e?-1:this.viewSortArr.indexOf(e)},t.prototype.getLeftView=function(e){if(0===e){var t=this.enabledViewIndexArr.length;return t>2?this.viewSortArr[this.enabledViewIndexArr[t-1]]:null}return this.viewSortArr[this.enabledViewIndexArr[e-1]]},t.prototype.getRightView=function(e){var t=this.enabledViewIndexArr.length;return e===t-1?t>2?this.viewSortArr[this.enabledViewIndexArr[0]]:null:this.viewSortArr[this.enabledViewIndexArr[e+1]]},t.prototype.onChangeView=function(e,t){if(void 0===t&&(t=!0),this.onHideTouchGuide(),window.isCanCtrl){var o=this.enabledViewIndexArr.indexOf(e);if(-1!==o){if(o!==this.currSelectViewIndex){t&&l.default.getInstance().click(),this.currSelectViewIndex=o,this.onRefreshViewBtnState(o);for(var n=0;n<this.viewSortArr.length;n++)this.viewSortArr[n].opacity=e===n?255:0,this.viewSortArr[n].x=720*(n-e);this.refreshCurrThreeView(o,e)}}else{var i=this.viewConfigData[e];i.isUnlockTip?p.default.onShowUIFloatText.executeDelegates(i.isUnlockTip):console.log("\u5207\u6362\u89c6\u56fe\u53d1\u73b0\u5f02\u5e38 \u76ee\u6807id\u65e0\u6548\uff0cid\uff1a"+e)}}},t.prototype.refreshCurrThreeView=function(e,t){this.currLeftView=this.getLeftView(e),this.currRightView=this.getRightView(e),this.currCenterView=this.viewSortArr[t],this.currCenterView.x=0,null!==this.currLeftView&&(this.currLeftView.x=-720),null!==this.currRightView&&(this.currRightView.x=720)},t.prototype.onRefreshViewBtnState=function(e){for(var t=0;t<this.viewBtnSortArr.length;t++)this.viewBtnSortArr[t].getComponent(g.default).onChangeState(t===this.enabledViewIndexArr[e])},t.prototype.unlockXiuShen=function(){var e=this,t=h.default.getInstance().playerData;t.isUnlockTrial&&!t.isUnlockXiuShen&&(this.enabledViewIndexArr=[1,2,3],p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_unlockNewModule,[3],function(){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_Guide,e.guideBtnArr3,function(){return r(e,void 0,void 0,function(){var e,o,n,i,a,r=this;return s(this,function(s){switch(s.label){case 0:return(e=window.questUtil_008.getQuestsByType(y.QuestType.Daily).find(function(e){return e.targetId===y.QuestTargetID.XiuShen}))&&(t.dailyQuestIds.unshift(e.id),p.default.onRefreshQuests.executeDelegates()),t.item_addCountById(_.ItemType_008.c_lingqi,1e3),p.default.onRefreshNumLingQi.executeDelegates(t.item_getCountById(_.ItemType_008.c_lingqi)),n=(o=window.floatItemsUtils_008).playCollectItemAnim,[4,window.questUtil_008.getRewardItemSf(_.ItemType_008.c_lingqi)];case 1:return n.apply(o,[s.sent(),this.node,this.viewBtnNode]),t.isUnlockXiuShen=!0,i=[t.isUnlockShiFang,!0,!0,t.isUnlockXiuShen,t.isUnlockGongFa],this.viewBtnNode.children.forEach(function(e,t){return e.getComponent(cc.Button).interactable=i[t]}),h.default.getInstance().onSaveData(),!t.isUnlockShiFang&&!t.isUnlockGongFa&&h.default.getInstance().getHighestChapterId(0)>=1&&(a=function(){t.isUnlockShiFang=!0,t.isUnlockGongFa=!0,h.default.getInstance().onSaveData();var e=[t.isUnlockShiFang,!0,!0,t.isUnlockXiuShen,t.isUnlockGongFa];r.enabledViewIndexArr=[0,1,2,3,4],p.default.onQuestGoMainUIView.executeDelegates(_.MainUIViewId_008.XiuXian),r.viewBtnNode.children.forEach(function(t,o){return t.getComponent(cc.Button).interactable=e[o]})},p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_unlockNewModule,[4,5],a)),[2]}})})})}))},t.prototype.onExit=function(){window.isCanCtrl&&(l.default.getInstance().click(),f.default.ins.onExitGame())},t.prototype.onOpenSetting=function(){window.isCanCtrl&&(l.default.getInstance().click(),p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_Setting))},t.prototype.onTryShowVideoBoxDia=function(){p.default.onTryShowVideoBoxDia.executeDelegates()},t.prototype.onQuestGo=function(e){for(var t=-1,o=0;o<this.viewConfigData.length;o++)if(this.viewConfigData[o].name===e){t=o;break}-1!=t&&this.onChangeView(t,!1)},t.prototype.wait=function(e){var t=this;return new Promise(function(o){t.scheduleOnce(o,e)})},a([b(cc.Mask)],t.prototype,"mainViewMask",void 0),a([b(cc.Node)],t.prototype,"viewNode",void 0),a([b(cc.Node)],t.prototype,"viewBtnNode",void 0),a([b(cc.Node)],t.prototype,"moveViewNode",void 0),a([b(cc.Node)],t.prototype,"diaNode",void 0),a([b(cc.Node)],t.prototype,"btn_exit",void 0),a([b(cc.Node)],t.prototype,"btn_setting",void 0),a([b([cc.Node])],t.prototype,"guideBtnArr",void 0),a([b([cc.Node])],t.prototype,"guideBtnArr2",void 0),a([b([cc.Node])],t.prototype,"guideBtnArr3",void 0),a([b(cc.Node)],t.prototype,"exploreBtn",void 0),a([v,P("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/GameMag":"GameMag","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../GamingData_008":"GamingData_008","../LC_008":"LC_008","../LocalDataManager_008":"LocalDataManager_008","../entities/Enums_008":"Enums_008","../quests/QuestsSys_008":"QuestsSys_008","./misc/ViewBtn_008":"ViewBtn_008"}],MaskLabel_008:[function(e,t,o){"use strict";cc._RF.push(t,"d1f6cs09RxF/qMWDsU8QQ7k","MaskLabel_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,r.requireComponent),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbl=null,t.graphics=null,t.refreshHeight=10,t.func_compCB=null,t}return i(t,e),t.prototype.onLoad=function(){this.lbl=this.node.getComponentInChildren(cc.Label),this.lineWidth=this.node.width,this.node.height=0;var e=this.node.getComponent(cc.Mask);e.type=cc.Mask.Type.RECT,e.inverted=!1,this.graphics=e._graphics,this.graphics.fillColor=cc.Color.WHITE},t.prototype.onInit=function(e,t,o,n){var i=this;this.lbl.string=e,this.refreshTime=t,this.refreshHeight=o,this.func_compCB=n,this.scheduleOnce(function(){i.graphics.clear(),i.totalHeight=i.lbl.node.height,i.startPosY=i.lbl.node.height/2,i.currPosY=i.startPosY,i.schedule(i.onUpdateMask,i.refreshTime,cc.macro.REPEAT_FOREVER,i.refreshTime)},0)},t.prototype.onClear=function(){this.graphics.clear(),this.unscheduleAllCallbacks()},t.prototype.onFastComp=function(){this.unscheduleAllCallbacks(),this.graphics.clear(),this.graphics.fillRect(.5*-this.lineWidth,this.startPosY,this.lineWidth,this.totalHeight),this.graphics.fill()},t.prototype.onUpdateMask=function(){this.graphics.fillRect(.5*-this.lineWidth,this.currPosY,this.lineWidth,this.refreshHeight),this.graphics.fill(),this.currPosY-=this.refreshHeight,this.currPosY<-this.startPosY&&(this.func_compCB&&this.func_compCB(),this.unscheduleAllCallbacks())},a([s,l(cc.Mask)],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],MathUtils:[function(e,t,o){"use strict";cc._RF.push(t,"29a8fwxXwxCD7g/bx6JK5+z","MathUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.lerp=function(e,t,o){return e+(t-e)*o},e.lerpVec2=function(e,t,o){return cc.v2(this.lerp(e.x,t.x,o),this.lerp(e.y,t.y,o))},e.closestPointOnLine=function(e,t,o){var n=o.sub(e).dot(t);return e.add(t.mul(n))},e.binarySearchIndex=function(e,t){for(var o=0,n=e.length-1;o<=n;){var i=Math.floor((o+n)/2);if(e[i]===t)return i;e[i]<t?o=i+1:n=i-1}return-1},e}();o.default=n,cc._RF.pop()},{}],ModeBtn:[function(e,t,o){"use strict";cc._RF.push(t,"5da9aDxL11G/ocCDWq7i0WI","ModeBtn");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../config/GameConfig"),s=e("../../game/mag/AudioMag"),l=e("../../game/mag/GameManager"),c=e("../../game/mag/UIMag"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modeId=0,t}return i(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClickBtn,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClickBtn,this)},t.prototype.onClickBtn=function(){s.default.getInstance().click(),r.default.ModeId=this.modeId,c.default.ins.showGameUI(),l.default.ins.onStartGame()},a([d(cc.Integer)],t.prototype,"modeId",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../config/GameConfig":"GameConfig","../../game/mag/AudioMag":"AudioMag","../../game/mag/GameManager":"GameManager","../../game/mag/UIMag":"UIMag"}],MotionTrail_CannotPause:[function(e,t,o){"use strict";cc._RF.push(t,"25288giQslH15LVotyDzQRd","MotionTrail_CannotPause");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc.gfx,s=function(){this.x=0,this.y=0,this.dis=0,this.cos=0,this.sin=0},l=cc._decorator,c=l.ccclass,u=l.property,p=l.menu,d=l.playOnFocus,f=l.executeInEditMode,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t._spriteFrame=null,t._active=!0,t._isWorldXY=!0,t.offset=cc.v2(0,0),t._length=20,t._headWidth=100,t._tailWidth=0,t._headOpacity=255,t._tailOpacity=0,t.renderData=null,t.meshID=0,t.capacity=0,t.verticesCount=0,t.indicesCount=0,t.$flush=null,t.$xyOffset=1e8,t.$uvOffset=1e8,t.$colorOffset=1e8,t.$step=0,t.trailData=[],t.nodeOpacity=255,t.$getVData=function(){return t.renderData.vDatas[t.meshID]},t.$getUintVData=function(){return t.renderData.uintVDatas[t.meshID]},t.$getIData=function(){return t.renderData.iDatas[t.meshID]},t}return i(t,e),Object.defineProperty(t.prototype,"$spriteFrame",{get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e,this.$updateSpriteFrame()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e,this.enabled=e,this.$updateActive()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$isWorldXY",{get:function(){return this._isWorldXY},set:function(e){this._isWorldXY=e,this.$updateXY()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(e){this._length=Math.max(e,0),this.updateLength(),this.updateWidth(),this.$updateUV(),this.$updateColor(),this.resetPos()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headWidth",{get:function(){return this._headWidth},set:function(e){this._headWidth=Math.max(e,0),this.updateWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailWidth",{get:function(){return this._tailWidth},set:function(e){this._tailWidth=Math.max(e,0),this.updateWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headOpacity",{get:function(){return this._headOpacity},set:function(e){this._headOpacity=e,this.$updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailOpacity",{get:function(){return this._tailOpacity},set:function(e){this._tailOpacity=e,this.$updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$vDataLength",{get:function(){return this.verticesCount*this.$step},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$iDataLength",{get:function(){return this.indicesCount},enumerable:!1,configurable:!0}),t.prototype._resetAssembler=function(){var e=this._assembler=new _;e.init(this),e.updateRenderData=this.$onFlushed.bind(this),this.$flush=this.setVertsDirty,(this.renderData=new cc.RenderData).init(e),this.meshID=this.renderData.meshCount},t.prototype.$updateActive=function(){this.active&&(this.node._updateWorldMatrix(),this.resetPos())},t.prototype.onEnable=function(){var t=this;e.prototype.onEnable.call(this),this.active=!1,this.scheduleOnce(function(){t.active=!0},0)},t.prototype.start=function(){this.$init(),this.$updateSpriteFrame(),cc.director.once(cc.Director.EVENT_AFTER_DRAW,this.$updateColor,this)},t.prototype.$init=function(){this.$setVFmt(),this.updateLength(),this.updateWidth(),this.resetPos(),this.node.on(cc.Node.EventType.COLOR_CHANGED,this.$updateColor,this)},t.prototype.$setVFmt=function(e){void 0===e&&(e=new r.VertexFormat([{name:r.ATTR_POSITION,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_UV0,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_COLOR,type:r.ATTR_TYPE_UINT8,num:4,normalize:!0}]));var t=this._assembler;cc.sys.isNative&&t.setVertexFormat(e);for(var o=e._elements,n=o.length-1;n>=0;--n)this.$step+=o[n].bytes>>2;var i=e._attr2el;this.$xyOffset=i[r.ATTR_POSITION].offset>>2,this.$uvOffset=i[r.ATTR_UV0].offset>>2,this.$colorOffset=i[r.ATTR_COLOR].offset>>2},t.prototype.$createBuffer=function(e,t,o){void 0===t&&(t=e-2),void 0===o&&(o=2),o=Math.max(o,1.5);var n=this.renderData;this.verticesCount=Math.max(e,0),this.indicesCount=Math.max(3*t,0);var i=!n.vDatas[this.meshID];if(this.verticesCount>this.capacity?(this.capacity=~~Math.max(this.capacity*o,this.verticesCount),i=!0):this.verticesCount<this.capacity/o&&(this.capacity=~~Math.max(this.capacity/o,this.verticesCount),i=!0),i){var a=new Float32Array(this.verticesCount*this.$step),r=new Uint16Array(this.indicesCount);n.updateMesh(this.meshID,a,r)}this.$updateIndice()},t.prototype.update=function(){cc.sys.isNative&&this.$updateColor(),this.$flush()},t.prototype.$onFlushed=function(){if(!1!==this.active&&null!==this.$spriteFrame&&0!==this.length){this.nodeOpacity!==this.node.opacity&&(this.nodeOpacity=this.node.opacity,this.$updateColor());for(var e=this.trailData,t=this.length-1;t>0;--t)e[t].x=e[t-1].x,e[t].y=e[t-1].y,e[t].sin=e[t-1].sin,e[t].cos=e[t-1].cos;if(this.$isWorldXY){this.node._updateWorldMatrix();var o=this.node._worldMatrix.m;e[0].x=this.offset.x+o[12],e[0].y=this.offset.y+o[13]}else e[0].x=this.offset.x+this.node.x,e[0].y=this.offset.y+this.node.y;this.$updateXY()}},t.prototype.$updateXY=function(){var e=this.$getVData(),t=null,o=null,n=0,i=0,a=0,r=0,s=0,l=this.$step,c=0,u=0;this.$isWorldXY||(c=this.node.x,u=this.node.y);for(var p=this.trailData,d=0,f=this.length-1;d<f;++d){if(t=p[d],o=p[d+1],n=t.x-c,i=t.y-u,a=o.x-c,r=o.y-u,0===d){var h=Math.atan2(r-i,a-n);t.sin=Math.sin(h),t.cos=Math.cos(h)}e[s]=n+t.dis*t.sin,e[s+1]=i-t.dis*t.cos,e[s+=l]=n-t.dis*t.sin,e[s+1]=i+t.dis*t.cos,s+=l}e[s]=a+o.dis*t.sin,e[s+1]=r-o.dis*t.cos,e[s+=l]=a-o.dis*t.sin,e[s+1]=r+o.dis*t.cos,this.$fitXY()},t.prototype.$updateSpriteFrame=function(){var e=this.$spriteFrame,t=this.getMaterial(0)||cc.Material.getBuiltinMaterial("2d-sprite");t.define("USE_TEXTURE",!0),t.setProperty("texture",e?e.getTexture():null),this.$updateUV()},t.prototype.$updateIndice=function(){for(var e=this.$getIData(),t=0,o=0,n=this.$iDataLength;t<n;++o)e[t++]=o,e[t++]=o+1,e[t++]=o+2},t.prototype.$updateUV=function(){if(null!==this.$spriteFrame)for(var e=this.$getVData(),t=this.$step,o=1/(this.trailData.length-1),n=this.$spriteFrame.getTexture().width,i=this.$spriteFrame.getTexture().height,a=this.$spriteFrame.getRect(),r=this.$uvOffset,s=0,l=this.$vDataLength;r<l;r+=t,++s)e[r]=((1&s)*a.width+a.x)/n,e[r+1]=((1-o*(s>>1))*a.height+a.y)/i},t.prototype.$updateColor=function(){for(var e=this.$getUintVData(),t=this.length,o=this.headOpacity,n=(o-this.tailOpacity)/(t-1),i=this.node.opacity/255,a=this.node.color.b<<16|this.node.color.g<<8|this.node.color.r,r=0,s=this.$colorOffset,l=this.$step;r<t;++r){var c=(o-n*r)*i<<24|a;e[s]=c,e[s+=l]=c,s+=l}},t.prototype.updateLength=function(){var e=this.length;this.trailData=[];for(var t=0;t<e;++t)this.trailData[t]=new s;this.$createBuffer(e<<1)},t.prototype.updateWidth=function(){for(var e=this.trailData,t=this.length,o=this.headWidth/2,n=(o-this.tailWidth/2)/(t-1),i=0;i<t;++i)e[i].dis=o-n*i},t.prototype.resetPos=function(){var e=this.trailData,t=this.offset.x,o=this.offset.y;if(this.$isWorldXY){var n=this.node._worldMatrix.m;t+=n[12],o+=n[13]}else t+=this.node.x,o+=this.node.y;for(var i=this.length-1;i>=0;i--)e[i].x=t,e[i].y=o;for(var a=this.$getVData(),r=this.$step,s=(i=0,this.$vDataLength);i<s;i+=r)a[i]=t,a[i+1]=o;this.$fitXY()},t.prototype.$fitXY=function(){var e=this.$getVData();if(cc.sys.isNative){if(this.$isWorldXY)for(var t=this.node._matrix.m,o=cc.Mat4.invert(new cc.Mat4,this.node._worldMatrix).m,n=this.$xyOffset,i=this.$vDataLength;n<i;n+=this.$step){var a=t[0]*e[n]+t[4]*e[n+1],r=t[1]*e[n]+t[5]*e[n+1];e[n]=o[0]*a+o[4]*r+o[12],e[n+1]=o[1]*a+o[5]*r+o[13]}}else{t=this.node._matrix.m;var s=this.$isWorldXY?0:t[12],l=this.$isWorldXY?0:t[13];for(n=this.$xyOffset,i=this.$vDataLength;n<i;n+=this.$step){var c=e[n],u=e[n+1];e[n]=c*t[0]+u*t[4]+s,e[n+1]=c*t[1]+u*t[5]+l}}},t.prototype.onDestroy=function(){this.node.targetOff(this)},a([u({type:cc.SpriteAtlas,editorOnly:!0,readonly:!0,animatable:!1,displayName:!1})],t.prototype,"atlas",void 0),a([u],t.prototype,"_spriteFrame",void 0),a([u({type:cc.SpriteFrame,displayName:!1})],t.prototype,"$spriteFrame",null),a([u(cc.Boolean)],t.prototype,"_active",void 0),a([u({type:cc.Boolean,displayName:!1,tooltip:!1})],t.prototype,"active",null),a([u],t.prototype,"_isWorldXY",void 0),a([u({displayName:!1,tooltip:!1})],t.prototype,"$isWorldXY",null),a([u({displayName:!1})],t.prototype,"offset",void 0),a([u],t.prototype,"_length",void 0),a([u({type:cc.Integer,displayName:!1,tooltip:"\u957f\u5ea6 = \u6700\u7ec8\u663e\u793a\u957f\u5ea6/(\u8282\u70b9\u79fb\u901f/64)\uff0c\u5f53\u7ed3\u7b97\u7ed3\u679c\u8d85\u8fc732\u65f6\u9700\u8981-1\uff0c\u8d85\u8fc748\u9700\u8981-2\uff08???\uff09\u2026\u2026"})],t.prototype,"length",null),a([u],t.prototype,"_headWidth",void 0),a([u({displayName:!1})],t.prototype,"headWidth",null),a([u],t.prototype,"_tailWidth",void 0),a([u({displayName:!1})],t.prototype,"tailWidth",null),a([u],t.prototype,"_headOpacity",void 0),a([u({type:cc.Integer,min:0,max:255,slide:!0,displayName:!1})],t.prototype,"headOpacity",null),a([u],t.prototype,"_tailOpacity",void 0),a([u({type:cc.Integer,min:0,max:255,slide:!0,displayName:!1})],t.prototype,"tailOpacity",null),a([c,p("Comp/MotionTrail_CannotPause"),d,f],t)}(cc.RenderComponent);o.default=h;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.fillBuffers=function(e){var t=e.renderData.vDatas[e.meshID],o=e.renderData.iDatas[e.meshID],n=cc.renderer._handle._meshBuffer,i=n.request(e.verticesCount,e.indicesCount),a=i.byteOffset>>2,r=n._vData;t.length+a>r.length?r.set(t.subarray(0,r.length-a),a):r.set(t,a);for(var s=n._iData,l=i.indiceOffset,c=i.vertexOffset,u=0,p=o.length;u<p;u++)s[l++]=c+o[u]},t}(cc.Assembler);cc._RF.pop()},{}],MotionTrail:[function(e,t,o){"use strict";cc._RF.push(t,"e4ec67yLeVLB63ZD8IPoc5V","MotionTrail");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../GamingData_008"),s=cc.gfx,l=function(){this.x=0,this.y=0,this.dis=0,this.cos=0,this.sin=0},c=cc._decorator,u=c.ccclass,p=c.property,d=c.menu,f=c.playOnFocus,h=c.executeInEditMode,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t._spriteFrame=null,t._active=!0,t._isWorldXY=!0,t.offset=cc.v2(0,0),t._length=20,t._headWidth=100,t._tailWidth=0,t._headOpacity=255,t._tailOpacity=0,t.renderData=null,t.meshID=0,t.capacity=0,t.verticesCount=0,t.indicesCount=0,t.$flush=null,t.$xyOffset=1e8,t.$uvOffset=1e8,t.$colorOffset=1e8,t.$step=0,t.trailData=[],t.nodeOpacity=255,t.$getVData=function(){return t.renderData.vDatas[t.meshID]},t.$getUintVData=function(){return t.renderData.uintVDatas[t.meshID]},t.$getIData=function(){return t.renderData.iDatas[t.meshID]},t}return i(t,e),Object.defineProperty(t.prototype,"$spriteFrame",{get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e,this.$updateSpriteFrame()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e,this.enabled=e,this.$updateActive()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$isWorldXY",{get:function(){return this._isWorldXY},set:function(e){this._isWorldXY=e,this.$updateXY()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(e){this._length=Math.max(e,0),this.updateLength(),this.updateWidth(),this.$updateUV(),this.$updateColor(),this.resetPos()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headWidth",{get:function(){return this._headWidth},set:function(e){this._headWidth=Math.max(e,0),this.updateWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailWidth",{get:function(){return this._tailWidth},set:function(e){this._tailWidth=Math.max(e,0),this.updateWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headOpacity",{get:function(){return this._headOpacity},set:function(e){this._headOpacity=e,this.$updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailOpacity",{get:function(){return this._tailOpacity},set:function(e){this._tailOpacity=e,this.$updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$vDataLength",{get:function(){return this.verticesCount*this.$step},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$iDataLength",{get:function(){return this.indicesCount},enumerable:!1,configurable:!0}),t.prototype._resetAssembler=function(){var e=this._assembler=new y;e.init(this),e.updateRenderData=this.$onFlushed.bind(this),this.$flush=this.setVertsDirty,(this.renderData=new cc.RenderData).init(e),this.meshID=this.renderData.meshCount},t.prototype.$updateActive=function(){this.active&&(this.node._updateWorldMatrix(),this.resetPos())},t.prototype.onEnable=function(){var t=this;e.prototype.onEnable.call(this),this.active=!1,this.scheduleOnce(function(){t.active=!0},0)},t.prototype.start=function(){this.$init(),this.$updateSpriteFrame(),cc.director.once(cc.Director.EVENT_AFTER_DRAW,this.$updateColor,this)},t.prototype.$init=function(){this.$setVFmt(),this.updateLength(),this.updateWidth(),this.resetPos(),this.node.on(cc.Node.EventType.COLOR_CHANGED,this.$updateColor,this)},t.prototype.$setVFmt=function(e){void 0===e&&(e=new s.VertexFormat([{name:s.ATTR_POSITION,type:s.ATTR_TYPE_FLOAT32,num:2},{name:s.ATTR_UV0,type:s.ATTR_TYPE_FLOAT32,num:2},{name:s.ATTR_COLOR,type:s.ATTR_TYPE_UINT8,num:4,normalize:!0}]));var t=this._assembler;cc.sys.isNative&&t.setVertexFormat(e);for(var o=e._elements,n=o.length-1;n>=0;--n)this.$step+=o[n].bytes>>2;var i=e._attr2el;this.$xyOffset=i[s.ATTR_POSITION].offset>>2,this.$uvOffset=i[s.ATTR_UV0].offset>>2,this.$colorOffset=i[s.ATTR_COLOR].offset>>2},t.prototype.$createBuffer=function(e,t,o){void 0===t&&(t=e-2),void 0===o&&(o=2),o=Math.max(o,1.5);var n=this.renderData;this.verticesCount=Math.max(e,0),this.indicesCount=Math.max(3*t,0);var i=!n.vDatas[this.meshID];if(this.verticesCount>this.capacity?(this.capacity=~~Math.max(this.capacity*o,this.verticesCount),i=!0):this.verticesCount<this.capacity/o&&(this.capacity=~~Math.max(this.capacity/o,this.verticesCount),i=!0),i){var a=new Float32Array(this.verticesCount*this.$step),r=new Uint16Array(this.indicesCount);n.updateMesh(this.meshID,a,r)}this.$updateIndice()},t.prototype.update=function(){r.default.isGamePause||(cc.sys.isNative&&this.$updateColor(),this.$flush())},t.prototype.$onFlushed=function(){if(!1!==this.active&&null!==this.$spriteFrame&&0!==this.length){this.nodeOpacity!==this.node.opacity&&(this.nodeOpacity=this.node.opacity,this.$updateColor());for(var e=this.trailData,t=this.length-1;t>0;--t)e[t].x=e[t-1].x,e[t].y=e[t-1].y,e[t].sin=e[t-1].sin,e[t].cos=e[t-1].cos;if(this.$isWorldXY){this.node._updateWorldMatrix();var o=this.node._worldMatrix.m;e[0].x=this.offset.x+o[12],e[0].y=this.offset.y+o[13]}else e[0].x=this.offset.x+this.node.x,e[0].y=this.offset.y+this.node.y;this.$updateXY()}},t.prototype.$updateXY=function(){var e=this.$getVData(),t=null,o=null,n=0,i=0,a=0,r=0,s=0,l=this.$step,c=0,u=0;this.$isWorldXY||(c=this.node.x,u=this.node.y);for(var p=this.trailData,d=0,f=this.length-1;d<f;++d){if(t=p[d],o=p[d+1],n=t.x-c,i=t.y-u,a=o.x-c,r=o.y-u,0===d){var h=Math.atan2(r-i,a-n);t.sin=Math.sin(h),t.cos=Math.cos(h)}e[s]=n+t.dis*t.sin,e[s+1]=i-t.dis*t.cos,e[s+=l]=n-t.dis*t.sin,e[s+1]=i+t.dis*t.cos,s+=l}e[s]=a+o.dis*t.sin,e[s+1]=r-o.dis*t.cos,e[s+=l]=a-o.dis*t.sin,e[s+1]=r+o.dis*t.cos,this.$fitXY()},t.prototype.$updateSpriteFrame=function(){var e=this.$spriteFrame,t=this.getMaterial(0)||cc.Material.getBuiltinMaterial("2d-sprite");t.define("USE_TEXTURE",!0),t.setProperty("texture",e?e.getTexture():null),this.$updateUV()},t.prototype.$updateIndice=function(){for(var e=this.$getIData(),t=0,o=0,n=this.$iDataLength;t<n;++o)e[t++]=o,e[t++]=o+1,e[t++]=o+2},t.prototype.$updateUV=function(){if(null!==this.$spriteFrame)for(var e=this.$getVData(),t=this.$step,o=1/(this.trailData.length-1),n=this.$spriteFrame.getTexture().width,i=this.$spriteFrame.getTexture().height,a=this.$spriteFrame.getRect(),r=this.$uvOffset,s=0,l=this.$vDataLength;r<l;r+=t,++s)e[r]=((1&s)*a.width+a.x)/n,e[r+1]=((1-o*(s>>1))*a.height+a.y)/i},t.prototype.$updateColor=function(){for(var e=this.$getUintVData(),t=this.length,o=this.headOpacity,n=(o-this.tailOpacity)/(t-1),i=this.node.opacity/255,a=this.node.color.b<<16|this.node.color.g<<8|this.node.color.r,r=0,s=this.$colorOffset,l=this.$step;r<t;++r){var c=(o-n*r)*i<<24|a;e[s]=c,e[s+=l]=c,s+=l}},t.prototype.updateLength=function(){var e=this.length;this.trailData=[];for(var t=0;t<e;++t)this.trailData[t]=new l;this.$createBuffer(e<<1)},t.prototype.updateWidth=function(){for(var e=this.trailData,t=this.length,o=this.headWidth/2,n=(o-this.tailWidth/2)/(t-1),i=0;i<t;++i)e[i].dis=o-n*i},t.prototype.resetPos=function(){var e=this.trailData,t=this.offset.x,o=this.offset.y;if(this.$isWorldXY){var n=this.node._worldMatrix.m;t+=n[12],o+=n[13]}else t+=this.node.x,o+=this.node.y;for(var i=this.length-1;i>=0;i--)e[i].x=t,e[i].y=o;for(var a=this.$getVData(),r=this.$step,s=(i=0,this.$vDataLength);i<s;i+=r)a[i]=t,a[i+1]=o;this.$fitXY()},t.prototype.$fitXY=function(){var e=this.$getVData();if(cc.sys.isNative){if(this.$isWorldXY)for(var t=this.node._matrix.m,o=cc.Mat4.invert(new cc.Mat4,this.node._worldMatrix).m,n=this.$xyOffset,i=this.$vDataLength;n<i;n+=this.$step){var a=t[0]*e[n]+t[4]*e[n+1],r=t[1]*e[n]+t[5]*e[n+1];e[n]=o[0]*a+o[4]*r+o[12],e[n+1]=o[1]*a+o[5]*r+o[13]}}else{t=this.node._matrix.m;var s=this.$isWorldXY?0:t[12],l=this.$isWorldXY?0:t[13];for(n=this.$xyOffset,i=this.$vDataLength;n<i;n+=this.$step){var c=e[n],u=e[n+1];e[n]=c*t[0]+u*t[4]+s,e[n+1]=c*t[1]+u*t[5]+l}}},t.prototype.onDestroy=function(){this.node.targetOff(this)},a([p({type:cc.SpriteAtlas,editorOnly:!0,readonly:!0,animatable:!1,displayName:!1})],t.prototype,"atlas",void 0),a([p],t.prototype,"_spriteFrame",void 0),a([p({type:cc.SpriteFrame,displayName:!1})],t.prototype,"$spriteFrame",null),a([p(cc.Boolean)],t.prototype,"_active",void 0),a([p({type:cc.Boolean,displayName:!1,tooltip:!1})],t.prototype,"active",null),a([p],t.prototype,"_isWorldXY",void 0),a([p({displayName:!1,tooltip:!1})],t.prototype,"$isWorldXY",null),a([p({displayName:!1})],t.prototype,"offset",void 0),a([p],t.prototype,"_length",void 0),a([p({type:cc.Integer,displayName:!1,tooltip:"\u957f\u5ea6 = \u6700\u7ec8\u663e\u793a\u957f\u5ea6/(\u8282\u70b9\u79fb\u901f/64)\uff0c\u5f53\u7ed3\u7b97\u7ed3\u679c\u8d85\u8fc732\u65f6\u9700\u8981-1\uff0c\u8d85\u8fc748\u9700\u8981-2\uff08???\uff09\u2026\u2026"})],t.prototype,"length",null),a([p],t.prototype,"_headWidth",void 0),a([p({displayName:!1})],t.prototype,"headWidth",null),a([p],t.prototype,"_tailWidth",void 0),a([p({displayName:!1})],t.prototype,"tailWidth",null),a([p],t.prototype,"_headOpacity",void 0),a([p({type:cc.Integer,min:0,max:255,slide:!0,displayName:!1})],t.prototype,"headOpacity",null),a([p],t.prototype,"_tailOpacity",void 0),a([p({type:cc.Integer,min:0,max:255,slide:!0,displayName:!1})],t.prototype,"tailOpacity",null),a([u,d("Comp/MotionTrail"),f,h],t)}(cc.RenderComponent);o.default=_;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.fillBuffers=function(e){var t=e.renderData.vDatas[e.meshID],o=e.renderData.iDatas[e.meshID],n=cc.renderer._handle._meshBuffer,i=n.request(e.verticesCount,e.indicesCount),a=i.byteOffset>>2,r=n._vData;t.length+a>r.length?r.set(t.subarray(0,r.length-a),a):r.set(t,a);for(var s=n._iData,l=i.indiceOffset,c=i.vertexOffset,u=0,p=o.length;u<p;u++)s[l++]=c+o[u]},t}(cc.Assembler);cc._RF.pop()},{"../GamingData_008":"GamingData_008"}],Multimap:[function(e,t,o){"use strict";cc._RF.push(t,"86461TCRYJML4Jk12IfitHo","Multimap"),Object.defineProperty(o,"__esModule",{value:!0}),o.Multimap=void 0;o.Multimap=function(){this.keyValue=[]},cc._RF.pop()},{}],NewSkillDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"928e6gRGbtD9bNa4pAQnvXG","NewSkillDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../../../mag/VideoManager"),c=e("../../Config_008"),u=e("../../DelegateManager_008"),p=e("../../LocalDataManager_008"),d=e("./BaseUIDialog_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=f.inspector,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.icon=null,t.lbl_desc=null,t.btn=null,t.btn_close=null,t.videoIcon=null,t.Label=null,t.func_close=null,t.isCanFreeGet=!1,t.data=null,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.onInitBg(e),this.skillId=t,this.func_close=o,this.onRefreshUI()},t.prototype.onInitEvent=function(){this.btn.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onTouchClose,this)},t.prototype.onRemoveEvent=function(){this.btn.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this),this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onTouchClose,this)},t.prototype.onRefreshUI=function(){var e=this,t=c.UnlockSkillDataMap.get(this.skillId);null!==t?(this.data=t,s.default.getInstance().getSpriteFrame(c.default.UIPath_NewSkill_Title+this.skillId).then(function(t){e.title.spriteFrame=t}),s.default.getInstance().getSpriteFrame(c.default.Path_IconSkill+this.skillId).then(function(t){e.icon.spriteFrame=t}),this.lbl_desc.string=t.tips,this.isCanFreeGet=p.default.getInstance().getHighestChapterId(t.unlockGradeIndex)>t.unlockChapterIndex,cc.Tween.stopAllByTarget(this.btn),this.isCanFreeGet?(this.btn_close.active=!1,this.videoIcon.opacity=0,this.Label.node.x=0,this.Label.string="\u9886 \u53d6"):(this.btn_close.active=!0,this.videoIcon.opacity=255,this.Label.node.x=25,this.Label.string="\u63d0\u524d\u9886\u53d6",cc.tween(this.btn).repeatForever(cc.tween().to(.8,{scale:1.05}).to(.8,{scale:1})).start())):(this.isCanFreeGet=!0,this.title.spriteFrame=null,this.icon.spriteFrame=null,this.lbl_desc.string="\u65e0\u6548\u7684\u529f\u6cd5",this.Label.string="\u786e\u5b9a",this.Label.node.x=0,this.videoIcon.opacity=0,this.btn_close.active=!1)},t.prototype.onTouchBtn=function(){r.default.getInstance().click(),c.UnlockSkillDataMap.has(this.skillId)?this.isCanFreeGet?this.onUnlockSkill():l.default.getInstance().showVideo(this.onUnlockSkill.bind(this)):this.onClose(!1)},t.prototype.onTouchClose=function(){r.default.getInstance().click(),this.onClose(!1)},t.prototype.onUnlockSkill=function(){p.default.getInstance().onUnlockSkill(this.skillId),p.default.getInstance().onSaveData(),this.onClose(!0)},t.prototype.onClose=function(e){var t,o=this;null===(t=this.func_close)||void 0===t||t.call(this,e),this.onHide(function(){e&&(u.default.onRemoveDia.executeDelegates(c.default.UIPath_Dia_newSkill),u.default.onShowDia.executeDelegates(c.default.UIPath_Dia_unlockNewSkill,o.icon.spriteFrame,o.data.desc))})},a([_(cc.Sprite)],t.prototype,"title",void 0),a([_(cc.Sprite)],t.prototype,"icon",void 0),a([_(cc.Label)],t.prototype,"lbl_desc",void 0),a([_(cc.Node)],t.prototype,"btn",void 0),a([_(cc.Node)],t.prototype,"btn_close",void 0),a([_(cc.Node)],t.prototype,"videoIcon",void 0),a([_(cc.Label)],t.prototype,"Label",void 0),a([h,y("packages://autoproperty//inspector.js")],t)}(d.default);o.default=g,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","./BaseUIDialog_008":"BaseUIDialog_008"}],NodePoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"ac7e3AEAC9KSI+sxCGq3VgT","NodePoolManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameMag"),r=cc._decorator,s=(r.ccclass,r.property,function(){function e(){this.map_nodePool=new Map,this.map_config=new Map}return e.getInstance=function(){return null===this._instance&&(this._instance=new e),this._instance},e.prototype.clearAll=function(){this.map_nodePool.forEach(function(e){e.clear()}),this.map_nodePool.clear(),this.map_config.clear()},e.prototype.clearByKey=function(e){this.map_nodePool.has(e)&&(this.map_nodePool.get(e).clear(),this.map_nodePool.delete(e),this.map_config.delete(e))},e.prototype.onInitNodePoolArr=function(e,t){var o=this;return new Promise(function(a){return n(o,void 0,void 0,function(){var o;return i(this,function(n){switch(n.label){case 0:o=0,n.label=1;case 1:return o<e.length?[4,this.onInitNodePool(e[o])]:[3,4];case 2:n.sent(),t&&t(o/e.length),n.label=3;case 3:return o++,[3,1];case 4:return a(null),[2]}})})})},e.prototype.onInitNodePool=function(e){var t=this;return new Promise(function(o){t.map_nodePool.has(e.key)?o(null):""===e.prePath?(cc.log("\u8fd9\u4e2a\u9884\u5236\u4f53\u8def\u5f84\u672a\u8d4b\u503c ==> "+e.key),o(null)):a.default.getInstance().getPrefab(e.prePath).then(function(n){if(null!==n){t.map_config.set(e.key,n);var i=new cc.NodePool;t.map_nodePool.has(e.key)||t.map_nodePool.set(e.key,i);for(var a=0;a<e.count;a++)i.put(cc.instantiate(n))}setTimeout(function(){o(null)},0)})})},e.prototype.getNode=function(e){var t=null;return this.map_nodePool.has(e)&&this.map_nodePool.get(e).size()>0&&(t=this.map_nodePool.get(e).get()),t},e.prototype.getNodeNotNull=function(e){var t=null;return this.map_nodePool.has(e)&&(this.map_nodePool.get(e).size()>0?t=this.map_nodePool.get(e).get():null===t&&(t=cc.instantiate(this.map_config.get(e)))),t},e.prototype.recoveryNode=function(e,t){this.map_nodePool.has(e)?this.map_nodePool.get(e).put(t):t.destroy()},e.prototype.isHasNodePool=function(e){return this.map_nodePool.has(e)},e._instance=null,e}());o.default=s,cc._RF.pop()},{"./GameMag":"GameMag"}],NormalEnemy_008:[function(e,t,o){"use strict";cc._RF.push(t,"f38ca06Gy5MHpfawPsrLU2h","NormalEnemy_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("./BaseEnemy_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=l.inspector,d=new cc.Color(0,255,255),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.currAniState=null,t}return i(t,e),t.prototype.onInitAniNameArr=function(){},t.prototype.onResetRenderNode=function(){cc.Tween.stopAllByTarget(this.sprite.node),this.sprite.node.color=cc.Color.WHITE,this.sprite.node.opacity=255},t.prototype.onRenderNodePlayHitAni=function(){cc.Tween.stopAllByTarget(this.sprite.node),this.sprite.node.opacity=1,cc.tween(this.sprite.node).to(.1,{opacity:255}).start()},t.prototype.onRenderNodePlayDieAni=function(e){cc.tween(this.sprite.node).to(e,{color:d}).start()},t.prototype.onPauseAni=function(){this.sprite.pause()},t.prototype.onResumeAni=function(){this.sprite.resume()},t.prototype.onChangeAni=function(e){var t,o,n=this.getAniNameByState(e);return this.currAniState=this.sprite.play(n,0),null!==this.currAniState&&(this.currAniState.speed=1),null!==(o=null===(t=this.currAniState)||void 0===t?void 0:t.duration)&&void 0!==o?o:0},t.prototype.onChangeAniByAniName=function(e){this.aniNameArr.includes(e)?this.currAniState=this.sprite.play(e,0):this.currAniState=this.sprite.play(this.getAniNameByState(r.EnemyAniState.Walk),0),null!==this.currAniState&&(this.currAniState.speed=1)},t.prototype.setAnimationSpeed=function(e){this.currAniState&&(this.currAniState.speed=e)},t.prototype.onClearAniState=function(){this.currAniState=null},t.prototype.onInitSizeData=function(){this.size_width=Math.abs(this.node.scaleX*this.sprite.node.scaleX*this.sprite.node.width),this.size_height=Math.abs(this.node.scaleY*this.sprite.node.scaleY*this.sprite.node.height)},t.prototype.getAniNameByState=function(e){var t;switch(e){case r.EnemyAniState.Walk:t="ani_walk";break;case r.EnemyAniState.Skill_SF:t="ani_skill_sf";break;default:t="ani_walk"}return t},t.prototype.getHpBarPosY=function(){return this.size_height+this.sprite.node.y+20},a([u(cc.Animation)],t.prototype,"sprite",void 0),a([c,p("packages://autoproperty//inspector.js")],t)}(s.default);o.default=f,cc._RF.pop()},{"../Config_008":"Config_008","./BaseEnemy_008":"BaseEnemy_008"}],NuclearBombNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"fd964oJP0pKu6ffL0jgA1hj","NuclearBombNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/AudioMag"),l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.g=null,t.z=null,t.zArrNode=null,t.zCount=15,t.fireInterval=.08,t.currCount=0,t.compCount=0,t.posArr=[],t}return i(t,e),t.prototype.onEnable=function(){u.default.isGamePause=!0,this.onPlayAni()},t.prototype.onPlayAni=function(){this.currCount=0,this.compCount=0,this.posArr=[];var e=Math.floor(this.zCount/3);this.zCount=3*e;for(var t=1200/(e-1),o=0;o<e;o++)for(var n=0;n<3;n++){var i=300*n-300,a=600-o*t;this.posArr.push(cc.v2(i,a))}this.g.scale=0,this.z.scale=0,this.g.opacity=255,this.z.opacity=255,cc.tween(this.g).repeatForever(cc.tween().by(1,{angle:-120})).start(),cc.tween(this.g).to(.4,{scale:1}).delay(.2).to(2.2,{scale:5}).start(),cc.tween(this.z).to(.4,{scale:1}).delay(.2).to(2.2,{scale:5}).start(),this.schedule(this.onShowZ,this.fireInterval,this.zCount-1,.6)},t.prototype.onShowZ=function(){this.currCount+=1;var e=l.default.getInstance().getNodeNotNull(c.default.Key_EF_NuclearBomb_Z);if(null!==e){e.setParent(this.zArrNode);var t=r.RandomUtils.getRandomFormArray(this.posArr),o=this.posArr.splice(t,1)[0];o.add(cc.v2(r.RandomUtils.getRandomInt(-50,50),r.RandomUtils.getRandomInt(-100,100))),e.setPosition(o),cc.Tween.stopAllByTarget(e),e.scale=0,e.opacity=255,cc.tween(e).to(.2,{scale:1.5}).call(function(){s.default.getInstance().playSound(c.default.SEF_NuclearBomb)}).to(.4,{opacity:0}).call(this.onRecoveryZ.bind(this,e)).start()}},t.prototype.onRecoverySelf=function(){var e=this;u.default.func_onSkillInScreenEnemy&&u.default.func_onSkillInScreenEnemy(),cc.tween(this.g).to(.2,{opacity:0,scale:10}).start(),cc.tween(this.z).to(.2,{opacity:0,scale:10}).call(function(){l.default.getInstance().recoveryNode(c.default.Key_EF_NuclearBomb,e.node)}).start()},t.prototype.onRecoveryZ=function(e){l.default.getInstance().recoveryNode(c.default.Key_EF_NuclearBomb_Z,e),this.compCount+=1,this.currCount>=this.zCount&&this.compCount===this.currCount&&this.onRecoverySelf()},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.g),cc.Tween.stopAllByTarget(this.z),this.unschedule(this.onShowZ),u.default.isGamePause=!1},a([f(cc.Node)],t.prototype,"g",void 0),a([f(cc.Node)],t.prototype,"z",void 0),a([f(cc.Node)],t.prototype,"zArrNode",void 0),a([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],ObjectPoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"befa30cql5EYLdiulys0drb","ObjectPoolManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.ObjectPoolManager=void 0;var n=function(){function e(){this._poolMap=new Map}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.put=function(e){this._poolMap.get(e.constructor)||this._poolMap.set(e.constructor,new Array),e.reset(),this._poolMap.get(e.constructor).push(e)},e.prototype.get=function(e){this._poolMap.get(e)||this._poolMap.set(e,new Array);var t=this._poolMap.get(e);return t.length||this._factoryCreate(e,t),t.pop()},e.prototype.initPool=function(e,t){void 0===t&&(t=10),this._poolMap.get(e)||this._poolMap.set(e,new Array);var o=this._poolMap.get(e);o.length||this._factoryCreate(e,o,t)},e.prototype.clearAll=function(){this._poolMap=new Map},e.prototype._factoryCreate=function(e,t,o){void 0===o&&(o=10);for(var n=0;n<o;n++)t.push(new e)},e}();o.ObjectPoolManager=n,cc._RF.pop()},{}],ObstacleTreeNode:[function(e,t,o){"use strict";cc._RF.push(t,"ba31d44L3VLO5aLPXffXqep","ObstacleTreeNode"),Object.defineProperty(o,"__esModule",{value:!0}),o.ObstacleTreeNode=void 0;o.ObstacleTreeNode=function(){},cc._RF.pop()},{}],Obstacle:[function(e,t,o){"use strict";cc._RF.push(t,"6746fHeR21HDK3DNojMxj25","Obstacle"),Object.defineProperty(o,"__esModule",{value:!0}),o.Obstacle=void 0;o.Obstacle=function(){},cc._RF.pop()},{}],OnenablePlayAni_008:[function(e,t,o){"use strict";cc._RF.push(t,"40377kdcmdOjIkZRxro8sAZ","OnenablePlayAni_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.spineAniName="animation",t.isSpineLoop=!1,t.anim=null,t}return i(t,e),t.prototype.onEnable=function(){null!==this.spine&&this.spine.setAnimation(0,this.spineAniName,this.isSpineLoop),null!==this.anim&&this.anim.play()},a([l(sp.Skeleton)],t.prototype,"spine",void 0),a([l(cc.String)],t.prototype,"spineAniName",void 0),a([l(cc.Boolean)],t.prototype,"isSpineLoop",void 0),a([l(cc.Animation)],t.prototype,"anim",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],OpenGamingBoxDia2_008:[function(e,t,o){"use strict";cc._RF.push(t,"4d0951B6kFMFLhHZG5FUQQK","OpenGamingBoxDia2_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/RandomUtils"),s=e("../../../../mag/AudioMag"),l=e("../../../../mag/GameMag"),c=e("../../../../mag/VideoManager"),u=e("../../Config_008"),p=e("../../DelegateManager_008"),d=e("../../GamingData_008"),f=e("../../utils/SkillUtils_008"),h=e("./BaseUIDialog_008"),_=cc._decorator,y=_.ccclass,g=_.property,m=_.inspector,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.btn_video1=null,t.btn_video2=null,t.lbl_state=null,t.lbl_tips=null,t.layout=null,t.box2_item=null,t.boxState=[],t.bgState=[],t.guide=null,t.floatTextNode=null,t.floatTextPre=null,t.boxStateArr=[],t.currCanOpenTime=3,t.isCanCtrl=!0,t.rewardDescArr=[],t.rewardView=null,t.rewardItemLayout=null,t.sfArr_rewardItemBg=[],t.rewardTypeArr=[],t}return i(t,e),t.prototype.onLoad=function(){this.onInitBoxItem()},t.prototype.onInit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onEnable=function(){s.default.getInstance().playSound(u.default.SEF_BOX_OpenUI),this.onInitRewardType(),this.onShow(),this.onRefreshBoxState(),this.onInitEvent(),this.currCanOpenTime=r.RandomUtils.getRandomInt(2,4),this.onOpenOverRefreshUI(),this.onInitGuide()},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.onRemoveEvent()},t.prototype.onInitGuide=function(){localStorage.getItem("isGuide_OpenGamingBox")?this.guide.active=!1:(this.guide.active=!0,localStorage.setItem("isGuide_OpenGamingBox","true"))},t.prototype.onShow=function(){var e=this;this.actNode.scale=0,this.isCanCtrl=!1,cc.tween(this.actNode).to(.3,{scale:1},{easing:"backOut"}).call(function(){e.isCanCtrl=!0}).start()},t.prototype.onHide=function(){var e=this;this.isCanCtrl=!1,cc.tween(this.actNode).to(.2,{scale:0},{easing:"backIn"}).call(function(){e.node.active=!1,d.default.isGamePause=!1,window.isCanCtrl=!0}).start()},t.prototype.onInitBoxItem=function(){for(var e=0;e<8;e++)cc.instantiate(this.box2_item).setParent(this.box2_item.parent)},t.prototype.onRefreshBoxState=function(){for(var e=0;e<9;e++){this.boxStateArr[e]=!0;var t=this.layout.children[e];this.onInitBoxItemUI(t);var o=e;t.on(cc.Node.EventType.TOUCH_END,this.onTouchBoxItem.bind(this,o,t),this)}},t.prototype.onInitEvent=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_close,this),this.btn_video1.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_video1,this),this.btn_video2.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_video2,this)},t.prototype.onRemoveEvent=function(){for(var e=0;e<9;e++)this.layout.children[e].off(cc.Node.EventType.TOUCH_END);this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_close,this),this.btn_video1.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_video1,this),this.btn_video2.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_video2,this)},t.prototype.onTouchBoxItem=function(e,t){this.isCanCtrl&&this.boxStateArr[e]&&(this.guide.active=!1,s.default.getInstance().playSound(u.default.SEF_BOX_OpenGamingBOX),this.currCanOpenTime>0&&(this.currCanOpenTime-=1,this.onRefreshOpenTimeUI(),this.boxStateArr[e]=!1,this.onPlayOpenBoxAni(t),this.onGetReward(e)))},t.prototype.onTouchBtn_close=function(){this.isCanCtrl&&(s.default.getInstance().click(),this.onHide())},t.prototype.onTouchBtn_video1=function(){var e=this;this.isCanCtrl&&(s.default.getInstance().click(),c.default.getInstance().showVideo(function(){e.currCanOpenTime+=3,p.default.onShowUIFloatText.executeDelegates("\u5f00\u7bb1\u6b21\u6570 +3"),e.onRefreshOpenTimeUI(),e.onOpenOverRefreshUI()}))},t.prototype.onTouchBtn_video2=function(){this.isCanCtrl&&s.default.getInstance().click()},t.prototype.onInitBoxItemUI=function(e){var t=e.getChildByName("bg").getComponent(cc.Sprite),o=e.getChildByName("actNode"),n=o.getChildByName("boxIcon").getComponent(cc.Sprite),i=o.getChildByName("openLight"),a=o.getChildByName("videoIcon"),r=o.getChildByName("icon").getComponent(cc.Sprite);t.spriteFrame=this.bgState[0],n.spriteFrame=this.boxState[0],i.opacity=0,a.opacity=0,r.spriteFrame=null},t.prototype.onPlayOpenBoxAni=function(e){var t=this,o=e.getChildByName("bg").getComponent(cc.Sprite),n=e.getChildByName("actNode"),i=n.getChildByName("boxIcon").getComponent(cc.Sprite),a=n.getChildByName("openLight"),r=n.getChildByName("videoIcon"),s=n.getChildByName("icon");s.opacity=0,cc.tween(i.node).to(.1,{scale:1},{easing:"quadOut"}).call(function(){o.spriteFrame=t.bgState[1],i.spriteFrame=t.boxState[1],a.opacity=255,r.opacity=0,s.opacity=255}).start()},t.prototype.onOpenOverRefreshUI=function(){for(var e=this.currCanOpenTime>0,t=!1,o=0;o<9;o++)this.layout.children[o].getChildByName("actNode").getChildByName("videoIcon"),this.boxStateArr[o]&&(t=!0);!e&&t?(this.btn_video1.active=!1,this.btn_video2.active=!0,this.lbl_tips.opacity=0):(this.btn_video1.active=!1,this.btn_video2.active=!1,this.lbl_tips.opacity=255,this.lbl_tips.getComponent(cc.Label).string=t?"\u70b9\u51fb\u5f00\u5b9d\u7bb1":"\u5b9d\u7bb1\u5df2\u5168\u90e8\u5f00\u542f")},t.prototype.onInitRewardType=function(){this.rewardTypeArr=[0,0,0,1,1,2,2,3,3],this.rewardTypeArr.sort(function(){return Math.random()-.5})},t.prototype.getRewardByBoxIndex=function(e){var t=this.rewardTypeArr[e];return this.getRewardByRewardType(t)},t.prototype.getRandomReward=function(){for(var e=[25,25,13,37],t=e.reduce(function(e,t){return e+t}),o=r.RandomUtils.getRandomInt(0,t-1),n=0,i=0,a=0;a<e.length;a++)if(o<(n+=e[a])){i=a;break}return this.getRewardByRewardType(i)},t.prototype.getRewardByRewardType=function(e){if(0===e){var t=[];if(d.default.SkillStateMap.forEach(function(e,o){if(o>200&&o<300){var n=f.default.getSkillMaxLevel(o);if(e<n)for(var i=e;i<n;i++)t.push(o);else{var a=o+100;f.default.isCanLearnSuperWeapon(o,d.default.SkillStateMap)&&t.push(a)}}}),t.length>0){var o=r.RandomUtils.getRandomFormArray(t);return{rewardId:t[o],rewardCount:1}}return this.getRewardByRewardType(e+1)}if(1===e){var n=[];return d.default.SkillStateMap.forEach(function(e,t){if(t>100&&t<200){var o=f.default.getSkillMaxLevel(t);if(e<o)for(var i=e;i<o;i++)n.push(t)}}),n.length>0?(o=r.RandomUtils.getRandomFormArray(n),{rewardId:n[o],rewardCount:1}):this.getRewardByRewardType(e+(Math.random()>.5?1:2))}if(2===e)return{rewardId:u.DropItemType.AlchemyPullet,rewardCount:r.RandomUtils.getRandomInt(1,3)};for(var i=[10,15,25,25,15,10],a=i.reduce(function(e,t){return e+t}),s=r.RandomUtils.getRandomInt(0,a-1),l=0,c=0,p=0;p<i.length;p++)if(s<(l+=i[p])){c=p;break}return u.DropItemType.Coin_1,{rewardId:c<=1?u.DropItemType.Coin_1:c<=3?u.DropItemType.Coin_2:u.DropItemType.Coin_3,rewardCount:[5,10,50,100,150,200][c]}},t.prototype.onGetReward=function(e){this.rewardDescArr=[];var t=this.getRewardByBoxIndex(e);d.default.onSelectSkill(t.rewardId,t.rewardCount);var o=this.rewardItemLayout.children[0];this.onRefreshRewardItemUI(o,t),this.onRefreshBoxItemIconUI(e,t.rewardId),this.onShowRewardUI(1)},t.prototype.onOpenThreeBox=function(){s.default.getInstance().playSound(u.default.SEF_BOX_OpenGamingBOX),this.rewardDescArr=[];for(var e=[],t=0;t<this.boxStateArr.length;t++)if(this.boxStateArr[t]){this.boxStateArr[t]=!1;var o=this.layout.children[t];if(this.onPlayOpenBoxAni(o),e.push(t),e.length>=3)break}var n=e.length;for(t=0;t<n;t++){var i=this.getRewardByBoxIndex(e[t]);d.default.onSelectSkill(i.rewardId,i.rewardCount);var a=this.rewardItemLayout.children[t];this.onRefreshRewardItemUI(a,i),this.onRefreshBoxItemIconUI(e[t],i.rewardId)}this.onShowRewardUI(n)},t.prototype.onRefreshRewardItemUI=function(e,t){var o=e.getChildByName("bg").getComponent(cc.Sprite),n=e.getChildByName("icon").getComponent(cc.Sprite),i=e.getChildByName("lbl_name").getComponent(cc.Label),a=e.getChildByName("lbl_desc").getComponent(cc.Label),r=e.getChildByName("starNode").getChildByName("stars"),s=t.rewardId,c=t.rewardCount;if(l.default.getInstance().getSpriteFrame(u.default.getItemIconPath_skill(s)).then(function(e){n.spriteFrame=e}),s>100){var p=u.SkillConfigMap.get(s),f=d.default.SkillStateMap.get(s)-1;i.string=p.skillName,a.string=p.skillDescArr[f],this.refreshStar(r,f),o.spriteFrame=s<200?this.sfArr_rewardItemBg[0]:s<300?this.sfArr_rewardItemBg[1]:this.sfArr_rewardItemBg[3],this.rewardDescArr.push(i.string+"\u5347\u7ea7\u4e86")}else{switch(o.spriteFrame=this.sfArr_rewardItemBg[2],s){case u.DropItemType.AlchemyPullet:i.string="\u94a5\u5319",a.string="\u83b7\u5f97"+c+"\u628a\u94a5\u5319",this.refreshStar(r,c-1);break;case u.DropItemType.Coin_1:i.string="\u94dc\u94b1",a.string="\u83b7\u5f97"+c+"\u4e2a\u94dc\u94b1",this.refreshStar(r,0);break;case u.DropItemType.Coin_2:i.string="\u94dc\u94b1",a.string="\u83b7\u5f97"+c+"\u4e2a\u94dc\u94b1",this.refreshStar(r,2);break;case u.DropItemType.Coin_3:i.string="\u94dc\u94b1",a.string="\u83b7\u5f97"+c+"\u4e2a\u94dc\u94b1",this.refreshStar(r,4)}this.rewardDescArr.push(a.string)}},t.prototype.onRefreshBoxItemIconUI=function(e,t){var o=this.layout.children[e].getChildByName("actNode").getChildByName("icon").getComponent(cc.Sprite);l.default.getInstance().getSpriteFrame(u.default.getItemIconPath_box(t)).then(function(e){o.spriteFrame=e})},t.prototype.refreshStar=function(e,t){for(var o=0;o<e.childrenCount;o++)e.children[o].opacity=o<=t?255:0},t.prototype.onShowRewardUI=function(){this.onShowRewardFloatText(),this.onOpenOverRefreshUI()},t.prototype.onCloseRewardView=function(){this.rewardView.active=!1,this.onOpenOverRefreshUI()},t.prototype.onShowRewardFloatText=function(){for(var e=function(e){var o=cc.instantiate(t.floatTextPre);o.setParent(t.floatTextNode),o.setSiblingIndex(0),o.getComponent(cc.Label).string=t.rewardDescArr[e],o.x=0,setTimeout(function(){o&&o.isValid&&o.destroy()},1e3)},t=this,o=0;o<this.rewardDescArr.length;o++)e(o)},t.prototype.onRefreshOpenTimeUI=function(){this.lbl_state.string=this.currCanOpenTime+"/3"},a([g(cc.Node)],t.prototype,"btn_close",void 0),a([g(cc.Node)],t.prototype,"btn_video1",void 0),a([g(cc.Node)],t.prototype,"btn_video2",void 0),a([g(cc.Label)],t.prototype,"lbl_state",void 0),a([g(cc.Node)],t.prototype,"lbl_tips",void 0),a([g(cc.Node)],t.prototype,"layout",void 0),a([g(cc.Node)],t.prototype,"box2_item",void 0),a([g([cc.SpriteFrame])],t.prototype,"boxState",void 0),a([g([cc.SpriteFrame])],t.prototype,"bgState",void 0),a([g(cc.Node)],t.prototype,"guide",void 0),a([g(cc.Node)],t.prototype,"floatTextNode",void 0),a([g(cc.Prefab)],t.prototype,"floatTextPre",void 0),a([g(cc.Node)],t.prototype,"rewardView",void 0),a([g(cc.Node)],t.prototype,"rewardItemLayout",void 0),a([g([cc.SpriteFrame])],t.prototype,"sfArr_rewardItemBg",void 0),a([y,m("packages://autoproperty//inspector.js")],t)}(h.default);o.default=v,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../utils/SkillUtils_008":"SkillUtils_008","./BaseUIDialog_008":"BaseUIDialog_008"}],OpenGamingBoxDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"e9c72YoCjVMhq/POrs60aiE","OpenGamingBoxDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../Config_008"),c=e("../../GamingData_008"),u=e("./BaseUIDialog_008"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boxView=null,t.tempNode=null,t.rewardView=null,t.btn_open=null,t.lbl_skipTips=null,t.boxItemNode=null,t.boxLightNode=null,t.anim_boxSelectEf=null,t.dia=null,t.particle_1=null,t.particle_2=null,t.itemBg_normal=null,t.itemBg_select=null,t.sfArr_rewardItemBg=[],t.boxItemArr=[],t.lightArr=[],t.currRewardIndex=0,t.currCompIndex=-1,t.boxData=null,t.isParticlePlaying=!1,t.lastTouchTime=0,t}return i(t,e),t.prototype.onInit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onInitEvent=function(){},t.prototype.onRemoveEvent=function(){},t.prototype.onLoad=function(){for(var e=0;e<this.boxItemNode.childrenCount;e++)this.boxItemArr.push(this.boxItemNode.children[e]);for(e=0;e<this.boxLightNode.childrenCount;e++)this.lightArr.push(this.boxLightNode.children[e])},t.prototype.onEnable=function(){this.onInitData(),this.rewardView.active=!1,this.onPlayShowAni()},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.unscheduleAllCallbacks()},t.prototype.onInitData=function(){this.currRewardIndex=0,this.currCompIndex=-1,this.boxData=c.default.getBoxRewardData(),this.rewardIndexArr=this.boxData.rewardIndexArr;for(var e=this.boxData.boxItemRewardDataArr,t=function(t){var n=o.boxItemArr[t].getChildByName("icon").getComponent(cc.Sprite);s.default.getInstance().getSpriteFrame(l.default.getItemIconPath_box(e[t].rewardId)).then(function(e){n.spriteFrame=e})},o=this,n=0;n<this.boxItemArr.length;n++)t(n)},t.prototype.onPlayShowAni=function(){var e=this;this.boxView.off(cc.Node.EventType.TOUCH_END),r.default.getInstance().playSound(l.default.SEF_BOX_OpenUI);for(var t=0;t<this.boxItemArr.length;t++)this.boxItemArr[t].scale=0,cc.Tween.stopAllByTarget(this.boxItemArr[t]),this.boxItemArr[t].getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.itemBg_normal;for(t=0;t<this.lightArr.length;t++)this.lightArr[t].opacity=0;for(this.anim_boxSelectEf.node.opacity=0,cc.Tween.stopAllByTarget(this.actNode),cc.Tween.stopAllByTarget(this.btn_open),cc.Tween.stopAllByTarget(this.lbl_skipTips),this.actNode.scale=.5,this.btn_open.scale=0,this.lbl_skipTips.opacity=0,this.dia.scale=0,this.isParticlePlaying=!1,this.particle_1.active=!1,this.particle_2.active=!1,cc.Tween.stopAllByTarget(this.btn_open),cc.tween(this.actNode).to(.2,{scale:1}).start(),t=0;t<8;t++)cc.tween(this.boxItemArr[t]).delay(.05*t+.2-.05).to(.15,{scale:1}).start();for(t=8;t<16;t++)cc.tween(this.boxItemArr[t]).delay(.05*(t-8)+.2-.05).to(.15,{scale:1}).start();this.btn_open.off(cc.Node.EventType.TOUCH_END),cc.tween(this.btn_open).delay(.2).to(.5,{scale:1},{easing:"backOut"}).call(function(){e.btn_open.once(cc.Node.EventType.TOUCH_END,e.onPlayDrawAni,e),cc.tween(e.btn_open).to(.6,{scale:1.2}).to(.6,{scale:1}).union().repeatForever().start()}).start(),cc.tween(this.dia).delay(.7).to(.2,{scale:1},{easing:"backOut"}).start()},t.prototype.onPlayDrawAni=function(){var e=this;this.onShowSkipTips(),this.boxLightNode.opacity=255,cc.Tween.stopAllByTarget(this.btn_open),cc.tween(this.btn_open).to(.12,{scale:0},{easing:"backIn"}).start();var t=16;this.lightArr[0].setPosition(this.boxItemArr[t%16].getPosition()),this.lightArr[5].setPosition(this.boxItemArr[((t-5)%16+16)%16].getPosition()),this.lightArr[6].setPosition(this.boxItemArr[((t-10)%16+16)%16].getPosition()),t++,this.lightArr[0].opacity=255,this.lightArr[5].opacity=255,this.lightArr[6].opacity=255;var o=0;this.schedule(function(){if(o+=1,e.lightArr[0].setPosition(e.boxItemArr[t%16].getPosition()),o<20)e.lightArr[5].setPosition(e.boxItemArr[((t-5)%16+16)%16].getPosition()),e.lightArr[6].setPosition(e.boxItemArr[((t-10)%16+16)%16].getPosition());else if(o<40){e.showParticle(c.default.currOpenBoxLv);for(var n=1;n<6;n++)e.lightArr[n].setPosition(e.boxItemArr[(t-n+16)%16].getPosition()),e.lightArr[n].opacity=o-20-n>=0?218*(1-.1*n):0;e.lightArr[6].setPosition(e.boxItemArr[((t-10)%16+16)%16].getPosition()),o<25&&(e.lightArr[5].setPosition(e.boxItemArr[((t-5)%16+16)%16].getPosition()),e.lightArr[5].opacity=o-25>=0?109:218*(1-.2*(o-20)))}else{for(n=1;n<7;n++)e.lightArr[n].setPosition(e.boxItemArr[(t-n)%16].getPosition()),e.lightArr[n].opacity=o-20-n>=0?218*(1-.1*n):0;o<45&&(e.lightArr[6].setPosition(e.boxItemArr[((t-10)%16+16)%16].getPosition()),e.lightArr[6].opacity=o-45>=0?87.2:218*(1-.2*(o-40)))}if(o>100+50*e.currRewardIndex)if(e.rewardIndexArr[e.currRewardIndex]===t%16){if(e.currCompIndex===e.currRewardIndex)return;e.currCompIndex=e.currRewardIndex,e.boxLightNode.opacity=0;var i=e.rewardIndexArr[e.currRewardIndex];e.anim_boxSelectEf.node.setPosition(e.boxItemArr[i].getPosition()),e.anim_boxSelectEf.node.opacity=255;var a=e.boxItemArr[i];a.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=e.itemBg_select,e.scheduleOnce(function(){r.default.getInstance().playSound(l.default.SEF_BOX_Select),a.zIndex=cc.macro.MAX_ZINDEX,e.anim_boxSelectEf.node.opacity=0,cc.tween(a).to(.1,{scale:.9}).to(.2,{scale:1.2}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){e.currRewardIndex+=1,e.currRewardIndex>=e.rewardIndexArr.length?(e.unscheduleAllCallbacks(),e.showReward()):e.boxLightNode.opacity=255}).start()},.5)}else r.default.getInstance().playSound(l.default.SEF_BOX_Rotating),t++;else r.default.getInstance().playSound(l.default.SEF_BOX_Rotating),t++},.04,Number.MAX_VALUE,.05)},t.prototype.showParticle=function(e){var t=this;if(!this.isParticlePlaying&&1!==e)if(this.isParticlePlaying=!0,2==e){this.particle_1.active=!0;for(var o=this.particle_1.getComponentsInChildren(cc.ParticleSystem),n=0;n<o.length;n++)o[n].resetSystem()}else if(3===e){this.particle_2.active=!0;var i=this.particle_2.getComponentsInChildren(cc.ParticleSystem),a=function(e){i[e].node.opacity=0,r.scheduleOnce(function(){i[e].resetSystem(),t.scheduleOnce(function(){i[e].node.opacity=255},0)},.04*e)},r=this;for(n=0;n<i.length;n++)a(n)}},t.prototype.showReward=function(){var e=this;this.boxView.off(cc.Node.EventType.TOUCH_END),this.lbl_skipTips.opacity=0,this.rewardView.off(cc.Node.EventType.TOUCH_END);var t=this.rewardView.getChildByName("bg"),o=this.rewardView.getChildByName("layout"),n=this.rewardView.getChildByName("lbl_tips");n.opacity=0,this.rewardIndexArr=this.rewardIndexArr.sort(function(e,t){return e-t});for(var i=0;i<o.childrenCount;i++)cc.Tween.stopAllByTarget(o.children[i]),o.children[i].active=this.rewardIndexArr.length>i,o.children[i].opacity=0,o.children[i].scale=.25;var a=function(e){var t=o.children[e],n=t.getChildByName("bg").getComponent(cc.Sprite),i=t.getChildByName("icon").getComponent(cc.Sprite),a=t.getChildByName("lbl_name").getComponent(cc.Label),u=t.getChildByName("lbl_desc").getComponent(cc.Label),p=t.getChildByName("starNode").getChildByName("stars"),d=r.rewardIndexArr[e],f=r.boxData.boxItemRewardDataArr[d].rewardId,h=r.boxData.boxItemRewardDataArr[d].rewardCount;if(s.default.getInstance().getSpriteFrame(l.default.getItemIconPath_skill(f)).then(function(e){i.spriteFrame=e}),c.default.onSelectSkill(f,h),f>100){var _=l.SkillConfigMap.get(f),y=c.default.SkillStateMap.get(f)-1;a.string=_.skillName,u.string=_.skillDescArr[y],r.refreshStar(p,y),n.spriteFrame=f<200?r.sfArr_rewardItemBg[0]:f<300?r.sfArr_rewardItemBg[1]:r.sfArr_rewardItemBg[3]}else switch(n.spriteFrame=r.sfArr_rewardItemBg[2],f){case l.DropItemType.AlchemyPullet:a.string="\u94a5\u5319",u.string="\u83b7\u5f97"+h+"\u628a\u94a5\u5319",r.refreshStar(p,h-1);break;case l.DropItemType.Coin_1:a.string="\u94dc\u94b1",u.string="\u83b7\u5f97"+h+"\u4e2a\u94dc\u94b1",r.refreshStar(p,0);break;case l.DropItemType.Coin_2:a.string="\u94dc\u94b1",u.string="\u83b7\u5f97"+h+"\u4e2a\u94dc\u94b1",r.refreshStar(p,2);break;case l.DropItemType.Coin_3:a.string="\u94dc\u94b1",u.string="\u83b7\u5f97"+h+"\u4e2a\u94dc\u94b1",r.refreshStar(p,4)}},r=this;for(i=0;i<this.rewardIndexArr.length;i++)a(i);t.opacity=0,cc.tween(t).to(.5,{opacity:128},{easing:"fade"}).start(),this.rewardView.active=!0;var u=0,p=function(){var t=cc.instantiate(e.boxItemArr[e.rewardIndexArr[u]]);t.setParent(e.tempNode),t.setPosition(e.boxItemArr[e.rewardIndexArr[u]].getPosition());var i=o.children[u],a=i.getPosition().sub(t.getPosition()).mag()/1200;if(a=a>.2?.2:a,cc.tween(t).to(a,{x:i.getPosition().x,y:i.getPosition().y},{easing:"quadOut"}).start(),cc.tween(i).delay(a).call(function(){t.destroy(),i.opacity=255}).to(.25,{scale:1},{easing:"backOut"}).start(),++u<e.rewardIndexArr.length){var r=a+.1;e.scheduleOnce(function(){p()},r)}else r=a+.25,e.scheduleOnce(function(){var t=e.rewardView.getChildByName("bg");t.off(cc.Node.EventType.TOUCH_END,e.onClose,e),t.once(cc.Node.EventType.TOUCH_END,e.onClose,e),n.opacity=255},r)};this.scheduleOnce(function(){p()},.75)},t.prototype.refreshStar=function(e,t){for(var o=0;o<e.childrenCount;o++)e.children[o].opacity=o<=t?255:0},t.prototype.onClose=function(){this.node.active=!1,c.default.isGamePause=!1,window.isCanCtrl=!0},t.prototype.onShowSkipTips=function(){var e=this;cc.tween(this.lbl_skipTips).to(.5,{opacity:255}).start(),this.scheduleOnce(function(){e.boxView.on(cc.Node.EventType.TOUCH_END,e.onSkipAni,e)},0)},t.prototype.onSkipAni=function(){var e=(new Date).getTime();if(e-this.lastTouchTime<750){this.boxView.off(cc.Node.EventType.TOUCH_END),this.unscheduleAllCallbacks(),this.isParticlePlaying=!1,this.particle_1.active=!1,this.particle_2.active=!1,cc.Tween.stopAllByTarget(this.lbl_skipTips),this.lbl_skipTips.opacity=0,this.boxLightNode.opacity=0,this.anim_boxSelectEf.node.opacity=0;for(var t=0;t<this.rewardIndexArr.length;t++){var o=this.boxItemArr[this.rewardIndexArr[t]];o.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.itemBg_select,cc.Tween.stopAllByTarget(o),cc.tween(o).to(.1,{scale:.9}).to(.2,{scale:1.2}).to(.1,{scale:1}).to(.1,{scale:1.2}).to(.1,{scale:1}).start()}r.default.getInstance().playSound(l.default.SEF_BOX_Select),this.scheduleOnce(this.showReward,.75)}else this.lastTouchTime=e},a([f(cc.Node)],t.prototype,"boxView",void 0),a([f(cc.Node)],t.prototype,"tempNode",void 0),a([f(cc.Node)],t.prototype,"rewardView",void 0),a([f(cc.Node)],t.prototype,"btn_open",void 0),a([f(cc.Node)],t.prototype,"lbl_skipTips",void 0),a([f(cc.Node)],t.prototype,"boxItemNode",void 0),a([f(cc.Node)],t.prototype,"boxLightNode",void 0),a([f(cc.Animation)],t.prototype,"anim_boxSelectEf",void 0),a([f(cc.Node)],t.prototype,"dia",void 0),a([f(cc.Node)],t.prototype,"particle_1",void 0),a([f(cc.Node)],t.prototype,"particle_2",void 0),a([f(cc.SpriteFrame)],t.prototype,"itemBg_normal",void 0),a([f(cc.SpriteFrame)],t.prototype,"itemBg_select",void 0),a([f([cc.SpriteFrame])],t.prototype,"sfArr_rewardItemBg",void 0),a([d],t)}(u.default);o.default=h,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","./BaseUIDialog_008":"BaseUIDialog_008"}],PauseView_008:[function(e,t,o){"use strict";cc._RF.push(t,"5990aCsqmpCQ6SkV6o43YB3","PauseView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("../../GamingData_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this.onShowPauseView()},t.prototype.onDisable=function(){},t.prototype.onShowPauseView=function(){r.default.getInstance().playSound(s.default.SEF_Pause),c.default.isGamePause=!0,this.node.opacity=0,cc.tween(this.node).to(.4,{opacity:255},{easing:"fade"}).start();var e=this.node.getChildByName("btn_continue"),t=this.node.getChildByName("btn_backStart");e.off(cc.Node.EventType.TOUCH_END),t.off(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_continue,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_backStart,this)},t.prototype.onTouchBtn_continue=function(){r.default.getInstance().click(),c.default.isGamePause=!1,this.node.active=!1,l.default.onHideCurrSkillLayer.executeDelegates()},t.prototype.onTouchBtn_backStart=function(){r.default.getInstance().click(),this.node.active=!1,c.default.func_onShowResultView&&c.default.func_onShowResultView()},a([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008"}],PlayerBullet_FlowersUAV_008:[function(e,t,o){"use strict";cc._RF.push(t,"b23ebys02ZJoo+DUjPJucW1","PlayerBullet_FlowersUAV_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/MathUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aim=null,t.spriteNode=null,t.EF=null,t.collider=null,t.moveSpeed=1e3,t.state=0,t.timer=0,t.weapon=null,t.lerpRatio=0,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.weapon=e,this.targetPos=t,this.collider.enabled=!1,this.currMoveDir=cc.v2(t.sub(this.node.getPosition())).rotate(2.4*o).normalize(),this.aim.removeFromParent(),this.aim.setParent(c.default.GameObjNode),this.aim.setPosition(t),this.aim.zIndex=cc.macro.MIN_ZINDEX+20,this.aim.opacity=255,this.aim.scale=this.node.scale,this.spriteNode.opacity=255,this.EF.node.getComponent(cc.Sprite).spriteFrame=null,this.EF.stop(),this.state=0,this.timer=0,this.lerpRatio=0},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){if(!c.default.isGamePause&&0===this.state){this.timer+=e;var t=this.targetPos.sub(this.node.getPosition()).normalize();this.lerpRatio+=.5*e,this.currMoveDir=r.default.lerpVec2(this.currMoveDir,t,Math.min(this.lerpRatio,.2));var o=Math.min(1,1-this.timer);this.moveSpeed=1600*(1+.4*(1-o)),this.node.x+=this.currMoveDir.x*e*this.moveSpeed,this.node.y+=this.currMoveDir.y*e*this.moveSpeed,this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.currMoveDir.y,this.currMoveDir.x)),this.node.getPosition().sub(this.targetPos).magSqr()<=100&&this.onExplore()}},t.prototype.onExplore=function(){var e;this.state=1;var t=this.EF.play();this.collider.enabled=!0,this.spriteNode.opacity=0,this.aim.opacity=0,this.scheduleOnce(this.onRecovery,null!==(e=null==t?void 0:t.duration)&&void 0!==e?e:.5)},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},t.prototype.onRecovery=function(){this.collider.enabled=!1,this.unscheduleAllCallbacks(),this.aim.removeFromParent(),this.aim.setParent(this.node),s.default.getInstance().recoveryNode(l.default.KeyPath_FlowersUAV_Small,this.node)},a([d(cc.Node)],t.prototype,"aim",void 0),a([d(cc.Node)],t.prototype,"spriteNode",void 0),a([d(cc.Animation)],t.prototype,"EF",void 0),a([d(cc.CircleCollider)],t.prototype,"collider",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Utils/MathUtils":"MathUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerBullet_FlyingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"1a6480E6EJAw6pJtIYqDZGC","PlayerBullet_FlyingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dao1=null,t.dao2=null,t.weapon=null,t.speed=2e3,t.moveDir=cc.Vec2.ZERO,t.timer=0,t.durCount=1,t}return i(t,e),t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){c.default.isGamePause||(this.timer-=e,this.timer<=0?this.onRecovery():this.node.setPosition(this.node.getPosition().add(this.moveDir.mul(e*this.speed))))},t.prototype.onInit=function(e,t){this.moveDir.x=t.x,this.moveDir.y=t.y,this.weapon=e,this.timer=4+this.weapon.getBulletLifeBonus(),this.durCount=this.weapon.getBulletDurCountBonus();var o=r.RandomUtils.getRandomBoolean();this.dao1.opacity=o?255:0,this.dao2.opacity=o?0:255},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(this.weapon.onAttackEnemy(e.node),this.durCount-=1,this.durCount<0&&this.onRecovery())},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_Normal_FlyingKnife,this.node)},a([d(cc.Node)],t.prototype,"dao1",void 0),a([d(cc.Node)],t.prototype,"dao2",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerBullet_Frostbolt_008:[function(e,t,o){"use strict";cc._RF.push(t,"afe2095hl9FlL9XdKyG1Z8b","PlayerBullet_Frostbolt_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../Config_Gaming_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../enemyBuff/EnemyBuff_MoveSpeedSlow_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weapon=null,t.moveSpeed=1400,t.timer=0,t.durCount=0,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.timer=4+this.weapon.getBulletLifeBonus(),this.durCount=this.weapon.getBulletDurCountBonus(),this.node.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x))},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){p.default.isGamePause||(this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed,this.timer-=e,this.timer<=0&&this.onRecovery())},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(this.weapon.onAttackEnemy(e.node),r.RandomUtils.getRandomProbability_10000()<c.Config_Gaming_008.Frostbolt_MoveSpeedSlowPro&&(u.default.ins.isBoss(e.node)||e.node.emit(l.default.e_OnTryAddBuffToEnemy,d.default,[this.getBuffTime(),c.Config_Gaming_008.EnemyBuff_CooldownTime_MoveSpeedSlow])),this.durCount-=1,this.durCount<0&&this.onRecovery())},t.prototype.getBuffTime=function(){return c.Config_Gaming_008.Frostbolt_MoveSpeedSlowTime+this.weapon.getExceptionStateTimeBonus()},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_Frostbolt,this.node)},a([h],t)}(cc.Component));o.default=_,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../enemyBuff/EnemyBuff_MoveSpeedSlow_008":"EnemyBuff_MoveSpeedSlow_008"}],PlayerBullet_JinLong_008:[function(e,t,o){"use strict";cc._RF.push(t,"ee2d4OdvexKp4yxrCJGDBS0","PlayerBullet_JinLong_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head=null,t.weapon=null,t.moveSpeed=2e3,t.moveDir=cc.v2(-1,1),t.timer=0,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.moveDir_v=this.moveDir.rotate(1.57).normalize(),this.timer=1.25},t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){l.default.isGamePause||(this.timer-=e,this.timer<=0?this.onRecovery():(this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed,this.moveDir=this.moveDir.lerp(this.moveDir_v,.08).normalize(),this.moveDir_v=this.moveDir.rotate(1.57).normalize(),this.head.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))))},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.Key_JinLong,this.node)},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},a([p(cc.Node)],t.prototype,"head",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerBullet_Lightning_008:[function(e,t,o){"use strict";cc._RF.push(t,"2d0459YhKZJMq1K/YKqkuxp","PlayerBullet_Lightning_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anim=null,t.weapon=null,t}return i(t,e),t.prototype.onInit=function(e){this.weapon=e},t.prototype.onEnable=function(){this.anim.play(),this.scheduleOnce(this.onRecovery,.4),this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onRecovery=function(){this.unschedule(this.onRecovery),r.default.getInstance().recoveryNode(s.default.Key_Lightning,this.node)},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},a([u(cc.Animation)],t.prototype,"anim",void 0),a([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008"}],PlayerBullet_LionRoar_008:[function(e,t,o){"use strict";cc._RF.push(t,"f7890XsR79IZaicwDuyHnar","PlayerBullet_LionRoar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../Config_Gaming_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../PotMag_008"),f=e("../enemyBuff/EnemyBuff_Stun_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.weapon=null,t.timer=0,t.isAttack=!1,t}return i(t,e),t.prototype.onInit=function(e){this.weapon=e,this.timer=0,this.spine.setAnimation(0,"animation",!1),this.isAttack=!1},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){p.default.isGamePause?this.spine.timeScale=0:(this.spine.timeScale=.75,this.timer+=e*this.spine.timeScale,!this.isAttack&&this.timer>.2&&(this.isAttack=!0,this.onAttack()),this.timer>=.9&&this.onRecovery())},t.prototype.lerp=function(e,t,o){return e+(t-e)*o},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_LionRoar,this.node)},t.prototype.onAttack=function(){for(var e=400*this.node.scale,t=u.default.ins.getEnemyInRange(this.node.getPosition(),e),o=0;o<t.length;o++)this.weapon.onAttackEnemy(t[o]),r.RandomUtils.getRandomProbability_10000()<c.Config_Gaming_008.LionRoar_StunPro&&(u.default.ins.isBoss(t[o])||t[o].emit(l.default.e_OnTryAddBuffToEnemy,f.default,[this.getStunTime(),c.Config_Gaming_008.EnemyBuff_CooldownTime_Stun]));var n=d.default.ins.getPotInRange(this.node.getPosition(),e);for(o=0;o<n.length;o++)n[o].emit(l.default.e_OnOpenPot)},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},t.prototype.getStunTime=function(){var e,t;return null!==(t=c.Config_Gaming_008.LionRoar_StunTime+(null===(e=this.weapon)||void 0===e?void 0:e.getExceptionStateTimeBonus()))&&void 0!==t?t:0},a([y(sp.Skeleton)],t.prototype,"spine",void 0),a([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../PotMag_008":"PotMag_008","../enemyBuff/EnemyBuff_Stun_008":"EnemyBuff_Stun_008"}],PlayerBullet_Long_008:[function(e,t,o){"use strict";cc._RF.push(t,"e5e419xIlNOwpUms3FacL1p","PlayerBullet_Long_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/AudioMag"),l=e("../Config_008"),c=e("../Config_Gaming_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../enemy/BaseEnemy_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head=null,t.weapon=null,t.rotateTimer=0,t.targetEnemy=null,t.soundTimer=10,t}return i(t,e),t.prototype.onInit=function(e){this.weapon=e,this.targetEnemy=u.default.ins.getRandomEnemy(),this.soundTimer=r.RandomUtils.getRandomInt(8,16)},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(s.default.getInstance().playSound_intervalLimit(l.default.SEF_Long_Hit,50),this.weapon.onAttackEnemy(e.node))},t.prototype.onEnable=function(){this.moveDir=p.default.PlayerNode.getPosition().sub(this.node.getPosition()).normalize(),this.targetDir=this.moveDir},t.prototype.update=function(e){var t;if(!p.default.isGamePause){if(this.rotateTimer-=e,this.soundTimer-=e,this.soundTimer<=0&&(this.soundTimer=r.RandomUtils.getRandomInt(8,16),s.default.getInstance().playSound_intervalLimit(l.default.SEF_Long_Summon,50)),null===this.targetEnemy||this.targetEnemy.parent||(this.targetEnemy=null),null===this.targetEnemy){if(this.rotateTimer<0){var o=0;for(this.targetEnemy=u.default.ins.getRandomEnemy();null!==this.targetEnemy&&!((o+=1)>10)&&null!==(t=this.targetEnemy.getComponent(d.default))&&void 0!==t&&t.isInvulnerable();)this.targetEnemy=u.default.ins.getRandomEnemy();null!==this.targetEnemy?this.targetDir=this.targetEnemy.getPosition().sub(this.node.getPosition()).normalize():this.targetDir=cc.v2(p.default.PlayerNode.getPosition().sub(this.node.getPosition()).normalize()).rotateSelf(cc.misc.degreesToRadians(r.RandomUtils.getRandomInt(0,3))),this.rotateTimer=.2}}else this.targetDir=this.targetEnemy.getPosition().sub(this.node.getPosition()).normalize();this.moveDir=this.moveDir.lerp(this.targetDir,.08).normalize(),this.head.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x)),this.node.setPosition(this.node.getPosition().add(this.moveDir.mul(e*c.Config_Gaming_008.Long_MoveSpeed)))}},a([_(cc.Node)],t.prototype,"head",void 0),a([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/AudioMag":"AudioMag","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../enemy/BaseEnemy_008":"BaseEnemy_008"}],PlayerBullet_Phoenix_008:[function(e,t,o){"use strict";cc._RF.push(t,"d2fdao8+25OV6GWyI7NkDAF","PlayerBullet_Phoenix_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weapon=null,t.timer=0,t.moveSpeed=750,t.moveDir=cc.v2(-1,1),t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.moveDir_v=this.moveDir.rotate(1.57).normalize(),this.timer=1/.024*.1},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){c.default.isGamePause||(this.timer-=e,this.timer<=0?this.onRecovery():(this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed,this.moveDir=this.moveDir.lerp(this.moveDir_v,.024).normalize(),this.moveDir_v=this.moveDir.rotate(1.57).normalize(),this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))-90))},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(r.default.getInstance().playSound_intervalLimit(l.default.SEF_Long_Hit,50),this.weapon.onAttackEnemy(e.node))},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.KeyPath_Phoenix,this.node)},a([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerBullet_RollingLightning_008:[function(e,t,o){"use strict";cc._RF.push(t,"2d33elja91KCbmD/7E3REar","PlayerBullet_RollingLightning_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateNode=null,t.weapon=null,t.moveDir=cc.Vec2.ZERO,t.bulletSpeed=2e3,t.bulletAliveTime=3,t.bulletOffsetAngle=0,t.bulletOffsetRate=.1,t.curFrame=0,t.aliveTimer=0,t.updateFrame=2,t.opacityRate=1,t}return i(t,e),t.prototype.onInit=function(e,t,o,n,i,a){this.curFrame=r.RandomUtils.getRandomInt(0,this.stateNode.childrenCount-1),this.aliveTimer=0,this.weapon=e,this.moveDir=t,this.bulletSpeed=o,this.bulletAliveTime=n,this.opacityRate=1/n,this.bulletOffsetAngle=i,this.bulletOffsetRate=a,this.node.getComponent(cc.BoxCollider).enabled=!0,this.node.opacity=255},t.prototype.update=function(e){if(!c.default.isGamePause&&this.weapon){if(this.bulletOffsetRate>Math.random()&&this.moveDir.rotateSelf(cc.misc.degreesToRadians(Math.random()>.5?this.bulletOffsetAngle:-this.bulletOffsetAngle)),this.aliveTimer+=e,this.aliveTimer>=this.bulletAliveTime)return this.node.getComponent(cc.BoxCollider).enabled=!1,this.weapon=null,void s.default.getInstance().recoveryNode(l.default.Key_RollingLightning,this.node);this.node.opacity=255-255*cc.easing.expoIn(this.aliveTimer*this.opacityRate),this.curFrame++,this.updateFrame>0&&this.curFrame%this.updateFrame!=0||(this.node.setPosition(this.node.getPosition().add(this.moveDir.mul(e*this.bulletSpeed*this.updateFrame))),this.stateNode&&(this.stateNode.children.forEach(function(e){e.active=!1}),this.stateNode.children[this.curFrame/this.updateFrame%this.stateNode.childrenCount].active=!0))}},t.prototype.onCollisionEnter=function(e){this.weapon&&e.node.group===l.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},a([d(cc.Node)],t.prototype,"stateNode",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerBullet_RotatingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"4f98f9yGgdEfry9YdUfkNCd","PlayerBullet_RotatingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../Config_008"),l=e("../GamingData_008"),c=e("../utils/ZIndexUtils_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.indexOffset=420,t.weapon=null,t.rotateSpeed=240,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.rotateSpeed=t},t.prototype.lateUpdate=function(e){var t=this.node.getPosition().y+(this.node.angle%360>-180?this.indexOffset:0);this.node.zIndex=c.default.getFormatZIndex_centerPosY(t,l.default.PlayerNode.y),l.default.isGamePause||(this.node.angle-=e*this.rotateSpeed)},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Enemy&&(r.default.getInstance().playSound_intervalLimit(s.default.SEF_WEHit,50),this.weapon.onAttackEnemy(e.node))},a([d(cc.Integer)],t.prototype,"indexOffset",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../utils/ZIndexUtils_008":"ZIndexUtils_008"}],PlayerBullet_SFKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"b7aa7IcTn1JKJxyW4JMWNTD","PlayerBullet_SFKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=e("../../utils/ZIndexUtils_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aliveTimer=0,t.weapon=null,t.durCount=0,t.oPos=cc.Vec2.ZERO,t}return i(t,e),t.prototype.onInit=function(e){var t;this.weapon=e;var o=this.node.getChildByName("knife"),n=o.getChildByName("sprite"),i=null!==(t=this.node.aniType)&&void 0!==t?t:0,a=o.getChildByName("MotionTrail");switch(n.children.forEach(function(e){e.active=!1}),n.children[i]&&(n.children[i].active=!0),i){case 0:a.color=cc.color(255,255,255,255);break;case 1:a.color=cc.color(251,252,132,255)}o.active=!0,this.aliveTimer=0,this.durCount=this.weapon.getBulletDurCountBonus(),this.oPos=this.node.getPosition()},t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.lateUpdate=function(e){var t,o,n,i,a;if(!l.default.isGamePause){var u=null!==(t=this.node.speed)&&void 0!==t?t:500,p=null!==(o=this.node.amplitude)&&void 0!==o?o:0,d=null!==(n=this.node.dir)&&void 0!==n?n:cc.Vec2.RIGHT,f=(null!==(i=this.node.aliveTime)&&void 0!==i?i:3)+this.weapon.getBulletLifeBonus(),h=null!==(a=this.node.cycle)&&void 0!==a?a:1;this.aliveTimer+=e;var _=this.node.getPosition();this.node.setPosition(this.oPos.add(cc.v2(d.mul(this.aliveTimer*u)).rotate(cc.misc.degreesToRadians(Math.sin(this.aliveTimer*Math.PI*2/h)*p)))),this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.node.y-_.y,this.node.x-_.x)),f<this.aliveTimer&&(this.aliveTimer=0,r.default.getInstance().recoveryNode(s.default.Key_SFKnife,this.node)),this.node.zIndex=c.default.getFormatZIndex_centerPosY(this.node.y,l.default.PlayerNode.y)}},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Enemy&&(this.weapon.onAttackEnemy(e.node),this.durCount-=1,this.durCount<0&&this.onRecovery())},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.Key_SFKnife,this.node)},a([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../utils/ZIndexUtils_008":"ZIndexUtils_008"}],PlayerBullet_SixPulseHolySword_008:[function(e,t,o){"use strict";cc._RF.push(t,"bec8eiWkORD1q5pWwuo1i0b","PlayerBullet_SixPulseHolySword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.sfArr=[],t.moveSpeed=2e3,t.timer=0,t.durCount=0,t.weapon=null,t}var o;return i(t,e),o=t,t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.node.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.timer=4+this.weapon.getBulletLifeBonus(),this.durCount=this.weapon.getBulletDurCountBonus(),this.sprite.spriteFrame=this.sfArr[o.sfIndex++%this.sfArr.length],this.sprite.node.scaleX=0},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){c.default.isGamePause||(this.node.setPosition(this.node.getPosition().add(this.moveDir.mul(this.moveSpeed*e))),this.sprite.node.scaleX<2&&(this.sprite.node.scaleX+=6*e),this.timer-=e,this.timer<=0&&this.onRecovery())},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(r.default.getInstance().playSound_intervalLimit(l.default.SEF_SixPulseHolySword_Hit,100),this.weapon.onAttackEnemy(e.node),this.durCount-=1,this.durCount<0&&this.onRecovery())},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_SixPulseHolySword,this.node)},t.prototype.checkRebound=function(){var e=c.default.ScreenRect,t=this.node.getPosition().x,o=this.node.getPosition().y;t<e.x?this.moveDir.x=Math.abs(this.moveDir.x):t>=e.x+e.width&&(this.moveDir.x=-Math.abs(this.moveDir.x)),o<e.y?this.moveDir.y=Math.abs(this.moveDir.y):o>=e.y+e.height&&(this.moveDir.y=-Math.abs(this.moveDir.y)),this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))},t.sfIndex=0,a([d(cc.Sprite)],t.prototype,"sprite",void 0),a([d([cc.SpriteFrame])],t.prototype,"sfArr",void 0),o=a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerBullet_SummonSword_008:[function(e,t,o){"use strict";cc._RF.push(t,"8e1a5daqftGno9FI+ZwojoA","PlayerBullet_SummonSword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collider=null,t.isHurt=!1,t.state=0,t.lastState=-1,t.curAttTimes=0,t.weapon=null,t}return i(t,e),t.prototype.setHurtState=function(e){this.isHurt=e,this.collider.enabled=e},t.prototype.onCollisionEnter=function(e){this.isHurt&&e.node.group===r.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},a([c(cc.BoxCollider)],t.prototype,"collider",void 0),a([c(cc.Boolean)],t.prototype,"isHurt",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Config_008":"Config_008"}],PlayerBullet_Super_Frostbolt_008:[function(e,t,o){"use strict";cc._RF.push(t,"a91ecWdKSxPzLQs9DplnHPR","PlayerBullet_Super_Frostbolt_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/RandomUtils"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../Config_Gaming_008"),u=e("../../EnemyManager_008"),p=e("../../GamingData_008"),d=e("../../enemyBuff/EnemyBuff_MoveSpeedSlow_008"),f=e("./PlayerBullet_Super_Frostbolt_Samll_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=.2355;window.setFireRadiansInterval=function(e){g=e};var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.sprite=null,t.weapon=null,t.moveSpeed=700,t.state=0,t.currRadians=0,t.lastRadians=0,t.timer=0,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.timer=1.2,this.currRadians=r.RandomUtils.getRandomRadians(),this.lastRadians=this.currRadians,this.currRadians=r.RandomUtils.getRandomInt(0,3),this.spine.setAnimation(0,"idle",!0),this.sprite.opacity=255,this.state=0},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){if(!p.default.isGamePause&&(this.timer-=e,0===this.state)){if(this.currRadians+=1,this.currRadians%1==0&&this.onFire(this.lastRadians+Math.floor(this.currRadians/1)*g),this.timer<=0)return this.onEndFire(),void this.onPreRecovery();this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed}},t.prototype.onFire=function(e){var t=s.default.getInstance().getNodeNotNull(l.default.Key_Super_Frostbolt_Small);if(null!==t){t.setParent(p.default.GameObjNode),t.setPosition(this.node.getPosition()),t.angle=cc.misc.radiansToDegrees(e);var o=cc.v2(Math.cos(e),Math.sin(Math.sin(e)));t.getComponent(f.default).onInit(this.weapon,o)}},t.prototype.onEndFire=function(){for(var e=2*Math.PI/36,t=0;t<36;t++){var o=this.currRadians+e*t;this.onFire(o)}},t.prototype.onPreRecovery=function(){this.state=1,this.sprite.opacity=0,this.spine.setAnimation(0,"boom",!1),this.scheduleOnce(this.onRecovery,.53)},t.prototype.onCollisionEnter=function(e){1!==this.state&&e.node.group===l.default.STR_NodeGroup_Enemy&&(this.weapon.onAttackEnemy(e.node),r.RandomUtils.getRandomProbability_10000()<c.Config_Gaming_008.Frostbolt_MoveSpeedSlowPro&&(u.default.ins.isBoss(e.node)||e.node.emit(l.default.e_OnTryAddBuffToEnemy,d.default,[this.getBuffTime(),c.Config_Gaming_008.EnemyBuff_CooldownTime_MoveSpeedSlow])))},t.prototype.getBuffTime=function(){return c.Config_Gaming_008.Frostbolt_MoveSpeedSlowTime+this.weapon.getExceptionStateTimeBonus()},t.prototype.onRecovery=function(){this.unscheduleAllCallbacks(),s.default.getInstance().recoveryNode(l.default.Key_Super_Frostbolt,this.node)},a([y(sp.Skeleton)],t.prototype,"spine",void 0),a([y(cc.Node)],t.prototype,"sprite",void 0),a([_],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../enemyBuff/EnemyBuff_MoveSpeedSlow_008":"EnemyBuff_MoveSpeedSlow_008","./PlayerBullet_Super_Frostbolt_Samll_008":"PlayerBullet_Super_Frostbolt_Samll_008"}],PlayerBullet_Super_Frostbolt_Samll_008:[function(e,t,o){"use strict";cc._RF.push(t,"93009iJnpdB4bPJOHuH5dP5","PlayerBullet_Super_Frostbolt_Samll_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/RandomUtils"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../Config_Gaming_008"),u=e("../../EffectMag_008"),p=e("../../EnemyManager_008"),d=e("../../GamingData_008"),f=e("../../enemyBuff/EnemyBuff_MoveSpeedSlow_008"),h=e("../../misc/EffectNode_008"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weapon=null,t.moveSpeed=2200,t.timer=0,t.durCount=0,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.timer=1.5+this.weapon.getBulletLifeBonus(),this.durCount=this.weapon.getBulletDurCountBonus()},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){d.default.isGamePause||(this.timer-=e,this.timer<=0?this.onRecovery():(this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed))},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(this.weapon.onAttackEnemy(e.node),r.RandomUtils.getRandomProbability_10000()<c.Config_Gaming_008.Frostbolt_MoveSpeedSlowPro&&(p.default.ins.isBoss(e.node)||e.node.emit(l.default.e_OnTryAddBuffToEnemy,f.default,[this.getBuffTime(),c.Config_Gaming_008.EnemyBuff_CooldownTime_MoveSpeedSlow])),this.durCount-=1,this.durCount<0&&(this.onPlayHitEffect(),this.onRecovery()))},t.prototype.getBuffTime=function(){return c.Config_Gaming_008.Frostbolt_MoveSpeedSlowTime+this.weapon.getExceptionStateTimeBonus()},t.prototype.onPlayHitEffect=function(){var e=s.default.getInstance().getNodeNotNull(l.default.KeyPath_HitEF_Super_Frostbolt);null!==e&&(e.setParent(u.default.ins.effectNode_stun),e.setPosition(this.node.getPosition()),e.getComponent(h.default).onInitByNodePoolKey(l.default.KeyPath_HitEF_Super_Frostbolt))},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_Super_Frostbolt_Small,this.node)},a([y],t)}(cc.Component));o.default=g,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../EffectMag_008":"EffectMag_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../enemyBuff/EnemyBuff_MoveSpeedSlow_008":"EnemyBuff_MoveSpeedSlow_008","../../misc/EffectNode_008":"EffectNode_008"}],PlayerBullet_Super_Lightning_008:[function(e,t,o){"use strict";cc._RF.push(t,"05290vB5apLP78S/OcITd9w","PlayerBullet_Super_Lightning_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anim=null,t.weapon=null,t.targetEnemy=null,t.func_small=null,t.currAniState=null,t.isFireSmall=!1,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.weapon=e,this.targetEnemy=t,this.func_small=o,this.timer=.4,this.isFireSmall=!1,this.currAniState=this.anim.play()},t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){l.default.isGamePause?null!==this.currAniState&&(this.currAniState.speed=0):(null!==this.currAniState&&(this.currAniState.speed=1),this.timer-=e,this.isFireSmall||this.timer<=.3&&(this.isFireSmall=!0,this.onFire()),this.timer<=0&&this.onRecovery())},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.Key_Super_Lightning,this.node)},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},t.prototype.onFire=function(){var e,t=this.node.getPosition();null===(e=this.func_small)||void 0===e||e.call(this,this.targetEnemy,t)},a([p(cc.Animation)],t.prototype,"anim",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],PlayerBullet_Super_Lightning_Small_008:[function(e,t,o){"use strict";cc._RF.push(t,"ce522bRMYlLeq8lARaSG07h","PlayerBullet_Super_Lightning_Small_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weapon=null,t.targetEnemy=null,t.timer=0,t.isAttacked=!1,t.sprite=null,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.weapon=e,this.initPos=t,this.targetEnemy=o,this.onRefreshLighting(),this.isAttacked=!1,this.timer=.6},t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){l.default.isGamePause||(null!==this.targetEnemy.parent?(this.onRefreshLighting(),this.timer-=e,!this.isAttacked&&this.timer<=.3&&this.onAttackEnemy(),this.timer<=0&&this.onRecovery()):this.onRecovery())},t.prototype.onAttackEnemy=function(){this.isAttacked=!0,this.weapon.onAttackEnemy(this.targetEnemy)},t.prototype.onRefreshLighting=function(){var e=this.targetEnemy.getPosition().sub(this.initPos),t=e.mag();e.normalizeSelf(),this.sprite.height=t,this.sprite.angle=cc.misc.radiansToDegrees(Math.atan2(e.y,e.x))+90},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.Key_Super_Lightning_Small,this.node)},a([p(cc.Node)],t.prototype,"sprite",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],PlayerBullet_Super_LionRoar_008:[function(e,t,o){"use strict";cc._RF.push(t,"37c67s4KfpL3auEoZCpFuu7","PlayerBullet_Super_LionRoar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/RandomUtils"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../Config_Gaming_008"),u=e("../../EnemyManager_008"),p=e("../../GamingData_008"),d=e("../../PotMag_008"),f=e("../../enemyBuff/EnemyBuff_Stun_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.weapon=null,t.timer=0,t.isAttack=!1,t}return i(t,e),t.prototype.onInit=function(e){this.weapon=e,this.timer=0,this.spine.setAnimation(0,"animation",!1),this.isAttack=!1},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){p.default.isGamePause?this.spine.timeScale=0:(this.spine.timeScale=.75,this.timer+=e*this.spine.timeScale,!this.isAttack&&this.timer>.2&&(this.isAttack=!0,this.onAttack()),this.timer>=.9&&this.onRecovery())},t.prototype.lerp=function(e,t,o){return e+(t-e)*o},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_Super_LionRoar,this.node)},t.prototype.onAttack=function(){for(var e=400*this.node.scale,t=u.default.ins.getEnemyInRange(this.node.getPosition(),e),o=0;o<t.length;o++)this.weapon.onAttackEnemy(t[o]),r.RandomUtils.getRandomProbability_10000()<c.Config_Gaming_008.LionRoar_StunPro&&(u.default.ins.isBoss(t[o])||t[o].emit(l.default.e_OnTryAddBuffToEnemy,f.default,[this.getStunTime(),c.Config_Gaming_008.EnemyBuff_CooldownTime_Stun]));var n=d.default.ins.getPotInRange(this.node.getPosition(),e);for(o=0;o<n.length;o++)n[o].emit(l.default.e_OnOpenPot)},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},t.prototype.getStunTime=function(){var e,t;return null!==(t=c.Config_Gaming_008.LionRoar_StunTime+(null===(e=this.weapon)||void 0===e?void 0:e.getExceptionStateTimeBonus()))&&void 0!==t?t:0},a([y(sp.Skeleton)],t.prototype,"spine",void 0),a([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../PotMag_008":"PotMag_008","../../enemyBuff/EnemyBuff_Stun_008":"EnemyBuff_Stun_008"}],PlayerBullet_Super_LionRoar_Small_008:[function(e,t,o){"use strict";cc._RF.push(t,"22a72nChLpLO68KwMtf9a+x","PlayerBullet_Super_LionRoar_Small_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../GamingData_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head=null,t.weapon=null,t.timer=0,t.moveSpeed=1080,t.frequency=16,t.amplitude=50,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.startPos=this.node.getPosition(),this.moveDir=t,this.moveDir_v=this.moveDir.rotate(1.57).normalize(),this.head.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.timer=0},t.prototype.onEnable=function(){this.node.on(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(s.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){if(!l.default.isGamePause){this.timer+=e;var t=this.timer*this.frequency,o=Math.sin(t),n=this.amplitude*this.moveDir_v.x*o,i=this.amplitude*this.moveDir_v.y*o,a=this.node.getPosition();this.node.x=this.startPos.x+this.moveDir.x*this.moveSpeed*this.timer+n,this.node.y=this.startPos.y+this.moveDir.y*this.moveSpeed*this.timer+i;var r=this.node.getPosition().sub(a).normalize();this.head.angle=cc.misc.radiansToDegrees(Math.atan2(r.y,r.x)),this.timer>=3&&this.onRecovery()}},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.Key_Super_LionRoar_Small,this.node)},t.prototype.onCollisionEnter=function(e){e.node.group===s.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},a([p(cc.Node)],t.prototype,"head",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],PlayerBullet_Super_Phoenix_008:[function(e,t,o){"use strict";cc._RF.push(t,"82881XMGGpOzYFR2+fhZDQY","PlayerBullet_Super_Phoenix_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../GamingData_008"),u=e("./PlayerBullet_Super_Phoenix_Ground_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weapon=null,t.timer=0,t.moveSpeed=2e3,t.life=2.2,t.moveDis=0,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.node.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x))-90,this.timer=this.life,this.moveDis=0},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){c.default.isGamePause||(this.timer-=e,this.timer<=0?this.onRecovery():(this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed,this.moveDis+=e*this.moveSpeed,this.moveDis>=0&&(this.moveDis-=328*this.node.scaleY,this.onFire())))},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(r.default.getInstance().playSound_intervalLimit(l.default.SEF_Long_Hit,50),this.weapon.onAttackEnemy(e.node))},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.KeyPath_Super_Phoenix,this.node)},t.prototype.onFire=function(){var e=s.default.getInstance().getNodeNotNull(l.default.KeyPath_Super_Phoenix_ground);null!==e&&(e.setParent(c.default.GameObjNode),e.setPosition(this.node.getPosition()),e.angle=this.node.angle,e.scale=this.node.scale,e.zIndex=cc.macro.MIN_ZINDEX+10,e.getComponent(u.default).onInit(this.weapon,this.moveSpeed,462*this.node.scaleY/this.moveSpeed))},a([d],t)}(cc.Component));o.default=f,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","./PlayerBullet_Super_Phoenix_Ground_008":"PlayerBullet_Super_Phoenix_Ground_008"}],PlayerBullet_Super_Phoenix_Ground_008:[function(e,t,o){"use strict";cc._RF.push(t,"1a321xUv+FFILs3p4lPpw9l","PlayerBullet_Super_Phoenix_Ground_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/MathUtils"),s=e("../../../../mag/AudioMag"),l=e("../../../../mag/NodePoolManager"),c=e("../../Config_008"),u=e("../../Config_Gaming_008"),p=e("../../GamingData_008"),d=e("../../enemyBuff/EnemyBuff_Burn_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collider=null,t.sprite=null,t.weapon=null,t.timer=0,t.colliderTimer=0,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.weapon=e,this.phoenixMoveSpeed=t,this.timer=5+o,this.colliderTimer=.2,this.collider.enabled=!1,this.sprite.height=0,this.sprite.opacity=255,this.updateCollider()},t.prototype.onEnable=function(){this.node.on(c.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(c.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){p.default.isGamePause||(this.timer-=e,this.timer<=0?this.onRecovery():(this.timer>=5&&(this.sprite.height+=e*this.phoenixMoveSpeed/this.node.scaleY,this.updateCollider()),this.timer<=2?(this.sprite.opacity=Math.min(r.default.lerp(255,0,1-this.timer/2),255),this.collider.enabled=!1):(this.colliderTimer+=e,this.colliderTimer>=.7?(this.collider.enabled=!0,this.colliderTimer=0):this.colliderTimer>.2&&(this.collider.enabled=!1))))},t.prototype.updateCollider=function(){this.collider.size.height=this.sprite.height,this.collider.offset.y=this.sprite.height/2},t.prototype.onCollisionEnter=function(e){e.node.group===c.default.STR_NodeGroup_Enemy&&(s.default.getInstance().playSound_intervalLimit(c.default.SEF_Long_Hit,50),this.weapon.onAttackEnemy(e.node),e.node.emit(c.default.e_OnTryAddBuffToEnemy,d.default,[this.getBuffDurationTime(),u.Config_Gaming_008.EnemyBuff_CooldownTime_Burn,this.getBuffPower(),u.Config_Gaming_008.EnemyBuff_Burn_AttackInterval]))},t.prototype.onRecovery=function(){l.default.getInstance().recoveryNode(c.default.KeyPath_Super_Phoenix_ground,this.node)},t.prototype.getBuffDurationTime=function(){return 5+this.weapon.getExceptionStateTimeBonus()},t.prototype.getBuffPower=function(){return this.weapon.getPower()*(u.Config_Gaming_008.EnemyBuff_Burn_PowerRatio+this.weapon.getExceptionStatePowerbonus())},a([_(cc.BoxCollider)],t.prototype,"collider",void 0),a([_(cc.Node)],t.prototype,"sprite",void 0),a([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../Utils/MathUtils":"MathUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../GamingData_008":"GamingData_008","../../enemyBuff/EnemyBuff_Burn_008":"EnemyBuff_Burn_008"}],PlayerBullet_Super_RotatingKnife_Flying_008:[function(e,t,o){"use strict";cc._RF.push(t,"7a469M4n0JNKJU9l4U8H1rN","PlayerBullet_Super_RotatingKnife_Flying_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../GamingData_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weapon=null,t.moveDir=cc.Vec2.UP,t}return i(t,e),t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.timer=2},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){c.default.isGamePause||(this.node.angle+=1200*e,this.node.x+=this.moveDir.x*e*800,this.node.y+=this.moveDir.y*e*800,this.timer-=e,this.timer<=0&&this.onRecovery())},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(r.default.getInstance().playSound_intervalLimit(l.default.SEF_WEHit,50),this.weapon.onAttackEnemy(e.node))},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_Super_Knife_Flying,this.node)},a([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008"}],PlayerBullet_Super_SixPulseHolySword_008:[function(e,t,o){"use strict";cc._RF.push(t,"6a3a6YKXstA/aKGaMRtikD+","PlayerBullet_Super_SixPulseHolySword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/NodePoolManager"),l=e("../../Config_008"),c=e("../../GamingData_008"),u=e("../../misc/MotionTrail"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.motionTrail=null,t.sfArr=[],t.moveSpeed=2e3,t.timer=0,t.weapon=null,t}var o;return i(t,e),o=t,t.prototype.onInit=function(e,t){this.weapon=e,this.moveDir=t,this.node.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.timer=4+this.weapon.getBulletLifeBonus(),this.motionTrail.$spriteFrame=this.sfArr[o.sfIndex++%this.sfArr.length]},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){c.default.isGamePause||(this.node.x+=this.moveDir.x*e*this.moveSpeed,this.node.y+=this.moveDir.y*e*this.moveSpeed,this.timer-=e,this.timer<=0&&this.onRecovery(),this.checkRebound())},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&(r.default.getInstance().playSound_intervalLimit(l.default.SEF_SixPulseHolySword_Hit,100),this.weapon.onAttackEnemy(e.node))},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_Super_SixPulseHolySword,this.node)},t.prototype.checkRebound=function(){var e=c.default.ScreenRect,t=this.node.x,o=this.node.y;t<e.x?this.moveDir.x=Math.abs(this.moveDir.x):t>=e.x+e.width&&(this.moveDir.x=-Math.abs(this.moveDir.x)),o<e.y?this.moveDir.y=Math.abs(this.moveDir.y):o>=e.y+e.height&&(this.moveDir.y=-Math.abs(this.moveDir.y)),this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))},t.sfIndex=0,a([f(u.default)],t.prototype,"motionTrail",void 0),a([f([cc.SpriteFrame])],t.prototype,"sfArr",void 0),o=a([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../misc/MotionTrail":"MotionTrail"}],PlayerBullet_SwordFormation2_Circle_008:[function(e,t,o){"use strict";cc._RF.push(t,"1fc8aLntxBAZYyDff+FSbw1","PlayerBullet_SwordFormation2_Circle_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/AudioMag"),l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=e("./PlayerBullet_SwordFormation_Sword_008"),d=cc._decorator,f=d.ccclass,h=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.state=0,t.currFireCount=0,t.timer=0,t.rotatingTimer=0,t.weapon=null,t.fallIndexArr=null,t.radius=170,t.bulletRadius=50,t}return i(t,e),t.prototype.onInit=function(e){this.weapon=e,this.bulletCount=3+this.weapon.getSkillLv(),this.radiansInterval=2*Math.PI/(this.bulletCount-1),this.state=0,this.currFireCount=0,this.timer=.1,this.rotatingTimer=1,this.sprite.angle=360*Math.random(),this.sprite.scale=0,this.fallIndexArr=[];for(var t=0;t<this.bulletCount;t++)this.fallIndexArr.push(t);s.default.getInstance().playSound(c.default.SEF_SwordFormation)},t.prototype.getRadnomFallIndex=function(){var e=r.RandomUtils.getRandomFormArray(this.fallIndexArr),t=this.fallIndexArr[e];return this.fallIndexArr.splice(e,1),t},t.prototype.onEnable=function(){this.node.on(c.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(c.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){u.default.isGamePause||(0===this.state&&(this.timer-=e,this.timer<=0&&this.onFire()),this.rotatingTimer-=e,this.sprite.angle-=180*e,this.sprite.scale<1&&(this.sprite.scale+=2.5*e))},t.prototype.onFire=function(){var e=!1;this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.state=-1,e=!0):this.timer=.1;var t=l.default.getInstance().getNodeNotNull(c.default.Key_SwordFormation_Sword);if(null!==t){t.setParent(u.default.GameObjNode);var o=this.radiansInterval*this.getRadnomFallIndex()+Math.random()*this.radiansInterval*.5,n=r.RandomUtils.getRandomInt(1.5*this.bulletRadius,this.radius-this.bulletRadius);t.setPosition(this.node.x+this.node.scale*n*Math.cos(o),this.node.y+this.node.scale*n*Math.sin(o)),t.scale=this.node.scale,t.getComponent(p.default).onInit(this.weapon,e?this.onRecovery.bind(this):null)}},t.prototype.onRecovery=function(){l.default.getInstance().recoveryNode(c.default.Key_SwordFormation_Bg2,this.node)},a([h(cc.Node)],t.prototype,"sprite",void 0),a([f],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","./PlayerBullet_SwordFormation_Sword_008":"PlayerBullet_SwordFormation_Sword_008"}],PlayerBullet_SwordFormation_Sword_008:[function(e,t,o){"use strict";cc._RF.push(t,"01696Mv/OhHd5QNJVLd9NoX","PlayerBullet_SwordFormation_Sword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hole=null,t.ef=null,t.efAnim=null,t.swordParent=null,t.sword=null,t.collider=null,t.weapon=null,t.recoveryBgNodeFunc=null,t.timer=0,t.state=0,t}return i(t,e),t.prototype.onLoad=function(){this.holeInitPos=this.hole.getPosition(),this.holeInitScale=this.hole.scale},t.prototype.onInit=function(e,t){this.weapon=e,this.recoveryBgNodeFunc=t,this.collider.enabled=!1,this.hole.opacity=0,this.ef.opacity=0,this.hole.removeFromParent(),this.hole.setParent(c.default.GameObjNode),this.hole.setPosition(this.node.getPosition().add(this.holeInitPos)),this.hole.scale=this.node.scale*this.holeInitScale,this.hole.zIndex=cc.macro.MIN_ZINDEX+10,this.ef.scale=2*this.node.scale,this.state=0,this.timer=.2,this.swordParent.angle=r.RandomUtils.getRandomInt(-30,30),this.sword.node.y=600,this.sword.fillRange=-1},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.update=function(e){var t;c.default.isGamePause||(this.timer-=e,0===this.state?(this.sword.node.y=this.lerp(600,0,(.2-this.timer)/.2),this.timer<=0&&this.onSwordFallOver()):1===this.state?this.timer<=0&&this.onWaitRecovery():2===this.state&&this.timer<=0&&(this.state=3,null===(t=this.recoveryBgNodeFunc)||void 0===t||t.call(this),this.onRecovery()))},t.prototype.onSwordFallOver=function(){this.sword.fillRange=-.8,this.hole.opacity=255,this.ef.opacity=255,this.efAnim.play(),this.collider.enabled=!0,this.state=1,this.timer=.25},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},t.prototype.onWaitRecovery=function(){this.state=2,this.timer=1,this.collider.enabled=!1},t.prototype.onRecovery=function(){this.hole.removeFromParent(),this.hole.setParent(this.node),s.default.getInstance().recoveryNode(l.default.Key_SwordFormation_Sword,this.node)},t.prototype.lerp=function(e,t,o){return o<0&&(o=0),o>1&&(o=1),e+(t-e)*o},a([d(cc.Node)],t.prototype,"hole",void 0),a([d(cc.Node)],t.prototype,"ef",void 0),a([d(cc.Animation)],t.prototype,"efAnim",void 0),a([d(cc.Node)],t.prototype,"swordParent",void 0),a([d(cc.Sprite)],t.prototype,"sword",void 0),a([d(cc.CircleCollider)],t.prototype,"collider",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerBullet_TenThousandSnakes_008:[function(e,t,o){"use strict";cc._RF.push(t,"a3916yR9wdPqaHI6lPK4By7","PlayerBullet_TenThousandSnakes_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Utils/RandomUtils"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=e("../GamingData_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.amplitude=200,t.moveSpeed=2e3,t.moveDir=cc.v2(-1,1),t.head=null,t.timer=0,t.offset=0,t.frequency=8,t.weapon=null,t}return i(t,e),t.prototype.onLoad=function(){this.head=this.node.getChildByName("head")},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this)},t.prototype.onInit=function(e,t,o){this.weapon=e,this.startPos=t,this.moveDir=o,this.moveDir_v=this.moveDir.rotate(1.57).normalize(),this.timer=0,this.offset=Math.random()*Math.PI*2,this.amplitude=r.RandomUtils.getRandomInt(10,50),this.frequency=r.RandomUtils.getRandomInt(3,20)},t.prototype.update=function(e){if(!c.default.isGamePause){if(this.timer>4)return this.timer+=e,void(this.timer>6&&this.onRecovery());this.timer+=e,this.moveSpeed=500;var t=this.timer*this.frequency,o=Math.sin(t+this.offset),n=this.amplitude*this.moveDir_v.x*o,i=this.amplitude*this.moveDir_v.y*o,a=this.node.getPosition();this.node.x=this.startPos.x+this.moveDir.x*this.moveSpeed*this.timer+n,this.node.y=this.startPos.y+this.moveDir.y*this.moveSpeed*this.timer+i;var r=this.node.getPosition().sub(a).normalize();this.head.angle=cc.misc.radiansToDegrees(Math.atan2(r.y,r.x))}},t.prototype.onRecovery=function(){s.default.getInstance().recoveryNode(l.default.Key_TenThousandSnakes,this.node)},t.prototype.onCollisionEnter=function(e){e.node.group===l.default.STR_NodeGroup_Enemy&&this.weapon.onAttackEnemy(e.node)},a([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],PlayerInfoTips_008:[function(e,t,o){"use strict";cc._RF.push(t,"390e2KQjrxFYrrCjU5aFYb7","PlayerInfoTips_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Config_008"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.up=null,t.down=null,t}return i(t,e),t.prototype.onLoad=function(){this.up=this.node.getChildByName("up"),this.down=this.node.getChildByName("down"),this.up.active=!1,this.down.active=!1},t.prototype.onEnable=function(){this.node.on(r.default.e_ShowPlayerInfoChangeTips,this.onPlayAni,this)},t.prototype.onDisable=function(){this.node.off(r.default.e_ShowPlayerInfoChangeTips,this.onPlayAni,this)},t.prototype.onPlayAni=function(e){var t=this;e&&0!==e&&(e>0?(this.up.active=!0,this.down.active=!1,cc.tween(this.up).to(.233,{y:8}).to(.1,{y:0}).union().repeat(3).call(function(){t.up.active=!1}).start()):(this.up.active=!1,this.down.active=!0,cc.tween(this.down).to(.233,{y:-8}).to(.1,{y:0}).union().repeat(3).call(function(){t.down.active=!1}).start()))},a([l],t)}(cc.Component));o.default=c,cc._RF.pop()},{"../../Config_008":"Config_008"}],PlayerInfoUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"bb7384im/tIgbWMDtT7HXHU","PlayerInfoUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Config_008"),i=e("../entities/Enums_008"),a=e("./FoxDateUtils_008"),r=e("./XiuXianUtils_008"),s=function(){function e(){}return e.onLoadConfigData=function(){},e.onInitInfoScoreMap=function(){this.infoScoreArr.set(i.InfoType_008.DamagePoint,5),this.infoScoreArr.set(i.InfoType_008.HP,1.5),this.infoScoreArr.set(i.InfoType_008.Armor,1.1),this.infoScoreArr.set(i.InfoType_008.MoveSpeed,1.1),this.infoScoreArr.set(i.InfoType_008.RestoreLife,1.5),this.infoScoreArr.set(i.InfoType_008.ExpBonus,.2),this.infoScoreArr.set(i.InfoType_008.Lucky,.2),this.infoNameArr.set(i.InfoType_008.DamagePoint,"\u653b\u3000\u3000\u51fb"),this.infoNameArr.set(i.InfoType_008.HP,"\u8840\u3000\u3000\u91cf"),this.infoNameArr.set(i.InfoType_008.Armor,"\u9632\u3000\u3000\u5fa1"),this.infoNameArr.set(i.InfoType_008.MoveSpeed,"\u79fb\u52a8\u901f\u5ea6"),this.infoNameArr.set(i.InfoType_008.RestoreLife,"\u751f\u547d\u6062\u590d"),this.infoNameArr.set(i.InfoType_008.ExpBonus,"\u4fee\u4e3a\u52a0\u6210"),this.infoNameArr.set(i.InfoType_008.Lucky,"\u63a2\u5b9d\u52a0\u6210"),this.infoNameArr.set(i.InfoType_008.CritProb,"\u66b4\u51fb\u6982\u7387"),this.infoNameArr.set(i.InfoType_008.CritPowerBonus,"\u66b4\u51fb\u4f24\u5bb3"),this.infoNameArr.set(i.InfoType_008.InjuryFree_range,"\u8fdc\u7a0b\u514d\u4f24"),this.infoNameArr.set(i.InfoType_008.InjuryFree_melee,"\u8fd1\u6218\u514d\u4f24")},e.getBaseScoreByInfoType=function(e){var t;return null!==(t=this.infoScoreArr.get(e))&&void 0!==t?t:0},e.getInfoNameByInfoType=function(e){var t;return null!==(t=this.infoNameArr.get(e))&&void 0!==t?t:"\u795e\u79d8\u5c5e\u6027"},e.getTotalScore=function(e){for(var t=0,o=n.PlayerLevelInfoConfigMap.get(e.lv),i=[o.damagePoint,o.maxHp,o.armor,o.moveSpeed,o.restoreLife,o.expBonus,o.lucky],s=0;s<i.length;s++)t+=this.getBaseScoreByInfoType(s)*i[s];for(s=0;s<e.equipmentDataArr.length;s++)t+=this.getEquipmentScore(e.equipmentDataArr[s]);return t+=r.default.getTotalScore(e),t+=a.default.getTotalScore(e),Math.ceil(t)},e.getEquipmentScore=function(e){if(null===e)return 0;for(var t=0,o=0;o<e.infoTypeArr.length;o++)t+=this.getBaseScoreByInfoType(e.infoTypeArr[o])*e.infoValueArr[o];return Math.ceil(t)},e.getSomeOnePlayerEquipmentInfoTotalValue=function(e,t){for(var o=0,n=0;n<e.equipmentDataArr.length;n++){var i=e.equipmentDataArr[n];if(null!==i)for(var a=0;a<i.infoTypeArr.length;a++)i.infoTypeArr[a]===t&&(o+=i.infoValueArr[a])}return o},e.getPlayerInfo_Lv=function(e,t){var o=n.PlayerLevelInfoConfigMap.get(e),a=0;switch(t){case i.InfoType_008.DamagePoint:a=o.damagePoint;break;case i.InfoType_008.HP:a=o.maxHp;break;case i.InfoType_008.Armor:a=o.armor;break;case i.InfoType_008.MoveSpeed:a=o.moveSpeed;break;case i.InfoType_008.RestoreLife:a=o.restoreLife;break;case i.InfoType_008.ExpBonus:a=o.expBonus;break;case i.InfoType_008.Lucky:a=o.lucky;break;case i.InfoType_008.CritProb:case i.InfoType_008.CritPowerBonus:case i.InfoType_008.InjuryFree_range:case i.InfoType_008.InjuryFree_melee:default:a=0}return a},e.getPlayerInfoByInfoType=function(e,t){var o=this.getPlayerInfo_Lv(e.lv,t);return o+=this.getSomeOnePlayerEquipmentInfoTotalValue(e,t),(o+=r.default.getInfoValueByInfoType(t,e))+a.default.getInfoByPlayerData(e,t)},e.infoScoreArr=new Map,e.infoNameArr=new Map,e}();o.default=s,s.onInitInfoScoreMap(),cc._RF.pop()},{"../Config_008":"Config_008","../entities/Enums_008":"Enums_008","./FoxDateUtils_008":"FoxDateUtils_008","./XiuXianUtils_008":"XiuXianUtils_008"}],PlayerWeapon_FallSword_008:[function(e,t,o){"use strict";cc._RF.push(t,"2ba92sKlpFAhYUFmK1Z/fr+","PlayerWeapon_FallSword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../playerBullet/PlayerBullet_SwordFormation_Sword_008"),f=e("./BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t.state=0,t.currFireCount=0,t.targetEnemyNode=null,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,this.timer=0,this.currFireCount=0,l.default.getInstance().isHasNodePool(c.default.Key_SwordFormation_Sword)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_SwordFormation_Sword,prePath:c.default.Path_SwordFormation_Sword,count:5})];case 1:e.sent(),e.label=2;case 2:return this.state=0,[2]}})})},t.prototype.update=function(e){p.default.isGamePause||(this.timer-=e,0===this.state?this.timer<=0&&this.onStartFire():1===this.state&&this.timer<=0&&this.onFire())},t.prototype.onStartFire=function(){this.state=1,this.targetEnemyNode=null,this.refreshTargetEnemyNode(),this.onFire()},t.prototype.refreshTargetEnemyNode=function(){null!==this.targetEnemyNode&&null!==this.targetEnemyNode.parent||(this.targetEnemyNode=u.default.ins.getNearestEnemy())},t.prototype.onFire=function(){this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.currFireCount=0,this.state=0,this.timer=this.fireCoolDownTime):this.timer=.2;var e=l.default.getInstance().getNodeNotNull(c.default.Key_SwordFormation_Sword);if(null!==e){if(e.setParent(p.default.GameObjNode),this.refreshTargetEnemyNode(),null!==this.targetEnemyNode)e.setPosition(this.targetEnemyNode.getPosition());else{var t=2*Math.PI/(this.bulletCount-1)*this.currFireCount,o=p.default.PlayerNode.getPosition();e.setPosition(o.x+400*Math.cos(t),o.y+400*Math.sin(t))}e.scale=this.bulletScale,e.getComponent(d.default).onInit(this,null)}},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_SwordFormation_Sword_008":"PlayerBullet_SwordFormation_Sword_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_FlowersUAV_008:[function(e,t,o){"use strict";cc._RF.push(t,"932c40i7xZA4YHLfU5/O8nX","PlayerWeapon_FlowersUAV_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../playerBullet/PlayerBullet_FlowersUAV_008"),f=e("./BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t.initRadians=0,t.fireCenterPos=null,t.currRadians=0,t.radiansInterval=.18,t.radius=500,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(){return this.state=-1,l.default.getInstance().isHasNodePool(c.default.KeyPath_FlowersUAV_Small)||l.default.getInstance().onInitNodePool({key:c.default.KeyPath_FlowersUAV_Small,prePath:c.default.KeyPath_FlowersUAV_Small,count:30}),this.state=0,this.timer=0,[2]})})},t.prototype.update=function(e){p.default.isGamePause||(this.timer-=e,0===this.state?this.timer<=0&&this.onPreFire():1===this.state&&this.timer<=0&&this.onFire())},t.prototype.onPreFire=function(){this.state=1,this.currFireCount=0;var e=u.default.ins.getNearestEnemyPos();if(null!==e){var t=e.sub(p.default.PlayerNode.getPosition()).normalize();this.initRadians=Math.atan2(t.y,t.x)}else this.initRadians=2*Math.PI*Math.random();this.initRadians=this.initRadians-.5*this.bulletCount*this.radiansInterval,this.currRadians=this.initRadians,this.fireCenterPos=p.default.PlayerNode.getPosition().add(cc.v2(0,100)),this.onFire()},t.prototype.onFire=function(){this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.state=0,this.timer=this.fireCoolDownTime):this.timer=.05,this.fireCenterPos=p.default.PlayerNode.getPosition().add(cc.v2(0,100));var e=l.default.getInstance().getNodeNotNull(c.default.KeyPath_FlowersUAV_Small);if(null!==e){e.setParent(p.default.GameObjNode);var t=p.default.PlayerNode.getPosition().add(cc.v2(0,100));e.setPosition(t),e.zIndex=cc.macro.MAX_ZINDEX-500,this.currRadians+=this.radiansInterval;var o=this.currRadians,n=this.radius,i=cc.v2(this.fireCenterPos.x+n*Math.cos(o),this.fireCenterPos.y+n*Math.sin(o));e.getComponent(d.default).onInit(this,i,this.currFireCount%2==0?1:-1)}},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_FlowersUAV_008":"PlayerBullet_FlowersUAV_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_FlyingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"40f5fJ0+tBLyKEk6kfjYQW8","PlayerWeapon_FlyingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Utils/RandomUtils"),c=e("../../../mag/NodePoolManager"),u=e("../Config_008"),p=e("../GamingData_008"),d=e("../playerBullet/PlayerBullet_FlyingKnife_008"),f=e("./BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletAliveTime=3,t.lastMoveDir=cc.Vec2.RIGHT,t.range=120,t.bulletKey=u.default.Key_Normal_FlyingKnife,t.bulletPath=u.default.Path_Normal_FlyingKnife,t.curBulletCount=0,t.state=0,t.timer=0,t}return i(t,e),t.prototype.update=function(e){if(!p.default.isGamePause){var t=p.default.PlayerMoveDir.clone();t.equals(cc.Vec2.ZERO)||(this.lastMoveDir=t),this.timer-=e,0===this.state?this.timer<=0&&this.onFire():1===this.state&&this.timer<=0&&(this.state=0)}},t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.lastMoveDir=cc.Vec2.RIGHT,this.state=-1,this.timer=0,c.default.getInstance().isHasNodePool(this.bulletKey)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:this.bulletKey,prePath:this.bulletPath,count:1})];case 1:e.sent(),e.label=2;case 2:return this.state=0,[2]}})})},t.prototype.onFire=function(){this.curBulletCount++,this.timer=.1,this.curBulletCount>=this.bulletCount&&(this.state=1,this.curBulletCount=0,this.timer=this.fireCoolDownTime);var e=c.default.getInstance().getNodeNotNull(this.bulletKey);if(null!==e){var t=cc.misc.radiansToDegrees(Math.atan2(this.lastMoveDir.y,this.lastMoveDir.x));e.setParent(p.default.GameObjNode);var o=cc.v2(0,100*this.node.scaleY),n=p.default.PlayerNode.getPosition();e.setPosition(n.x+o.x+l.RandomUtils.getRandomInt(-this.range,this.range),n.y+o.y+l.RandomUtils.getRandomInt(-this.range,this.range)),e.angle=t;var i=e.getComponent(d.default);e.scale=this.bulletScale,e.scaleY*=this.lastMoveDir.x>=0?1:-1,i.onInit(this,this.lastMoveDir)}},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_FlyingKnife_008":"PlayerBullet_FlyingKnife_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Frostbolt_008:[function(e,t,o){"use strict";cc._RF.push(t,"d7cb7WnlrxMrKC1ohmm4vd4","PlayerWeapon_Frostbolt_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../playerBullet/PlayerBullet_Frostbolt_008"),f=e("./BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t.lastMoveDir=cc.Vec2.RIGHT,t}return i(t,e),t.prototype.onInitWeapon=function(){var e,t;return r(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return this.state=-1,this.timer=0,this.currFireCount=0,this.firePos=null!==(t=null===(e=this.node.getChildByName("firePoint"))||void 0===e?void 0:e.getPosition())&&void 0!==t?t:cc.v2(0,100),this.firePos.y*=p.default.PlayerNode.scaleY,l.default.getInstance().isHasNodePool(c.default.Key_Frostbolt)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_Frostbolt,prePath:c.default.Path_Frostbolt,count:5})];case 1:o.sent(),o.label=2;case 2:return this.state=0,[2]}})})},t.prototype.update=function(e){if(!p.default.isGamePause){this.timer-=e;var t=p.default.PlayerMoveDir;0!==t.x&&0!==t.y&&(this.lastMoveDir.x=t.x,this.lastMoveDir.y=t.y),0===this.state?this.timer<=0&&this.onStartFire():1===this.state&&this.timer<=0&&this.onFire()}},t.prototype.onStartFire=function(){this.state=1,this.currFireCount=0,this.tempBulletCount=this.bulletCount;var e=u.default.ins.getNearestEnemy();if(null!==e){var t=e.getPosition().sub(this.node.getPosition().add(this.firePos)).normalize();this.fireRadians=Math.atan2(t.y,t.x)}else this.fireRadians=Math.random()*Math.PI*2;this.onFire()},t.prototype.onFire=function(){this.currFireCount+=1,this.currFireCount>=this.tempBulletCount?(this.state=0,this.timer=this.fireCoolDownTime):this.timer=.036,this.fireRadians=Math.atan2(this.lastMoveDir.y,this.lastMoveDir.x);var e=l.default.getInstance().getNodeNotNull(c.default.Key_Frostbolt);if(null!==e){e.setParent(p.default.GameObjNode);var t=p.default.PlayerNode.getPosition().add(this.firePos);e.setPosition(t);var o=this.getTargetDir(this.currFireCount-1);e.getComponent(d.default).onInit(this,o)}},t.prototype.getTargetDir=function(e){var t,o=e%16,n=e%4;return t=o<4?this.fireRadians+.1*n:o<8?this.fireRadians+.4-.1*n:o<12?this.fireRadians-.1*n:this.fireRadians-.4+.1*n,cc.v2(Math.cos(t),Math.sin(t))},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_Frostbolt_008":"PlayerBullet_Frostbolt_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_JinLong_008:[function(e,t,o){"use strict";cc._RF.push(t,"539d2Q0Lu1Ha75/ic/MwYCk","PlayerWeapon_JinLong_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=e("../playerBullet/PlayerBullet_JinLong_008"),d=e("./BasePlayerWeapon_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t}return i(t,e),t.prototype.onInitWeapon=function(){this.timer=this.fireCoolDownTime},t.prototype.update=function(e){u.default.isGamePause||(this.timer+=e,this.timer>=this.fireCoolDownTime&&this.onFire())},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return l.default.getInstance().isHasNodePool(c.default.Key_JinLong)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_JinLong,prePath:c.default.Path_JinLong,count:8})];case 1:e.sent(),e.label=2;case 2:return[2,l.default.getInstance().getNodeNotNull(c.default.Key_JinLong)]}})})},t.prototype.onFire=function(){var e=this;this.timer=0;for(var t=2*Math.PI/this.bulletCount,o=u.default.PlayerNode.getPosition(),n=function(n){i.getBullet().then(function(i){null!==i&&(i.setParent(u.default.GameObjNode),i.setPosition(o),i.getComponent(p.default).onInit(e,cc.Vec2.RIGHT.rotate(t*n)),i.zIndex=cc.macro.MAX_ZINDEX)})},i=this,a=0;a<this.bulletCount;a++)n(a)},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_JinLong_008":"PlayerBullet_JinLong_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Lightning_008:[function(e,t,o){"use strict";cc._RF.push(t,"3977dE7nhJOeJwokM5TekeZ","PlayerWeapon_Lightning_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Utils/RandomUtils"),c=e("../../../mag/AudioMag"),u=e("../../../mag/NodePoolManager"),p=e("../Config_008"),d=e("../Config_Gaming_008"),f=e("../EnemyManager_008"),h=e("../GamingData_008"),_=e("../playerBullet/PlayerBullet_Lightning_008"),y=e("./BasePlayerWeapon_008"),g=cc._decorator,m=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,this.timer=this.fireCoolDownTime,this.currFireCount=0,u.default.getInstance().isHasNodePool(p.default.Key_Lightning)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Lightning,prePath:p.default.Path_Lightning,count:3})];case 1:e.sent(),e.label=2;case 2:return this.state=0,[2]}})})},t.prototype.update=function(e){h.default.isGamePause||(0===this.state?(this.timer+=e,this.timer>=this.fireCoolDownTime&&(this.state=1,this.onFire())):2===this.state&&(this.timer+=e,this.timer>=d.Config_Gaming_008.Lightning_FireInterval&&this.onFire()))},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return u.default.getInstance().isHasNodePool(p.default.Key_Lightning)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Lightning,prePath:p.default.Path_Lightning,count:3})];case 1:e.sent(),e.label=2;case 2:return[2,u.default.getInstance().getNodeNotNull(p.default.Key_Lightning)]}})})},t.prototype.onFire=function(){var e=this;this.state=2,this.timer=0,this.currFireCount+=1,this.currFireCount>=this.bulletCount&&(this.state=0,this.currFireCount=0),this.getBullet().then(function(t){if(null!==t){c.default.getInstance().playSound(p.default.SEF_Lightning);var o=f.default.ins.getRandomEnemyPosInRange(d.Config_Gaming_008.Lightning_AttackDis);t.setParent(h.default.GameObjNode),t.getComponent(_.default).onInit(e),t.scale=e.bulletScale,o?t.setPosition(o):t.setPosition(h.default.PlayerNode.x+l.RandomUtils.getRandomInt(-400,400),h.default.PlayerNode.y+l.RandomUtils.getRandomInt(-700,600))}})},a([m],t)}(y.default));o.default=v,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_Lightning_008":"PlayerBullet_Lightning_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_LionRoar_008:[function(e,t,o){"use strict";cc._RF.push(t,"4d0e1nO0clKLYRyISgmL9Sb","PlayerWeapon_LionRoar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/AudioMag"),c=e("../../../mag/NodePoolManager"),u=e("../Config_008"),p=e("../GamingData_008"),d=e("../playerBullet/PlayerBullet_LionRoar_008"),f=e("./BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t}return i(t,e),t.prototype.onInitWeapon=function(){this.timer=this.fireCoolDownTime},t.prototype.update=function(e){p.default.isGamePause||(this.timer+=e,this.timer>=this.fireCoolDownTime&&this.onFire())},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return c.default.getInstance().isHasNodePool(u.default.Key_LionRoar)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_LionRoar,prePath:u.default.Path_LionRoar,count:1})];case 1:e.sent(),e.label=2;case 2:return[2,c.default.getInstance().getNodeNotNull(u.default.Key_LionRoar)]}})})},t.prototype.onFire=function(){var e=this;this.timer=0;var t=p.default.PlayerNode.getPosition();this.getBullet().then(function(o){null!==o&&(l.default.getInstance().playSound(u.default.SEF_LionRoar),o.setParent(p.default.GameObjNode),o.setPosition(t),o.getComponent(d.default).onInit(e),o.zIndex=cc.macro.MAX_ZINDEX,o.scale=e.bulletScale)})},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_LionRoar_008":"PlayerBullet_LionRoar_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Long_008:[function(e,t,o){"use strict";cc._RF.push(t,"a669bdgfPxF9btbJSF5ifGf","PlayerWeapon_Long_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Utils/RandomUtils"),c=e("../../../mag/AudioMag"),u=e("../../../mag/NodePoolManager"),p=e("../Config_008"),d=e("../GamingData_008"),f=e("../playerBullet/PlayerBullet_Long_008"),h=e("./BasePlayerWeapon_008"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.longArr=[],t}return i(t,e),t.prototype.onInitWeapon=function(){this.onFire()},t.prototype.onRecovery=function(){for(var t=0;t<this.longArr.length;t++)u.default.getInstance().recoveryNode(p.default.Key_Long,this.longArr[t]);this.longArr=[],e.prototype.onRecovery.call(this)},t.prototype.onResetData=function(){e.prototype.onResetData.call(this);for(var t=this.longArr.length;t<this.bulletCount;t++)this.onFire()},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return u.default.getInstance().isHasNodePool(p.default.Key_Long)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Long,prePath:p.default.Path_Long,count:1})];case 1:e.sent(),e.label=2;case 2:return[2,u.default.getInstance().getNodeNotNull(p.default.Key_Long)]}})})},t.prototype.onFire=function(){var e=this;this.getBullet().then(function(t){if(null!==t){if(e.longArr.length>=e.bulletCount)return void u.default.getInstance().recoveryNode(p.default.Key_Long,t);c.default.getInstance().playSound_intervalLimit(p.default.SEF_Long_Summon,50),e.longArr.push(t);var o=cc.misc.degreesToRadians(l.RandomUtils.getRandomInt(0,360)),n=d.default.PlayerNode.getPosition().add(cc.v2(1800*Math.cos(o),1800*Math.sin(o)));t.setParent(d.default.GameObjNode),t.zIndex=cc.macro.MAX_ZINDEX,t.getComponent(f.default).onInit(e),t.setPosition(n)}})},a([y],t)}(h.default));o.default=g,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_Long_008":"PlayerBullet_Long_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Phoenix_008:[function(e,t,o){"use strict";cc._RF.push(t,"1afa5YpEE5D35TNoMnm3ngI","PlayerWeapon_Phoenix_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../playerBullet/PlayerBullet_Phoenix_008"),f=e("./BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=-1,t.timer=0,t.currFireCount=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,l.default.getInstance().isHasNodePool(c.default.KeyPath_Phoenix)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.KeyPath_Phoenix,prePath:c.default.KeyPath_Phoenix,count:1})];case 1:e.sent(),e.label=2;case 2:return this.state=0,this.timer=0,this.currFireCount=0,[2]}})})},t.prototype.update=function(e){p.default.isGamePause||(this.timer-=e,0===this.state&&this.timer<=0&&this.onFire())},t.prototype.onFire=function(){this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.state=0,this.timer=this.fireCoolDownTime,this.currFireCount=0):(this.state=0,this.timer=.2);var e=l.default.getInstance().getNodeNotNull(c.default.KeyPath_Phoenix);if(null!==e){e.setParent(p.default.GameObjNode),e.setPosition(p.default.PlayerNode.getPosition()),e.scale=this.bulletScale,e.zIndex=cc.macro.MAX_ZINDEX-100;var t=this.getPhoenixMoveDir();e.getComponent(d.default).onInit(this,t)}},t.prototype.getPhoenixMoveDir=function(){var e,t=u.default.ins.getRandomEnemyPos();if(t){var o=p.default.PlayerNode.getPosition();e=cc.v2(t.x-o.x,t.y-this.player.y).normalize()}else e=cc.v2(cc.Vec2.RIGHT).rotate(2*Math.PI*Math.random());return e},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_Phoenix_008":"PlayerBullet_Phoenix_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_RollingLightning_008:[function(e,t,o){"use strict";cc._RF.push(t,"a8183hcD6RHCKZ+9Qt26m7o","PlayerWeapon_RollingLightning_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=e("../playerBullet/PlayerBullet_RollingLightning_008"),d=e("./BasePlayerWeapon_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireInterval=.5,t.bulletSpeed=750,t.bulletAliveTime=3,t.bulletOffsetAngle=6,t.intervalAngle=20,t.bulletOffsetRate=.5,t.bulletOffset=cc.v2(0,100),t.state="idle",t.bulletKey=c.default.Key_RollingLightning,t.bulletPath=c.default.Path_RollingLightning,t.preKey=c.default.Key_EF_RollingLightning_Pre,t.prePath=c.default.Path_EF_RollingLightning_Pre,t.preNode=null,t.aniFinishFunc=null,t.isAni=!1,t.fireIntervalTimer=0,t.lastMoveDir=cc.Vec2.RIGHT,t}return i(t,e),t.prototype.update=function(e){if(!u.default.isGamePause)switch(this.state){case"idle":this.onIdle(e);break;case"fire":this.onFire(e);break;case"onFire":var t=u.default.PlayerMoveDir.clone();t.equals(cc.Vec2.ZERO)||(this.lastMoveDir=t)}},t.prototype.onInitWeapon=function(){},t.prototype.onIdle=function(e){var t=this,o=u.default.PlayerMoveDir.clone(),n=u.default.PlayerNode.getChildByName("efNode2");o.equals(cc.Vec2.ZERO)||(this.lastMoveDir=o),this.fireIntervalTimer+=e,this.preNode||(this.preNode=new cc.Node,this.preNode.parent=n,this.preNode.setPosition(0,0)),this.isAni?this.aniFinishFunc=function(){t.onCreatePre()}:this.onCreatePre(),this.fireIntervalTimer>=this.fireInterval&&(this.fireIntervalTimer=0,this.state="fire")},t.prototype.onFire=function(){var e=this;this.state="onFire",this.aniFinishFunc=function(){return r(e,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:e=-(this.bulletCount>>1)*this.intervalAngle,t=0,n.label=1;case 1:return t<this.bulletCount?[4,this.onGetBullet()]:[3,4];case 2:(o=n.sent())&&o.onInit(this,this.lastMoveDir.rotate(cc.misc.degreesToRadians(e+this.intervalAngle*t)),this.bulletSpeed,this.bulletAliveTime,this.bulletOffsetAngle,this.bulletOffsetRate),n.label=3;case 3:return t++,[3,1];case 4:return this.state="idle",[2]}})})}},t.prototype.onCreatePre=function(){return r(this,void 0,void 0,function(){var e,t,o,n=this;return s(this,function(i){switch(i.label){case 0:return this.isAni=!0,l.default.getInstance().isHasNodePool(this.preKey)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:this.preKey,prePath:this.prePath,count:1})];case 1:i.sent(),i.label=2;case 2:return(e=this.preNode.getChildByName(this.preKey)||l.default.getInstance().getNodeNotNull(this.preKey))?(e.name=this.preKey,e.parent=this.preNode,(t=e.getComponent(sp.Skeleton))?(t.setAnimation(0,"qianyao",!1),t.setCompleteListener(function(){n.isAni=!1,n.aniFinishFunc&&n.aniFinishFunc()}),o=t.getCurrent(0).animation.duration/this.fireInterval,t.timeScale=o,[2]):[2]):[2]}})})},t.prototype.onGetBullet=function(){return r(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return l.default.getInstance().isHasNodePool(this.bulletKey)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:this.bulletKey,prePath:this.bulletPath,count:1})];case 1:o.sent(),o.label=2;case 2:return(e=l.default.getInstance().getNodeNotNull(this.bulletKey))?(e.parent=u.default.GameObjNode,t=u.default.PlayerNode.getChildByName("knifeCenterNode"),e.setPosition(e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(this.bulletOffset))),e.scale=this.bulletScale,[2,e.getComponent(p.default)]):[2]}})})},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_RollingLightning_008":"PlayerBullet_RollingLightning_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_RotatingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"0a2d9eHm1hCHpKrjmEfWz7f","PlayerWeapon_RotatingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../Config_Gaming_008"),p=e("../DelegateManager_008"),d=e("../GamingData_008"),f=e("../playerBullet/PlayerBullet_RotatingKnife_008"),h=e("./BasePlayerWeapon_008"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.knifeCenterNode=null,t.efNode_pickUpWeapon=null,t.weaponAngle=0,t.knifeArr=[],t.knifeRestoreTimer=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return d.default.isEquipRotatingKnife=!0,this.knifeCenterNode=this.player.getChildByName("knifeCenterNode"),this.efNode_pickUpWeapon=this.player.getChildByName("efNode2").getChildByName("efNode_pickUpWeapon"),p.default.onRotatingKnifeResetBulletAngle.addDelegate(this.onResetKnifeAngle,this),p.default.onRotatingKnifeRemoveBullet.addDelegate(this.onRemoveKnife,this),p.default.onRotatingKnifePickUpKnife.addDelegate(this.onPickUpWeapon,this),l.default.getInstance().isHasNodePool(c.default.Key_Knife_1)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_Knife_1,prePath:c.default.Path_Knife_1,count:20})];case 1:e.sent(),e.label=2;case 2:return this.onInitKnife(),[2]}})})},t.prototype.onRecovery=function(){p.default.onRotatingKnifeResetBulletAngle.removeDelegate(this.onResetKnifeAngle,this),p.default.onRotatingKnifeRemoveBullet.removeDelegate(this.onRemoveKnife,this),p.default.onRotatingKnifePickUpKnife.removeDelegate(this.onPickUpWeapon,this),this.onRecoveryAllKnife(),this.knifeRestoreTimer=0,e.prototype.onRecovery.call(this)},t.prototype.update=function(e){d.default.isGamePause||(this.onUpdateWeaponAngle(e),this.knifeArr.length<this.bulletCount&&this.onTryRestoreKnife(e),this.resetAngleTimer<0&&(this.resetAngleTimer+=e,this.resetAngleTimer>=1&&this.onResetKnifeAngle()),this.updateKnife())},t.prototype.lateUpdate=function(){},t.prototype.onUpdateWeaponAngle=function(e){this.knifeArr.length<=0||(this.weaponAngle+=e*u.Config_Gaming_008.RotatingKnife_Base_RotateSpeed,this.weaponAngle>c.default.PlayWeaponRotatingSEFAngle&&(this.weaponAngle-=c.default.PlayWeaponRotatingSEFAngle))},t.prototype.onInitKnife=function(){for(var e=0;e<this.bulletCount;e++){var t=l.default.getInstance().getNodeNotNull(c.default.Key_Knife_1);null!==t&&(t.setParent(d.default.GameObjNode),t.scale=this.bulletScale,t.getComponent(f.default).onInit(this,u.Config_Gaming_008.RotatingKnife_Base_RotateSpeed),this.knifeArr.push(t))}this.updateKnife(),this.onResetKnifeAngle()},t.prototype.onRecoveryAllKnife=function(){for(var e=0;e<this.knifeArr.length;e++)l.default.getInstance().recoveryNode(c.default.Key_Knife_1,this.knifeArr[e]);this.knifeArr=[]},t.prototype.onTryRestoreKnife=function(e){this.knifeRestoreTimer+=e,this.knifeRestoreTimer>this.fireCoolDownTime&&(this.knifeRestoreTimer=0,this.onAddKnife())},t.prototype.onAddKnife=function(){var e=l.default.getInstance().getNodeNotNull(c.default.Key_Knife_1);null!==e&&(e.opacity=0,e.setParent(d.default.GameObjNode),e.scale=this.bulletScale,e.getComponent(f.default).onInit(this,u.Config_Gaming_008.RotatingKnife_Base_RotateSpeed),this.knifeArr.push(e),this.onResetKnifeAngle(),this.scheduleOnce(function(){e.parent&&(e.opacity=255)}))},t.prototype.onPickUpWeapon=function(){if(!(this.knifeArr.length>=u.Config_Gaming_008.RotatingKnife_PlayerMaxKnifeCount)){var e=l.default.getInstance().getNode(c.default.Key_EF_PickUpWeapon);null!==e&&e.setParent(this.efNode_pickUpWeapon),this.onAddKnife()}},t.prototype.onResetKnifeAngle=function(){this.resetAngleTimer=0;var e=this.knifeArr.length;if(e>0)for(var t=this.knifeArr[0].angle,o=360/e,n=0;n<e;n++)this.knifeArr[n].angle=-o*n+t;1===this.knifeArr.length&&(this.weaponAngle=c.default.PlayWeaponRotatingSEFAngle)},t.prototype.onRemoveKnife=function(e){this.resetAngleTimer=-2;var t=this.knifeArr.indexOf(e);-1!==t&&(this.knifeArr.splice(t,1),l.default.getInstance().recoveryNode(c.default.Key_Knife_1,e)),this.knifeArr.length>this.bulletCount&&this.onResetKnifeAngle()},t.prototype.updateKnife=function(){for(var e=this.node.getPosition().add(this.knifeCenterNode.getPosition()),t=0;t<this.knifeArr.length;t++)this.knifeArr[t].setPosition(e)},a([y],t)}(h.default));o.default=g,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../DelegateManager_008":"DelegateManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_RotatingKnife_008":"PlayerBullet_RotatingKnife_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_SixPulseHolySword_008:[function(e,t,o){"use strict";cc._RF.push(t,"41d7d6hTOFB6Z17TCWEEOE4","PlayerWeapon_SixPulseHolySword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Utils/RandomUtils"),c=e("../../../mag/AudioMag"),u=e("../../../mag/NodePoolManager"),p=e("../Config_008"),d=e("../Config_Gaming_008"),f=e("../EnemyManager_008"),h=e("../GamingData_008"),_=e("../playerBullet/PlayerBullet_SixPulseHolySword_008"),y=e("./BasePlayerWeapon_008"),g=cc._decorator,m=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t.firePos_sixPulseHolySword=null,t}return i(t,e),t.prototype.onInitWeapon=function(){this.firePos_sixPulseHolySword=this.player.getChildByName("actNode").getChildByName("firePos_sixPulseHolySword"),this.state=0,this.timer=this.fireCoolDownTime,this.currFireCount=0},t.prototype.update=function(e){h.default.isGamePause||(0===this.state?(this.timer+=e,this.timer>=this.fireCoolDownTime&&(this.state=1,this.onFire())):2===this.state&&(this.timer+=e,this.timer>=d.Config_Gaming_008.SixPulseHolySword_FireInterval&&this.onFire()))},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return u.default.getInstance().isHasNodePool(p.default.Key_SixPulseHolySword)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_SixPulseHolySword,prePath:p.default.Path_SixPulseHolySword,count:3})];case 1:e.sent(),e.label=2;case 2:return[2,u.default.getInstance().getNodeNotNull(p.default.Key_SixPulseHolySword)]}})})},t.prototype.onFire=function(){var e=this;this.state=1,this.timer=0,this.currFireCount+=1,this.getBullet().then(function(t){if(e.state=2,e.currFireCount>=e.bulletCount&&(e.state=0,e.currFireCount=0),null!==t){c.default.getInstance().playSound(p.default.SEF_SixPulseHolySword);var o=f.default.ins.getRandomEnemyPos();t.setParent(h.default.GameObjNode),t.scale=e.bulletScale,o||(o=cc.v2(l.RandomUtils.getRandomInt(-400,400),l.RandomUtils.getRandomInt(-700,600))),t.setPosition(h.default.GameObjNode.convertToNodeSpaceAR(e.firePos_sixPulseHolySword.convertToWorldSpaceAR(cc.Vec2.ZERO))),t.getComponent(_.default).onInit(e,o.sub(t.getPosition()).normalize())}})},a([m],t)}(y.default));o.default=v,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_SixPulseHolySword_008":"PlayerBullet_SixPulseHolySword_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_SummonSword_008:[function(e,t,o){"use strict";cc._RF.push(t,"3e4b5Xfor9Fr6fvxUNKDcBW","PlayerWeapon_SummonSword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/AudioMag"),c=e("../../../mag/NodePoolManager"),u=e("../Config_008"),p=e("../Config_Gaming_008"),d=e("../EnemyManager_008"),f=e("../GamingData_008"),h=e("../playerBullet/PlayerBullet_SummonSword_008"),_=e("./BasePlayerWeapon_008"),y=cc._decorator,g=y.ccclass,m=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.swordArr=[],t.weaponSlotWidth=100,t.moveSpeed=500,t.curState=0,t.attackGuideNode=null,t.attackCount=3,t.attackCountTimer=0,t.stateTimer=0,t.recoveryTimer=0,t.createShadowFunc=new Map,t.shadowAlive=.5,t.shadowCount=3,t}return i(t,e),t.prototype.onInitWeapon=function(){this.attackGuideNode=new cc.Node,this.attackGuideNode.parent=this.node,this.attackGuideNode.active=!0,this.attackGuideNode.angle=0,this.attackGuideNode.setPosition(0,this.player.height/2)},t.prototype.onRecovery=function(){this.attackGuideNode.destroy(),this.attackGuideNode=null,this.onRecoveryAllSword(),e.prototype.onRecovery.call(this)},t.prototype.onResetData=function(){e.prototype.onResetData.call(this);for(var t=this.swordArr.length;t<this.bulletCount;t++)this.onAddSword()},t.prototype.lateUpdate=function(e){f.default.isGamePause||this.updateSword(e)},Object.defineProperty(t.prototype,"CoolDownTime",{get:function(){return 1},enumerable:!1,configurable:!0}),t.prototype.getNearestEnemyPos=function(){var e=d.default.ins.getEnemyInRange(this.node.getPosition(),1e3).filter(function(e){return null!==e});if(0===e.length)return null;var t=e.map(function(e){return e.getPosition().angle(cc.v2(1,0))}).sort(function(e,t){return e-t}).reduce(function(e,t){return e+t},0)/e.length;return e.sort(function(e,o){return Math.abs(e.getPosition().angle(cc.v2(1,0))-t)-Math.abs(o.getPosition().angle(cc.v2(1,0))-t)})[Math.floor(Math.random()*(e.length-1))].getPosition()},t.prototype.getSword=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return c.default.getInstance().isHasNodePool(u.default.Key_SummonSword)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_SummonSword,prePath:u.default.Path_SummonSword,count:1})];case 1:e.sent(),e.label=2;case 2:return[2,c.default.getInstance().getNodeNotNull(u.default.Key_SummonSword)]}})})},t.prototype.onInitSword=function(){return r(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(){for(e=this.bulletCount,t=0;t<e;t++)this.getSword().then(function(e){cc.Tween.stopAllByTarget(e);var t=e.getComponent(h.default);t.node.setParent(o.player.getChildByName("efNode")),t.state=0,t.lastState=-1,o.onOpenShadow(t),o.swordArr.push(t)});return[2]})})},t.prototype.onRemoveSword=function(e){var t=e.getComponent(h.default);if(t){var o=this.swordArr.indexOf(t);-1!==o&&(this.swordArr.splice(o,1),this.onCloseShadow(t),t.setHurtState(!1),t.state=-1,t.lastState=-1,c.default.getInstance().recoveryNode(u.default.Key_SummonSword,t.node))}},t.prototype.onResetSword=function(){var e=this;this.swordArr.forEach(function(t){t.node.stopAllActions(),e.onOpenShadow(t),t.state=0,t.lastState=-1,t.node.scale=e.bulletScale,t.node.opacity=255})},t.prototype.onAddSword=function(){var e=this;this.getSword().then(function(t){if(null!==t){if(cc.Tween.stopAllByTarget(t),e.swordArr.length>=e.bulletCount)return void c.default.getInstance().recoveryNode(u.default.Key_SummonSword,t);var o=t.getComponent(h.default);o.weapon=e,o.node.setParent(e.node),e.swordArr.push(o),e.onResetSword()}})},t.prototype.onRecoveryAllSword=function(){var e=this;this.swordArr.forEach(function(t){e.onCloseShadow(t),t.state=0,t.lastState=-1,c.default.getInstance().recoveryNode(u.default.Key_SummonSword,t.node)}),this.swordArr=[]},t.prototype.updateSword=function(){for(var e=0;e<this.swordArr.length;e++){var t=this.swordArr[e];if(t.state!==t.lastState)switch(t.lastState=t.state,t.state){case 0:this.onIdleSword(t);break;case 1:this.onAttackSword(t);break;case 2:this.onRecoverySword(t);break;case 3:this.onRotateSword(t)}}},t.prototype.onIdleSword=function(e){var t=this,o=this.getAngleAndPosOnPlayer(e),n=o.angle,i=o.targetPos;e.setHurtState(!1),e.node.parent=this.player.getChildByName("efNode"),e.node.stopAllActions(),cc.tween(e.node).to(.1,{position:cc.v3(i),angle:n}).to(.5,{y:i.y+20},{easing:"sineOut"}).union().repeatForever().start(),cc.tween(e.node).delay(this.CoolDownTime).call(function(){if(d.default.ins.getNearestEnemyPos()){var o=cc.Vec2.random(cc.Vec2.ONE,Math.max(100,30*t.swordArr.length));cc.tween(e.node).to(.2,{position:cc.v3(o)}).call(function(){e.curAttTimes=0,e.state=3}).start()}}).union().repeatForever().start()},t.prototype.onAttackSword=function(e){e.setHurtState(!1),e.setHurtState(!0),e.node.stopAllActions(),e.curAttTimes++;var t=this.getNearestEnemyPos();if(t){var o=cc.v2(this.node.convertToNodeSpaceAR(f.default.GameObjNode.convertToWorldSpaceAR(t))),n=o.mag()/(this.moveSpeed*p.Config_Gaming_008.SummonSword_bulletRotateSpeed/30),i=o.sub(e.node.getPosition()).normalize(),a=180-cc.misc.radiansToDegrees(i.signAngle(cc.Vec2.UP)),r=this.attackCount>=e.curAttTimes?3:2;e.node.angle=a,l.default.getInstance().playSound(Math.random()>.5?u.default.SEF_SummonSword_Attack_1:u.default.SEF_SummonSword_Attack_2),cc.tween(e.node).to(n,{position:cc.v3(o)},{easing:cc.easing.backInOut}).call(function(){e.state=r}).start()}else e.state=2},t.prototype.onRecoverySword=function(e){var t=this.getAngleAndPosOnPlayer(e),o=t.angle,n=t.targetPos;e.setHurtState(!0),e.node.parent=this.node,e.node.stopAllActions(),cc.tween(e.node).to(.3,{position:cc.v3(n),angle:o}).call(function(){e.state=0}).start()},t.prototype.onRotateSword=function(e){e.setHurtState(!0),e.node.parent=this.attackGuideNode,e.node.stopAllActions(),cc.tween(e.node).to(.2,{angle:360}).set({angle:0}).union().repeat(1).call(function(){e.state=1}).start()},t.prototype.getAngleAndPosOnPlayer=function(e){var t=-(90+180*(this.swordArr.indexOf(e)+1)/(this.swordArr.length+1));return{angle:t,targetPos:cc.v2(0,this.player.height/2).rotate(cc.misc.degreesToRadians(t+180)).add(cc.v2(0,this.player.height/2))}},t.prototype.onCreateShadow=function(e){var t=this,o=function(){return r(t,void 0,void 0,function(){var t,o,n,i;return s(this,function(a){switch(a.label){case 0:return f.default.isGamePause?[2]:[4,this.getSword()];case 1:return t=a.sent(),cc.Tween.stopAllByTarget(t),o=t.getComponent(h.default),n=this.shadowAlive,i=1.2*e.node.scale,t.parent=f.default.GameObjNode,o.weapon=this,t.scale=e.node.scale,t.setPosition(t.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO))),t.angle=e.node.angle,t.zIndex=-999,t.opacity=128,o.setHurtState(!1),cc.tween(t).parallel(cc.tween().to(n,{opacity:0},{easing:cc.easing.quadIn}),cc.tween().to(n,{scale:i},{easing:cc.easing.quadOut})).call(function(){c.default.getInstance().recoveryNode(u.default.Key_SummonSword,t)}).start(),[2]}})})};return this.createShadowFunc.set(e,o),o},t.prototype.onOpenShadow=function(e){this.onCloseShadow(e),e.schedule(this.onCreateShadow(e),this.shadowAlive/this.shadowCount,cc.macro.REPEAT_FOREVER)},t.prototype.onCloseShadow=function(e){var t=this.createShadowFunc.get(e);t&&(e.unschedule(t),this.createShadowFunc.delete(e))},a([g],t)}(_.default));o.default=m,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../Config_Gaming_008":"Config_Gaming_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_SummonSword_008":"PlayerBullet_SummonSword_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_FKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"201e2eZ8tBLxLlScMM0kfxG","PlayerWeapon_Super_FKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l,c=e("../../../../Utils/RandomUtils"),u=e("../../../../mag/NodePoolManager"),p=e("../../Config_008"),d=e("../../GamingData_008"),f=e("../../playerBullet/super/PlayerBullet_SFKnife_008"),h=e("../BasePlayerWeapon_008"),_=cc._decorator,y=_.ccclass;_.property,function(e){e[e.Cooling=0]="Cooling",e[e.Firing=1]="Firing"}(l||(l={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireCount=3,t.fireInterval=.2,t.bulletSpeed=2e3,t.bulletAliveTime=3,t.amplitude=5,t.cycle=1,t.spreadAngle=60,t.fireDuration=3,t.firePoint=null,t.fireIntervalTime=0,t.state=l.Cooling,t.offset=cc.v2(0,0),t.lastMoveDir=cc.Vec2.RIGHT,t}return i(t,e),t.prototype.onInitWeapon=function(){this.firePoint=d.default.PlayerNode},t.prototype.onResetData=function(){e.prototype.onResetData.call(this),this.fireCount=this.bulletCount,this.fireInterval=this.fireCoolDownTime/this.fireCount},t.prototype.update=function(e){if(!d.default.isGamePause)switch(this.state){case l.Cooling:this.onFire();break;case l.Firing:this.fireIntervalTime+=e,this.fireInterval<this.fireIntervalTime&&(this.fireIntervalTime=0,this.onFireBullet())}},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return u.default.getInstance().isHasNodePool(p.default.Key_SFKnife)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_SFKnife,prePath:p.default.Path_SFKnife,count:1})];case 1:e.sent(),e.label=2;case 2:return[2,u.default.getInstance().getNodeNotNull(p.default.Key_SFKnife)]}})})},t.prototype.onShowBeforeFire=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,o,n;return s(this,function(i){switch(i.label){case 0:return u.default.getInstance().isHasNodePool(p.default.Key_EF_SFKnife_Pre)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_EF_SFKnife_Pre,prePath:p.default.Path_EF_SFKnife_Pre,count:1})];case 1:i.sent(),i.label=2;case 2:return e=u.default.getInstance().getNodeNotNull(p.default.Key_EF_SFKnife_Pre),(o=this.firePoint.getChildByName("efNode"))&&e.setParent(o),e.setPosition(cc.Vec2.ZERO),(n=e.getComponent(sp.Skeleton))?(n.setCompleteListener(function(){t(n),n.setCompleteListener(null),u.default.getInstance().recoveryNode(p.default.Key_EF_SFKnife_Pre,e)}),n.setAnimation(0,"animation",!1),[2]):[2]}})})})},t.prototype.onFire=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=l.Firing,[4,this.onShowBeforeFire()];case 1:return e.sent(),[2]}})})},t.prototype.onFireBullet=function(){return r(this,void 0,void 0,function(){var e,t,o,n,i,a,r,l=this;return s(this,function(s){switch(s.label){case 0:if(d.default.isGamePause)return[2];e=this.firePoint.getChildByName("knifeCenterNode"),0===(t=d.default.PlayerMoveDir.clone()).x&&0===t.y&&t.set(this.lastMoveDir),this.lastMoveDir=t,o=Array.from({length:this.fireCount},function(){return{aniType:0,amplitude:l.amplitude,cycle:l.cycle,speed:l.bulletSpeed,dir:t.normalize()}}),n=-this.spreadAngle/2,this.spreadAngle,this.fireCount,i=0,s.label=1;case 1:return i<o.length?((a=o[i]).aniType=i%2,a.cycle*=i%2?1:-1,a.dir.rotateSelf(cc.misc.degreesToRadians(c.RandomUtils.getRandomInt(n,-n))),[4,this.getBullet()]):[3,4];case 2:(r=s.sent()).attr(a),r.setParent(d.default.GameObjNode),r.setPosition(r.parent.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.Vec2.ZERO.add(this.offset)))),r.getComponent(f.default).onInit(this),s.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},a([y],t)}(h.default);o.default=g,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../playerBullet/super/PlayerBullet_SFKnife_008":"PlayerBullet_SFKnife_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_FlowersUAV_008:[function(e,t,o){"use strict";cc._RF.push(t,"95f96QJp4hPfILRsC2IPrJ9","PlayerWeapon_Super_FlowersUAV_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../Config_008"),u=e("../../EnemyManager_008"),p=e("../../GamingData_008"),d=e("../../playerBullet/PlayerBullet_FlowersUAV_008"),f=e("../BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t.initRadians=0,t.fireCenterPos=null,t.currRadians=0,t.intervalFireTime=.05,t.radiansInterval=.18,t.radius=500,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(){return this.state=-1,l.default.getInstance().isHasNodePool(c.default.KeyPath_FlowersUAV_Small)||l.default.getInstance().onInitNodePool({key:c.default.KeyPath_FlowersUAV_Small,prePath:c.default.KeyPath_FlowersUAV_Small,count:30}),this.state=0,this.timer=0,[2]})})},t.prototype.update=function(e){p.default.isGamePause||(this.timer-=e,0===this.state?this.timer<=0&&this.onPreFire():1===this.state&&this.timer<=0&&this.onFire())},t.prototype.onResetData=function(){e.prototype.onResetData.call(this),this.intervalFireTime=.5/this.bulletCount,this.radiansInterval=cc.misc.degreesToRadians(360/this.fireCoolDownTime*this.intervalFireTime)},t.prototype.onPreFire=function(){this.state=1,this.currFireCount=0;var e=u.default.ins.getNearestEnemyPos();if(null!==e){var t=e.sub(p.default.PlayerNode.getPosition()).normalize();this.initRadians=Math.atan2(t.y,t.x)}else this.initRadians=2*Math.PI*Math.random();this.initRadians=this.initRadians-.5*this.bulletCount*this.radiansInterval,this.currRadians=this.initRadians,this.fireCenterPos=p.default.PlayerNode.getPosition().add(cc.v2(0,100)),this.onFire()},t.prototype.onFire=function(){this.currFireCount+=1,this.timer=this.intervalFireTime,this.fireCenterPos=p.default.PlayerNode.getPosition().add(cc.v2(0,100));var e=l.default.getInstance().getNodeNotNull(c.default.KeyPath_FlowersUAV_Small);if(null!==e){e.setParent(p.default.GameObjNode);var t=p.default.PlayerNode.getPosition().add(cc.v2(0,100));e.setPosition(t),e.zIndex=cc.macro.MAX_ZINDEX-500,this.currRadians+=this.radiansInterval;var o=this.currRadians,n=this.radius,i=cc.v2(this.fireCenterPos.x+n*Math.cos(o),this.fireCenterPos.y+n*Math.sin(o));e.getComponent(d.default).onInit(this,i,this.currFireCount%2==0?1:-1)}var a=l.default.getInstance().getNodeNotNull(c.default.KeyPath_FlowersUAV_Small);null!==a&&(a.setParent(p.default.GameObjNode),t=p.default.PlayerNode.getPosition().add(cc.v2(0,100)),a.setPosition(t),a.zIndex=cc.macro.MAX_ZINDEX-500,o=this.currRadians+3.14,n=this.radius,i=cc.v2(this.fireCenterPos.x+n*Math.cos(o),this.fireCenterPos.y+n*Math.sin(o)),a.getComponent(d.default).onInit(this,i,this.currFireCount%2==0?1:-1))},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../playerBullet/PlayerBullet_FlowersUAV_008":"PlayerBullet_FlowersUAV_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_Frostbolt_008:[function(e,t,o){"use strict";cc._RF.push(t,"a54ae8XQipJIL3F6qRRH5pM","PlayerWeapon_Super_Frostbolt_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../Utils/RandomUtils"),c=e("../../../../mag/NodePoolManager"),u=e("../../Config_008"),p=e("../../EnemyManager_008"),d=e("../../GamingData_008"),f=e("../../playerBullet/super/PlayerBullet_Super_Frostbolt_008"),h=e("../BasePlayerWeapon_008"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=-1,t.timer=0,t.firePoint=cc.Vec2.UP,t.fireEFNode=null,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,this.timer=0,this.firePoint=cc.v2(0,100),c.default.getInstance().isHasNodePool(u.default.KeyPath_EF_Super_Frostbolt_Fire)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:u.default.KeyPath_EF_Super_Frostbolt_Fire,prePath:u.default.KeyPath_EF_Super_Frostbolt_Fire,count:1})];case 1:e.sent(),e.label=2;case 2:return this.onInitFireEF(),c.default.getInstance().isHasNodePool(u.default.Key_Super_Frostbolt)?[3,4]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_Super_Frostbolt,prePath:u.default.Path_Super_Frostbolt,count:1})];case 3:e.sent(),e.label=4;case 4:return c.default.getInstance().isHasNodePool(u.default.Key_Super_Frostbolt_Small)?[3,6]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_Super_Frostbolt_Small,prePath:u.default.Path_Super_Frostbolt_Small,count:10})];case 5:e.sent(),e.label=6;case 6:return c.default.getInstance().isHasNodePool(u.default.KeyPath_HitEF_Super_Frostbolt)?[3,8]:[4,c.default.getInstance().onInitNodePool({key:u.default.KeyPath_HitEF_Super_Frostbolt,prePath:u.default.KeyPath_HitEF_Super_Frostbolt,count:1})];case 7:e.sent(),e.label=8;case 8:return this.state=0,[2]}})})},t.prototype.onRecovery=function(){this.onRecoveryFireEF(),e.prototype.onRecovery.call(this)},t.prototype.update=function(e){d.default.isGamePause||(this.timer-=e,0===this.state&&this.timer<=0&&this.onPlayFireAni(),this.onUpdateFireEF())},t.prototype.onInitFireEF=function(){if(this.fireEFNode=c.default.getInstance().getNodeNotNull(u.default.KeyPath_EF_Super_Frostbolt_Fire),null!==this.fireEFNode){this.fireEFNode.setParent(d.default.GameObjNode),this.fireEFNode.setPosition(d.default.PlayerNode.getPosition());var e=this.fireEFNode.getComponentInChildren(sp.Skeleton);e.timeScale=0,e.setCompleteListener(this.onFire.bind(this))}},t.prototype.onRecoveryFireEF=function(){null!==this.fireEFNode&&(c.default.getInstance().recoveryNode(u.default.KeyPath_EF_Super_Frostbolt_Fire,this.fireEFNode),this.fireEFNode=null)},t.prototype.onPlayFireAni=function(){if(this.state=1,null!==this.fireEFNode){var e=this.fireEFNode.getComponentInChildren(sp.Skeleton);e.timeScale=1.5,e.setAnimation(0,"animation",!1)}else this.onFire()},t.prototype.onUpdateFireEF=function(){null!==this.fireEFNode&&this.fireEFNode.setPosition(d.default.PlayerNode.getPosition())},t.prototype.onFire=function(){this.state=0,this.timer=this.fireCoolDownTime;var e=c.default.getInstance().getNodeNotNull(u.default.Key_Super_Frostbolt);if(null!==e){e.setParent(d.default.GameObjNode);var t=this.getInitPos(),o=this.getTargetDir(t);e.setPosition(t),e.getComponent(f.default).onInit(this,o)}},t.prototype.getInitPos=function(){return this.node.getPosition().add(this.firePoint)},t.prototype.getTargetDir=function(e){var t=p.default.ins.getRandomEnemyPos();return null!==t?t.sub(e).normalize():l.RandomUtils.getRandomDir()},a([y],t)}(h.default));o.default=g,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../playerBullet/super/PlayerBullet_Super_Frostbolt_008":"PlayerBullet_Super_Frostbolt_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_Lightning_008:[function(e,t,o){"use strict";cc._RF.push(t,"06803VZA2NGpbBkW3ZOO9TO","PlayerWeapon_Super_Lightning_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../Utils/RandomUtils"),c=e("../../../../mag/AudioMag"),u=e("../../../../mag/NodePoolManager"),p=e("../../Config_008"),d=e("../../Config_Gaming_008"),f=e("../../EnemyManager_008"),h=e("../../GamingData_008"),_=e("../../playerBullet/super/PlayerBullet_Super_Lightning_008"),y=e("../../playerBullet/super/PlayerBullet_Super_Lightning_Small_008"),g=e("../BasePlayerWeapon_008"),m=cc._decorator,v=m.ccclass,b=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,this.timer=0,this.currFireCount=0,u.default.getInstance().isHasNodePool(p.default.Key_Super_Lightning)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Super_Lightning,prePath:p.default.Path_Super_Lightning,count:3})];case 1:e.sent(),e.label=2;case 2:return u.default.getInstance().isHasNodePool(p.default.Key_Super_Lightning_Small)?[3,4]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Super_Lightning_Small,prePath:p.default.Path_Super_Lightning_Small,count:3})];case 3:e.sent(),e.label=4;case 4:return this.state=0,[2]}})})},t.prototype.update=function(e){h.default.isGamePause||(this.timer-=e,0===this.state?this.timer<=0&&(this.state=1,this.onFire()):1===this.state&&this.timer<=0&&this.onFire())},t.prototype.onFire=function(){this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.state=0,this.timer=this.fireCoolDownTime,this.currFireCount=0):(this.state=1,this.timer=d.Config_Gaming_008.Lightning_FireInterval);var e=u.default.getInstance().getNodeNotNull(p.default.Key_Super_Lightning);if(null!==e){c.default.getInstance().playSound(p.default.SEF_Lightning),e.setParent(h.default.GameObjNode);var t=f.default.ins.getRandomEnemyInRange(d.Config_Gaming_008.Lightning_AttackDis);e.setPosition(this.getTargetPos(t)),e.scale=this.bulletScale,e.getComponent(_.default).onInit(this,t,this.onFireSmall.bind(this))}},t.prototype.getTargetPos=function(e){return null===e?cc.v2(h.default.PlayerNode.x+l.RandomUtils.getRandomInt(-400,400),h.default.PlayerNode.y+l.RandomUtils.getRandomInt(-700,600)):e.getPosition()},t.prototype.onFireSmall=function(e,t){var o=6,n=f.default.ins.getEnemyInRange(t,800);if(null!==e){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}n.length<o&&(o=n.length);for(var a=0;a<o;a++)if(null!==n[a]){var r=u.default.getInstance().getNodeNotNull(p.default.Key_Super_Lightning_Small);null!==r&&(r.setParent(h.default.GameObjNode),r.setPosition(t),r.getComponent(y.default).onInit(this,t,n[a]))}},a([v],t)}(g.default));o.default=b,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../playerBullet/super/PlayerBullet_Super_Lightning_008":"PlayerBullet_Super_Lightning_008","../../playerBullet/super/PlayerBullet_Super_Lightning_Small_008":"PlayerBullet_Super_Lightning_Small_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_LionRoar_008:[function(e,t,o){"use strict";cc._RF.push(t,"65190KTFA1IPKtv5FnrPi8w","PlayerWeapon_Super_LionRoar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/AudioMag"),c=e("../../../../mag/NodePoolManager"),u=e("../../Config_008"),p=e("../../GamingData_008"),d=e("../../playerBullet/super/PlayerBullet_Super_LionRoar_008"),f=e("../../playerBullet/super/PlayerBullet_Super_LionRoar_Small_008"),h=e("../BasePlayerWeapon_008"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t.state=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.timer=this.fireCoolDownTime,this.state=-1,c.default.getInstance().isHasNodePool(u.default.Key_Super_LionRoar)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_Super_LionRoar,prePath:u.default.Path_Super_LionRoar,count:1})];case 1:e.sent(),e.label=2;case 2:return c.default.getInstance().isHasNodePool(u.default.Key_Super_LionRoar_Small)?[3,4]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_Super_LionRoar_Small,prePath:u.default.Path_Super_LionRoar_Small,count:8})];case 3:e.sent(),e.label=4;case 4:return this.state=0,[2]}})})},t.prototype.update=function(e){p.default.isGamePause||0===this.state&&(this.timer+=e,this.timer>=this.fireCoolDownTime&&this.onFire())},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return c.default.getInstance().isHasNodePool(u.default.Key_Super_LionRoar)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_Super_LionRoar,prePath:u.default.Path_Super_LionRoar,count:1})];case 1:e.sent(),e.label=2;case 2:return[2,c.default.getInstance().getNodeNotNull(u.default.Key_Super_LionRoar)]}})})},t.prototype.onFire=function(){var e=this;this.timer=0;var t=p.default.PlayerNode.getPosition();this.getBullet().then(function(o){null!==o&&(l.default.getInstance().playSound(u.default.SEF_LionRoar),o.setParent(p.default.GameObjNode),o.setPosition(t),o.getComponent(d.default).onInit(e),o.zIndex=cc.macro.MAX_ZINDEX,o.scale=e.bulletScale,e.onFireSamllBullet(t))})},t.prototype.getSmallBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return c.default.getInstance().isHasNodePool(u.default.Key_Super_LionRoar_Small)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_Super_LionRoar_Small,prePath:u.default.Path_Super_LionRoar_Small,count:8})];case 1:e.sent(),e.label=2;case 2:return[2,c.default.getInstance().getNodeNotNull(u.default.Key_Super_LionRoar_Small)]}})})},t.prototype.onFireSamllBullet=function(e){for(var t=this,o=function(o){n.getSmallBullet().then(function(n){if(null!==n){n.setParent(p.default.GameObjNode),n.setPosition(e);var i=cc.v2(cc.Vec2.UP).rotate(o*Math.PI*2/8);n.getComponent(f.default).onInit(t,i)}})},n=this,i=0;i<8;i++)o(i)},a([y],t)}(h.default));o.default=g,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../playerBullet/super/PlayerBullet_Super_LionRoar_008":"PlayerBullet_Super_LionRoar_008","../../playerBullet/super/PlayerBullet_Super_LionRoar_Small_008":"PlayerBullet_Super_LionRoar_Small_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_Phoenix_008:[function(e,t,o){"use strict";cc._RF.push(t,"04333nhBqBEKJU7dw14ZJOq","PlayerWeapon_Super_Phoenix_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../Config_008"),u=e("../../GamingData_008"),p=e("../../playerBullet/super/PlayerBullet_Super_Phoenix_008"),d=e("../BasePlayerWeapon_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=-1,t.timer=0,t.currFireCount=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,l.default.getInstance().isHasNodePool(c.default.KeyPath_Super_Phoenix)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.KeyPath_Super_Phoenix,prePath:c.default.KeyPath_Super_Phoenix,count:1})];case 1:e.sent(),e.label=2;case 2:return l.default.getInstance().isHasNodePool(c.default.KeyPath_Super_Phoenix_ground)?[3,4]:[4,l.default.getInstance().onInitNodePool({key:c.default.KeyPath_Super_Phoenix_ground,prePath:c.default.KeyPath_Super_Phoenix_ground,count:1})];case 3:e.sent(),e.label=4;case 4:return this.state=0,this.timer=0,this.currFireCount=0,[2]}})})},t.prototype.update=function(e){u.default.isGamePause||(this.timer-=e,0===this.state&&this.timer<=0&&this.onFire())},t.prototype.onFire=function(){this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.state=0,this.timer=this.fireCoolDownTime,this.currFireCount=0):(this.state=0,this.timer=.2);var e=l.default.getInstance().getNodeNotNull(c.default.KeyPath_Super_Phoenix);if(null!==e){e.setParent(u.default.GameObjNode);var t=2*Math.PI*Math.random(),o=u.default.PlayerNode.getPosition(),n=cc.v2(o.x+2400*Math.cos(t),o.y+2400*Math.sin(t));e.setPosition(n),e.scale=this.bulletScale,e.zIndex=cc.macro.MAX_ZINDEX-100,e.getComponent(p.default).onInit(this,o.sub(n).normalize())}},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../playerBullet/super/PlayerBullet_Super_Phoenix_008":"PlayerBullet_Super_Phoenix_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_RollingLightning_008:[function(e,t,o){"use strict";cc._RF.push(t,"49fc1uDCnJJDoXG3fxkR752","PlayerWeapon_Super_RollingLightning_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../Config_008"),u=e("../../GamingData_008"),p=e("../../playerBullet/PlayerBullet_RollingLightning_008"),d=e("../BasePlayerWeapon_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireInterval=.2,t.bulletSpeed=750,t.bulletAliveTime=3,t.bulletOffsetAngle=6,t.bulletOffsetRate=.5,t.intervalAngle=15,t.bulletOffset=cc.v2(0,100),t.state="idle",t.bulletKey=c.default.Key_Super_RollingLightning,t.bulletPath=c.default.Path_Super_RollingLightning,t.preKey=c.default.Key_EF_RollingLightning_Pre,t.prePath=c.default.Path_EF_RollingLightning_Pre,t.preNode=null,t.aniFinishFunc=null,t.isAni=!1,t.fireIntervalTimer=0,t.lastMoveDir=cc.Vec2.RIGHT,t}return i(t,e),t.prototype.update=function(e){if(!u.default.isGamePause)switch(this.state){case"idle":this.onIdle(e);break;case"fire":this.onFire(e);break;case"onFire":var t=u.default.PlayerMoveDir.clone();t.equals(cc.Vec2.ZERO)||(this.lastMoveDir=t)}},t.prototype.onInitWeapon=function(){},t.prototype.onIdle=function(e){var t=this,o=u.default.PlayerMoveDir.clone(),n=u.default.PlayerNode.getChildByName("efNode2");o.equals(cc.Vec2.ZERO)||(this.lastMoveDir=o),this.fireIntervalTimer+=e,this.preNode||(this.preNode=new cc.Node,this.preNode.parent=n,this.preNode.setPosition(0,0)),this.isAni?this.aniFinishFunc=function(){t.onCreatePre()}:this.onCreatePre(),this.fireIntervalTimer>=this.fireInterval&&(this.fireIntervalTimer=0,this.state="fire")},t.prototype.onFire=function(){var e=this;this.state="onFire",this.aniFinishFunc=function(){return r(e,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,(o=this.bulletCount,void 0===n&&(n=e.bulletAliveTime),r(e,void 0,void 0,function(){var e,t,i;return s(this,function(a){switch(a.label){case 0:e=-(o>>1)*this.intervalAngle,t=0,a.label=1;case 1:return t<o?[4,this.onGetBullet()]:[3,4];case 2:(i=a.sent())&&i.onInit(this,this.lastMoveDir.rotate(cc.misc.degreesToRadians(e+this.intervalAngle*t)),this.bulletSpeed,n,this.bulletOffsetAngle,this.bulletOffsetRate),a.label=3;case 3:return t++,[3,1];case 4:return this.state="idle",[2]}})}))];case 1:return t.sent(),[2]}var o,n})})}},t.prototype.onCreatePre=function(){return r(this,void 0,void 0,function(){var e,t,o,n=this;return s(this,function(i){switch(i.label){case 0:return this.isAni=!0,l.default.getInstance().isHasNodePool(this.preKey)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:this.preKey,prePath:this.prePath,count:1})];case 1:i.sent(),i.label=2;case 2:return(e=this.preNode.getChildByName(this.preKey)||l.default.getInstance().getNodeNotNull(this.preKey))?(e.name=this.preKey,e.parent=this.preNode,(t=e.getComponent(sp.Skeleton))?(t.setAnimation(0,"qianyao",!1),t.setCompleteListener(function(){n.isAni=!1,n.aniFinishFunc&&n.aniFinishFunc()}),o=t.getCurrent(0).animation.duration/this.fireInterval,t.timeScale=o,[2]):[2]):[2]}})})},t.prototype.onGetBullet=function(){return r(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return l.default.getInstance().isHasNodePool(this.bulletKey)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:this.bulletKey,prePath:this.bulletPath,count:1})];case 1:o.sent(),o.label=2;case 2:return(e=l.default.getInstance().getNodeNotNull(this.bulletKey))?(e.parent=u.default.GameObjNode,t=u.default.PlayerNode.getChildByName("knifeCenterNode"),e.setPosition(e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(this.bulletOffset))),e.scale=this.bulletScale,[2,e.getComponent(p.default)]):[2]}})})},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../GamingData_008":"GamingData_008","../../playerBullet/PlayerBullet_RollingLightning_008":"PlayerBullet_RollingLightning_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_RotatingKnife_008:[function(e,t,o){"use strict";cc._RF.push(t,"474c3qAPQ9Fe4wuteRYsTqp","PlayerWeapon_Super_RotatingKnife_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../Config_008"),u=e("../../Config_Gaming_008"),p=e("../../DelegateManager_008"),d=e("../../GamingData_008"),f=e("../../playerBullet/PlayerBullet_RotatingKnife_008"),h=e("../../playerBullet/super/PlayerBullet_Super_RotatingKnife_Flying_008"),_=e("../BasePlayerWeapon_008"),y=cc._decorator,g=y.ccclass,m=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.knifeCenterNode=null,t.efNode_pickUpWeapon=null,t.throwFlyingKnifeTimer=0,t.flyingKnifeRadians=0,t.knifeArr=[],t.knifeRestoreTimer=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return d.default.isEquipRotatingKnife=!0,this.knifeCenterNode=this.player.getChildByName("knifeCenterNode"),this.efNode_pickUpWeapon=this.player.getChildByName("efNode2").getChildByName("efNode_pickUpWeapon"),p.default.onRotatingKnifeResetBulletAngle.addDelegate(this.onResetKnifeAngle,this),p.default.onRotatingKnifePickUpKnife.addDelegate(this.onPickUpWeapon,this),l.default.getInstance().isHasNodePool(c.default.Key_Super_Knife)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_Super_Knife,prePath:c.default.Path_Super_Knife,count:10})];case 1:e.sent(),e.label=2;case 2:return l.default.getInstance().isHasNodePool(c.default.Key_Super_Knife_Flying)?[3,4]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_Super_Knife_Flying,prePath:c.default.Path_Super_Knife_Flying,count:5})];case 3:e.sent(),e.label=4;case 4:return this.onInitKnife(),this.throwFlyingKnifeTimer=0,this.flyingKnifeRadians=0,[2]}})})},t.prototype.onRecovery=function(){p.default.onRotatingKnifeResetBulletAngle.removeDelegate(this.onResetKnifeAngle,this),p.default.onRotatingKnifePickUpKnife.removeDelegate(this.onPickUpWeapon,this),this.onRecoveryAllKnife(),this.knifeRestoreTimer=0,e.prototype.onRecovery.call(this)},t.prototype.update=function(e){d.default.isGamePause||(this.knifeArr.length<this.bulletCount&&this.onTryRestoreKnife(e),this.resetAngleTimer<0&&(this.resetAngleTimer+=e,this.resetAngleTimer>=0&&this.onResetKnifeAngle()),this.updateKnife(),this.updateFlyingKnife(e))},t.prototype.onInitKnife=function(){for(var e=0;e<this.bulletCount;e++){var t=l.default.getInstance().getNodeNotNull(c.default.Key_Super_Knife);null!==t&&(t.setParent(d.default.GameObjNode),t.scale=this.bulletScale,t.getComponent(f.default).onInit(this,u.Config_Gaming_008.RotatingKnife_Super_RotateSpeed),this.knifeArr.push(t))}this.updateKnife(),this.onResetKnifeAngle()},t.prototype.onRecoveryAllKnife=function(){for(var e=0;e<this.knifeArr.length;e++)l.default.getInstance().recoveryNode(c.default.Key_Super_Knife,this.knifeArr[e]);this.knifeArr=[]},t.prototype.onTryRestoreKnife=function(e){this.knifeRestoreTimer+=e,this.knifeRestoreTimer>this.fireCoolDownTime&&(this.knifeRestoreTimer=0,this.onAddKnife())},t.prototype.onAddKnife=function(){var e=l.default.getInstance().getNodeNotNull(c.default.Key_Super_Knife);null!==e&&(e.opacity=0,e.setParent(d.default.GameObjNode),e.scale=this.bulletScale,e.getComponent(f.default).onInit(this,u.Config_Gaming_008.RotatingKnife_Super_RotateSpeed),this.knifeArr.push(e),this.onResetKnifeAngle(),this.scheduleOnce(function(){e.parent&&(e.opacity=255)},0))},t.prototype.onPickUpWeapon=function(){if(!(this.knifeArr.length>=u.Config_Gaming_008.RotatingKnife_PlayerMaxKnifeCount)){var e=l.default.getInstance().getNode(c.default.Key_EF_PickUpWeapon);null!==e&&e.setParent(this.efNode_pickUpWeapon),this.onAddKnife()}},t.prototype.onResetKnifeAngle=function(){this.resetAngleTimer=0;var e=this.knifeArr.length;if(e>0)for(var t=this.knifeArr[0].angle,o=360/e,n=0;n<e;n++)this.knifeArr[n].angle=-o*n+t},t.prototype.onRemoveKnife=function(e){this.resetAngleTimer=-2;var t=this.knifeArr.indexOf(e);-1!==t&&(this.knifeArr.splice(t,1),l.default.getInstance().recoveryNode(c.default.Key_Super_Knife,e)),this.knifeArr.length>this.bulletCount&&this.onResetKnifeAngle()},t.prototype.updateKnife=function(){for(var e=this.node.getPosition().add(this.knifeCenterNode.getPosition()),t=0;t<this.knifeArr.length;t++)this.knifeArr[t].setPosition(e)},t.prototype.updateFlyingKnife=function(e){this.throwFlyingKnifeTimer+=e,this.throwFlyingKnifeTimer>=u.Config_Gaming_008.RotatingKnife_Super_ThrowFlyingIntarval&&(this.throwFlyingKnifeTimer-=u.Config_Gaming_008.RotatingKnife_Super_ThrowFlyingIntarval,this.onThrowFlyingKnife())},t.prototype.onThrowFlyingKnife=function(){for(var e=0;e<2;e++){var t=l.default.getInstance().getNodeNotNull(c.default.Key_Super_Knife_Flying);if(null!==t){t.setParent(d.default.GameObjNode),t.angle=0;var o=this.node.getPosition().add(this.knifeCenterNode.getPosition()),n=this.flyingKnifeRadians+2*Math.PI/2*e;t.setPosition(o);var i=this.getFlyingKnifeMoveDir(n);t.getComponent(h.default).onInit(this,i)}}this.flyingKnifeRadians+=.314},t.prototype.getFlyingKnifeMoveDir=function(e){return cc.v2(cc.Vec2.RIGHT).rotate(e)},a([g],t)}(_.default));o.default=m,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../playerBullet/PlayerBullet_RotatingKnife_008":"PlayerBullet_RotatingKnife_008","../../playerBullet/super/PlayerBullet_Super_RotatingKnife_Flying_008":"PlayerBullet_Super_RotatingKnife_Flying_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_SixPulseHolySword_008:[function(e,t,o){"use strict";cc._RF.push(t,"f1b1adpOGRHSLKEYWa/aNqU","PlayerWeapon_Super_SixPulseHolySword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../Utils/RandomUtils"),c=e("../../../../mag/AudioMag"),u=e("../../../../mag/NodePoolManager"),p=e("../../Config_008"),d=e("../../EnemyManager_008"),f=e("../../GamingData_008"),h=e("../../playerBullet/super/PlayerBullet_Super_SixPulseHolySword_008"),_=e("../BasePlayerWeapon_008"),y=cc._decorator,g=y.ccclass,m=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.firePos_sixPulseHolySword=null,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.firePos_sixPulseHolySword=this.player.getChildByName("actNode").getChildByName("firePos_sixPulseHolySword"),this.state=-1,this.timer=this.fireCoolDownTime,u.default.getInstance().isHasNodePool(p.default.Key_Super_SixPulseHolySword)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Super_SixPulseHolySword,prePath:p.default.Path_Super_SixPulseHolySword,count:6})];case 1:e.sent(),e.label=2;case 2:return this.state=0,[2]}})})},t.prototype.update=function(e){f.default.isGamePause||0===this.state&&(this.timer+=e,this.timer>=this.fireCoolDownTime&&(this.timer=0,this.onFire()))},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return u.default.getInstance().isHasNodePool(p.default.Key_Super_SixPulseHolySword)?[3,2]:[4,u.default.getInstance().onInitNodePool({key:p.default.Key_Super_SixPulseHolySword,prePath:p.default.Path_Super_SixPulseHolySword,count:6})];case 1:e.sent(),e.label=2;case 2:return[2,u.default.getInstance().getNodeNotNull(p.default.Key_Super_SixPulseHolySword)]}})})},t.prototype.onFire=function(){c.default.getInstance().playSound(p.default.SEF_SixPulseHolySword);for(var e=this.getFireTargetPos(),t=f.default.PlayerNode.getPosition().add(this.firePos_sixPulseHolySword.getPosition()),o=cc.v2(e.sub(t).normalize()),n=0;n<this.bulletCount;n++){var i=u.default.getInstance().getNodeNotNull(p.default.Key_Super_SixPulseHolySword);if(null!==i){i.setParent(f.default.GameObjNode),i.scale=this.bulletScale;var a=o.rotate(.128*this.bulletCount*-.5+.128*n).normalize();i.setPosition(t),i.getComponent(h.default).onInit(this,a)}}},t.prototype.getFireTargetPos=function(){var e=d.default.ins.getRandomEnemyPos();return e||(e=cc.v2(l.RandomUtils.getRandomInt(-400,400),l.RandomUtils.getRandomInt(-700,600))),e},a([g],t)}(_.default));o.default=m,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../playerBullet/super/PlayerBullet_Super_SixPulseHolySword_008":"PlayerBullet_Super_SixPulseHolySword_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_Super_SummonSword_008:[function(e,t,o){"use strict";cc._RF.push(t,"57791emacNLjp5GriglOoQQ","PlayerWeapon_Super_SummonSword_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/NodePoolManager"),c=e("../../playerBullet/PlayerBullet_SummonSword_008"),u=e("../../Config_008"),p=e("../../EnemyManager_008"),d=e("../../GamingData_008"),f=e("../../../../mag/AudioMag"),h=e("../../Config_Gaming_008"),_=e("../../../../Utils/RandomUtils"),y=e("../BasePlayerWeapon_008"),g=cc._decorator,m=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.swordArr=[],t.weaponSlotWidth=100,t.moveSpeed=500,t.curState=0,t.attackGuideNode=null,t.attackCount=3,t.attackCountTimer=0,t.attackContinueRate=.7,t.stateTimer=0,t.recoveryTimer=0,t.bulletKey=u.default.Key_Super_SummonSword,t.bulletPath=u.default.Path_Super_SummonSword,t.createShadowFunc=new Map,t.shadowAlive=.5,t.shadowCount=3,t.particleCount=3,t.particleInterval=.1,t.particleAlive=1,t.particleFunc=new Map,t._curEnemiesPos=[],t.particlePool=null,t.particle=null,t}return i(t,e),Object.defineProperty(t.prototype,"curEnemiesPos",{get:function(){return 0===this._curEnemiesPos.length&&this.getEnemiesPos(),this._curEnemiesPos},set:function(e){var t=this;this._curEnemiesPos=e,this.scheduleOnce(function(){t._curEnemiesPos=[]},.1)},enumerable:!1,configurable:!0}),t.prototype.initParticlePool=function(e){this.particlePool||(this.particle=cc.instantiate(e.node.getChildByName("particle")),this.particlePool=new cc.NodePool,this.particlePool.put(this.particle))},t.prototype.getParticle=function(){if(!this.particlePool)return null;var e=null;return(e=this.particlePool.size()>0?this.particlePool.get():cc.instantiate(this.particle)).scale=1,e.opacity=255,e},t.prototype.recoveryParticle=function(e){this.particlePool&&this.particlePool.put(e)},t.prototype.onCreateShadow=function(e){var t,o=this,n=function(){return r(o,void 0,void 0,function(){var t,o,n,i,a,r=this;return s(this,function(s){switch(s.label){case 0:return d.default.isGamePause?[2]:(null==e?void 0:e.node)&&cc.isValid(null==e?void 0:e.node)?[4,this.getSword()]:[2];case 1:return t=s.sent(),cc.Tween.stopAllByTarget(t),o=t.getComponent(c.default),n=this.shadowAlive,i=1.2*e.node.scale,t.parent=this.player.parent,o.weapon=this,t.scale=e.node.scale,t.setPosition(this.player.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO))),t.angle=e.node.angle,t.zIndex=-999,t.opacity=128,(a=t.getChildByName("sprite").getComponent(cc.Sprite)).fillStart=0,a.fillRange=1,cc.tween(t).parallel(cc.tween().to(n,{opacity:0},{easing:function(n){return t.opacity<25.5?o.setHurtState(!1):d.default.isGamePause?o.setHurtState(!1):o.setHurtState(e.isHurt),cc.easing.quadOut(n)}}),cc.tween().to(n,{scale:i},{easing:cc.easing.quadOut})).call(function(){l.default.getInstance().recoveryNode(r.bulletKey,t)}).start(),[2]}})})};return null===(t=this.createShadowFunc)||void 0===t||t.set(e,n),n},t.prototype.onOpenShadow=function(e){this.onCloseShadow(e),null==e||e.schedule(this.onCreateShadow(e),this.shadowAlive/this.shadowCount)},t.prototype.onCloseShadow=function(e){var t,o=null===(t=this.createShadowFunc)||void 0===t?void 0:t.get(e);o&&(null==e||e.unschedule(o),this.createShadowFunc.delete(e))},t.prototype.onCreateParticle=function(e){var t=this,o=function(){return r(t,void 0,void 0,function(){var t,o=this;return s(this,function(){return d.default.isGamePause?[2]:(t=this.getParticle())?(t.setParent(this.player.parent),t.setPosition(t.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.v2(_.RandomUtils.getRandomInt(-e.node.width/2,e.node.width/2),0)))),cc.tween(t).to(this.particleAlive,{scale:1.5,opacity:0},{easing:cc.easing.quadOut}).call(function(){o.recoveryParticle(t)}).start(),[2]):[2]})})};return this.particleFunc.set(e,o),o},t.prototype.onOpenParticle=function(e){this.onCloseParticle(e),e.schedule(this.onCreateParticle(e),this.particleInterval/this.particleCount)},t.prototype.onCloseParticle=function(e){var t=this.particleFunc.get(e);t&&(e.unschedule(t),this.particleFunc.delete(e))},t.prototype.onInitWeapon=function(){this.attackGuideNode=new cc.Node,this.attackGuideNode.parent=this.node,this.attackGuideNode.active=!0,this.attackGuideNode.angle=0,this.attackGuideNode.setPosition(0,this.player.height/2)},t.prototype.onRecovery=function(){this.attackGuideNode.destroy(),this.attackGuideNode=null,this.onRecoveryAllSword(),e.prototype.onRecovery.call(this)},t.prototype.onResetData=function(){e.prototype.onResetData.call(this);for(var t=this.swordArr.length;t<this.bulletCount;t++)this.onAddSword()},t.prototype.lateUpdate=function(e){d.default.isGamePause||this.updateSword(e)},Object.defineProperty(t.prototype,"CoolDownTime",{get:function(){return this.fireCoolDownTime},enumerable:!1,configurable:!0}),t.prototype.onRecoveryAllSword=function(){var e=this;this.swordArr.forEach(function(t){e.onCloseShadow(t),e.onCloseParticle(t),t.state=0,t.node.outSword&&l.default.getInstance().recoveryNode(e.bulletKey,t.node.outSword),l.default.getInstance().recoveryNode(e.bulletKey,t.node)}),this.swordArr=[]},t.prototype.onRemoveSword=function(e){var t=e.getComponent(c.default);if(t){var o=this.swordArr.indexOf(t);-1!==o&&(this.swordArr.splice(o,1),t.setHurtState(!1),t.state=0,t.node.scale=1,t.node.outSword&&l.default.getInstance().recoveryNode(this.bulletKey,t.node.outSword),l.default.getInstance().recoveryNode(this.bulletKey,t.node))}},t.prototype.onResetSword=function(){var e=this;this.swordArr.forEach(function(t){t.node.stopAllActions(),t.state=0,t.node.scale=e.bulletScale,t.node.opacity=255;var o=t.node.getChildByName("sprite").getComponent(cc.Sprite);o.fillStart=0,o.fillRange=1})},t.prototype.updateSword=function(){for(var e=0;e<this.swordArr.length;e++){var t=this.swordArr[e];if(!(t.node.getNumberOfRunningActions()>0))switch(t.state){case 0:this.onIdleSword(t);break;case 1:this.onAttackSword(t);break;case 2:this.onRecoverySword(t);break;case 3:this.onRotateSword(t)}}},t.prototype.onRecoverySword=function(e){e.setHurtState(!0),this.onChangeSwordParent(e,this.node);var t=this.getAngleAndPosOnPlayer(e),o=t.angle,n=t.targetPos;e.node.stopAllActions(),cc.tween(e.node).to(.3,{position:cc.v3(n),angle:o}).call(function(){e.state=0}).start()},t.prototype.getSword=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return l.default.getInstance().isHasNodePool(this.bulletKey)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:this.bulletKey,prePath:this.bulletPath,count:1})];case 1:e.sent(),e.label=2;case 2:return[2,l.default.getInstance().getNodeNotNull(this.bulletKey)]}})})},t.prototype.getEnemiesPos=function(){var e=this,t=p.default.ins.getEnemyInRange(this.node.getPosition(),1e3).filter(function(e){return null!==e});if(0===t.length)return null;var o=t.map(function(t){return Math.floor(10*e.player.getPosition().angle(t.getPosition()))}),n=o.reduce(function(e,t){return e+t},0)/o.length,i=t.map(function(t,i){return{enemy:t,w:(Math.floor(t.getPosition().sub(e.player.getPosition()).mag())<<1)+Math.abs(o[i]-n)}}).sort(function(e,t){return e.w-t.w});this.curEnemiesPos=i.map(function(e){return e.enemy.getPosition()})},t.prototype.getNearestEnemyPos=function(){return this.curEnemiesPos.shift()},t.prototype.onAddSword=function(){var e=this;this.getSword().then(function(t){if(null!==t){if(cc.Tween.stopAllByTarget(t),e.swordArr.length>=e.bulletCount)return void l.default.getInstance().recoveryNode(e.bulletKey,t);var o=t.getComponent(c.default);o.weapon=e,o.node.setParent(e.player),e.swordArr.push(o),e.onResetSword(),e.onOpenShadow(o),e.initParticlePool(o)}})},t.prototype.onIdleSword=function(e){var t=this,o=this.getAngleAndPosOnPlayer(e),n=o.angle,i=o.targetPos;e.setHurtState(!1),this.onChangeSwordParent(e,d.default.PlayerNode),e.node.stopAllActions(),e.node.z=n,cc.tween(e.node).to(.1,{position:cc.v3(i),angle:180}).call(function(){cc.tween(e.node).to(t.CoolDownTime,{z:n+360},{progress:function(o,n,i,a){i=cc.misc.lerp(o,n,a);var r=e.node.parent.convertToNodeSpaceAR(t.player.convertToWorldSpaceAR(cc.v2(0,t.player.height/2).rotate(cc.misc.degreesToRadians(i)).add(cc.v2(0,t.player.height/2))));e.node.setPosition(r);var s=t.player.getChildByName("actNode").getSiblingIndex()+(t.player.height/2-r.y);return e.node.setSiblingIndex(s),i}}).set({z:n}).start()}).start(),cc.tween(e.node).delay(this.CoolDownTime).call(function(){if(p.default.ins.getNearestEnemyPos()){var o=cc.Vec2.random(cc.Vec2.ONE,Math.max(100,30*t.swordArr.length));cc.tween(e.node).to(.2,{position:cc.v3(o)}).call(function(){e.curAttTimes=0,e.state=3}).start()}}).start()},t.prototype.onAttackSword=function(e){return r(this,void 0,void 0,function(){var t,o,n,i,a,r,l,c,u;return s(this,function(s){switch(s.label){case 0:if(e.setHurtState(!1),e.setHurtState(!0),e.node.stopAllActions(),e.curAttTimes++,!(t=this.getNearestEnemyPos()))return e.state=2,[2];for(this.onChangeSwordParent(e,d.default.GameObjNode),this.onOpenParticle(e),o=cc.v2(e.node.parent.convertToNodeSpaceAR(d.default.GameObjNode.convertToWorldSpaceAR(t))),n=o.sub(e.node.getPosition()).normalize(),i=cc.misc.radiansToDegrees(n.signAngle(cc.Vec2.UP)),a=180-i,r=this.attackCount>=e.curAttTimes?3:2,l=1,c=[this.onStabSword,this.onSlashSword,this.onSmashSword],u=_.RandomUtils.getRandomInt(0,1e5);e.node.getActionByTag(u);)u=_.RandomUtils.getRandomInt(0,1e5);cc.tween(e.node).delay(.1).call(function(){}).union().repeatForever().tag(u).start(),s.label=1;case 1:return Math.random()<l&&c.length>0?(l*=this.attackContinueRate,[4,c.splice(_.RandomUtils.getRandomInt(0,c.length-1),1)[0].call(this,e,o,n,a)]):[3,3];case 2:return s.sent(),[3,1];case 3:return e.node.stopActionByTag(u),this.onCloseParticle(e),e.state=r,[2]}})})},t.prototype.onRotateSword=function(e){e.setHurtState(!0),this.onChangeSwordParent(e,d.default.GameObjNode),e.node.stopAllActions(),cc.tween(e.node).to(.2,{angle:360}).set({angle:0}).call(function(){e.state=1}).start()},t.prototype.getAngleAndPosOnPlayer=function(e){var t=360*(this.swordArr.indexOf(e)+1)/this.swordArr.length;return{angle:t,targetPos:e.node.parent.convertToNodeSpaceAR(this.player.convertToWorldSpaceAR(cc.v2(0,this.player.height/2).rotate(cc.misc.degreesToRadians(t)).add(cc.v2(0,this.player.height/2))))}},t.prototype.onChangeSwordParent=function(e,t){var o=e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);e.node.parent=t,e.node.setPosition(t.convertToNodeSpaceAR(o))},t.prototype.onStabSword=function(e,t,o,n){var i=this;return new Promise(function(a){var r=t.mag()/(i.moveSpeed*h.Config_Gaming_008.SummonSword_bulletRotateSpeed/30)/i.bulletScale;e.node.angle=n,e.node.setPosition(d.default.PlayerNode.getPosition()),f.default.getInstance().playSound(Math.random()>.5?u.default.SEF_SummonSword_Attack_1:u.default.SEF_SummonSword_Attack_2),cc.tween(e.node).to(r,{position:cc.v3(t.sub(o.mul(480)))},{easing:cc.easing.backInOut}).call(function(){a()}).start()})},t.prototype.onSlashSword=function(e,t,o,n){return new Promise(function(i){var a=o.rotate(cc.misc.degreesToRadians(90));f.default.getInstance().playSound(u.default.SEF_SummonSword_Attack_2),cc.tween(e.node).to(.3,{position:cc.v3(t.add(a.mul(200))),angle:n+90}).to(.2,{position:cc.v3(t),angle:n-90},{easing:cc.easing.backIn}).delay(.2).to(.5,{position:cc.v3(t.add(o.mul(480))),angle:n+720}).call(function(){i()}).start()})},t.prototype.onSmashSword=function(e,t){var o=this;return new Promise(function(n){return r(o,void 0,void 0,function(){var o,i,a,r,p,_,y,g,m,v,b=this;return s(this,function(s){switch(s.label){case 0:return[4,this.getSword()];case 1:return o=s.sent(),cc.Tween.stopAllByTarget(o),i=o.getComponent(c.default),a=e.node.getChildByName("sprite").getComponent(cc.Sprite),r=o.getChildByName("sprite").getComponent(cc.Sprite),p=t.x>d.default.PlayerNode.x?30:-30,_=cc.Vec2.UP.rotate(cc.misc.degreesToRadians(p)).neg(),y=t.sub(_.mul(d.default.PlayerNode.getPosition().sub(t).mag()*this.bulletScale*2)),g=p,m=t.sub(_.mul(.6/.4*480)),v=m.sub(y).mag()/(this.moveSpeed*h.Config_Gaming_008.SummonSword_bulletRotateSpeed/30)/this.bulletScale,i.weapon=this,i.node.setParent(e.node.parent),o.scale=e.node.scale,o.active=!1,f.default.getInstance().playSound(u.default.SEF_SummonSword_Attack_2),cc.tween(e.node).to(v,{position:cc.v3(y),angle:g+720}).call(function(){b.onCloseShadow(e)}).to(v/2,{position:cc.v3(m)}).call(function(){a.fillStart=(360-e.node.angle)%360/360,a.fillRange=.5}).delay(.1).call(function(){var n=cc.v2(_.x,-_.y);o.setPosition(t.sub(n.mul(480/(.6/.4)))),o.angle=180-p,r.fillStart=(360-o.angle)%360/360,r.fillRange=.5,o.active=!0,e.node.attr({outSword:o})}).to(.5,{opacity:0},{easing:function(t){return o.opacity=e.node.opacity,cc.easing.quartIn(t)}}).call(function(){a.fillStart=0,a.fillRange=1,e.node.opacity=255,b.onOpenShadow(e),l.default.getInstance().recoveryNode(b.bulletKey,e.node.outSword),n()}).start(),[2]}})})})},a([m],t)}(y.default));o.default=v,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../playerBullet/PlayerBullet_SummonSword_008":"PlayerBullet_SummonSword_008","../BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_SwordFormation2_008:[function(e,t,o){"use strict";cc._RF.push(t,"e5a88M6sJpN7rL1SriMOthy","PlayerWeapon_SwordFormation2_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../GamingData_008"),p=e("../playerBullet/PlayerBullet_SwordFormation2_Circle_008"),d=e("./BasePlayerWeapon_008"),f=cc._decorator,h=f.ccclass,_=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t.state=0,t.currFireCount=0,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,this.timer=0,this.currFireCount=0,l.default.getInstance().isHasNodePool(c.default.Key_SwordFormation_Bg2)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_SwordFormation_Bg2,prePath:c.default.Path_SwordFormation_Bg2,count:3})];case 1:e.sent(),e.label=2;case 2:return l.default.getInstance().isHasNodePool(c.default.Key_SwordFormation_Sword)?[3,4]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_SwordFormation_Sword,prePath:c.default.Path_SwordFormation_Sword,count:5})];case 3:e.sent(),e.label=4;case 4:return this.state=0,[2]}})})},t.prototype.update=function(e){u.default.isGamePause||(this.timer-=e,0===this.state?this.timer<=0&&this.onStartFire():1===this.state&&this.timer<=0&&this.onFire())},t.prototype.onStartFire=function(){this.state=1,this.tempBulletCount=this.bulletCount,this.startRadians=Math.random()*Math.PI*2,this.centerPos=u.default.PlayerNode.getPosition(),this.onFire()},t.prototype.onFire=function(){var e=l.default.getInstance().getNodeNotNull(c.default.Key_SwordFormation_Bg2);if(null!==e){e.setParent(u.default.GameObjNode);var t=this.getTargetPos(this.currFireCount);e.setPosition(t),e.zIndex=cc.macro.MIN_ZINDEX+100,e.scale=this.bulletScale,e.getComponent(p.default).onInit(this)}this.currFireCount+=1,this.currFireCount>=this.tempBulletCount?(this.currFireCount=0,this.state=0,this.timer=this.fireCoolDownTime):this.timer=.1},t.prototype.getTargetPos=function(e){var t=this.startRadians+e*Math.PI*2/this.tempBulletCount;return cc.v2(this.centerPos.x+500*Math.cos(t),this.centerPos.y+500*Math.sin(t))},a([h],t)}(d.default));o.default=_,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_SwordFormation2_Circle_008":"PlayerBullet_SwordFormation2_Circle_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_SwordFormation_008:[function(e,t,o){"use strict";cc._RF.push(t,"bd149HGIwtA27ge466GYksT","PlayerWeapon_SwordFormation_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Utils/RandomUtils"),c=e("../../../mag/NodePoolManager"),u=e("../Config_008"),p=e("../EffectMag_008"),d=e("../EnemyManager_008"),f=e("../GamingData_008"),h=e("../playerBullet/PlayerBullet_SwordFormation_Sword_008"),_=e("./BasePlayerWeapon_008"),y=cc._decorator,g=y.ccclass,m=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=0,t.state=0,t.currFireCount=0,t.radius=250,t.bulletRadius=50,t.tempBulletBgNode=null,t}return i(t,e),t.prototype.onInitWeapon=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.state=-1,this.timer=0,this.currFireCount=0,c.default.getInstance().isHasNodePool(u.default.Key_SwordFormation_Bg)?[3,2]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_SwordFormation_Bg,prePath:u.default.Path_SwordFormation_Bg,count:1})];case 1:e.sent(),e.label=2;case 2:return c.default.getInstance().isHasNodePool(u.default.Key_SwordFormation_Sword)?[3,4]:[4,c.default.getInstance().onInitNodePool({key:u.default.Key_SwordFormation_Sword,prePath:u.default.Path_SwordFormation_Sword,count:5})];case 3:e.sent(),e.label=4;case 4:return this.state=0,[2]}})})},t.prototype.update=function(e){f.default.isGamePause||(this.timer-=e,0===this.state?this.timer<=0&&this.onStartFire():1===this.state&&this.timer<=0&&this.onFire())},t.prototype.onStartFire=function(){this.state=1;var e=d.default.ins.getNearestEnemyPos();null===e&&(e=cc.v2(l.RandomUtils.getRandomInt(-400,400),l.RandomUtils.getRandomInt(-600,600)).add(f.default.PlayerNode.getPosition())),this.centerPos=e;var t=c.default.getInstance().getNodeNotNull(u.default.Key_SwordFormation_Bg);this.tempBulletBgNode=t,null!==t&&(t.setParent(p.default.ins.effectNode_low),t.setPosition(e),t.scale=this.bulletScale),this.onFire()},t.prototype.onFire=function(){var e;this.currFireCount+=1,this.currFireCount>=this.bulletCount?(e=!0,this.currFireCount=0,this.state=0,this.timer=this.fireCoolDownTime):(e=!1,this.timer=.1);var t=c.default.getInstance().getNodeNotNull(u.default.Key_SwordFormation_Sword);if(null!==t){t.setParent(f.default.GameObjNode);var o=Math.random()*Math.PI*2,n=l.RandomUtils.getRandomInt(this.bulletRadius,this.radius-this.bulletRadius);t.setPosition(this.centerPos.x+this.bulletScale*n*Math.cos(o),this.centerPos.y+this.bulletScale*n*Math.sin(o)),t.scale=this.bulletScale,t.getComponent(h.default).onInit(this,e?this.onRecoveryBulletBgNode.bind(this,this.tempBulletBgNode):null)}},t.prototype.onRecoveryBulletBgNode=function(e){null!==e&&c.default.getInstance().recoveryNode(u.default.Key_SwordFormation_Bg,e)},t.prototype.onRecovery=function(){null!==this.tempBulletBgNode&&null!==this.tempBulletBgNode.parent&&this.onRecoveryBulletBgNode(this.tempBulletBgNode),e.prototype.onRecovery.call(this)},a([g],t)}(_.default));o.default=m,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../EffectMag_008":"EffectMag_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_SwordFormation_Sword_008":"PlayerBullet_SwordFormation_Sword_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PlayerWeapon_TenThousandSnakes_008:[function(e,t,o){"use strict";cc._RF.push(t,"8048eYE5I9EOIhPyBLYS7aM","PlayerWeapon_TenThousandSnakes_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/NodePoolManager"),c=e("../Config_008"),u=e("../EnemyManager_008"),p=e("../GamingData_008"),d=e("../playerBullet/PlayerBullet_TenThousandSnakes_008"),f=e("./BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.timer=0,t.currFireCount=0,t}return i(t,e),t.prototype.onInitWeapon=function(){this.state=0,this.timer=this.fireCoolDownTime,this.currFireCount=0},t.prototype.update=function(e){p.default.isGamePause||(this.timer+=e,0===this.state?this.timer>=this.fireCoolDownTime&&(this.refreshFireData(),this.onFire()):1===this.state&&this.timer>0&&this.onFire())},t.prototype.getBullet=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return l.default.getInstance().isHasNodePool(c.default.Key_TenThousandSnakes)?[3,2]:[4,l.default.getInstance().onInitNodePool({key:c.default.Key_TenThousandSnakes,prePath:c.default.Path_TenThousandSnakes,count:30})];case 1:e.sent(),e.label=2;case 2:return[2,l.default.getInstance().getNodeNotNull(c.default.Key_TenThousandSnakes)]}})})},t.prototype.onFire=function(){for(var e=this,t=this.startPos,o=this.bulletCount-this.currFireCount,n=function(n){i.getBullet().then(function(i){if(null!==i){i.setParent(p.default.GameObjNode),i.setPosition(t),i.zIndex=cc.macro.MIN_ZINDEX;var a=cc.v2(e.fireDir).rotate(.08*(o-1)/-2+.08*n+e.getRadomFloat(.08)).normalize();i.getComponent(d.default).onInit(e,t,a)}})},i=this,a=0;a<o;a++)n(a);this.currFireCount+=1,this.currFireCount>=this.bulletCount?(this.state=0,this.timer=0,this.currFireCount=0):(this.state=1,this.timer=-.15)},t.prototype.refreshFireData=function(){this.startPos=p.default.PlayerNode.getPosition();var e=u.default.ins.getNearestEnemyPos();this.fireDir=null!==e?e.sub(this.startPos).normalize():cc.Vec2.RIGHT.rotate(this.getRadomFloat(2*Math.PI))},t.prototype.getRadomFloat=function(e){return Math.random()*e},a([_],t)}(f.default));o.default=y,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../EnemyManager_008":"EnemyManager_008","../GamingData_008":"GamingData_008","../playerBullet/PlayerBullet_TenThousandSnakes_008":"PlayerBullet_TenThousandSnakes_008","./BasePlayerWeapon_008":"BasePlayerWeapon_008"}],Player_008:[function(e,t,o){"use strict";cc._RF.push(t,"165ea3L5w5HGbP+S5KQf/Ax","Player_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/AudioMag"),c=e("../Config_008"),u=e("../DelegateManager_008"),p=e("../GamingData_008"),d=e("../misc/HpBarNode_008"),f=e("../playerWeapon/BasePlayerWeapon_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.circleCollider=null,t.actNode=null,t.spine=null,t.hpBar=null,t.ef_ani_restoreLife=null,t.ef_ani_levelUp=null,t.ef_invulnerable=null,t.func_refreshHpBar=null,t.currDir=cc.Vec2.ZERO,t.playerAniName_Idle="jn1-dj",t.playerAniName_Walk="xz",t}return i(t,e),t.prototype.onLoad=function(){p.default.PlayerNode=this.node,p.default.func_onPlayerEFStateChange_RestoreLife=this.onEFStateChange_RestoreLife.bind(this),p.default.func_onPlayerEFStateChange_LevelUp=this.onEFStateChange_LevelUp.bind(this),p.default.func_onPlayPlayerFailAni=this.onPlayFailAni.bind(this),p.default.func_onPlayRevive=this.onRevive.bind(this),p.default.func_onPlayerPlayHitAni=this.onPlayHitAni.bind(this),p.default.playerCircleColliderRadius=this.circleCollider.radius,this.circleColliderPosOffsetY=this.node.scaleY*this.circleCollider.offset.y,u.default.test_log.addDelegate(this.testLog,this)},t.prototype.onDestroy=function(){u.default.test_log.removeDelegate(this.testLog,this)},t.prototype.testLog=function(){console.log("\u73a9\u5bb6\u4f4d\u7f6e ",JSON.stringify(this.node.getPosition()));var e=this.node.getChildByName("CCC");e&&(e.active=!e.active)},t.prototype.start=function(){this.onMoveEnd(),this.spine.setMix(this.playerAniName_Idle,this.playerAniName_Walk,.2),this.spine.setMix(this.playerAniName_Walk,this.playerAniName_Idle,.2),this.func_refreshHpBar=this.hpBar.onInitHpBar(this.node,cc.v2(0,280*this.node.scaleY))},t.prototype.onInit=function(e){return r(this,void 0,void 0,function(){return s(this,function(){return null!==e&&(e.addEvent(this.moveDirChange,this),e.addEvent_StartEnd(this.onMoveStart.bind(this),this.onMoveEnd.bind(this))),this.spine.node.opacity=255,this.spine.node.angle=0,this.spine.timeScale=1,this.ef_invulnerable.opacity=0,this.node.setPosition(0,0),this.refreshCameraPos(),p.default.onSelectSkill(c.WeaponType_008.RotatingKnife),[2]})})},t.prototype.onStopGame=function(){this.onRecoveryAllWepaon()},t.prototype.onMoveStart=function(){this.spine.setAnimation(0,this.playerAniName_Walk,!0)},t.prototype.onMoveEnd=function(){this.spine.setAnimation(0,this.playerAniName_Idle,!0),this.currDir=cc.Vec2.ZERO,p.default.PlayerMoveDir.x=this.currDir.x,p.default.PlayerMoveDir.y=this.currDir.y},t.prototype.moveDirChange=function(e){this.currDir=e,p.default.PlayerMoveDir.x=this.currDir.x,p.default.PlayerMoveDir.y=this.currDir.y,p.default.isGamePause||(this.actNode.scaleX=e.x>=0?1:-1)},t.prototype.onPlayFailAni=function(){l.default.getInstance().playSound(c.default.SEF_PlayerDie),this.spine.timeScale=0,cc.tween(this.spine.node).to(.5,{angle:90}).start()},t.prototype.onPlayHitAni=function(){this.spine.node.opacity=1,cc.tween(this.spine.node).to(.4,{opacity:255}).start()},t.prototype.onRevive=function(){this.spine.timeScale=1,this.spine.node.angle=0,p.default.playerInvulnerableTime=3},t.prototype.update=function(e){if(!p.default.isGamePause){if(p.default.playerInvulnerableTime>0?(p.default.playerInvulnerableTime-=e,p.default.playerInvulnerableTime>1.5?this.ef_invulnerable.opacity=255:this.ef_invulnerable.opacity=p.default.playerInvulnerableTime%.1>.05?255:128):this.ef_invulnerable.opacity=0,!cc.Vec2.ZERO.equals(this.currDir)&&(this.node.x+=this.currDir.x*p.default.PlayerGamingInfo.moveSpeed*e,this.node.y+=this.currDir.y*p.default.PlayerGamingInfo.moveSpeed*e,p.default.isLimitMoveRect&&this.node.getPosition().sub(p.default.limitRectCenterPoint).magSqr()>p.default.limitRectRadiusSqr)){var t=this.node.getPosition().sub(p.default.limitRectCenterPoint).normalize(),o=Math.atan2(t.y,t.x);this.node.x=p.default.limitRectCenterPoint.x+p.default.limitRectRadius*Math.cos(o),this.node.y=p.default.limitRectCenterPoint.y+p.default.limitRectRadius*Math.sin(o)}this.onRefreshCircleColliderPos(),p.default.PlayerCurrHp+=.2*p.default.PlayerGamingInfo.restoreLife*e*p.default.PlayerGamingInfo.maxHp+p.default.PlayerGamingInfo.base_restoreLife*e}},t.prototype.onRefreshCircleColliderPos=function(){p.default.playerCircleColliderPos.x=this.node.x,p.default.playerCircleColliderPos.y=this.node.y+this.circleColliderPosOffsetY},t.prototype.lateUpdate=function(){this.refreshCameraPos(),this.func_refreshHpBar(p.default.PlayerCurrHp/p.default.PlayerGamingInfo.maxHp)},t.prototype.refreshCameraPos=function(){p.default.gameCameraNode.x=this.node.x,p.default.gameCameraNode.y=this.node.y},t.prototype.onEFStateChange_RestoreLife=function(){l.default.getInstance().playSound(c.default.SEF_RestoreLife),this.ef_ani_restoreLife.play()},t.prototype.onEFStateChange_LevelUp=function(){l.default.getInstance().playSound(c.default.SEF_LevelUp),this.ef_ani_levelUp.play()},t.prototype.onEquipWeaponByWeaponType=function(e){var t=c.PlayerWeaponId2TsMap.get(e);t?e<300?this.onEquipWeapon(t,e):this.onEquipSuperWeapon(t,e):console.log("\u6ca1\u6709\u8fd9\u4e2a\u6b66\u5668\u914d\u7f6e "+e)},t.prototype.onEquipWeapon=function(e,t){var o=this.node.getComponent(e);o?(o.onInit(this.node,t),console.log("\u5df2\u6709\u6b66\u5668\uff1f\uff1f\uff1f\uff1f "+t)):(o=this.node.addComponent(e)).onInit(this.node,t),p.default.WeaponIdArr.push(t)},t.prototype.onEquipSuperWeapon=function(e,t){var o=this.node.getComponent(e);o?(o.onInit(this.node,t),console.log("\u5df2\u6709\u6b66\u5668\uff1f\uff1f\uff1f\uff1f "+t)):(o=this.node.addComponent(e)).onInit(this.node,t);var n=t-100,i=p.default.WeaponIdArr.indexOf(n);-1!==i?p.default.WeaponIdArr[i]=t:p.default.WeaponIdArr.push(t)},t.prototype.onRecoveryAllWepaon=function(){for(var e=this.node.getComponents(f.default),t=0;t<e.length;t++)e[t].onRecovery()},a([y(cc.CircleCollider)],t.prototype,"circleCollider",void 0),a([y(cc.Node)],t.prototype,"actNode",void 0),a([y(sp.Skeleton)],t.prototype,"spine",void 0),a([y(d.default)],t.prototype,"hpBar",void 0),a([y(cc.Animation)],t.prototype,"ef_ani_restoreLife",void 0),a([y(cc.Animation)],t.prototype,"ef_ani_levelUp",void 0),a([y(cc.Node)],t.prototype,"ef_invulnerable",void 0),a([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../GamingData_008":"GamingData_008","../misc/HpBarNode_008":"HpBarNode_008","../playerWeapon/BasePlayerWeapon_008":"BasePlayerWeapon_008"}],PotMag_008:[function(e,t,o){"use strict";cc._RF.push(t,"ce8bfZM5jhH6bh8PjxSaAVH","PotMag_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Utils/RandomUtils"),s=e("../../mag/NodePoolManager"),l=e("./Config_008"),c=e("./Config_Gaming_008"),u=e("./DelegateManager_008"),p=e("./DropItemMag_008"),d=e("./GamingData_008"),f=e("./misc/Pot_008"),h=cc._decorator,_=h.ccclass,y=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDropedMagnetBetween2And5Min=!1,t.isDropedNuclearBetween2And5Min=!1,t.unDropMagnetAndNuclearBombTimes=0,t.potArr=[],t.tiemr_autoResetPos=0,t.killEnemyCount=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this},t.prototype.onEnable=function(){u.default.onBossRoundClearSomeItem.addDelegate(this.onBossRoundClearPot,this)},t.prototype.onDisable=function(){u.default.onBossRoundClearSomeItem.removeDelegate(this.onBossRoundClearPot,this)},t.prototype.onStartGame=function(){this.isDropedMagnetBetween2And5Min=!1,this.isDropedNuclearBetween2And5Min=!1,this.unDropMagnetAndNuclearBombTimes=0,this.tiemr_autoResetPos=0,this.killEnemyCount=0;for(var e=0;e<c.Config_Gaming_008.Pot_initCount;e++)this.onPutOnePotOnScreen()},t.prototype.onStopGame=function(){this.potArr=[]},t.prototype.update=function(e){d.default.isGamePause||d.default.isTrialMode||(d.default.currKillEnemyCount-this.killEnemyCount>=c.Config_Gaming_008.Pot_KillXXEnemyGenerate_KillCount&&(this.killEnemyCount+=c.Config_Gaming_008.Pot_KillXXEnemyGenerate_KillCount,this.onTryPutPot(c.Config_Gaming_008.Pot_KillXXEnemyGenerate_Probability)),this.tiemr_autoResetPos+=e,this.tiemr_autoResetPos>l.default.AutoResetEnemyPosInterval&&(this.tiemr_autoResetPos=0,this.onAutoResetPos()))},t.prototype.onAutoResetPos=function(){for(var e=0;e<this.potArr.length;e++)this.potArr[e].getPosition().sub(d.default.PlayerNode.getPosition()).magSqr()>=l.default.AudoResetPotPosDisThreshold&&this.potArr[e].setPosition(this.getPotInitPos())},t.prototype.onOpenOne=function(e){if(d.default.timer>=120&&d.default.timer<360){if(!this.isDropedMagnetBetween2And5Min)return this.isDropedMagnetBetween2And5Min=!0,this.unDropMagnetAndNuclearBombTimes=0,void p.default.ins.onDropItem(e,l.DropItemType.Magnet);if(!this.isDropedNuclearBetween2And5Min)return this.isDropedNuclearBetween2And5Min=!0,this.unDropMagnetAndNuclearBombTimes=0,void p.default.ins.onDropItem(e,l.DropItemType.NuclearBomb)}if(this.unDropMagnetAndNuclearBombTimes+=1,this.unDropMagnetAndNuclearBombTimes>=c.Config_Gaming_008.Pot_DropMagnetOrNuclearBombMinimum)return p.default.ins.onDropItem(e,Math.random()>.5?l.DropItemType.Magnet:l.DropItemType.NuclearBomb),void(this.unDropMagnetAndNuclearBombTimes=0);for(var t=0,o=0;o<c.Config_Gaming_008.Pot_DropItemHeight.length;o++)t+=c.Config_Gaming_008.Pot_DropItemHeight[o];var n=0,i=-1,a=r.RandomUtils.getRandomInt(0,t);for(o=0;o<c.Config_Gaming_008.Pot_DropItemHeight.length;o++)if(a<(n+=c.Config_Gaming_008.Pot_DropItemHeight[o])){i=o;break}switch(i){case 0:p.default.ins.onDropItem(e,l.DropItemType.Coin_1);break;case 1:p.default.ins.onDropItem(e,l.DropItemType.Coin_2);break;case 2:p.default.ins.onDropItem(e,l.DropItemType.Coin_3);break;case 3:p.default.ins.onDropItem(e,l.DropItemType.AlchemyPullet);break;case 4:p.default.ins.onDropItem(e,d.default.isEquipRotatingKnife?l.DropItemType.Weapon:l.DropItemType.Coin_1);break;case 5:d.default.isEquipRotatingKnife?p.default.ins.onEnemyDropLogic(e,[],!0,!1):p.default.ins.onDropItem(e,l.DropItemType.Coin_3);break;case 6:p.default.ins.onDropItem(e,l.DropItemType.Chichen);break;case 7:p.default.ins.onDropItem(e,l.DropItemType.Magnet);break;case 8:p.default.ins.onDropItem(e,l.DropItemType.NuclearBomb);break;default:console.log("\u7f50\u5b50\u6389\u843did => "+i),p.default.ins.onDropItem(e,l.DropItemType.Coin_1)}},t.prototype.onTryPutPot=function(e){r.RandomUtils.getRandomProbability()<=e&&this.onPutOnePot()},t.prototype.onPutOnePotOnScreen=function(){var e=s.default.getInstance().getNodeNotNull(l.default.Key_Pot);if(null!==e){var t=d.default.cameraHalfWidth-100,o=r.RandomUtils.getRandomInt(-t,t),n=(Math.random()>.5?1:-1)*r.RandomUtils.getRandomInt(500,d.default.cameraHalfHeight-100);e.setParent(d.default.GameObjNode),e.setPosition(o,n),e.getComponent(f.default).onInit(this.onOpenOne.bind(this),this.onRecoveryOne.bind(this,e)),this.potArr.push(e)}},t.prototype.onPutOnePot=function(){if(!(this.potArr.length>=c.Config_Gaming_008.Pot_CountLimit)){var e=s.default.getInstance().getNodeNotNull(l.default.Key_Pot);if(null!==e){e.setParent(d.default.GameObjNode);var t=this.getPotInitPos();e.setPosition(t),e.getComponent(f.default).onInit(this.onOpenOne.bind(this),this.onRecoveryOne.bind(this,e)),this.potArr.push(e)}}},t.prototype.getPotInitPos=function(){var e=cc.Vec2.ZERO,t=r.RandomUtils.getRandomInt(0,3),o=d.default.gameCameraNode.x,n=d.default.gameCameraNode.y,i=d.default.cameraHalfWidth,a=d.default.cameraHalfHeight;return 0===t?(e.y=n+a+50,e.x=o+r.RandomUtils.getRandomInt(-i-100,i+100)):1===t?(e.y=n-a-50,e.x=o+r.RandomUtils.getRandomInt(-i-100,i+100)):2===t?(e.x=o-i-50,e.y=n+r.RandomUtils.getRandomInt(-a-50,a+50)):3===t&&(e.x=o+i+50,e.y=n+r.RandomUtils.getRandomInt(-a-50,a+50)),e},t.prototype.onRecoveryOne=function(e){var t=this.potArr.indexOf(e);-1!==t&&this.potArr.splice(t,1),s.default.getInstance().recoveryNode(l.default.Key_Pot,e)},t.prototype.getPotInRange=function(e,t){for(var o=[],n=t*t,i=0;i<this.potArr.length;i++)e.sub(this.potArr[i].getPosition()).magSqr()<=n&&o.push(this.potArr[i]);return o},t.prototype.onBossRoundClearPot=function(){for(var e=this.potArr.length-1;e>=0;e--){var t=this.potArr[e];this.onRecoveryOne(t)}},t.ins=null,o=a([_],t)}(cc.Component));o.default=y,cc._RF.pop()},{"../../Utils/RandomUtils":"RandomUtils","../../mag/NodePoolManager":"NodePoolManager","./Config_008":"Config_008","./Config_Gaming_008":"Config_Gaming_008","./DelegateManager_008":"DelegateManager_008","./DropItemMag_008":"DropItemMag_008","./GamingData_008":"GamingData_008","./misc/Pot_008":"Pot_008"}],Pot_008:[function(e,t,o){"use strict";cc._RF.push(t,"38c288O/cZGYoNSIrShDEmO","Pot_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../../../mag/NodePoolManager"),l=e("../Config_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anim=null,t.isAlive=!1,t.func_open=null,t.func_recovery=null,t}return i(t,e),t.prototype.onInit=function(e,t){this.isAlive=!0,this.func_open=e,this.func_recovery=t,this.anim.play("ani_pot_init",0),this.unscheduleAllCallbacks()},t.prototype.onEnable=function(){this.node.on(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.on(l.default.e_OnOpenPot,this.onOpen,this)},t.prototype.onDisable=function(){this.node.off(l.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onRecovery,this),this.node.off(l.default.e_OnOpenPot,this.onOpen,this)},t.prototype.onCollisionEnter=function(e){this.isAlive&&e.node.group===l.default.STR_NodeGroup_PlayerBullet&&this.onOpen()},t.prototype.onOpen=function(){var e=this;this.isAlive&&(this.isAlive=!1,r.default.getInstance().playSound(l.default.SEF_Pot_Destory),this.anim.play("ani_pot_destory",0),this.func_open&&this.func_open(this.node.getPosition()),this.node.zIndex=cc.macro.MIN_ZINDEX+200,this.scheduleOnce(function(){e.func_recovery&&e.func_recovery()},.4))},t.prototype.onRecovery=function(){this.unscheduleAllCallbacks(),s.default.getInstance().recoveryNode(l.default.Key_Pot,this.node)},a([p(cc.Animation)],t.prototype,"anim",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008"}],PreStartUI:[function(e,t,o){"use strict";cc._RF.push(t,"b8e8fvYDtdFQr8g1msbJlsL","PreStartUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../game/mag/AudioMag"),s=e("../game/mag/UIMag"),l=e("./BaseUI"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startbtn=null,t}return i(t,e),t.prototype.onEnable=function(){this.startbtn.on(cc.Node.EventType.TOUCH_END,this.ShowStartUI,this)},t.prototype.onDisable=function(){this.startbtn.off(cc.Node.EventType.TOUCH_END,this.ShowStartUI,this)},t.prototype.ShowStartUI=function(){r.default.getInstance().click(),s.default.ins.HideUI(s.UIType.PreStartUI,!1,null),s.default.ins.ShowUI(s.UIType.StartUI,!0,null)},t.prototype.update=function(){},a([p(cc.Node)],t.prototype,"startbtn",void 0),a([u],t)}(l.default);o.default=d,cc._RF.pop()},{"../game/mag/AudioMag":"AudioMag","../game/mag/UIMag":"UIMag","./BaseUI":"BaseUI"}],PulletNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"fe6c8Cf9oVFM5/vAVjOzykj","PulletNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../mag/GameMag"),c=cc._decorator,u=c.ccclass,p=c.property,d=[new cc.Color(141,246,64),new cc.Color(50,208,254),new cc.Color(234,124,254),new cc.Color(254,229,60)],f=["lv_008/sf/alchemy/base/dizuo1","lv_008/sf/alchemy/base/dizuo2","lv_008/sf/alchemy/base/dizuo3","lv_008/sf/alchemy/base/dizuo4"],h=["lv_008/sf/alchemy/figure/wen-01","lv_008/sf/alchemy/figure/wen-02","lv_008/sf/alchemy/figure/wen-03","lv_008/sf/alchemy/figure/wen-04","lv_008/sf/alchemy/figure/wen-05","lv_008/sf/alchemy/figure/wen-06","lv_008/sf/alchemy/figure/wen-07","lv_008/sf/alchemy/figure/wen-08","lv_008/sf/alchemy/figure/wen-09","lv_008/sf/alchemy/figure/wen-10"],_=["lv_008/sf/alchemy/pullet/dan-yangqi","lv_008/sf/alchemy/pullet/dan-juli","lv_008/sf/alchemy/pullet/dan-bingxin","lv_008/sf/alchemy/pullet/dan-zisa","lv_008/sf/alchemy/pullet/dan-huiqi","lv_008/sf/alchemy/pullet/dan-rongling","lv_008/sf/alchemy/pullet/dan-qingxin"],y=[["lv_008/sf/alchemy/fire/huo-lv-hou","lv_008/sf/alchemy/fire/huo-lv-qian"],["lv_008/sf/alchemy/fire/huo-lan-hou","lv_008/sf/alchemy/fire/huo-lan-qian"],["lv_008/sf/alchemy/fire/huo-zi-hou","lv_008/sf/alchemy/fire/huo-zi-qian"],["lv_008/sf/alchemy/fire/huo-jin-hou","lv_008/sf/alchemy/fire/huo-jin-qian"]],g=["\u517b\u6c14\u4e39","\u805a\u529b\u4e39","\u51b0\u5fc3\u4e39","\u7d2b\u98d2\u4e39","\u56de\u6c14\u4e39","\u878d\u7075\u4e39","\u6e05\u5fc3\u4e39"],m=["\u751f\u547d\u503c","\u653b\u51fb\u529b","\u9632\u5fa1\u529b","\u901f\u5ea6","\u751f\u547d\u6062\u590d","\u4fee\u4e3a\u52a0\u6210","\u63a2\u5b9d"],v=["\u4e00\u54c1","\u4e8c\u54c1","\u4e09\u54c1","\u56db\u54c1","\u4e94\u54c1","\u516d\u54c1","\u4e03\u54c1","\u516b\u54c1","\u4e5d\u54c1","\u5341\u54c1"],b=["\u52a3\u8d28\u7684","\u666e\u901a\u7684","\u9ad8\u7ea7\u7684","\u5b8c\u7f8e\u7684"],P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quan=null,t.core=null,t.lblNode_name=null,t.spr_base=null,t.spr_pullet=null,t.spr_fire_1=null,t.spr_fire_2=null,t.spr_figure=null,t.lbl_currInfoKey=null,t}return i(t,e),t.prototype.onEnable=function(){this.onPlayAni()},t.prototype.onPlayAni=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.quan.opacity=0,this.quan.scale=0,this.spr_base.node.opacity=0,this.core.scale=.25,this.core.setPosition(0,-165),cc.tween(this.core).to(.5,{scale:1,y:-5.264},{easing:"backOut"}).start(),[4,this.wait(.15)];case 1:return e.sent(),cc.tween(this.quan).to(.4,{opacity:255,scale:1},{easing:"backOut"}).start(),[4,this.wait(.5)];case 2:return e.sent(),cc.tween(this.spr_base.node).to(.2,{opacity:255}).start(),[2]}})})},t.prototype.onRefresh=function(e,t,o){var n=this;this.lblNode_name.color=d[o],l.default.getInstance().getSpriteFrame(f[o]).then(function(e){n.spr_base.spriteFrame=e}),l.default.getInstance().getSpriteFrame(_[e]).then(function(e){n.spr_pullet.spriteFrame=e}),l.default.getInstance().getSpriteFrame(y[o][0]).then(function(e){n.spr_fire_1.spriteFrame=e}),l.default.getInstance().getSpriteFrame(y[o][1]).then(function(e){n.spr_fire_2.spriteFrame=e}),l.default.getInstance().getSpriteFrame(h[t]).then(function(e){n.spr_figure.spriteFrame=e}),this.lblNode_name.getComponent(cc.Label).string=b[o]+v[t]+g[e],this.lbl_currInfoKey.string="\u5f53\u524d"+m[e]+":"},t.prototype.wait=function(e){var t=this;return new Promise(function(o){t.scheduleOnce(o,e)})},a([p(cc.Node)],t.prototype,"quan",void 0),a([p(cc.Node)],t.prototype,"core",void 0),a([p(cc.Node)],t.prototype,"lblNode_name",void 0),a([p(cc.Sprite)],t.prototype,"spr_base",void 0),a([p(cc.Sprite)],t.prototype,"spr_pullet",void 0),a([p(cc.Sprite)],t.prototype,"spr_fire_1",void 0),a([p(cc.Sprite)],t.prototype,"spr_fire_2",void 0),a([p(cc.Sprite)],t.prototype,"spr_figure",void 0),a([p(cc.Label)],t.prototype,"lbl_currInfoKey",void 0),a([u],t)}(cc.Component);o.default=P,cc._RF.pop()},{"../../../mag/GameMag":"GameMag"}],QuestsBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"79f53QiDGlOLI6s7bDXa4Hg","QuestsBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("./BaseSingleBtn_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onTouchEvent=function(){window.isCanCtrl&&(r.default.getInstance().click(),l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_Quests))},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","./BaseSingleBtn_008":"BaseSingleBtn_008"}],QuestsDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"313ceFIP0RPOJla4YrM3yNB","QuestsDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/AudioMag"),c=e("../../Config_008"),u=e("../../DelegateManager_008"),p=e("../../LocalDataManager_008"),d=e("../../entities/Enums_008"),f=e("../../quests/QuestsSys_008"),h=e("../../utils/QuestsUtil_008"),_=e("./BaseUIDialog_008"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbl_time=null,t.tabOption=null,t.btn_back=null,t.questItem=null,t.questList=null,t.bottom=null,t.bottomProgress=null,t.bottomBox=null,t.bottomBoxs=null,t.currTab=0,t.timeFormat=null,t.maxActive=100,t.activeRewards=[[25,d.ItemType_008.c_zijinye,20],[50,d.ItemType_008.c_zijinye,30],[75,d.ItemType_008.c_zijinye,50],[100,d.ItemType_008.c_zijinye,100]],t}return i(t,e),t.prototype.onInit=function(e){this.onInitBg(e),this.actNode.getComponent(cc.Widget).target=e,this.timeFormat||(this.timeFormat=this.lbl_time.string),this.onRefreshTime(),this.unschedule(this.onRefreshTime),this.schedule(this.onRefreshTime,1)},t.prototype.onInitEvent=function(){var e=this;this.tabOption.children.forEach(function(t,o){t.on(cc.Node.EventType.TOUCH_END,function(){o!==e.currTab&&(e.currTab=o,e.onRefreshUI())},e)}),this.btn_back.on(cc.Node.EventType.TOUCH_END,this.touchClose,this),u.default.onRefreshQuests.addDelegate(this.onRefreshUI,this)},t.prototype.onRemoveEvent=function(){this.tabOption.children.forEach(function(e){e.off(cc.Node.EventType.TOUCH_END)}),this.btn_back.off(cc.Node.EventType.TOUCH_END),u.default.onRefreshQuests.removeDelegate(this.onRefreshUI,this)},t.prototype.onShow=function(){this.onRemoveEvent(),this.onRefreshLayout(),this.onRefreshUI()},t.prototype.touchClose=function(){l.default.getInstance().click(),this.onClose()},t.prototype.onClose=function(){var e=this;this.onRemoveEvent();var t=f.default.instance.dailyQuestsList,o=!0;t.forEach(function(e){e.status===f.QuestStatus.Finished&&(o=!1)});for(var n=p.default.getInstance().playerData.dailyActivation,i=p.default.getInstance().playerData.activationRewardRecord,a=0;a<this.activeRewards.length;a++)n>this.activeRewards[a][0]&&!i.includes(this.activeRewards[a][0])&&(o=!1);o&&u.default.onHideRedPoint.executeDelegates(d.RedPointIndex_008.Quest),this.onHide(function(){e.actNode.scale=1,e.actNode.getComponent(cc.Widget).updateAlignment()})},t.prototype.onRefreshUI=function(){this.onRefreshTabOption(),this.onRefreshQuestList()},t.prototype.onRefreshTabOption=function(){var e=this;this.tabOption.children.forEach(function(t,o){t.getChildByName("selected").active=o===e.currTab,t.getChildByName("normal").active=o!==e.currTab})},t.prototype.onRefreshQuestList=function(){var e=this;this.questList.removeAllChildren();var t=this.bottom.getComponent(cc.Widget);switch(t.bottom=-this.bottom.getBoundingBoxToWorld().height,t.updateAlignment(),this.currTab){case 0:this.onRefreshQuestList_0(),this.bottom.stopAllActions(),cc.tween(t).to(.3,{bottom:0},{easing:function(e){return t.updateAlignment(),cc.easing.backOut(e)}}).start();break;case 1:this.onRefreshQuestList_1()}cc.tween(this.questList).set({y:-this.questList.height}).to(.3,{y:0},{easing:"backOut"}).call(function(){e.onInitEvent()}).start()},t.prototype.onRefreshQuestList_0=function(){var e=this;f.default.instance.dailyQuestsList.forEach(function(t){e.onInitQuestItem(t)}),this.onRefreshBottomBox(),this.onRefreshBottomProgress()},t.prototype.onRefreshQuestList_1=function(){var e=this;f.default.instance.achievementQuestsList.forEach(function(t){e.onInitQuestItem(t)})},t.prototype.onInitQuestItem=function(e){var t=this,o=cc.instantiate(this.questItem);o.parent=this.questList;var n=o.getChildByName("btn"),i=o.getChildByName("got"),a=o.getChildByName("info"),r=o.getChildByName("item"),s=o.getChildByName("progress");switch(n.children.forEach(function(e){e.active=!1}),e.status){case f.QuestStatus.Unfinished:var l=n.getChildByName("go");l.active=!0,l.once(cc.Node.EventType.TOUCH_END,this.onClickQuestGo.bind(this,e.targetId),this);break;case f.QuestStatus.Finished:var c=n.getChildByName("get");c.active=!0,c.once(cc.Node.EventType.TOUCH_END,this.onGetQuestReward.bind(this,e.id,function(){t.questsBarComAni(o)}),this);break;case f.QuestStatus.Received:i.active=!0}a.getComponent(cc.Label).string=e.info.replace("$1",e.progress.toString());var u=s.getChildByName("sprite").getComponent(cc.Sprite),_=s.getChildByName("lbl").getComponent(cc.Label),y=e.type===f.QuestType.Daily?p.default.getInstance().getDailyQuestTargetProgress(e.targetId):p.default.getInstance().getTotalQuestTargetProgress(e.targetId);u.fillRange=y/e.progress,_.string=y+"/"+e.progress;var g=e.rewards[0]||[d.ItemType_008.c_active,e.activation];h.default.instance.getRewardItem(g[0],g[1]).then(function(e){e&&(e.parent=r,e.setPosition(cc.v2(0,0)))})},t.prototype.onRefreshBottomBox=function(){var e=this;this.bottomBoxs.removeAllChildren();for(var t=function(t){var n=cc.instantiate(o.bottomBox);n.parent=o.bottomBoxs;var i=n.getChildByName("box"),a=n.getChildByName("key"),r=n.getChildByName("num").getChildByName("num").getComponent(cc.Label),s=n.getChildByName("light"),l=p.default.getInstance().playerData.activationRewardRecord||(p.default.getInstance().playerData.activationRewardRecord=[]),c=p.default.getInstance().playerData.dailyActivation||(p.default.getInstance().playerData.dailyActivation=0);s.active=!1,i.children.forEach(function(e){e.active=!1}),-1!==l.indexOf(t[0])?(i.getChildByName("open").active=!0,a.active=!0):c>=t[0]?(s.active=!0,s.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){s.getComponent(cc.Animation).play("ani_box_light_loop")},o),s.getComponent(cc.Animation).play(),n.once(cc.Node.EventType.TOUCH_END,function(){e.onGetBottomReward(t[0])},o),i.getChildByName("close").active=!0,a.active=!0):(i.getChildByName("close").active=!0,a.active=!0),r.string=t[0].toString(),n.setPosition(cc.v2(t[0]/o.maxActive*o.bottomBoxs.width,0))},o=this,n=0,i=this.activeRewards;n<i.length;n++)t(i[n])},t.prototype.onRefreshBottomProgress=function(){var e=p.default.getInstance().playerData.dailyActivation,t=this.bottomProgress.getChildByName("sprite").getComponent(cc.Sprite);t.node.stopActionByTag(101),cc.tween(t).tag(101).to(.2,{fillRange:e/this.maxActive}).start()},t.prototype.onRefreshTime=function(){this.lbl_time.string=this.timeFormat.replace("$1",p.default.getInstance().getQuestsRefreshTime())},t.prototype.onGetQuestReward=function(e,t){return r(this,void 0,void 0,function(){var o,n,i;return s(this,function(a){switch(a.label){case 0:return l.default.getInstance().click(),o=window.questUtil_008.getQuestTemplate(e),p.default.getInstance().playerData.dailyActivation+=o.activation,i=(n=window.floatItemsUtils_008).playCollectItemAnim,[4,window.questUtil_008.getRewardItemSf(d.ItemType_008.c_active)];case 1:return i.apply(n,[a.sent(),this.node,this.bottomBoxs,o.activation]),u.default.onQuestProgressIncr.executeDelegates(f.QuestTargetID.CompleteQuest,1),u.default.onReceiveQuestReward.executeDelegates(e),t&&t instanceof Function&&t(),this.onRefreshBottomBox(),this.onRefreshBottomProgress(),[2]}})})},t.prototype.onGetBottomReward=function(e){return r(this,void 0,void 0,function(){var t,o,n;return s(this,function(i){switch(i.label){case 0:return-1!==p.default.getInstance().playerData.activationRewardRecord.indexOf(e)?[2]:p.default.getInstance().playerData.dailyActivation<e?[2]:(l.default.getInstance().playSound(c.default.SEF_BOX_OpenGamingBOX),p.default.getInstance().playerData.activationRewardRecord.push(e),t=this.activeRewards.find(function(t){return t[0]===e}),n=(o=window.floatItemsUtils_008).playCollectItemAnim,[4,window.questUtil_008.getRewardItemSf(t[1])]);case 1:return n.apply(o,[i.sent(),this.node,this.bottomBoxs,25]),p.default.getInstance().playerData.item_addCountById(t[1],t[2]),u.default.onRefreshZiJinYeBar.executeDelegates(p.default.getInstance().playerData.item_getCountById(d.ItemType_008.c_zijinye)),p.default.getInstance().onSaveData(),this.onRefreshBottomBox(),this.onRefreshBottomProgress(),[2]}})})},t.prototype.onClickQuestGo=function(e){switch(l.default.getInstance().click(),this.onClose(),e){case 1:case 2:case 3:case 5:case 7:case 8:case 9:case 10:u.default.onQuestGoMainUIView.executeDelegates(d.MainUIViewId_008.Chapter);break;case 4:u.default.onQuestGoMainUIView.executeDelegates(d.MainUIViewId_008.Role);break;case 11:u.default.onShowDia.executeDelegates(c.default.UIPath_Dia_Explore);break;case 12:u.default.onQuestGoMainUIView.executeDelegates(d.MainUIViewId_008.XiuXian)}},t.prototype.onRefreshLayout=function(){var e=this.questList.getComponentsInChildren(cc.Widget),t=this.questList.getComponentsInChildren(cc.Layout);e.forEach(function(e){e.updateAlignment()}),t.forEach(function(e){e.updateLayout()})},t.prototype.questsBarComAni=function(e){var t=e.getChildByName("got"),o=t.getChildByName("got"),n=t.getChildByName("bg");t.children.forEach(function(e){return e.active=!1}),o.opacity=0,o.scale=1.2,o.active=!0,t.active=!0,e.getChildByName("btn").active=!1,cc.tween(o).parallel(cc.tween(o).to(.3,{opacity:255},{easing:cc.easing.expoOut}),cc.tween(o).to(.3,{scale:1},{easing:cc.easing.backOut})).call(function(){n.active=!0}).start()},a([m(cc.Label)],t.prototype,"lbl_time",void 0),a([m(cc.Node)],t.prototype,"tabOption",void 0),a([m(cc.Node)],t.prototype,"btn_back",void 0),a([m(cc.Prefab)],t.prototype,"questItem",void 0),a([m(cc.Node)],t.prototype,"questList",void 0),a([m(cc.Node)],t.prototype,"bottom",void 0),a([m(cc.Node)],t.prototype,"bottomProgress",void 0),a([m(cc.Prefab)],t.prototype,"bottomBox",void 0),a([m(cc.Node)],t.prototype,"bottomBoxs",void 0),a([g],t)}(_.default);o.default=v,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../quests/QuestsSys_008":"QuestsSys_008","../../utils/QuestsUtil_008":"QuestsUtil_008","./BaseUIDialog_008":"BaseUIDialog_008"}],QuestsSys_008:[function(e,t,o){"use strict";cc._RF.push(t,"bce69PNvkxFer2dkRCWWChQ","QuestsSys_008"),Object.defineProperty(o,"__esModule",{value:!0}),o.QuestStatus=o.QuestTargetID=o.QuestType=void 0;var n,i,a=e("../Config_008"),r=e("../DelegateManager_008"),s=e("../LocalDataManager_008"),l=e("../entities/Enums_008"),c=e("../utils/QuestsUtil_008");(function(e){e[e.Daily=1]="Daily",e[e.Achievement=2]="Achievement"})(n=o.QuestType||(o.QuestType={})),function(e){e[e.None=0]="None",e[e.PassLevel=1]="PassLevel",e[e.KillEnemy=2]="KillEnemy",e[e.KillBoss=3]="KillBoss",e[e.OpenBox=4]="OpenBox",e[e.EarnCoin=5]="EarnCoin",e[e.CostCoin=6]="CostCoin",e[e.CostStamina=7]="CostStamina",e[e.PickUpItem=8]="PickUpItem",e[e.CompleteQuest=9]="CompleteQuest",e[e.EarnKey=10]="EarnKey",e[e.QuickExplore=11]="QuickExplore",e[e.XiuShen=12]="XiuShen"}(o.QuestTargetID||(o.QuestTargetID={})),function(e){e[e.Unfinished=0]="Unfinished",e[e.Finished=1]="Finished",e[e.Received=2]="Received"}(i=o.QuestStatus||(o.QuestStatus={}));var u=function(){function e(){this.dailyQuestsList=[],this.achievementQuestsList=[],this._init()}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype._init=function(){},e.prototype.registerEvent=function(){r.default.onQuestProgressIncr.addDelegate(this.onQuestProgress,this),r.default.onReceiveQuestReward.addDelegate(this.receiveQuestReward,this),r.default.onRefreshQuests.addDelegate(this._initQuests,this)},e.prototype._initQuests=function(){var e=this;this.dailyQuestsList=s.default.getInstance().playerData.dailyQuestIds.map(function(e){return window.questUtil_008.getQuestTemplate(e)}).filter(function(e){return e}),this.achievementQuestsList=window.questUtil_008.getQuestsByType(n.Achievement),this.dailyQuestsList.forEach(function(t){return e.initQuestState(t,!0)}),this.achievementQuestsList.forEach(function(t){return e.initQuestState(t)}),s.default.getInstance().onSaveData()},e.prototype.initQuestState=function(e,t){void 0===t&&(t=!1);var o=s.default.getInstance().playerData.receivedQuestIds,n=t?s.default.getInstance().playerData.dailyQuestTargetProgress:s.default.getInstance().playerData.totalQuestTargetProgress;if(-1===o.indexOf(e.id))return n[e.targetId]||(n[e.targetId]=0),void(e.status=n[e.targetId]>=e.progress?i.Finished:i.Unfinished);e.status=i.Received},e.prototype.onQuestProgress=function(e,t){var o=this;s.default.getInstance().playerData.dailyQuestTargetProgress[e]?s.default.getInstance().playerData.dailyQuestTargetProgress[e]+=t:s.default.getInstance().playerData.dailyQuestTargetProgress[e]=t,s.default.getInstance().playerData.totalQuestTargetProgress[e]?s.default.getInstance().playerData.totalQuestTargetProgress[e]+=t:s.default.getInstance().playerData.totalQuestTargetProgress[e]=t,this.dailyQuestsList.forEach(function(e){return o.updateQuestState(e,!0)}),this.achievementQuestsList.forEach(function(e){return o.updateQuestState(e)})},e.prototype.updateQuestState=function(e,t){void 0===t&&(t=!1);var o=s.default.getInstance().playerData.receivedQuestIds,n=t?s.default.getInstance().playerData.dailyQuestTargetProgress:s.default.getInstance().playerData.totalQuestTargetProgress;if(-1!==o.indexOf(e.id));else switch(n[e.targetId]||(n[e.targetId]=0),e.status){case i.Unfinished:n[e.targetId]>=e.progress&&(r.default.onQuestComplete.executeDelegates(e.id),e.status=i.Finished,t&&r.default.onShowRedPoint.executeDelegates(l.RedPointIndex_008.Quest))}},e.prototype.receiveQuestReward=function(e,t){void 0===t&&(t=n.Daily);var o=window.questUtil_008.getQuestTemplate(e,t);if(o){switch(o.type){case n.Daily:o=this.dailyQuestsList.find(function(t){return t.id===e});break;case n.Achievement:o=this.achievementQuestsList.find(function(t){return t.id===e})}if(o.status===i.Finished){o.status=i.Received;var u=o.rewards.map(function(e){var t;return{itemId:e[0],count:null!==(t=e[1])&&void 0!==t?t:1}});u.push({itemId:l.ItemType_008.c_active,count:o.activation}),s.default.getInstance().playerData.receivedQuestIds.push(o.id);for(var p=0;p<u.length;p++){var d=u[p];s.default.getInstance().playerData.item_addCountById(d.itemId,d.count)}s.default.getInstance().onSaveData(),r.default.onRefreshGoldBar.executeDelegates(s.default.getInstance().getCoinCount()),r.default.onRefreshNumKey.executeDelegates(s.default.getInstance().playerData.item_getCountById(l.ItemType_008.c_boxKey)),u.length>0&&c.default.instance.getReward(u,a.default.LOCALDATA_KEY)}}},e._instance=new e,e}();o.default=u,cc._RF.pop()},{"../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../LocalDataManager_008":"LocalDataManager_008","../entities/Enums_008":"Enums_008","../utils/QuestsUtil_008":"QuestsUtil_008"}],QuestsUtil_008:[function(e,t,o){"use strict";cc._RF.push(t,"383bbtEfVZGHpvZL5Lz4zFY","QuestsUtil_008");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../mag/GameMag"),r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../DelegateManager_008"),c=e("../LocalDataManager_008"),u=e("../entities/Enums_008"),p=e("../quests/QuestsSys_008"),d=e("./EquipmentUtils_008"),f=function(){function e(){this._questsTemplate=new Map,this.rewardItemTemplate=new Map,this.rewardItemSfCache=new Map,window.questUtil_008=this}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.loadData=function(){var e,t;return n(this,void 0,void 0,function(){var o,n,l,u,p,d,f;return i(this,function(h){switch(h.label){case 0:return this.rewardItemSfCache.clear(),this._questsTemplate.clear(),[4,r.default.getInstance().onInitNodePool({key:s.default.Key_RewardItem,prePath:s.default.Path_RewardItem,count:10})];case 1:return h.sent(),[4,a.default.getInstance().getJson(s.default.JsonPath_RewardItemData)];case 2:o=h.sent(),this.rewardItemTemplate=new Map(null===(e=null==o?void 0:o.RewardItems)||void 0===e?void 0:e.map(function(e){return[e.id,e]})),n=Array.from(s.default.QuestsJsonMap.keys()),l=function(e){var o,n,r;return i(this,function(i){switch(i.label){case 0:return o=s.default.QuestsJsonMap.get(e),[4,a.default.getInstance().getJson(o)];case 1:return n=i.sent(),r=new Map||u._questsTemplate.get(e),null===(t=null==n?void 0:n.Quests)||void 0===t||t.forEach(function(e){return r.set(e.id,e)}),u._questsTemplate.set(e,r),[2]}})},u=this,p=0,d=n,h.label=3;case 3:return p<d.length?(f=d[p],[5,l(f)]):[3,6];case 4:h.sent(),h.label=5;case 5:return p++,[3,3];case 6:return c.default.getInstance().tryUpdateDailyQuests(),[2]}})})},e.prototype.onCheckRedPoint=function(){var e=!1,t=c.default.getInstance().playerData.receivedQuestIds,o=c.default.getInstance().playerData.dailyQuestTargetProgress;this._questsTemplate.forEach(function(n){n.forEach(function(n){!t.includes(n.id)&&n.progress<=o[n.targetId]&&(e=!0)})}),e&&l.default.onShowRedPoint.executeDelegates(u.RedPointIndex_008.Quest)},e.prototype.openQuestsDia=function(){l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_Quests)},e.prototype.getReward=function(e,t){t===s.default.LOCALDATA_KEY&&l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_Rewards,e)},e.prototype.getQuestTemplate=function(e,t){void 0===t&&(t=p.QuestType.Daily);var o=this._questsTemplate.get(t);if(!o)return null;var n=o.get(e);return n?((n=cc.instantiate(n)).type=t,n):null},e.prototype.getQuestsByType=function(e){var t,o;return Array.from(null!==(o=null===(t=this._questsTemplate.get(e))||void 0===t?void 0:t.values())&&void 0!==o?o:[]).map(function(e){return cc.instantiate(e)})},e.prototype.getRewardItemSf=function(e){return n(this,void 0,void 0,function(){var t,o,n;return i(this,function(i){switch(i.label){case 0:return t=this.rewardItemTemplate.get(e),this.rewardItemSfCache.has(e)?[2,this.rewardItemSfCache.get(e)]:[3,1];case 1:return o=null==t?void 0:t.iconPath,n=null,o?[4,a.default.getInstance().getSpriteFrame(o)]:[3,3];case 2:return n=i.sent(),[3,5];case 3:return[4,a.default.getInstance().getSpriteFrame(s.default.getItemIconPath(e))];case 4:n=i.sent(),i.label=5;case 5:return n&&this.rewardItemSfCache.set(e,n),[2,n]}})})},e.prototype.getRewardItem=function(e,t){var o,a;return void 0===t&&(t=1),n(this,void 0,void 0,function(){var n,l,c,u,p,f,h,_,y,g;return i(this,function(i){switch(i.label){case 0:return e?(n=window.questUtil_008.rewardItemTemplate.get(e),l=r.default.getInstance().getNodeNotNull(s.default.Key_RewardItem),c=l.getChildByName("bg").getComponent(cc.Sprite),u=l.getChildByName("icon").getComponent(cc.Sprite),p=l.getChildByName("fragment"),f=l.getChildByName("num").getComponent(cc.Label),h=l.getChildByName("equipmentKEffectNode"),_=h.getChildByName("ani_eqmK").getComponent(cc.Animation),(y=null!==(o=null==n?void 0:n.quality)&&void 0!==o?o:3)>=3?(_.node.opacity=255,_.play("ani_eqmK_"+y)):_.node.opacity=0,p.opacity=e>=15e3&&e<=15999?255:0,f.string=t<=1?"":t.toString(),d.EquipmentUtils_008.setEquipmentNodeBg(c,null!==(a=null==n?void 0:n.quality)&&void 0!==a?a:3),g=u,[4,this.getRewardItemSf(e)]):[2];case 1:return g.spriteFrame=i.sent(),[2,l]}})})},e.prototype.getItemQuality=function(e){var t,o;return null!==(o=null===(t=this.rewardItemTemplate.get(e))||void 0===t?void 0:t.quality)&&void 0!==o?o:0},e.prototype.getItemName=function(e){var t,o;return null!==(o=null===(t=this.rewardItemTemplate.get(e))||void 0===t?void 0:t.name)&&void 0!==o?o:"\u795e\u79d8\u7269\u54c1"},e._instance=new e,e}();o.default=f,cc._RF.pop()},{"../../../mag/GameMag":"GameMag","../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../DelegateManager_008":"DelegateManager_008","../LocalDataManager_008":"LocalDataManager_008","../entities/Enums_008":"Enums_008","../quests/QuestsSys_008":"QuestsSys_008","./EquipmentUtils_008":"EquipmentUtils_008"}],RVOMath:[function(e,t,o){"use strict";cc._RF.push(t,"87798RfFqJIXprKQNtROB2d","RVOMath"),Object.defineProperty(o,"__esModule",{value:!0}),o.RVOMath=void 0;var n=function(){function e(){}return e.sqr=function(e){return e*e},e.RVO_EPSILON=1e-4,e}();o.RVOMath=n,cc._RF.pop()},{}],RandomUtils:[function(e,t,o){"use strict";cc._RF.push(t,"0180cULPdtDA4jU1XmjrO0s","RandomUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.RandomUtils=void 0;var n=function(){function e(){}return e.getRandomInt=function(e,t){return parseInt(Math.random()*(t-e+1)+e,10)},e.getRandomFormArray=function(e){return this.getRandomInt(0,e.length-1)},e.getRandomBoolean=function(){return Math.random()>.5},e.getRandomProbability=function(){return this.getRandomInt(0,100)},e.getRandomProbability_10000=function(){return this.getRandomInt(0,1e4)},e.getRandomRadians=function(){return Math.random()*Math.PI*2},e.getRandomDir=function(){return cc.v2(Math.random(),Math.random()).normalize()},e}();o.RandomUtils=n,cc._RF.pop()},{}],RedPointNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"a2fd20TmilPKYbEBER5KNOY","RedPointNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../DelegateManager_008"),s=e("../GamingData_008"),l=e("../entities/Enums_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=c.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pointIndex=l.RedPointIndex_008.Quest,t.belongIndex=l.RedPointIndex_008.None,t}return i(t,e),t.prototype.onLoad=function(){r.default.onShowRedPoint.addDelegate(this.onShowRedPoint,this),r.default.onHideRedPoint.addDelegate(this.onHideRedPoint,this),this.node.opacity=0},t.prototype.onDestroy=function(){r.default.onShowRedPoint.removeDelegate(this.onShowRedPoint,this),r.default.onHideRedPoint.removeDelegate(this.onHideRedPoint,this)},t.prototype.onShowRedPoint=function(e){if(e===this.pointIndex)switch(this.node.opacity=255,this.belongIndex){case l.RedPointIndex_008.None:break;case l.RedPointIndex_008.Chapter:2!==s.default.currMainUISelectIndex&&r.default.onShowRedPoint.executeDelegates(this.belongIndex)}},t.prototype.onHideRedPoint=function(e){e===this.pointIndex&&(this.node.opacity=0)},a([p({type:cc.Enum(l.RedPointIndex_008)})],t.prototype,"pointIndex",void 0),a([p({type:cc.Enum(l.RedPointIndex_008)})],t.prototype,"belongIndex",void 0),a([u,d("008/\u7ea2\u70b9\u8282\u70b9")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../DelegateManager_008":"DelegateManager_008","../GamingData_008":"GamingData_008","../entities/Enums_008":"Enums_008"}],ResultView_008:[function(e,t,o){"use strict";cc._RF.push(t,"bebedqT5S5PEp1Xq3UejvDR","ResultView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/StringUtils"),s=e("../../../../Utils/TweenUtils"),l=e("../../../../mag/AudioMag"),c=e("../../../../mag/VideoManager"),u=e("../../Config_008"),p=e("../../DelegateManager_008"),d=e("../../GamingData_008"),f=e("../../LC_008"),h=e("../../LocalDataManager_008"),_=e("../../entities/Enums_008"),y=e("../../quests/QuestsSys_008"),g=cc._decorator,m=g.ccclass,v=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this.onShowResultView()},t.prototype.onDisable=function(){},t.prototype.onShowResultView=function(){var e=d.default.isGameWin;e&&p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.PassLevel,1),l.default.getInstance().stopBgm(),l.default.getInstance().playSound(u.default.SEF_ResultView),d.default.isGamePause=!0,e&&h.default.getInstance().setChapterProgress(d.default.currGrade,d.default.currChapterIndex,d.default.currChapterProgress+1),h.default.getInstance().setChapterTimeRecord(d.default.currChapterIndex,d.default.currGrade,d.default.timer),h.default.getInstance().onSaveData();var t=this.node.getChildByName("actNode");t.scale=0,cc.tween(t).to(.4,{scale:1},{easing:"backOut"}).start();var o=t.getChildByName("title");o.y=945,o.opacity=0,cc.tween(o).delay(.4).call(function(){o.opacity=255}).to(.5,{y:445},{easing:"bounceOut"}).start();var n=t.getChildByName("lbl_lv").getComponent(cc.Label),i=t.getChildByName("lbl_time").getComponent(cc.Label),a=t.getChildByName("lbl_rewardCount").getComponent(cc.Label),c=t.getChildByName("btn_video"),f=t.getChildByName("btn_continue"),_=0;_+=d.default.currPickUpAlchemyPulletCount;var g=d.default.currPickUpCoinCount,m=t.getChildByName("pullet");m.scale=0,cc.tween(m).delay(.5).to(.4,{scale:1},{easing:"backOut"}).start(),n.string=d.default.currLv.toString(),i.string=r.default.Format_Time_mmss(e?d.default.timer-1:d.default.timer),a.string="\xd70",a.node.scale=0,cc.tween(a.node).delay(.5).to(.4,{scale:1},{easing:"backOut"}).call(function(){s.default.labelValueProxy(a,.5,0,_,"\xd7")}).start(),_<=0?(c.active=!1,f.setPosition(0,-245),f.getComponentInChildren(cc.Label).string="\u786e \u5b9a"):(c.active=!1,c.setPosition(0,-245),f.setPosition(0,-375),f.getComponentInChildren(cc.Label).string="\u9886 \u53d6"),c.off(cc.Node.EventType.TOUCH_END),c.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_video.bind(this,_,g),this),f.off(cc.Node.EventType.TOUCH_END),f.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_continue.bind(this,_,g),this),p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.KillEnemy,d.default.currKillEnemyCount),p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.KillBoss,d.default.currKillBossCount),p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.PickUpItem,d.default.currPickUpItemCount)},t.prototype.onTouchBtn_video=function(e,t){l.default.getInstance().click(),c.default.getInstance().showVideo(function(){var o=h.default.getInstance().playerData;o.item_addCountById(_.ItemType_008.c_boxKey,2*e),o.item_addCountById(_.ItemType_008.c_coin,2*t),p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.EarnCoin,2*t),p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.EarnKey,2*e),h.default.getInstance().onSaveData(),f.default.ins.onStopGame()})},t.prototype.onTouchBtn_continue=function(e,t){l.default.getInstance().click();var o=h.default.getInstance().playerData;o.item_addCountById(_.ItemType_008.c_boxKey,e),o.item_addCountById(_.ItemType_008.c_coin,t),p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.EarnCoin,t),p.default.onQuestProgressIncr.executeDelegates(y.QuestTargetID.EarnKey,e),h.default.getInstance().onSaveData(),f.default.ins.onStopGame()},a([m],t)}(cc.Component));o.default=v,cc._RF.pop()},{"../../../../Utils/StringUtils":"StringUtils","../../../../Utils/TweenUtils":"TweenUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../LC_008":"LC_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../quests/QuestsSys_008":"QuestsSys_008"}],ReviveDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"33606pW7nFI+5DnItbCK9Os","ReviveDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/VideoManager"),l=e("../../DelegateManager_008"),c=e("../../GamingData_008"),u=e("../../LocalDataManager_008"),p=e("../../quests/QuestsSys_008"),d=e("./BaseUIDialog_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_video=null,t.btn_coin=null,t.btn_continue=null,t.lbl_coinState=null,t}return i(t,e),t.prototype.onInit=function(e){this.onInitBg(e),this.refreshUI()},t.prototype.onInitEvent=function(){this.btn_video.on(cc.Node.EventType.TOUCH_END,this.onVideo,this),this.btn_coin.on(cc.Node.EventType.TOUCH_END,this.onCoin,this),this.btn_continue.on(cc.Node.EventType.TOUCH_END,this.onContinue,this)},t.prototype.onRemoveEvent=function(){this.btn_video.off(cc.Node.EventType.TOUCH_END,this.onVideo,this),this.btn_coin.off(cc.Node.EventType.TOUCH_END,this.onCoin,this),this.btn_continue.off(cc.Node.EventType.TOUCH_END,this.onContinue,this)},t.prototype.refreshUI=function(){this.lbl_coinState.node.scale=1,this.lbl_coinState.node.angle=0,this.lbl_coinState.string=u.default.getInstance().getCoinCount()+c.default.currPickUpCoinCount+"/200",u.default.getInstance().getCoinCount()+c.default.currPickUpCoinCount>=200?this.lbl_coinState.node.color=cc.color(142,255,114):this.lbl_coinState.node.color=cc.color(255,114,114)},t.prototype.onVideo=function(){var e=this;r.default.getInstance().click(),s.default.getInstance().showVideo(function(){e.onRevive()})},t.prototype.onCoin=function(){r.default.getInstance().click(),u.default.getInstance().getCoinCount()+c.default.currPickUpCoinCount>=200?(c.default.currPickUpCoinCount>=200?(c.default.onPickUpCoin(-200),l.default.onQuestProgressIncr.executeDelegates(p.QuestTargetID.CostCoin,200)):(c.default.currPickUpCoinCount=0,u.default.getInstance().addCoin(-200+c.default.currPickUpCoinCount),u.default.getInstance().onSaveData()),this.onRevive()):(cc.Tween.stopAllByTarget(this.lbl_coinState),cc.tween(this.lbl_coinState.node).to(.2,{scale:1.2}).to(.1,{angle:-3}).to(.2,{angle:3}).to(.2,{angle:-3}).to(.1,{angle:0}).to(.2,{scale:1}).start())},t.prototype.onContinue=function(){r.default.getInstance().click(),this.onHide(null),c.default.func_onShowResultView&&c.default.func_onShowResultView()},t.prototype.onRevive=function(){c.default.onRevive(),this.onHide(null)},a([_(cc.Node)],t.prototype,"btn_video",void 0),a([_(cc.Node)],t.prototype,"btn_coin",void 0),a([_(cc.Node)],t.prototype,"btn_continue",void 0),a([_(cc.Label)],t.prototype,"lbl_coinState",void 0),a([h],t)}(d.default);o.default=y,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../LocalDataManager_008":"LocalDataManager_008","../../quests/QuestsSys_008":"QuestsSys_008","./BaseUIDialog_008":"BaseUIDialog_008"}],RewardsDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"ddc66OSNa1Ep6FpkcVajo8/","RewardsDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../mag/AudioMag"),c=e("../../Config_008"),u=e("../../utils/QuestsUtil_008"),p=e("./BaseUIDialog_008"),d=cc._decorator,f=d.ccclass,h=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPos=null,t.rewards=[],t.cb=null,t}return i(t,e),t.prototype.onInit=function(e,t,o){var n=this;this.onInitBg(e),this.itemPos.removeAllChildren(),this.rewards=null!=t?t:[],l.default.getInstance().playSound(c.default.SEF_BOX_OpenGamingBOX);var i=this.rewards.length,a=this.itemPos.getComponent(cc.Layout);this.itemPos.width=i>4?488+3*a.spacingX+a.paddingLeft+a.paddingRight:122*i+a.spacingX*(i-1)+a.paddingLeft+a.paddingRight,o&&(this.cb=o),this.rewards.forEach(function(e){n.onInitItem(e)})},t.prototype.onInitEvent=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this.onTouchClose,this)},t.prototype.onRemoveEvent=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this.onTouchClose,this)},t.prototype.onInitItem=function(e){return r(this,void 0,void 0,function(){var t,o=this;return s(this,function(n){switch(n.label){case 0:return[4,u.default.instance.getRewardItem(e.itemId,e.count)];case 1:return(t=n.sent())?(t.parent=this.itemPos,this.scheduleOnce(function(){o.onRefreshLayout()},.1),[2]):[2]}})})},t.prototype.onTouchClose=function(){var e=this;l.default.getInstance().click(),this.onHide(function(){e.cb&&e.cb(),e.cb=null})},t.prototype.onRefreshLayout=function(){var e;null===(e=this.itemPos.getComponent(cc.Layout))||void 0===e||e.updateLayout(),this.itemPos.parent.getComponentsInChildren(cc.Widget).forEach(function(e){e.updateAlignment()})},a([h(cc.Node)],t.prototype,"itemPos",void 0),a([f],t)}(p.default);o.default=_,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../utils/QuestsUtil_008":"QuestsUtil_008","./BaseUIDialog_008":"BaseUIDialog_008"}],RoadmapVertex:[function(e,t,o){"use strict";cc._RF.push(t,"4e024oDsUZLvqy2+gP+1rDi","RoadmapVertex"),Object.defineProperty(o,"__esModule",{value:!0}),o.RoadmapVertex=void 0;o.RoadmapVertex=function(){},cc._RF.pop()},{}],RoleView_008:[function(e,t,o){"use strict";cc._RF.push(t,"237b5yNd1RKfbM8unq1GONk","RoleView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../../Utils/TweenUtils"),c=e("../../../../mag/AudioMag"),u=e("../../Config_008"),p=e("../../DelegateManager_008"),d=e("../misc/AlchemyTips_008"),f=e("../../utils/EquipmentUtils_008"),h=e("../misc/ExpBarNode_008"),_=e("../smallItems/EquipmentNode_008"),y=e("../../LocalDataManager_008"),g=e("../../utils/PlayerInfoUtils_008"),m=e("../../quests/QuestsSys_008"),v=e("../../entities/Enums_008"),b=cc._decorator,P=b.ccclass,S=b.property,w=b.inspector,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.expBar=null,t.lbl_lv=null,t.equipmentArr=[],t.lbl_score=null,t.btn_infoDetail=null,t.btn_xiuxian=null,t.btn_box=null,t.boxSpine=null,t.lbl_boxCount=null,t.tips_cantOpenBox=null,t.alchemyTips=null,t.guide_touch=null,t}return i(t,e),t.prototype.onLoad=function(){p.default.onHideGetEquipmentDia.addDelegate(this.onOpenBoxEnd,this),p.default.onRefreshNumKey.addDelegate(this.onRefreshBoxCountLabel,this)},t.prototype.onDestroy=function(){p.default.onHideGetEquipmentDia.removeDelegate(this.onOpenBoxEnd,this),p.default.onRefreshNumKey.removeDelegate(this.onRefreshBoxCountLabel,this)},t.prototype.onEnable=function(){this.onHideTouchGuide(),this.onInitEvent(),this.initBoxTips()},t.prototype.start=function(){this.onInitUI()},t.prototype.onDisable=function(){this.onRemoveEvent()},t.prototype.onInitUI=function(){for(var e,t=y.default.getInstance().playerData,o=0;o<this.equipmentArr.length;o++){var n=t.equipmentDataArr[o];null===n?this.equipmentArr[o].onRefresh(0,0):this.equipmentArr[o].onRefresh(n.quality,n.lv)}this.onRefreshScore(t),this.onRefreshBoxCountLabel(t.item_getCountById(v.ItemType_008.c_boxKey)),this.lbl_lv.string=t.lv.toString(),e=t.lv<60?t.curExp/u.NormalExpConfig_008[t.lv]:1,this.expBar.onRefreshExpBar(e,!1)},t.prototype.onInitEvent=function(){this.btn_box.on(cc.Node.EventType.TOUCH_END,this.onOpenBox,this),this.btn_infoDetail.on(cc.Node.EventType.TOUCH_END,this.onOpenInfoDetailDia,this),this.btn_xiuxian.on(cc.Node.EventType.TOUCH_END,this.onOpenXiuXianDia,this),p.default.onShowTouchGuide.addDelegate(this.onShowTouchGuide,this),p.default.onHideTouchGuide.addDelegate(this.onHideTouchGuide,this),p.default.onRefreshTotalScoreUI.addDelegate(this.onRefreshScoreEvent,this),p.default.onQuestGoMainUIView.addDelegate(this.onQuestGo,this)},t.prototype.onRemoveEvent=function(){this.btn_box.off(cc.Node.EventType.TOUCH_END,this.onOpenBox,this),this.btn_infoDetail.off(cc.Node.EventType.TOUCH_END,this.onOpenInfoDetailDia,this),this.btn_xiuxian.off(cc.Node.EventType.TOUCH_END,this.onOpenXiuXianDia,this),p.default.onShowTouchGuide.removeDelegate(this.onShowTouchGuide,this),p.default.onHideTouchGuide.removeDelegate(this.onHideTouchGuide,this),p.default.onRefreshTotalScoreUI.removeDelegate(this.onRefreshScoreEvent,this),p.default.onQuestGoMainUIView.removeDelegate(this.onQuestGo,this)},t.prototype.onOpenBox=function(){return r(this,void 0,void 0,function(){var e,t,o;return s(this,function(){return window.isCanCtrl?(e=y.default.getInstance().playerData).item_getCountById(v.ItemType_008.c_boxKey)<=0?(this.onTipsCantOpenBox(),[2]):(window.isCanCtrl=!1,u.default.isOpeningBox=!0,t=f.EquipmentUtils_008.getRandomEquipment(e.lv,e.alchemyTimer),o=e.equipmentDataArr[t.type],c.default.getInstance().playSound(u.default.SEF_BOXOPEN+t.quality),this.boxSpine.setAnimation(0,"baoxiang"+(t.quality+1),!1),this.boxSpine.timeScale=1,this.boxSpine.setEventListener(function(){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_getEquipment,t,o)}),[2]):[2]})})},t.prototype.onOpenBoxEnd=function(e,t,o){var n=y.default.getInstance().playerData;e?(this.onEquipEquipment(t),o&&this.onDiscardEquipment(o.quality)):this.onDiscardEquipment(t.quality),this.boxSpine.setAnimation(0,"baoxiang1",!1),this.boxSpine.timeScale=0,n.item_addCountById(v.ItemType_008.c_boxKey,-1),n.alchemyTimer+=1,n.alchemyTotalTime+=1,p.default.onQuestProgressIncr.executeDelegates(m.QuestTargetID.OpenBox,1),f.EquipmentUtils_008.isHighestQuality(t.quality)&&(n.alchemyTimer=0),this.onRefreshBoxCountLabel(n.item_getCountById(v.ItemType_008.c_boxKey)),y.default.getInstance().onSaveData(),window.isCanCtrl=!0},t.prototype.onEquipEquipment=function(e){var t=y.default.getInstance().playerData,o=g.default.getTotalScore(t);t.equipmentDataArr[e.type]=e;var n=this.onRefreshScore(t);p.default.onScoreChange.executeDelegates(o,n),this.equipmentArr[e.type].onRefresh(e.quality,e.lv,!0),y.default.getInstance().onSaveData()},t.prototype.onDiscardEquipment=function(e){var t=u.default.AlchemyExpReward[e];this.alchemyTips.onShowTips(t),this.onAddExp(t)},t.prototype.onAddExp=function(e){return r(this,void 0,void 0,function(){var t,o,n,i,a,r,l;return s(this,function(s){switch(s.label){case 0:for(t=0,o=0;o<e.length;o++)t+=e[o];return n=y.default.getInstance().playerData,a=!1,n.lv<60?(n.curExp+=t,(i=n.curExp/u.NormalExpConfig_008[n.lv])>=1&&(a=!0)):i=1,this.expBar.onRefreshExpBar(i,!0),a?[4,this.wait(.2)]:[3,3];case 1:return s.sent(),r=g.default.getTotalScore(n),n.curExp-=u.NormalExpConfig_008[n.lv],n.lv+=1,this.lbl_lv.string=n.lv.toString(),c.default.getInstance().playSound(u.default.SEF_LevelUp),l=this.onRefreshScore(n),p.default.onScoreChange.executeDelegates(r,l),[4,this.wait(.5)];case 2:s.sent(),this.expBar.onRefreshExpBar(0,!1),this.onAddExp([]),s.label=3;case 3:return[2]}})})},t.prototype.initBoxTips=function(){this.lbl_boxCount.node.color=cc.Color.WHITE,cc.Tween.stopAllByTarget(this.lbl_boxCount.node),this.lbl_boxCount.node.scale=1,this.lbl_boxCount.node.angle=0,this.tips_cantOpenBox.opacity=0,cc.Tween.stopAllByTarget(this.tips_cantOpenBox)},t.prototype.onTipsCantOpenBox=function(){var e=this;p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_DailyGift),this.lbl_boxCount.node.color=cc.Color.RED,cc.Tween.stopAllByTarget(this.lbl_boxCount.node),this.lbl_boxCount.node.scale=1,this.lbl_boxCount.node.angle=0,cc.tween(this.lbl_boxCount.node).to(.2,{scale:1.5}).to(.1,{angle:5}).to(.2,{angle:-5}).to(.1,{angle:0}).to(.2,{scale:1}).call(function(){e.lbl_boxCount.node.color=cc.Color.WHITE}).start(),this.tips_cantOpenBox.opacity=255,cc.Tween.stopAllByTarget(this.tips_cantOpenBox),cc.tween(this.tips_cantOpenBox).delay(1).to(1,{opacity:0}).start()},t.prototype.onRefreshBoxCountLabel=function(e){this.lbl_boxCount.string=e.toString()},t.prototype.onRefreshScoreEvent=function(e){if(!e){console.log("\u6ca1\u6709\u7b97\u597d\u7684\u5206\u6570\uff0c \u81ea\u5df1\u83b7\u53d6");var t=y.default.getInstance().playerData;e=g.default.getTotalScore(t)}l.default.labelValueProxy(this.lbl_score,.5,0,e)},t.prototype.onRefreshScore=function(e){var t=g.default.getTotalScore(e);return l.default.labelValueProxy(this.lbl_score,.5,0,t),t},t.prototype.onOpenInfoDetailDia=function(){if(window.isCanCtrl){c.default.getInstance().click();var e=y.default.getInstance().playerData;p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_infoDetail,e)}},t.prototype.onShowTouchGuide=function(){y.default.getInstance().playerData.item_getCountById(v.ItemType_008.c_boxKey)>0&&(this.guide_touch.opacity=255)},t.prototype.onHideTouchGuide=function(){this.guide_touch.opacity=0},t.prototype.onOpenXiuXianDia=function(){window.isCanCtrl&&(c.default.getInstance().click(),p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_XiuXian,!0))},t.prototype.onQuestGo=function(e){e===v.MainUIViewId_008.Role&&(this.guide_touch.opacity=255)},t.prototype.wait=function(e){var t=this;return new Promise(function(o){t.scheduleOnce(o,e)})},a([S(h.default)],t.prototype,"expBar",void 0),a([S(cc.Label)],t.prototype,"lbl_lv",void 0),a([S([_.default])],t.prototype,"equipmentArr",void 0),a([S(cc.Label)],t.prototype,"lbl_score",void 0),a([S(cc.Node)],t.prototype,"btn_infoDetail",void 0),a([S(cc.Node)],t.prototype,"btn_xiuxian",void 0),a([S(cc.Node)],t.prototype,"btn_box",void 0),a([S(sp.Skeleton)],t.prototype,"boxSpine",void 0),a([S(cc.Label)],t.prototype,"lbl_boxCount",void 0),a([S(cc.Node)],t.prototype,"tips_cantOpenBox",void 0),a([S(d.default)],t.prototype,"alchemyTips",void 0),a([S(cc.Node)],t.prototype,"guide_touch",void 0),a([P,w("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=R,cc._RF.pop()},{"../../../../Utils/TweenUtils":"TweenUtils","../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../quests/QuestsSys_008":"QuestsSys_008","../../utils/EquipmentUtils_008":"EquipmentUtils_008","../../utils/PlayerInfoUtils_008":"PlayerInfoUtils_008","../misc/AlchemyTips_008":"AlchemyTips_008","../misc/ExpBarNode_008":"ExpBarNode_008","../smallItems/EquipmentNode_008":"EquipmentNode_008"}],SceneOrnament_Bg_008:[function(e,t,o){"use strict";cc._RF.push(t,"4e675qQ/VFEMJKnSaueO1l/","SceneOrnament_Bg_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetTile=null,t}return i(t,e),t.prototype.onLoad=function(){this.targetTile=this.node.getParent(),this.offsetPos=this.node.getPosition(),this.node.setParent(this.node.parent.parent.parent.children[1]),this.node.setPosition(this.targetTile.getPosition().add(this.offsetPos))},t.prototype.onEnable=function(){this.targetTile.on(cc.Node.EventType.POSITION_CHANGED,this.refreshPos,this)},t.prototype.onDisable=function(){this.targetTile.off(cc.Node.EventType.POSITION_CHANGED,this.refreshPos,this)},t.prototype.refreshPos=function(){this.node.setPosition(this.targetTile.getPosition().add(this.offsetPos))},t.prototype.onDestroySelf=function(){this.node.destroy()},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],SceneOrnament_Obj_008:[function(e,t,o){"use strict";cc._RF.push(t,"8af4bD3rsRNXo10QjF4BSrM","SceneOrnament_Obj_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("../GamingData_008"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetTile=null,t}return i(t,e),t.prototype.onLoad=function(){this.targetTile=this.node.getParent(),this.offsetPos=this.node.getPosition(),this.node.setParent(s.default.GameObjNode),this.node.setPosition(this.targetTile.getPosition().add(this.offsetPos))},t.prototype.onEnable=function(){this.targetTile.on(cc.Node.EventType.POSITION_CHANGED,this.refreshPos,this),this.node.on(r.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onDestroySelf,this)},t.prototype.onDisable=function(){this.targetTile.off(cc.Node.EventType.POSITION_CHANGED,this.refreshPos,this),this.node.off(r.default.e_OnExitBattleRoundRecoveryGameObjNode,this.onDestroySelf,this)},t.prototype.refreshPos=function(){this.node.setPosition(this.targetTile.getPosition().add(this.offsetPos))},t.prototype.onDestroySelf=function(){this.node.destroy()},a([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../Config_008":"Config_008","../GamingData_008":"GamingData_008"}],ScoreChangeNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"93d13g6GKFEhrK1NuTy1lCF","ScoreChangeNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/TweenUtils"),s=e("../../DelegateManager_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.sfArr_bg=[],t.lbl_curr=null,t.lbl_increase=null,t.lbl_reduce=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.opacity=0},t.prototype.onEnable=function(){s.default.onScoreChange.addDelegate(this.onRefreshUI,this)},t.prototype.onDisable=function(){s.default.onScoreChange.removeDelegate(this.onRefreshUI,this)},t.prototype.onRefreshUI=function(e,t){var o=this,n=t-e;if(0!==n){n>0?(this.bg.spriteFrame=this.sfArr_bg[0],this.lbl_increase.string="+"+n,this.lbl_increase.node.opacity=255,this.lbl_reduce.node.opacity=0):(this.bg.spriteFrame=this.sfArr_bg[1],this.lbl_reduce.string=n.toString(),this.lbl_increase.node.opacity=0,this.lbl_reduce.node.opacity=255);var i=t.toString().length;i>=3?i<6?(this.lbl_curr.node.x=105-26*(6-i),this.lbl_increase.node.x=95-26*(6-i),this.lbl_reduce.node.x=95-26*(6-i)):(this.lbl_curr.node.x=105,this.lbl_increase.node.x=95,this.lbl_reduce.node.x=95):(this.lbl_curr.node.x=1,this.lbl_increase.node.x=-9,this.lbl_reduce.node.x=-9),cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.lbl_curr),this.unscheduleAllCallbacks(),this.node.opacity=255,this.lbl_curr.string=e.toString(),this.scheduleOnce(function(){r.default.labelValueProxy(o.lbl_curr,.5,e,t),o.scheduleOnce(function(){o.lbl_increase.node.opacity=0,o.lbl_reduce.node.opacity=0;var e=t<1e6?2+48*t.toString().length:290;o.lbl_curr.node.x=.5*e+20},.6),cc.tween(o.node).delay(.6).to(.075,{scale:1.2}).to(.075,{scale:1}).delay(.2).to(.1,{opacity:0}).start()},.2)}else this.node.opacity=0},a([u(cc.Sprite)],t.prototype,"bg",void 0),a([u([cc.SpriteFrame])],t.prototype,"sfArr_bg",void 0),a([u(cc.Label)],t.prototype,"lbl_curr",void 0),a([u(cc.Label)],t.prototype,"lbl_increase",void 0),a([u(cc.Label)],t.prototype,"lbl_reduce",void 0),a([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../Utils/TweenUtils":"TweenUtils","../../DelegateManager_008":"DelegateManager_008"}],SelectChapterDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"2442aFmDb9Nr6atWS+ygPM7","SelectChapterDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../Config_008"),c=e("../../DelegateManager_008"),u=e("../../LocalDataManager_008"),p=e("./BaseUIDialog_008"),d=cc._decorator,f=d.ccclass,h=d.property,_=d.inspector,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chapterNode=null,t.chapterItem_left=null,t.chapterItem_center=null,t.chapterItem_right=null,t.btn_close=null,t.btn_select=null,t.currGrade=0,t.currIndex=0,t.isMoving=!1,t.isCanCtrl=!0,t}return i(t,e),t.prototype.onInitEvent=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onClose,this),this.btn_select.on(cc.Node.EventType.TOUCH_END,this.onSelect,this),this.chapterNode.on(cc.Node.EventType.TOUCH_MOVE,this.onMoving,this),this.chapterNode.on(cc.Node.EventType.TOUCH_END,this.onMoveEnd,this),this.chapterNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onMoveEnd,this)},t.prototype.onRemoveEvent=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onClose,this),this.btn_select.off(cc.Node.EventType.TOUCH_END,this.onSelect,this),this.chapterNode.off(cc.Node.EventType.TOUCH_MOVE,this.onMoving,this),this.chapterNode.off(cc.Node.EventType.TOUCH_END,this.onMoveEnd,this),this.chapterNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onMoveEnd,this)},t.prototype.onRefreshUI=function(e){for(var t=[this.chapterItem_left,this.chapterItem_center,this.chapterItem_right],o=function(o){var i=e-1+o;if(t[o].x=720*o-720,n.isValidChapter(i)){var a=t[o].getChildByName("title").getComponent(cc.Sprite);t[o].opacity=255,s.default.getInstance().getSpriteFrame(l.default.UIPath_Chapter_Title+(i+1)).then(function(e){a.spriteFrame=e});var r=t[o].getChildByName("center").getComponent(cc.Sprite);s.default.getInstance().getSpriteFrame(l.default.UIPath_Chapter_Icon+(i+1)).then(function(e){r.spriteFrame=e})}else t[o].opacity=0},n=this,i=0;i<t.length;i++)o(i);u.default.getInstance().getHighestChapterId(this.currGrade)>=e?this.btn_select.active=!0:this.btn_select.active=!1},t.prototype.onInit=function(e,t,o){this.onInitBg(e),this.currGrade=t,this.currIndex=o,this.onRefreshUI(o),this.isMoving=!1,this.isCanCtrl=!0},t.prototype.onMoving=function(e){if(this.isCanCtrl){if(!this.isMoving){if(!(Math.abs(e.getLocation().x-e.getStartLocation().x)>10))return;this.isMoving=!0}this.chapterItem_left.x+=e.getDelta().x,this.chapterItem_center.x+=e.getDelta().x,this.chapterItem_right.x+=e.getDelta().x;var t=(0-this.chapterItem_left.x)/720;this.chapterItem_left.scale=-.2*(t>1?1:t)+1,t=(720-Math.abs(this.chapterItem_center.x))/720,this.chapterItem_center.scale=.2*(t>1?1:t)+.8,t=(this.chapterItem_right.x-0)/720,this.chapterItem_right.scale=-.2*(t>1?1:t)+1}},t.prototype.onMoveEnd=function(e){var t=this;this.isCanCtrl&&this.isMoving&&(Math.abs(e.getLocation().x-e.getStartLocation().x)>150?e.getLocation().x-e.getStartLocation().x<0?this.isValidChapter(this.currIndex+1)?this.onNextChapter():this.recoveryChapterNode():this.isValidChapter(this.currIndex-1)?this.onPreviousChapter():this.recoveryChapterNode():this.recoveryChapterNode(),this.isCanCtrl=!1,this.isMoving=!1,this.scheduleOnce(function(){t.isCanCtrl=!0},.075))},t.prototype.isValidChapter=function(e){return e>=0&&e<l.ChapterConfig[this.currGrade].length},t.prototype.recoveryChapterNode=function(){cc.tween(this.chapterItem_left).to(.075,{x:-720,scale:.8}).start(),cc.tween(this.chapterItem_center).to(.075,{x:0,scale:1}).start(),cc.tween(this.chapterItem_right).to(.075,{x:720,scale:.8}).start()},t.prototype.onNextChapter=function(){var e=this;this.chapterItem_left.x=720,cc.tween(this.chapterItem_center).to(.075,{x:-720,scale:.8}).start(),cc.tween(this.chapterItem_right).to(.075,{x:0,scale:1}).start();var t=this.chapterItem_left;this.chapterItem_left=this.chapterItem_center,this.chapterItem_center=this.chapterItem_right,this.chapterItem_right=t,this.currIndex+=1,this.scheduleOnce(function(){e.onRefreshUI(e.currIndex)},.075)},t.prototype.onPreviousChapter=function(){var e=this;this.chapterItem_right.x=-720,cc.tween(this.chapterItem_center).to(.075,{x:720,scale:.8}).start(),cc.tween(this.chapterItem_left).to(.075,{x:0,scale:1}).start();var t=this.chapterItem_right;this.chapterItem_right=this.chapterItem_center,this.chapterItem_center=this.chapterItem_left,this.chapterItem_left=t,this.currIndex-=1,this.scheduleOnce(function(){e.onRefreshUI(e.currIndex)},.075)},t.prototype.onClose=function(){r.default.getInstance().click(),this.onHide(null)},t.prototype.onSelect=function(){r.default.getInstance().click(),c.default.onRefreshCurrChapter.executeDelegates(this.currIndex),this.onHide(null)},a([h(cc.Node)],t.prototype,"chapterNode",void 0),a([h(cc.Node)],t.prototype,"chapterItem_left",void 0),a([h(cc.Node)],t.prototype,"chapterItem_center",void 0),a([h(cc.Node)],t.prototype,"chapterItem_right",void 0),a([h(cc.Node)],t.prototype,"btn_close",void 0),a([h(cc.Node)],t.prototype,"btn_select",void 0),a([f,_("packages://autoproperty//inspector.js")],t)}(p.default);o.default=y,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","./BaseUIDialog_008":"BaseUIDialog_008"}],SelectSkillViewShowAni_008:[function(e,t,o){"use strict";cc._RF.push(t,"1738chzqkBKnLbcL8Mn6OGY","SelectSkillViewShowAni_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../000_common/Ani_RotateForever"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showNodeArr=[],t.aniDuration=.5,t.interval=.25,t.delay=.4,t.compShowNodeArr=[],t}return i(t,e),t.prototype.onEnable=function(){for(var e=this,t=0;t<this.compShowNodeArr.length;t++)this.compShowNodeArr[t].opacity=0;for(t=0;t<this.showNodeArr.length;t++)cc.Tween.stopAllByTarget(this.showNodeArr[t]),this.showNodeArr[t].opacity=0;var o=this.showNodeArr.length,n=0;this.schedule(function(){var t=e.showNodeArr[n];if(null!==t){var i=t.getComponent(r.default);i&&(i.enabled=!1),t.scale=2,t.opacity=255,cc.tween(t).to(e.aniDuration,{scale:1},{easing:"backOut"}).call(function(){i&&(i.enabled=!0)}).start()}++n===o&&e.onComp()},this.interval,this.showNodeArr.length-1,this.interval)},t.prototype.onComp=function(){var e=this;this.scheduleOnce(function(){for(var t=0;t<e.compShowNodeArr.length;t++)cc.tween(e.compShowNodeArr[t]).to(.75,{opacity:255}).start()},this.delay)},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},a([c([cc.Node])],t.prototype,"showNodeArr",void 0),a([c(cc.Float)],t.prototype,"aniDuration",void 0),a([c(cc.Float)],t.prototype,"interval",void 0),a([c(cc.Float)],t.prototype,"delay",void 0),a([c([cc.Node])],t.prototype,"compShowNodeArr",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../000_common/Ani_RotateForever":"Ani_RotateForever"}],SelectSkillView_008:[function(e,t,o){"use strict";cc._RF.push(t,"ece190mtSNNOavF2y3um5IA","SelectSkillView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../../../mag/VideoManager"),c=e("../../Config_008"),u=e("../../DelegateManager_008"),p=e("../../GamingData_008"),d=e("../../misc/SkillStarNode_008"),f=e("../../utils/SkillUtils_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=h.inspector,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sfArr_skillBtn=[],t.selectSkillBtnArr=null,t.skillIdArr=null,t.skillStateArr=[!0,!0,!0],t.btnPosX=[-220,0,220],t.currSelectSkillCount=0,t}return i(t,e),t.prototype.onEnable=function(){var e=p.default.onGetRandomSkill();this.onShowSelectSkillView(e)},t.prototype.onShowSelectSkillView=function(e){this.skillIdArr=e,this.currSelectSkillCount=0,null===this.selectSkillBtnArr&&(this.selectSkillBtnArr=[],this.selectSkillBtnArr.push(this.node.getChildByName("btn_1")),this.selectSkillBtnArr.push(this.node.getChildByName("btn_2")),this.selectSkillBtnArr.push(this.node.getChildByName("btn_3")));for(var t=0;t<3;t++){var o=t;this.skillStateArr[o]=!0,this.selectSkillBtnArr[t].x=this.btnPosX[t],this.initSkillBtn(o,this.selectSkillBtnArr[t],e[t])}var n=this.node.getChildByName("btn_videoSelectAll");this.isCanSelectAll(e)?(n.active=!1,n.off(cc.Node.EventType.TOUCH_END),n.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_selectAllSkill.bind(this,e),this)):n.active=!1;var i=this.node.getChildByName("btn_refresh");i.active=!0,i.off(cc.Node.EventType.TOUCH_END,this.onRefreshSkill,this),i.on(cc.Node.EventType.TOUCH_END,this.onRefreshSkill,this),this.node.getChildByName("lbl_tips").opacity=255;var a=this.node.getChildByName("btn_close");a.off(cc.Node.EventType.TOUCH_END),a.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_hideView,this),a.active=!1},t.prototype.onRefreshSkill=function(){var e=this;r.default.getInstance().click(),l.default.getInstance().showVideo(function(){var t=p.default.onGetRandomSkill();e.onShowSelectSkillView(t),e.node.getChildByName("btn_refresh").active=!1})},t.prototype.initSkillBtn=function(e,t,o){t.active=!0,cc.Tween.stopAllByTarget(t);var n=t.getChildByName("actNode"),i=n.getChildByName("bgLight");i.opacity=0;var a=n.getChildByName("bg").getComponent(cc.Sprite),r=n.getChildByName("icon").getComponent(cc.Sprite),l=n.getChildByName("lbl_name").getComponent(cc.Label),u=n.getChildByName("lbl_desc").getComponent(cc.Label),f=n.getChildByName("starNode").getComponent(d.default),h=n.getChildByName("xin"),_=t.getChildByName("btn_video");if(_.active=!1,_.targetOff(this),_.on(cc.Node.EventType.TOUCH_END,this.onSelectSkill.bind(this,e,t,o,i,n),this),s.default.getInstance().getSpriteFrame(c.default.getItemIconPath_skill(o)).then(function(e){r.spriteFrame=e}),o>=100){var y=c.SkillConfigMap.get(o),g=p.default.SkillStateMap.get(o)||0;l.string=y.skillName,u.string=y.skillDescArr[g>=5?4:g],h.opacity=0===g?255:0,o<200?(a.spriteFrame=this.sfArr_skillBtn[0],f.onRefresh(g+1)):o<300?(a.spriteFrame=this.sfArr_skillBtn[1],f.onRefresh(g+1)):(a.spriteFrame=this.sfArr_skillBtn[3],f.onRefreshForSuperWeapon())}else a.spriteFrame=this.sfArr_skillBtn[2],h.opacity=0,o===c.DropItemType.Chichen?(l.string="\u70e7\u9e21",u.string="\u6062\u590d50%\u751f\u547d\u503c",f.onRefresh(5,!1)):o===c.DropItemType.Coin_3?(l.string="\u94dc\u94b1",u.string="\u83b7\u5f97\u968f\u673a\u6570\u91cf\u7684\u94dc\u94b1",f.onRefresh(5,!1)):(l.string="\u94a5\u5319",u.string="\u83b7\u5f971\u628a\u94a5\u5319",f.onRefresh(5,!1));t.off(cc.Node.EventType.TOUCH_END),t.on(cc.Node.EventType.TOUCH_END,this.onSelectSkill.bind(this,e,t,o,i,n),this),a.node.off(cc.Node.EventType.TOUCH_START),a.node.off(cc.Node.EventType.TOUCH_CANCEL),a.node.off(cc.Node.EventType.TOUCH_MOVE),a.node.on(cc.Node.EventType.TOUCH_START,this.onTouchSelectBtnStart.bind(this,i),this),a.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchSelectBtnMove.bind(this,a.node,i),this),a.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchSelectBtnEnd.bind(this,i),this)},t.prototype.onTouchSelectBtnStart=function(e){e.opacity=255},t.prototype.onTouchSelectBtnMove=function(e,t,o){var n=o.getLocation();t.opacity=e.getBoundingBoxToWorld().contains(n)?255:0},t.prototype.onTouchSelectBtnEnd=function(e){e.opacity=0},t.prototype.onSelectSkill=function(e,t,o,n,i){var a=this;n.opacity=0,i.scale=1;var s=!1;this.currSelectSkillCount>0&&(s=!0),r.default.getInstance().playSound(c.default.SEF_SelectSkill);var u=function(){if(p.default.onSelectSkill(o),a.currSelectSkillCount+=1,a.node.getChildByName("btn_refresh").active=!1,a.node.getChildByName("btn_videoSelectAll").active=!1,a.node.getChildByName("lbl_tips").opacity=0,a.node.getChildByName("btn_close").active=!0,a.currSelectSkillCount<2){var n=!1,i=!1;if(f.default.isSkillLevelMax(o,p.default.SkillStateMap.get(o))?o>200&&o<300&&f.default.isCanLearnSuperWeapon(o,p.default.SkillStateMap)&&(n=!0,i=!0):n=!0,n){t.getChildByName("btn_video").active=!0,t.x=0,i?a.initSkillBtn(e,t,o+100):a.initSkillBtn(e,t,o);for(var r=0;r<a.selectSkillBtnArr.length;r++)a.selectSkillBtnArr[r]!==t&&(a.selectSkillBtnArr[r].active=!1)}else a.onHideSelectSkillView()}else a.onHideSelectSkillView()};s?l.default.getInstance().showVideo(u):u()},t.prototype.onVideoSelectSkill=function(e,t,o){var n=this;r.default.getInstance().click(),l.default.getInstance().showVideo(function(){r.default.getInstance().playSound(c.default.SEF_SelectSkill),p.default.onSelectSkill(o),cc.tween(t).to(.5,{opacity:0}).call(function(){t.active=!1}).start(),n.skillStateArr[e]=!1,n.currSelectSkillCount+=1,n.onRefreshSelectBtn(),n.currSelectSkillCount>=3&&n.onHideSelectSkillView()})},t.prototype.onRefreshSelectBtn=function(){for(var e=0;e<this.selectSkillBtnArr.length;e++)this.skillStateArr[e]&&(this.selectSkillBtnArr[e].active=p.default.isCanSelectSkill(this.skillIdArr[e]))},t.prototype.onTouchBtn_selectAllSkill=function(e){var t=this;r.default.getInstance().playSound(c.default.SEF_SelectSkill),l.default.getInstance().showVideo(function(){for(var o=0;o<e.length;o++)p.default.onSelectSkill(e[o]);t.currSelectSkillCount=3,t.onHideSelectSkillView()})},t.prototype.onTouchBtn_hideView=function(){r.default.getInstance().click(),this.onHideSelectSkillView()},t.prototype.onHideSelectSkillView=function(){this.node.active=!1,u.default.onHideCurrSkillLayer.executeDelegates(),p.default.onPlayerLevelUpEnd()},t.prototype.isCanSelectAll=function(e){for(var t=e.length,o=0,n=0,i=0;i<t;i++)p.default.SkillStateMap.has(e[i])||(e[i]<200?n+=1:e[i]<300&&(o+=1));var a=!0;return(o+p.default.WeaponIdArr.length>f.default.SkillCountLimit_Weapon||n+p.default.CommonSkillIdArr.length>f.default.SkillCountLimit_Common)&&(a=!1),a},a([y([cc.SpriteFrame])],t.prototype,"sfArr_skillBtn",void 0),a([_,g("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../misc/SkillStarNode_008":"SkillStarNode_008","../../utils/SkillUtils_008":"SkillUtils_008"}],SettingDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"a5b9cSDOJhN+LNLkIZvQcQF","SettingDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../../ui/Component/Dx_BtnToggle"),s=e("../../../../mag/AudioMag"),l=e("./BaseUIDialog_008"),c=cc._decorator,u=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.toggle_bgm=null,t.toggle_ef=null,t.node_icon=null,t.lbl_title=null,t.touchTime=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.btn_close=this.actNode.getChildByName("btn_close"),this.toggle_bgm=this.actNode.getChildByName("toggle_bgm"),this.toggle_ef=this.actNode.getChildByName("toggle_ef"),this.node_icon=this.actNode.getChildByName("tanchuang").getChildByName("node_icon"),this.lbl_title=this.actNode.getChildByName("lbl_title")},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.node_icon.active=!1,this.touchTime=0},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.node_icon.active=!1},t.prototype.start=function(){var e=this;this.toggle_bgm.getComponent(r.default).addListener(function(t){e.onClickBGMToggle(t)}),this.toggle_ef.getComponent(r.default).addListener(function(t){e.onClickEffectToggle(t)})},t.prototype.onTouchTitle=function(){this.touchTime+=1,this.touchTime>20&&(this.node_icon.active=!0)},t.prototype.onClickBtn_close=function(){s.default.getInstance().click(),this.onHide(function(){})},t.prototype.onClickBGMToggle=function(){s.default.getInstance().changeMusicState()},t.prototype.onClickEffectToggle=function(){s.default.getInstance().changeSoundState()},t.prototype.onInit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onInitEvent=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_close,this),this.lbl_title.on(cc.Node.EventType.TOUCH_END,this.onTouchTitle,this)},t.prototype.onRemoveEvent=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onClickBtn_close,this),this.lbl_title.off(cc.Node.EventType.TOUCH_END,this.onTouchTitle,this)},a([u],t)}(l.default));o.default=p,cc._RF.pop()},{"../../../../../ui/Component/Dx_BtnToggle":"Dx_BtnToggle","../../../../mag/AudioMag":"AudioMag","./BaseUIDialog_008":"BaseUIDialog_008"}],SettingUI:[function(e,t,o){"use strict";cc._RF.push(t,"78eec5tdnpG8ZWUgWA8cr84","SettingUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../game/mag/AudioMag"),s=e("../game/mag/UIMag"),l=e("./BaseUI"),c=e("./Component/Dx_BtnToggle"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.toggle_bgm=null,t.toggle_ef=null,t.node_icon=null,t.lbl_title=null,t.touchTime=0,t}return i(t,e),t.prototype.onOnLoad=function(){this.btn_close=this.actNode.getChildByName("btn_close"),this.toggle_bgm=this.actNode.getChildByName("toggle_bgm"),this.toggle_ef=this.actNode.getChildByName("toggle_ef"),this.node_icon=this.actNode.getChildByName("tanchuang").getChildByName("node_icon"),this.lbl_title=this.actNode.getChildByName("lbl_title")},t.prototype.onEnable=function(){this.node_icon.active=!1,this.touchTime=0},t.prototype.onDisable=function(){this.node_icon.active=!1},t.prototype.onTouchTitle=function(){this.touchTime+=1,this.touchTime>20&&(this.node_icon.active=!0)},t.prototype.start=function(){var e=this;this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_close,this),this.lbl_title.on(cc.Node.EventType.TOUCH_END,this.onTouchTitle,this),this.toggle_bgm.getComponent(c.default).addListener(function(t){e.onClickBGMToggle(t)}),this.toggle_ef.getComponent(c.default).addListener(function(t){e.onClickEffectToggle(t)})},t.prototype.onClickBtn_close=function(){r.default.getInstance().click(),s.default.ins.HideUI(s.UIType.SettingUI,!0,null)},t.prototype.onClickBGMToggle=function(){r.default.getInstance().changeMusicState()},t.prototype.onClickEffectToggle=function(){r.default.getInstance().changeSoundState()},a([p],t)}(l.default));o.default=d,cc._RF.pop()},{"../game/mag/AudioMag":"AudioMag","../game/mag/UIMag":"UIMag","./BaseUI":"BaseUI","./Component/Dx_BtnToggle":"Dx_BtnToggle"}],ShiFangUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"e51a3CfgbVJ2YPRUeua6WAs","ShiFangUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/RandomUtils"),i=e("../entities/Entities_008"),a=e("../entities/Enums_008"),r=function(){function e(){}return e.generateFragmentData=function(e){var t=[],o=e?this.ShiFang_FragmentRewardData_special:this.ShiFang_FragmentRewardData_normal,i=e?this.ShiFang_FragmentRewardCountRange_special:this.ShiFang_FragmentRewardCountRange_noraml,a=1;if(i[0]instanceof Array){for(var r=i.map(function(e){return e[1]}).reduce(function(e,t){return e+t}),s=n.RandomUtils.getRandomInt(0,r-1),l=0,c=0;c<i.length;c++)if(s<(l+=i[c][1])){a=i[c][0];break}}else a=n.RandomUtils.getRandomInt(i[0],i[1]);var u=o.length>0?o.map(function(e){return e.w}).reduce(function(e,t){return e+t}):0,p=0;for(c=0;c<a;c++){p=0,s=n.RandomUtils.getRandomInt(0,u-1);for(var d=0;d<o.length;d++)if(s<(p+=o[d].w)){if(this.ShiFang_IsMultiRewardAllowSame)this.onAddReward_allowSame(t,o[d].i,o[d].c);else{if(-1!==t.map(function(e){return e.itemId}).indexOf(o[d].i)&&t.length<o.length){c--;break}this.onAddReward_allowSame(t,o[d].i,o[d].c)}break}}return t},e.onAddReward_allowSame=function(e,t,o){var n=e.map(function(e){return e.itemId}).indexOf(t);-1!==n?e[n].count+=o:e.push({itemId:t,count:o})},e.generateJishiItemData=function(){var e=[],t=[],o=this.Jishi_getItemData(t,a.ShiFang_JiShi_ItemAcquisitionMethod_008.Free);t.push(o.i),e.push(this.getJiShiItemData(o.i,o.c,a.ShiFang_JiShi_ItemAcquisitionMethod_008.Free));for(var n=0;n<2;n++){var i=this.Jishi_getItemData(t,a.ShiFang_JiShi_ItemAcquisitionMethod_008.Coin);t.push(i.i),e.push(this.getJiShiItemData(i.i,i.c,a.ShiFang_JiShi_ItemAcquisitionMethod_008.Coin))}var r=this.Jishi_getItemData(t,a.ShiFang_JiShi_ItemAcquisitionMethod_008.Video);for(t.push(r.i),e.push(this.getJiShiItemData(r.i,r.c,a.ShiFang_JiShi_ItemAcquisitionMethod_008.Video)),n=0;n<2;n++)i=this.Jishi_getItemData(t,a.ShiFang_JiShi_ItemAcquisitionMethod_008.ZiJinYe),t.push(i.i),e.push(this.getJiShiItemData(i.i,i.c,a.ShiFang_JiShi_ItemAcquisitionMethod_008.ZiJinYe));return e},e.getJiShiItemData=function(e,t,o){var n,r,s=new i.ShiFang_JiShiItemData;switch(s.itemId=e,s.count=t,s.isSoldOut=!1,s.acquisitionMethod=o,o){case a.ShiFang_JiShi_ItemAcquisitionMethod_008.Free:case a.ShiFang_JiShi_ItemAcquisitionMethod_008.Video:s.price=0;break;case a.ShiFang_JiShi_ItemAcquisitionMethod_008.Coin:s.price=(null!==(n=this.ShiFang_Price_Coin.get(e))&&void 0!==n?n:1e4)*t;break;case a.ShiFang_JiShi_ItemAcquisitionMethod_008.ZiJinYe:s.price=(null!==(r=this.ShiFang_Price_ZiJinYe.get(e))&&void 0!==r?r:1e3)*t;break;default:s.price=0}return s},e.Jishi_getItemData=function(e,t){var o=0;switch(t){case a.ShiFang_JiShi_ItemAcquisitionMethod_008.Free:o=0;break;case a.ShiFang_JiShi_ItemAcquisitionMethod_008.Video:o=1;break;case a.ShiFang_JiShi_ItemAcquisitionMethod_008.Coin:o=2;break;case a.ShiFang_JiShi_ItemAcquisitionMethod_008.ZiJinYe:o=3;break;default:o=0}for(var i=this.ShiFange_JiShi_ItemData[o],r=i.filter(function(t){return!e.includes(t.i)}),s=r.length>0?r:i,l=s.length>0?s.map(function(e){return e.w}).reduce(function(e,t){return e+t}):0,c=0,u=n.RandomUtils.getRandomInt(0,l-1),p=0,d=0;d<s.length;d++)if(u<(c+=i[d].w)){p=d;break}return s[p]},e.ShiFang_IsMultiRewardAllowSame=!1,e.ShiFang_FragmentRewardCountRange_noraml=[[1,75],[2,25],[3,5]],e.ShiFang_FragmentRewardCountRange_special=[10,10],e.ShiFang_FragmentRewardData_normal=[{i:15201,c:1,w:500},{i:15202,c:1,w:500},{i:15203,c:1,w:500},{i:15204,c:1,w:50},{i:15205,c:1,w:300},{i:15208,c:1,w:50},{i:15209,c:1,w:50},{i:15211,c:1,w:50},{i:15213,c:1,w:50}],e.ShiFang_FragmentRewardData_special=[{i:15201,c:3,w:500},{i:15202,c:3,w:500},{i:15203,c:3,w:500},{i:15204,c:3,w:50},{i:15205,c:3,w:200},{i:15208,c:3,w:50},{i:15209,c:3,w:50},{i:15211,c:1,w:50},{i:15213,c:1,w:50}],e.ShiFang_Price_Coin=new Map([[1e4,0],[10001,50],[10003,.1],[10005,1e3],[15201,1e3],[15202,1e3],[15203,1e3],[15204,2e3],[15205,2e3],[15208,2e3],[15209,2e3],[15211,2e3],[15213,2e3]]),e.ShiFang_Price_ZiJinYe=new Map([[1e4,.002],[10001,5],[10003,.004],[10005,1],[15201,10],[15202,10],[15203,10],[15204,20],[15205,20],[15208,20],[15209,20],[15211,20],[15213,20]]),e.ShiFange_JiShi_ItemData=[[{i:1e4,c:250,w:100},{i:10001,c:5,w:100},{i:10003,c:1e3,w:100},{i:10005,c:5,w:100}],[{i:1e4,c:1200,w:100},{i:10001,c:30,w:100},{i:10003,c:5e3,w:100},{i:10005,c:200,w:100}],[{i:10001,c:10,w:100},{i:10003,c:5e3,w:100},{i:15201,c:1,w:100},{i:15202,c:1,w:100},{i:15203,c:1,w:100},{i:15204,c:1,w:100},{i:15205,c:1,w:100},{i:15208,c:1,w:100},{i:15209,c:1,w:100},{i:15211,c:1,w:100},{i:15213,c:1,w:100}],[{i:10001,c:30,w:100},{i:10003,c:3e3,w:100},{i:15201,c:5,w:100},{i:15202,c:5,w:100},{i:15203,c:5,w:100},{i:15204,c:5,w:100},{i:15205,c:5,w:100},{i:15208,c:5,w:100},{i:15209,c:5,w:100},{i:15211,c:5,w:100},{i:15213,c:1,w:100}]],e}();o.default=r,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../entities/Entities_008":"Entities_008","../entities/Enums_008":"Enums_008"}],ShiFangView_008:[function(e,t,o){"use strict";cc._RF.push(t,"8d1d3pZW+hOooOn4BQb8vGk","ShiFangView_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/DateUtils"),s=e("../../../../mag/AudioMag"),l=e("../../../../mag/VideoManager"),c=e("../../Config_008"),u=e("../../DelegateManager_008"),p=e("../../LocalDataManager_008"),d=e("../../entities/Enums_008"),f=e("../../utils/EquipmentUtils_008"),h=e("../../utils/QuestsUtil_008"),_=e("../../utils/ShiFangUtils_008"),y=cc._decorator,g=y.ccclass,m=y.property,v=y.inspector,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getZiJinYeNode=null,t.getSkillFragmentNode=null,t.btn_videoRefresh=null,t.lbl_countDown=null,t.itemLayout=null,t.freeBtnLabel_getZiJinYeNode=null,t.numOfGet_getZiJinYeNode=0,t.lastTime_getZiJinYeNode=0,t}return i(t,e),t.prototype.onEnable=function(){this.btn_videoRefresh.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_videoRefreshJiShi,this),p.default.getInstance().onTryRefreshShiFangData();var e=new Date;e.setDate(e.getDate()+1),e.setHours(4,0,0,0),this.refreshTimestamp=e.getTime(),this.onRefreshAllUI()},t.prototype.onDisable=function(){this.btn_videoRefresh.off(cc.Node.EventType.TOUCH_END,this.onClickBtn_videoRefreshJiShi,this)},t.prototype.update=function(){this.onRefreshCountDownLabel()},t.prototype.onRefreshCountDownLabel=function(){var e=Date.now();if(e>this.refreshTimestamp)return p.default.getInstance().onTryRefreshShiFangData(),this.refreshTimestamp+=864e5,void this.onRefreshAllUI();if(this.lbl_countDown.string=r.default.getDurationFromTimestamp(this.refreshTimestamp,e)+"\u540e\u5237\u65b0",this.freeBtnLabel_getZiJinYeNode)if(this.numOfGet_getZiJinYeNode<10){var t=this.lastTime_getZiJinYeNode;this.freeBtnLabel_getZiJinYeNode.string=e-t>=12e4?"\u514d\u8d39":r.default.getDurationFromTimestamp_mmss(t+12e4,e)+"\u540e"}else this.freeBtnLabel_getZiJinYeNode.string=r.default.getDurationFromTimestamp(this.refreshTimestamp,e)+"\u540e"},t.prototype.onRefreshAllUI=function(){this.onRefreshCountDownLabel(),this.onRefreshGetZiJinYeNode(!0),this.onRefreshGetSkillFragmentNode(!0),this.onRefreshJishiItem(!0)},t.prototype.onRefreshGetZiJinYeNode=function(e){var t;void 0===e&&(e=!1);var o=this.getZiJinYeNode.getChildByName("lbl_limit").getComponent(cc.Label),n=this.getZiJinYeNode.getChildByName("btn_free"),i=this.getZiJinYeNode.getChildByName("btn_video"),a=null!==(t=this.freeBtnLabel_getZiJinYeNode)&&void 0!==t?t:n.getChildByName("Background").getChildByName("Label").getComponent(cc.Label);this.freeBtnLabel_getZiJinYeNode=a;var s=Date.now(),l=p.default.getInstance().playerData.shifang_numOfTodayGetZiJinYe;if(this.numOfGet_getZiJinYeNode=l,o.string="\u6bcf\u65e5\u9650\u8d2d"+(10-l)+"/10",l<10){var c=p.default.getInstance().playerData.shifang_lastGetZiJinYeTime;this.lastTime_getZiJinYeNode=c,a.string=s-c>=12e4?"\u514d\u8d39":r.default.getDurationFromTimestamp_mmss(c+12e4,s)+"\u540e"}else a.string=r.default.getDurationFromTimestamp(this.refreshTimestamp,s)+"\u540e";e&&(n.off(cc.Node.EventType.TOUCH_END),i.off(cc.Node.EventType.TOUCH_END),n.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_freeGetZiJinYe,this),i.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_videoGetZiJinYe,this))},t.prototype.onRefreshGetSkillFragmentNode=function(e){void 0===e&&(e=!1);var t=this.getSkillFragmentNode.getChildByName("lbl_tips_time").getComponent(cc.Label),o=this.getSkillFragmentNode.getChildByName("btn_videoFree"),n=this.getSkillFragmentNode.getChildByName("btn_payZiJinYe"),i=10-p.default.getInstance().playerData.shifang_numOfGetFragment;t.string=i+"\u6b21\u5185",e&&(o.off(cc.Node.EventType.TOUCH_END),n.off(cc.Node.EventType.TOUCH_END),o.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_videoFreeGetSkillFragment,this),n.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_payZiJinYeGetSkillFragment,this))},t.prototype.onInitJishiItem=function(){for(var e=this.itemLayout.children[0],t=0;t<5;t++)cc.instantiate(e).setParent(this.itemLayout)},t.prototype.onRefreshJishiItem=function(e){void 0===e&&(e=!1);for(var t=0;t<6;t++){var o=t,n=this.itemLayout.children[t],i=p.default.getInstance().playerData.shifang_jishiItemData[t];this.refreshJiShiItemUI(n,i),e&&(n.off(cc.Node.EventType.TOUCH_END),n.on(cc.Node.EventType.TOUCH_END,this.onClickBtn_JishiItem.bind(this,n,o),this))}},t.prototype.refreshJiShiItemUI=function(e,t){var o=t.itemId,n=e.getChildByName("actNode"),i=n.getChildByName("lbl_name").getComponent(cc.Label),a=n.getChildByName("k").getComponent(cc.Sprite),r=n.getChildByName("icon").getComponent(cc.Sprite),s=n.getChildByName("fragment"),l=n.getChildByName("lbl_count").getComponent(cc.Label),c=n.getChildByName("priceLayout"),u=n.getChildByName("soldOut"),p=c.getChildByName("icon_coin"),_=c.getChildByName("icon_video"),y=c.getChildByName("icon_zijinye"),g=c.getChildByName("lbl_price").getComponent(cc.Label),m=c.getChildByName("lbl_free"),v=n.getChildByName("equipmentKEffectNode").getChildByName("ani_eqmK").getComponent(cc.Animation),b=h.default.instance.getItemQuality(o);switch(b>=3?(v.node.opacity=255,v.play("ani_eqmK_"+b)):v.node.opacity=0,i.string=h.default.instance.getItemName(o),f.EquipmentUtils_008.setEquipmentNodeBg(a,b),h.default.instance.getRewardItemSf(o).then(function(e){r.spriteFrame=e}),s.opacity=o>=15e3&&o<=15999?255:0,l.string=t.count>0?"\xd7"+t.count:"",u.active=t.isSoldOut,p.active=!1,_.active=!1,y.active=!1,g.node.active=!1,m.active=!1,t.acquisitionMethod){case d.ShiFang_JiShi_ItemAcquisitionMethod_008.Free:m.active=!0;break;case d.ShiFang_JiShi_ItemAcquisitionMethod_008.Video:_.active=!0;break;case d.ShiFang_JiShi_ItemAcquisitionMethod_008.Coin:p.active=!0,g.node.active=!0;break;case d.ShiFang_JiShi_ItemAcquisitionMethod_008.ZiJinYe:y.active=!0,g.node.active=!0;break;default:_.active=!0}g.string=t.price.toString()},t.prototype.onClickBtn_freeGetZiJinYe=function(){var e;if(window.isCanCtrl){s.default.getInstance().click();var t=this.getZiJinYeNode.getChildByName("btn_free");if("\u514d\u8d39"===(null!==(e=this.freeBtnLabel_getZiJinYeNode)&&void 0!==e?e:t.getChildByName("Background").getChildByName("Label").getComponent(cc.Label)).string){var o=p.default.getInstance().playerData.item_addCountById(d.ItemType_008.c_zijinye,50);p.default.getInstance().playerData.shifang_numOfTodayGetZiJinYe+=1,p.default.getInstance().playerData.shifang_lastGetZiJinYeTime=Date.now(),p.default.getInstance().onSaveData(),u.default.onShowDia.executeDelegates(c.default.UIPath_Dia_Rewards,[{itemId:d.ItemType_008.c_zijinye,count:50}]),u.default.onRefreshZiJinYeBar.executeDelegates(o),this.onRefreshGetZiJinYeNode()}else u.default.onShowUIFloatText.executeDelegates("\u8865\u8d27\u4e2d\u2026")}},t.prototype.onClickBtn_videoGetZiJinYe=function(){var e=this;window.isCanCtrl&&(s.default.getInstance().click(),l.default.getInstance().showVideo(function(){var t=p.default.getInstance().playerData.item_addCountById(d.ItemType_008.c_zijinye,250);p.default.getInstance().onSaveData(),u.default.onShowDia.executeDelegates(c.default.UIPath_Dia_Rewards,[{itemId:d.ItemType_008.c_zijinye,count:250}]),u.default.onRefreshZiJinYeBar.executeDelegates(t),e.onRefreshGetZiJinYeNode()}))},t.prototype.onClickBtn_videoFreeGetSkillFragment=function(){var e=this;window.isCanCtrl&&(s.default.getInstance().click(),l.default.getInstance().showVideo(function(){e.onGetFragment()}))},t.prototype.onClickBtn_payZiJinYeGetSkillFragment=function(){if(window.isCanCtrl){s.default.getInstance().click();var e=p.default.getInstance().playerData.item_getCountById(d.ItemType_008.c_zijinye);e>=200?(e=p.default.getInstance().playerData.item_addCountById(d.ItemType_008.c_zijinye,-200),u.default.onRefreshZiJinYeBar.executeDelegates(e),this.onGetFragment()):u.default.onShowUIFloatText.executeDelegates("\u7d2b\u91d1\u53f6\u4e0d\u8db3")}},t.prototype.onGetFragment=function(){var e;10===p.default.getInstance().playerData.shifang_numOfGetFragment+1?(p.default.getInstance().playerData.shifang_numOfGetFragment=0,e=_.default.generateFragmentData(!0)):(p.default.getInstance().playerData.shifang_numOfGetFragment+=1,e=_.default.generateFragmentData(!1));for(var t=0;t<e.length;t++)p.default.getInstance().playerData.item_addCountById(e[t].itemId,e[t].count);p.default.getInstance().onSaveData(),this.onRefreshGetSkillFragmentNode(),u.default.onRefreshGongFaUI.executeDelegates(),u.default.onShowDia.executeDelegates(c.default.UIPath_Dia_Rewards,e)},t.prototype.onClickBtn_JishiItem=function(e,t){var o=this;if(window.isCanCtrl){var n=p.default.getInstance().playerData.shifang_jishiItemData[t];if(!n.isSoldOut)switch(s.default.getInstance().click(),n.acquisitionMethod){case d.ShiFang_JiShi_ItemAcquisitionMethod_008.Free:this.getJiShiItem(e,n),p.default.getInstance().onSaveData();break;case d.ShiFang_JiShi_ItemAcquisitionMethod_008.Coin:var i=p.default.getInstance().getCoinCount();i>=n.price?(this.getJiShiItem(e,n),i=p.default.getInstance().playerData.item_addCountById(d.ItemType_008.c_coin,-n.price),p.default.getInstance().onSaveData(),u.default.onRefreshGoldBar.executeDelegates(i)):u.default.onShowUIFloatText.executeDelegates("\u94dc\u94b1\u4e0d\u8db3");break;case d.ShiFang_JiShi_ItemAcquisitionMethod_008.ZiJinYe:var a=p.default.getInstance().playerData.item_getCountById(d.ItemType_008.c_zijinye);a>=n.price?(this.getJiShiItem(e,n),a=p.default.getInstance().playerData.item_addCountById(d.ItemType_008.c_zijinye,-n.price),p.default.getInstance().onSaveData(),u.default.onRefreshZiJinYeBar.executeDelegates(a)):u.default.onShowUIFloatText.executeDelegates("\u7d2b\u91d1\u53f6\u4e0d\u8db3");break;default:l.default.getInstance().showVideo(function(){o.getJiShiItem(e,n),p.default.getInstance().onSaveData()})}}},t.prototype.getJiShiItem=function(e,t){var o=p.default.getInstance().playerData,n=o.item_addCountById(t.itemId,t.count);t.isSoldOut=!0,e.getChildByName("actNode").getChildByName("soldOut").active=!0,u.default.onShowDia.executeDelegates(c.default.UIPath_Dia_Rewards,[{itemId:t.itemId,count:t.count}]),t.itemId===d.ItemType_008.c_coin?u.default.onRefreshGoldBar.executeDelegates(n):t.itemId===d.ItemType_008.c_boxKey?u.default.onRefreshNumKey.executeDelegates(n):t.itemId===d.ItemType_008.c_lingqi?u.default.onRefreshNumLingQi.executeDelegates(o.item_getCountById(d.ItemType_008.c_lingqi)):t.itemId===d.ItemType_008.c_zijinye?u.default.onRefreshZiJinYeBar.executeDelegates(n):u.default.onRefreshGongFaUI.executeDelegates()},t.prototype.onClickBtn_videoRefreshJiShi=function(){var e=this;window.isCanCtrl&&(s.default.getInstance().click(),l.default.getInstance().showVideo(function(){p.default.getInstance().onRefreshJiShi(),e.onRefreshJishiItem()}))},a([m(cc.Node)],t.prototype,"getZiJinYeNode",void 0),a([m(cc.Node)],t.prototype,"getSkillFragmentNode",void 0),a([m(cc.Node)],t.prototype,"btn_videoRefresh",void 0),a([m(cc.Label)],t.prototype,"lbl_countDown",void 0),a([m(cc.Node)],t.prototype,"itemLayout",void 0),a([g,v("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../../Utils/DateUtils":"DateUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../utils/EquipmentUtils_008":"EquipmentUtils_008","../../utils/QuestsUtil_008":"QuestsUtil_008","../../utils/ShiFangUtils_008":"ShiFangUtils_008"}],ShowDailyDiaBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"e5961YSL1BPZq7KOWGn330J","ShowDailyDiaBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("./BaseSingleBtn_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onTouchEvent=function(){r.default.getInstance().click(),l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_DailyGift)},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","./BaseSingleBtn_008":"BaseSingleBtn_008"}],Simulator:[function(e,t,o){"use strict";cc._RF.push(t,"9dca3vHMSpEhaNfXFTElO6q","Simulator"),Object.defineProperty(o,"__esModule",{value:!0}),o.Simulator=void 0;var n=e("./Agent"),i=e("./KdTree"),a=e("./Obstacle"),r=e("./Vector2"),s=function(){function e(){this.time_=0,this.agents_=[],this.agentIdCounter=0,this.agentMap=new Map,this.obstacles_=[],this.time_=0,this.defaultAgent_=null,this.kdTree_=new i.KdTree,this.timeStep_=1,e._instance=this}return e.Instance=function(){return e._instance},e.prototype.addNewAgent=function(e){if(null==this.defaultAgent_)return null;var t=new n.Agent;return t.position_=e,t.maxNeighbors_=this.defaultAgent_.maxNeighbors_,t.maxSpeed_=this.defaultAgent_.maxSpeed_,t.neighborDist_=this.defaultAgent_.neighborDist_,t.radius_=this.defaultAgent_.radius_,t.timeHorizon_=this.defaultAgent_.timeHorizon_,t.timeHorizonObst_=this.defaultAgent_.timeHorizonObst_,t.velocity_=this.defaultAgent_.velocity_,t.avoidenceWeight_=100,t.id_=this.agentIdCounter++,this.agents_.push(t),t.index_=this.agents_.length,this.agentMap.set(t.id_,t),t},e.prototype.addAgent=function(e,t){e.position_=t,e.id_=this.agentIdCounter++,this.agentMap.set(e.id_,e)},e.prototype.removeAgent=function(e){return this.agentMap.delete(e)},e.prototype.addObstacle=function(e){if(e.length<2)return-1;for(var t=this.obstacles_.length,o=0;o<e.length;++o){var n=new a.Obstacle;n.point_=e[o],0!=o&&(n.prevObstacle_=this.obstacles_[this.obstacles_.length-1],n.prevObstacle_.nextObstacle_=n),o==e.length-1&&(n.nextObstacle_=this.obstacles_[t],n.nextObstacle_.prevObstacle_=n),n.unitDir_=r.Vector2.normalize(e[o==e.length-1?0:o+1].moins(e[o])),2==e.length?n.isConvex_=!0:n.isConvex_=r.Vector2.leftOf(e[0==o?e.length-1:o-1],e[o],e[o==e.length-1?0:o+1])>=0,n.id_=this.obstacles_.length,this.obstacles_.push(n)}return t},e.prototype.doStep=function(){var e=this,t=0;this.agentMap.forEach(function(o){e.agents_[t]=o,o.index_=t,t++}),this.kdTree_.buildAgentTree();for(var o=0;o<this.getNumAgents();++o)this.agents_[o].computeNeighbors(),this.agents_[o].computeNewVelocity();for(o=0;o<this.getNumAgents();++o)this.agents_[o].update();this.time_+=this.timeStep_},e.prototype.setAgentAvoidenceWeight=function(e,t){this.agents_[e].avoidenceWeight_=t},e.prototype.getAgentAgentNeighbor=function(e,t){return this.agents_[e].agentNeighbors_[t].Value.id_},e.prototype.getAgentMaxNeighbors=function(e){return this.agents_[e].maxNeighbors_},e.prototype.getAgentMaxSpeed=function(e){return this.agents_[e].maxSpeed_},e.prototype.getAgentNeighborDist=function(e){return this.agents_[e].neighborDist_},e.prototype.getAgentNumAgentNeighbors=function(e){return this.agents_[e].agentNeighbors_.length},e.prototype.getAgentNumObstacleNeighbors=function(e){return this.agents_[e].obstacleNeighbors_.length},e.prototype.getAgentNumORCALines=function(e){return this.agents_[e].orcaLines_.length},e.prototype.getAgentObstacleNeighbor=function(e,t){return this.agents_[e].obstacleNeighbors_[t].Value.id_},e.prototype.getAgentPosition=function(e){return this.agents_[e].position_},e.prototype.getAgentPrefVelocity=function(e){return this.agents_[e].prefVelocity_},e.prototype.getAgentRadius=function(e){return this.agents_[e].radius_},e.prototype.getAgentTimeHorizon=function(e){return this.agents_[e].timeHorizon_},e.prototype.getAgentTimeHorizonObst=function(e){return this.agents_[e].timeHorizonObst_},e.prototype.getAgentVelocity=function(e){return this.agents_[e].velocity_},e.prototype.getGlobalTime=function(){return this.time_},e.prototype.getNumAgents=function(){return this.agentMap.size},e.prototype.setAgentMaxNeighbors=function(e,t){this.agents_[e].maxNeighbors_=t},e.prototype.setAgentMaxSpeed=function(e,t){this.agents_[e].maxSpeed_=t},e.prototype.setAgentNeighborDist=function(e,t){this.agents_[e].neighborDist_=t},e.prototype.setAgentPosition=function(e,t){this.agents_[e].position_=t},e.prototype.setAgentPrefVelocity=function(e,t){this.agents_[e].prefVelocity_=t},e.prototype.setAgentRadius=function(e,t){this.agents_[e].radius_=t},e.prototype.setAgentTimeHorizon=function(e,t){this.agents_[e].timeHorizon_=t},e.prototype.setAgentTimeHorizonObst=function(e,t){this.agents_[e].timeHorizonObst_=t},e.prototype.setAgentVelocity=function(e,t){this.agents_[e].velocity_=t},e.prototype.clear=function(){this.agents_=[],this.agentMap.clear(),this.agentIdCounter=0,this.obstacles_=[],this.time_=0,this.kdTree_.clear(),this.timeStep_=1},e.prototype.processObstacles=function(){this.kdTree_.buildObstacleTree()},e.prototype.queryVisibility=function(e,t,o){return this.kdTree_.queryVisibility(e,t,o)},e.prototype.setAgentDefaults=function(e,t,o,i,a,s,l){void 0===l&&(l=new r.Vector2(0,0)),null==this.defaultAgent_&&(this.defaultAgent_=new n.Agent),this.defaultAgent_.maxNeighbors_=t,this.defaultAgent_.maxSpeed_=s,this.defaultAgent_.neighborDist_=e,this.defaultAgent_.radius_=a,this.defaultAgent_.timeHorizon_=o,this.defaultAgent_.timeHorizonObst_=i,this.defaultAgent_.velocity_=l},e.prototype.setTimeStep=function(e){this.timeStep_=e},e.prototype.getAgentOrientation=function(e){return this.agents_[e].orientation_},e.prototype.getOrca=function(e){return this.agents_[e].orcaLines_},e.prototype.getAgentPositionScreen=function(e){return this.agents_[e].positionScreen_},e}();o.Simulator=s,new s,cc._RF.pop()},{"./Agent":"Agent","./KdTree":"KdTree","./Obstacle":"Obstacle","./Vector2":"Vector2"}],SkillStarNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"dcd12syeqFEH55kTqBTQGCG","SkillStarNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sf_full=null,t.sf_half=null,t.lastStar=null,t}return i(t,e),t.prototype.onRefresh_old=function(e,t){void 0===t&&(t=!0),null!==this.lastStar&&(cc.Tween.stopAllByTarget(this.lastStar),this.lastStar.opacity=255);for(var o=this.node.getChildByName("curr"),n=Math.floor(.5*e),i=0;i<n;i++)o.children[i].getComponent(cc.Sprite).spriteFrame=this.sf_full,this.lastStar=o.children[i];for(e%2==1&&(o.children[n].getComponent(cc.Sprite).spriteFrame=this.sf_half,this.lastStar=o.children[n]),i=n+e%2;i<5;i++)o.children[i].getComponent(cc.Sprite).spriteFrame=null;t&&null!==this.lastStar&&cc.tween(this.lastStar).to(.8,{opacity:0}).to(.8,{opacity:255}).union().repeatForever().start()},t.prototype.onRefresh=function(e,t){void 0===t&&(t=!0),e>5&&(e=5),null!==this.lastStar&&(cc.Tween.stopAllByTarget(this.lastStar),this.lastStar.opacity=255);for(var o=this.node.getChildByName("curr"),n=0;n<e;n++)o.children[n].getComponent(cc.Sprite).spriteFrame=this.sf_full,this.lastStar=o.children[n],o.children[n].opacity=255;for(n=e;n<5;n++)o.children[n].getComponent(cc.Sprite).spriteFrame=null;t&&null!==this.lastStar&&cc.tween(this.lastStar).to(.8,{opacity:0}).to(.8,{opacity:255}).union().repeatForever().start();var i=this.node.getChildByName("bg");for(n=0;n<5;n++)i.children[n].opacity=255},t.prototype.onRefreshForSuperWeapon=function(){null!==this.lastStar&&(cc.Tween.stopAllByTarget(this.lastStar),this.lastStar.opacity=255,this.lastStar=null);for(var e=this.node.getChildByName("curr"),t=0;t<5;t++)2===t?(e.children[t].opacity=255,e.children[t].getComponent(cc.Sprite).spriteFrame=this.sf_full,this.lastStar=e.children[t]):e.children[t].opacity=0;var o=this.node.getChildByName("bg");for(t=0;t<5;t++)o.children[t].opacity=2===t?255:0;null!==this.lastStar&&cc.tween(this.lastStar).to(.8,{opacity:0}).to(.8,{opacity:255}).union().repeatForever().start()},a([l(cc.SpriteFrame)],t.prototype,"sf_full",void 0),a([l(cc.SpriteFrame)],t.prototype,"sf_half",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],SkillSwordFormation_008:[function(e,t,o){"use strict";cc._RF.push(t,"b84770aRxNL37TKPAv/0kjY","SkillSwordFormation_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../../../mag/NodePoolManager"),c=e("../../../../mag/VideoManager"),u=e("../../Config_008"),p=e("../../DelegateManager_008"),d=e("../../GamingData_008"),f=e("../../LocalDataManager_008"),h=e("../../utils/SkillUtils_008"),_=e("./BaseSingleBtn_008"),y=cc._decorator,g=y.ccclass,m=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onRecovery=function(){l.default.getInstance().recoveryNode(u.default.UIPath_Btn_SwordFormation,this.node)},t.prototype.onTouchEvent=function(){var e=this;window.isCanCtrl&&(r.default.getInstance().click(),d.default.isGaming&&(d.default.isGamePause=!0,window.isCanCtrl=!1),c.default.getInstance().showVideo(function(){f.default.getInstance().onUnlockSkill(u.WeaponType_008.SwordFormation),f.default.getInstance().onSaveData();var t=function(){d.default.isGaming&&(h.default.registerSkill(u.WeaponType_008.SwordFormation),d.default.onSelectSkill(u.WeaponType_008.SwordFormation),d.default.isGamePause=!1,window.isCanCtrl=!0),e.onRecovery()},o=u.UnlockSkillDataMap.get(u.WeaponType_008.SwordFormation);s.default.getInstance().getSpriteFrame(u.default.Path_IconSkill+u.WeaponType_008.SwordFormation).then(function(e){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_unlockNewSkill,e,o.desc,t)})},function(){d.default.isGaming&&(d.default.isGamePause=!1,window.isCanCtrl=!0)}))},a([g],t)}(_.default));o.default=m,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/NodePoolManager":"NodePoolManager","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../LocalDataManager_008":"LocalDataManager_008","../../utils/SkillUtils_008":"SkillUtils_008","./BaseSingleBtn_008":"BaseSingleBtn_008"}],SkillUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"68b2fNJdgJGx5y4BrfIsZPh","SkillUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/RandomUtils"),i=e("../Config_008"),a=e("../LocalDataManager_008"),r=function(){function e(){}return e.onInitEnableSkillArr=function(){this.EnableSkillArr=[];for(var e=a.default.getInstance().playerData,t=[101,102,103,104],o=0;o<t.length;o++)this.registerSkill(t[o]);for(o=0;o<e.unlockedCommonSkillArr.length;o++)this.registerSkill(e.unlockedCommonSkillArr[o]);for(o=0;o<e.unlockedWeaponArr.length;o++)e.gongfa_sealArr.includes(e.unlockedWeaponArr[o])||this.registerSkill(e.unlockedWeaponArr[o])},e.registerSkill=function(e){this.EnableSkillArr.includes(e)||i.SkillConfigMap.has(e)&&this.EnableSkillArr.push(e)},e.getSkillMaxLevel=function(e){return e>100&&e<300?5:1},e.isSkillLevelMax=function(e,t){return e>100&&e<300?t>=5:t>=1},e.isCanLearnSuperWeapon=function(e,t){var o=e+100,n=!1;return i.SkillConfigMap.has(o)&&a.default.getInstance().playerData.unlockedSuperWeaponArr.includes(o)&&!t.has(o)&&(n=!0),n},e.isCanLearnNewCommonSkill=function(e){return this.SkillCountLimit_Common>e},e.isCanLearnNewWeaponSkill=function(e){return this.SkillCountLimit_Weapon>e},e.getRandomWeapon=function(e,t,o,i){var a=this.getCanSelectWeaponIdArr(e,t,o);return a.length<1?this.getRandomSkillId(e,t,o,i):a[n.RandomUtils.getRandomFormArray(a)]},e.getRandomSkillId=function(e,t,o,a){var r=this.getCanSelectWeaponIdArr(e,t,o).concat(this.getCanSelectCommonSkillIdArr(e,t,a));return r.length<1&&(e.includes(i.DropItemType.Chichen)||r.push(i.DropItemType.Chichen),e.includes(i.DropItemType.Coin_3)||r.push(i.DropItemType.Coin_3),e.includes(i.DropItemType.AlchemyPullet)||r.push(i.DropItemType.AlchemyPullet)),r[n.RandomUtils.getRandomFormArray(r)]},e.getCanSelectWeaponIdArr=function(e,t,o){var n=this,i=[];if(o.length<this.SkillCountLimit_Weapon)for(var a=0;a<this.EnableSkillArr.length;a++)this.EnableSkillArr[a]>200&&this.EnableSkillArr[a]<300&&(t.has(this.EnableSkillArr[a])||e.includes(this.EnableSkillArr[a])||i.push(this.EnableSkillArr[a]));return t.forEach(function(o,a){if(a>200&&a<300)if(n.isSkillLevelMax(a,o)){var r=a+100;n.isCanLearnSuperWeapon(a,t)&&!e.includes(r)&&i.push(r)}else e.includes(a)||i.push(a)}),i},e.getCanSelectCommonSkillIdArr=function(e,t,o){var n=this,i=[];if(o.length<this.SkillCountLimit_Common)for(var a=0;a<this.EnableSkillArr.length;a++)this.EnableSkillArr[a]>100&&this.EnableSkillArr[a]<200&&(t.has(this.EnableSkillArr[a])||e.includes(this.EnableSkillArr[a])||i.push(this.EnableSkillArr[a]));return t.forEach(function(t,o){o>100&&o<200&&(n.isSkillLevelMax(o,t)||e.includes(o)||i.push(o))}),i},e.EnableSkillArr=[],e.SkillCountLimit_Common=6,e.SkillCountLimit_Weapon=6,e}();o.default=r,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../Config_008":"Config_008","../LocalDataManager_008":"LocalDataManager_008"}],SpineEnemy_008:[function(e,t,o){"use strict";cc._RF.push(t,"bdb29qJZptI17ehkMld2Fzm","SpineEnemy_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Config_008"),s=e("./BaseEnemy_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=l.inspector,d=new cc.Color(0,255,255),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.currAniState=null,t}return i(t,e),t.prototype.onInitAniNameArr=function(){this.aniNameArr=Object.keys(this.spine.skeletonData.skeletonJson.animations)},t.prototype.onResetRenderNode=function(){cc.Tween.stopAllByTarget(this.spine.node),this.spine.node.color=cc.Color.WHITE,this.spine.node.opacity=255},t.prototype.onRenderNodePlayHitAni=function(){cc.Tween.stopAllByTarget(this.spine.node),this.spine.node.opacity=1,cc.tween(this.spine.node).to(.1,{opacity:255}).start()},t.prototype.onRenderNodePlayDieAni=function(e){cc.tween(this.spine.node).to(e,{color:d}).start()},t.prototype.onPauseAni=function(){this.spine.paused=!0},t.prototype.onResumeAni=function(){this.spine.paused=!1},t.prototype.onChangeAni=function(e,t,o){var n,i,a,r,s=this;void 0===t&&(t=!0),void 0===o&&(o=null);var l=this.getAniNameByState(e);return l===this.spine.getCurrent(0).animation.name?null!==(i=null===(n=this.currAniState)||void 0===n?void 0:n.animationEnd)&&void 0!==i?i:0:(this.currAniState=this.spine.setAnimation(0,l,t),this.spine.setEventListener(function(){var e;null==o||o(null===(e=s.currAniState)||void 0===e?void 0:e.trackTime)}),null!==(r=null===(a=this.currAniState)||void 0===a?void 0:a.animationEnd)&&void 0!==r?r:0)},t.prototype.onChangeAniByAniName=function(e,t){this.aniNameArr.includes(e)||(e=this.getAniNameByState(r.EnemyAniState.Walk)),e!==this.spine.getCurrent(0).animation.name&&(this.currAniState=this.spine.setAnimation(0,e,t))},t.prototype.setAnimationSpeed=function(e){this.spine.timeScale=e},t.prototype.onClearAniState=function(){this.currAniState=null},t.prototype.onInitSizeData=function(){this.size_width=Math.abs(this.node.scaleX*this.spine.node.scaleX*this.spine.node.width),this.size_height=Math.abs(this.node.scaleY*this.spine.node.scaleY*this.spine.node.height)},t.prototype.getAniNameByState=function(e){var t;switch(e){case r.EnemyAniState.Walk:t="xz";break;case r.EnemyAniState.Skill_QS:t=this.getAniNameByKey("qs");break;case r.EnemyAniState.Skill_DJ:t=this.getAniNameByKey("dj");break;case r.EnemyAniState.Run:t=this.getAniNameByKey("cz");break;case r.EnemyAniState.Skill_SF:t=this.getAniNameByKey("sf");break;default:t="xz"}return t},t.prototype.getAniNameByKey=function(e){for(var t=0;t<this.aniNameArr.length;t++)if(-1!==this.aniNameArr[t].indexOf(e))return this.aniNameArr[t];return"xz"},t.prototype.getHpBarPosY=function(){return this.size_height+this.spine.node.y+20},a([u(sp.Skeleton)],t.prototype,"spine",void 0),a([c,p("packages://autoproperty//inspector.js")],t)}(s.default);o.default=f,cc._RF.pop()},{"../Config_008":"Config_008","./BaseEnemy_008":"BaseEnemy_008"}],SpineSpeed_008:[function(e,t,o){"use strict";cc._RF.push(t,"c00d6bBkNVKRLI27cUVifHL","SpineSpeed_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../GamingData_008"),s=cc._decorator,l=s.ccclass,c=(s.property,s.menu),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.speed=1,t.pauseState=!1,t}return i(t,e),t.prototype.onLoad=function(){this.spine=this.node.getComponent(sp.Skeleton)},t.prototype.onEnable=function(){this.pauseState=r.default.isGamePause,this.speed=this.spine.timeScale},t.prototype.update=function(){r.default.isGamePause!==this.pauseState&&(this.pauseState=r.default.isGamePause,this.pauseState?(this.speed=this.spine.timeScale,this.spine.timeScale=0):this.spine.timeScale=this.speed)},a([l,c("008/spineSpeed")],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GamingData_008":"GamingData_008"}],StartUI:[function(e,t,o){"use strict";cc._RF.push(t,"66b65725VhAfo0xB613vMnZ","StartUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../game/mag/AudioMag"),s=e("../game/mag/UIMag"),l=e("./BaseUI"),c=cc._decorator,u=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_setting=null,t.btn_back=null,t}return i(t,e),t.prototype.onOnLoad=function(){this.btn_setting=this.actNode.getChildByName("btn_setting"),this.btn_back=this.actNode.getChildByName("btn_back")},t.prototype.onEnable=function(){r.default.getInstance().playBGM(r.AudioType.bgm_start),this.addBtnEvent(this.btn_setting),this.addBtnEvent(this.btn_back)},t.prototype.onDisable=function(){this.remvoeBtnEvent(this.btn_setting),this.remvoeBtnEvent(this.btn_back)},t.prototype.onOnClickBtn=function(e){switch(e.target){case this.btn_setting:s.default.ins.ShowUI(s.UIType.SettingUI,!0,null);break;case this.btn_back:s.default.ins.HideUI(s.UIType.StartUI,!1,null),s.default.ins.ShowUI(s.UIType.PreStartUI,!0,null)}},a([u],t)}(l.default));o.default=p,cc._RF.pop()},{"../game/mag/AudioMag":"AudioMag","../game/mag/UIMag":"UIMag","./BaseUI":"BaseUI"}],StringUtils:[function(e,t,o){"use strict";cc._RF.push(t,"92fbcHWeqFK0p1ycQ5ODe2d","StringUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=["K","M","B","T"],i=n.length,a=function(){function e(){}return e.Format_Leading_0=function(e,t){for(;e.length<t;)e="0"+e;return e},e.Format_Time_mmss=function(t){return e.Format_Leading_0(Math.floor(t/60).toString(),2)+":"+e.Format_Leading_0(Math.floor(t%60).toString(),2)},e.numberDispose=function(e,t){void 0===t&&(t=5);var o=e.length;if(o>t){var a=Math.round((o-6)/3);return a=a>=i?i-1:a,e.substring(0,o-3*(a+1))+n[a]}return e},e.formatAsPercentage=function(e){return(100*e).toFixed(0)+"%"},e}();o.default=a,cc._RF.pop()},{}],Test1:[function(e,t,o){"use strict";cc._RF.push(t,"6e4fekTgu9C/JhjgfacW9Gd","Test1");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../game/Utils/RandomUtils"),s=e("../game/gameLogic/008_rotatingWeapons/GamingData_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head=null,t.moveSpeed=200,t.moveDir=cc.Vec2.RIGHT,t.targetDir=cc.Vec2.RIGHT,t.rad=-1.57,t.radius=500,t.centerPos=cc.v2(0,500),t.isAnticlockwise=!0,t}return i(t,e),t.prototype.start=function(){this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.setPosition(this.centerPos.x+this.radius*Math.cos(this.rad),this.centerPos.y+this.radius*Math.sin(this.rad)),this.lastPos=this.node.getPosition()},t.prototype.update=function(e){if(!s.default.isGamePause){this.isAnticlockwise?this.rad+=e*this.moveSpeed:this.rad-=e*this.moveSpeed,this.isAnticlockwise&&this.rad>4.71?(this.rad=1.57,this.isAnticlockwise=!1,this.centerPos.y=-this.radius):!this.isAnticlockwise&&this.rad<-4.71&&(this.rad=-1.57,this.isAnticlockwise=!0,this.centerPos.y=this.radius),this.node.setPosition(this.centerPos.x+this.radius*Math.cos(this.rad),this.centerPos.y+this.radius*Math.sin(this.rad));var t=this.node.getPosition().sub(this.lastPos).normalize();this.node.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x)),this.lastPos=this.node.getPosition()}},t.prototype.playValueAni=function(){var e=this;this.labelValueProxy(this.node.getComponent(cc.Label),1,100,199,!0),this.scheduleOnce(function(){e.playValueAni()},2)},t.prototype.labelValueProxy=function(e,t,o,n,i){e.string="";var a=new Proxy({value:o},{set:function(t,o,n){return t[o]=n,"value"===o&&(e.string=(i?"+":"")+Math.floor(n)),!0}});cc.tween(a).to(t,{value:n}).start()},t.prototype.playAni=function(){var e,t,o=this,n=r.RandomUtils.getRandomBoolean();t=r.RandomUtils.getRandomInt(120,140),e=n?r.RandomUtils.getRandomInt(-150,50):r.RandomUtils.getRandomInt(50,150),this.node.setPosition(0,0);var i=cc.v2(e/2,t+150),a=cc.v2(e/2,t+120);cc.tween(this.node).bezierBy(.5,i,a,cc.v2(e,t)).bezierBy(.1,i.mul(.1),a.mul(.1),cc.v2(e,0).mul(.1)).bezierBy(.05,i.mul(.05),a.mul(.05),cc.v2(e,0).mul(.05)).call(function(){o.scheduleOnce(function(){o.playAni()},1)}).start()},a([u(cc.Node)],t.prototype,"head",void 0),a([u(cc.Float)],t.prototype,"moveSpeed",void 0),a([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../game/Utils/RandomUtils":"RandomUtils","../game/gameLogic/008_rotatingWeapons/GamingData_008":"GamingData_008"}],TouchEffectNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"9870fgYGm1GmrDT0iActoYZ","TouchEffectNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.effPre=null,t.nodePool=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.node._touchListener.swallowTouches=!1,this.initNodePool()},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.nodePool.clear()},t.prototype.initNodePool=function(){this.nodePool=new cc.NodePool;for(var e=0;e<5;e++)this.nodePool.put(cc.instantiate(this.effPre))},t.prototype.onTouch=function(e){if(this.nodePool.size()>0){var t=this.nodePool.get();t.setParent(this.node),t.setPosition(this.node.convertToNodeSpaceAR(e.getLocation())),this.scheduleOnce(this.onRecovery.bind(this,t),.9)}},t.prototype.onRecovery=function(e){this.nodePool.put(e)},a([l(cc.Prefab)],t.prototype,"effPre",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],TouchEffect_008:[function(e,t,o){"use strict";cc._RF.push(t,"6eb88E7pXdM9ZTDXmBmJHRe","TouchEffect_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quan=null,t.ye1=null,t.ye2=null,t}return i(t,e),t.prototype.onEnable=function(){this.quan.opacity=255,cc.tween(this.quan).to(.5,{opacity:0}).start(),this.ye1.resetSystem(),this.ye2.resetSystem()},a([l(cc.Node)],t.prototype,"quan",void 0),a([l(cc.ParticleSystem)],t.prototype,"ye1",void 0),a([l(cc.ParticleSystem)],t.prototype,"ye2",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],TouchNodeUI:[function(e,t,o){"use strict";cc._RF.push(t,"1d947igYl1DfKRr8L/AKW5T","TouchNodeUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchTime=0,t.triggerEventTimeConfig=10,t.callback=null,t}return i(t,e),t.prototype.onLoad=function(){window.ADS_CheckTouchTime_OnInit=this.onInit.bind(this),window.ADS_CheckTouchTime_OnStop=this.onStop.bind(this),this.node.active=!1},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node._touchListener.swallowTouches=!1},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchEnd=function(){this.touchTime+=1,this.touchTime%this.triggerEventTimeConfig==0&&this.callback&&this.callback()},t.prototype.onInit=function(e,t){this.node.active=!0,this.touchTime=0,this.triggerEventTimeConfig=e,this.callback=t},t.prototype.onStop=function(){this.callback=null,this.node.active=!1},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],TrialBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"fbc10K14hdJ4K08m+xwaj7l","TrialBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("./BaseSingleBtn_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onTouchEvent=function(){window.isCanCtrl&&(r.default.getInstance().click(),l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_Trial))},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","./BaseSingleBtn_008":"BaseSingleBtn_008"}],TrialDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"6021dE/NcJPnJqcntONEpAP","TrialDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l,c=e("../../../../mag/AudioMag"),u=e("../../../../mag/GameMag"),p=e("../../../../mag/NodePoolManager"),d=e("../../../../mag/VideoManager"),f=e("../../../000_common/Joystick_common"),h=e("../../Config_008"),_=e("../../Config_Gaming_008"),y=e("../../DelegateManager_008"),g=e("../../EnemyManager_008"),m=e("../../GamingData_008"),v=e("../../LC_008"),b=e("../../LocalDataManager_008"),P=e("../../entities/Enums_008"),S=e("../../player/Player_008"),w=e("../../utils/TrialUtils_008"),R=e("../GamingUI_008"),I=e("../MainUI_008"),D=e("./BaseUIDialog_008"),C=cc._decorator,N=C.ccclass,O=C.property;(function(e){e[e.UnStart=0]="UnStart",e[e.Gaming=1]="Gaming",e[e.Success=2]="Success",e[e.Fail=3]="Fail"})(l||(l={}));var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardItemBar=null,t._trialGenerateDataMap=new Map,t.layerStrFormat="\u7b2c$1\u5c42",t._hiddenAttr=new Map([["shangdi",null],["btn_pause",null],["lbl_time",null],["expBarNode",null],["right_bottom",null]]),t._mapDatas=["lv_008/maps/map_000","lv_008/maps/map_001","lv_008/maps/map_002","lv_008/maps/map_003"],t._curState=l.UnStart,t._curTrailGenerateData=null,t._curTrailTime=0,t._isBreakRecord=!1,t._maxFailCount=3,t._isRepeat=!1,t._preShowUI=[],t._curView=null,t._diaStack=[],t._trialRewardData=[],t}return i(t,e),Object.defineProperty(t.prototype,"curDia",{get:function(){var e=this._diaStack[this._diaStack.length-1];if(!e)return null;var t=this;return new Proxy(e,{get:function(e,t,o){return Reflect.get(e,t,o)},set:function(e,o,n,i){return"active"!==o||n?Reflect.set(e,o,n,i):(t._diaStack.pop(),cc.tween(e).to(.5,{scale:0},{easing:"backIn"}).call(function(){e.active=!1}).start()),!0}})},enumerable:!1,configurable:!0}),t.prototype.getTrailGenerateData=function(e){return r(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(i){switch(i.label){case 0:return 0!==this._trialGenerateDataMap.size?[3,2]:(o=(t=Object).values,[4,u.default.getInstance().getJson(h.default.JsonPath_Trial)]);case 1:o.apply(t,[i.sent()])[0].forEach(function(e){n._trialGenerateDataMap.set(e.layer,e)}),i.label=2;case 2:return[2,this._trialGenerateDataMap.get(e)]}})})},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.actNode.children.forEach(function(e){e.x=0,e.active=!1}),console.log("s \u8df3\u8fc7\u8bd5\u70bc\u5c42"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){switch(e.keyCode){case cc.macro.KEY.s:"gaming"===t._curView.name&&(t._curState=l.Success)}},this)},t.prototype.lateUpdate=function(e){var t=b.default.getInstance().playerData;switch(this._curState){case l.UnStart:break;case l.Gaming:this.updateTrialGUI();var o=this._curTrailGenerateData.enemy.reduce(function(e,t){return e+t[1]},0);m.default.currKillBossCount+m.default.currKillEnemyCount>=o&&(this._curState=l.Success),this._curTrailTime+=e;var n=this._curView.getChildByName("top").getChildByName("time").getComponent(cc.Label);if(this._curTrailGenerateData.time<=0)n.node.active=!1;else if(!m.default.isGamePause)if(this._curTrailTime>=this._curTrailGenerateData.time)this._curState=l.Fail,n.string="00:00";else{var i=this._curTrailGenerateData.time-this._curTrailTime;n.string=Math.floor(i/60)+":"+(Math.floor(i%60)<10?"0"+Math.floor(i%60):Math.floor(i%60))}break;case l.Success:this._curState=l.UnStart;for(var a=this._curTrailGenerateData.repeatReward,r=function(e){var t=a[e],o=s._trialRewardData.find(function(e){return e.itemId===t[0]});o?o.count+=t[1]:s._trialRewardData.push({itemId:t[0],count:t[1]})},s=this,c=0;c<a.length;c++)r(c);t.failTrialCount=0,b.default.getInstance().onSaveData(),this.enterScene("transition");break;case l.Fail:this._curState=l.UnStart;var u=this._curTrailGenerateData.failReward,p=function(e){var o=u[e],n=d._trialRewardData.find(function(e){return e.itemId===o[0]}),i=o[1]>>t.failTrialCount;if((i=i>0?i:0)<=0)return"continue";n?n.count+=i:d._trialRewardData.push({itemId:o[0],count:i})},d=this;for(c=0;c<u.length;c++)p(c);t.failTrialCount++,this.exitTrial()}},t.prototype.onInit=function(e,t){var o=this;this.actNode.scale=1,this.onInitBg(e),this.node.getComponentsInChildren(cc.Widget).forEach(function(e){e.updateAlignment()}),this._isBreakRecord=!1,this.enterScene("main"),!t&&b.default.getInstance().playerData.isUnlockTrial||this._preShowUI.push(function(){return new Promise(function(e){return r(o,void 0,void 0,function(){var t=this;return s(this,function(o){switch(o.label){case 0:return[4,this.showDia("guide",function(){var o=t._diaStack[t._diaStack.length-1],n=t.curDia.getChildByName("bg"),i=t.curDia.getChildByName("finger"),a=n.getComponent(cc.Mask)._graphics,r=t._curView.getChildByName("centre").getChildByName("start"),s=r.convertToWorldSpaceAR(cc.Vec2.ZERO),l=n.convertToNodeSpaceAR(cc.v2(s.x-(r.anchorX-0)*r.width,s.y-(r.anchorY-0)*r.height));t.scheduleOnce(function(){a.clear(),a.rect(l.x,l.y,r.width,r.height),a.fill(),e()},0);var c=new cc.Rect;c.x=l.x,c.y=l.y,c.width=r.width,c.height=r.height;var u=cc.v2(s.x+(r.anchorX-.5)*r.width,s.y-(r.anchorY-.5)*r.height);i.setPosition(i.parent.convertToNodeSpaceAR(u)),n.getChildByName("bg").on(cc.Node.EventType.TOUCH_END,function(e){var t=n.convertToNodeSpaceAR(e.getLocation());c.contains(t)&&(o.active=!1,r.emit(cc.Node.EventType.TOUCH_END,e))})})];case 1:return o.sent(),[2]}})})})})},t.prototype.onInitEvent=function(){m.default.isTrialMode=!0,y.default.onRefreshNumLingQi.executeDelegates(b.default.getInstance().playerData.item_getCountById(P.ItemType_008.c_lingqi))},t.prototype.onRemoveEvent=function(){this.restoreGUIAttr(),m.default.isTrialMode=!1},t.prototype.enterScene=function(e){return r(this,void 0,void 0,function(){var t,o,n,i,a,u,p,d,f,_,S,R,D,C,N,O,B,A,E,T,x,M,k,F,j,U,G,L,V,K,H=this;return s(this,function(W){switch(W.label){case 0:switch(t=b.default.getInstance().playerData,e){case"main":return[3,1];case"gaming":return[3,7];case"result":return[3,8];case"pause":return[3,10];case"transition":return[3,12];case"store":return[3,14];case"reward":return[3,15]}return[3,17];case 1:return this._curState=l.UnStart,v.default.ins.gameNode.active=!1,v.default.ins.mainUI.active=!0,this.switchView("main"),this._curTrailTime=0,this._isRepeat=!1,o=new Date,n=b.default.getInstance().playerData.lastResetTrialTime,o.setHours(0,0,0,0),o.getTime()>n&&(b.default.getInstance().playerData.lastResetTrialTime=o.getTime(),b.default.getInstance().playerData.curTrialLayer=1,b.default.getInstance().playerData.failTrialCount=0,b.default.getInstance().playerData.passTrialLayer=0,b.default.getInstance().playerData.trialExchangeData=w.default.generateItemData(6).map(function(e){return{i:e.i,c:e.c,w:e.w,soldOut:!1}}),b.default.getInstance().playerData.trialCanReceiveCount=1,b.default.getInstance().onSaveData()),i=b.default.getInstance().playerData.curTrialLayer,[4,this.getTrailGenerateData(i)];case 2:return W.sent()||(i=Math.min.apply(Math,Array.from(this._trialGenerateDataMap.keys())),b.default.getInstance().playerData.curTrialLayer=i),a=this._curView.getChildByName("centre"),u=this._curView.getChildByName("top"),p=this._curView.getChildByName("tower"),d=a.getChildByName("start"),f=u.getChildByName("exit"),_=a.getChildByName("reward"),S=a.getChildByName("store"),R=u.getChildByName("result"),D=p.childrenCount>>1,d.off(cc.Node.EventType.TOUCH_END),f.off(cc.Node.EventType.TOUCH_END),_.off(cc.Node.EventType.TOUCH_END),S.off(cc.Node.EventType.TOUCH_END),R.off(cc.Node.EventType.TOUCH_END),u.active=!1,a.active=!1,p.children.forEach(function(e,t){var o=i-D+t,n=e.getChildByName("open"),a=e.getChildByName("label").getComponent(cc.Label),r=e.getChildByName("step");a.string=H.layerStrFormat.replace("$1",o.toString()),n.active=!1,r.active=1===o,e.opacity=o>0?255:0}),cc.tween(p).to(1,{y:0}).start(),d.stopAllActions(),cc.tween(d).set({scale:1}).to(1.5,{scale:1.2},{easing:function(e){return(e*=2)>1&&(e=2-e),e}}).union().repeatForever().start(),0===p.y?[3,4]:(cc.tween(u).set({opacity:0}).delay(1).to(1,{opacity:255}).start(),cc.tween(d).set({opacity:0}).delay(1).to(1,{opacity:255}).start(),[4,this.delay(2)]);case 3:W.sent(),W.label=4;case 4:return this._preShowUI.length>0?[4,this._preShowUI.shift()()]:[3,6];case 5:return W.sent(),[3,4];case 6:return a.active=!0,u.active=!0,d.once(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),a.active=!1,u.active=!1,cc.tween(p).to(1,{scale:4},{easing:function(e){return e<.5&&(p.children[D].getChildByName("open").active=!0),cc.easing.quadOut(e)}}).call(function(){H.enterScene("gaming"),p.scale=1,a.active=!0,u.active=!0}).start()},this),f.once(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),H.restoreGUIAttr(),H.onHide(function(){v.default.ins.mainUI.getComponent(I.default).unlockXiuShen()})},this),_.on(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),H.enterScene("reward")},this),S.on(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),H.enterScene("store")},this),R.on(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),H.enterScene("result")},this),[3,17];case 7:return this.onStartGame(!0),cc.director.once(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,function(){H.switchView("gaming"),H._curView.getChildByName("centre");var e=H._curView.getChildByName("top"),t=(H._curView.getChildByName("bottom"),e.getChildByName("exit")),o=e.getChildByName("title");t.off(cc.Node.EventType.TOUCH_END),t.on(cc.Node.EventType.TOUCH_END,H.pauseTrial,H),o.getComponent(cc.Label).string=H.layerStrFormat.replace("$1",b.default.getInstance().playerData.curTrialLayer.toString())}),[3,17];case 8:return[4,this.showDia("result",function(){var e,o;C=H.curDia.getChildByName("centre"),B=C.getChildByName("items"),A=C.getChildByName("stage"),E=C.getChildByName("tips");var n=C.getChildByName("btns");N=n.getChildByName("reward"),O=n.getChildByName("double"),T=H.curDia.getChildByName("exit"),null===(e=B.getComponent(cc.Layout))||void 0===e||e.updateLayout(),A.getComponent(cc.Label).string=b.default.getInstance().playerData.curTrialLayer+"\u5c42",E.active=H._isBreakRecord,B.children.forEach(function(e){e.destroy()}),[{itemId:P.ItemType_008.c_zhanling,count:null!==(o=h.TrialLevel2ZhangLing.get(t.passTrialLayer))&&void 0!==o?o:0}].forEach(function(e){return r(H,void 0,void 0,function(){var t;return s(this,function(o){switch(o.label){case 0:return e.count<=0?[2]:[4,window.questUtil_008.getRewardItem(e.itemId,e.count)];case 1:return(t=o.sent())?(t.parent=B,[2]):[2]}})})}),O.active=!0,N.active=!0,T.active=!0,N.off(cc.Node.EventType.TOUCH_END),O.off(cc.Node.EventType.TOUCH_END),T.off(cc.Node.EventType.TOUCH_END);var i=N.getChildByName("layout"),a=i.getChildByName("label").getComponent(cc.Label),l=i.getChildByName("video");a.string=t.trialCanReceiveCount>0?"\u9886\u53d6\u5956\u52b1\uff1a"+t.trialCanReceiveCount:"\u9886\u53d6\u5956\u52b1",l.active=t.trialCanReceiveCount<=0,O.active=t.trialCanReceiveCount>0})];case 9:return W.sent(),N.once(cc.Node.EventType.TOUCH_END,this.getReward,this),O.once(cc.Node.EventType.TOUCH_END,this.getDoubleReward,this),T.once(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),"main"!==H._curView.name?(v.default.ins.onStopGame(),H.enterScene("main")):H.curDia&&(H.curDia.active=!1)}),[3,17];case 10:return m.default.isGamePause=!0,[4,this.showDia("pause")];case 11:return W.sent(),x=this.curDia.getChildByName("continue"),M=this.curDia.getChildByName("exit"),x.off(cc.Node.EventType.TOUCH_END),x.on(cc.Node.EventType.TOUCH_END,this.continueTrial,this),M.off(cc.Node.EventType.TOUCH_END),M.on(cc.Node.EventType.TOUCH_END,this.exitTrial,this),[3,17];case 12:return m.default.isGamePause=!0,k=10,[4,this.showDia("transition",function(){t.curTrialLayer,H.challengeNextLayer();var e=H.curDia.getChildByName("centre"),o=e.getChildByName("exit");F=e.getChildByName("next");var n=e.getChildByName("max"),i=e.getChildByName("cur"),a=e.getChildByName("items"),l=n.getChildByName("tips"),u=n.getChildByName("stage"),p=i.getChildByName("stage");j=F.getChildByName("time").getChildByName("time_out"),o.off(cc.Node.EventType.TOUCH_END),F.off(cc.Node.EventType.TOUCH_END),U=function(){H.curDia.active=!1,F.stopAllActions(),m.default.isGamePause=!1,g.default.ins.onStopGame(),v.default.ins.gameManager.onStopGame(),c.default.getInstance().click(),H._curView.getChildByName("top").getChildByName("title").getComponent(cc.Label).string=H.layerStrFormat.replace("$1",b.default.getInstance().playerData.curTrialLayer.toString()),H.onStartGame()},a.removeAllChildren(),H._trialRewardData.forEach(function(e){return r(H,void 0,void 0,function(){var t;return s(this,function(o){switch(o.label){case 0:return[4,window.questUtil_008.getRewardItem(e.itemId,e.count)];case 1:return(t=o.sent())?(t.parent=a,[2]):[2]}})})}),u.getComponent(cc.Label).string=b.default.getInstance().playerData.maxTrialLayer+"\u5c42",l.active=H._isBreakRecord,p.getComponent(cc.Label).string=b.default.getInstance().playerData.passTrialLayer+"\u5c42",o.on(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),F.stopAllActions(),v.default.ins.onStopGame(),H.enterScene("main"),H.trySettleReward()},H),F.on(cc.Node.EventType.TOUCH_END,U,H),F.stopAllActions()})];case 13:return W.sent(),cc.tween(F).set({scale:1}).call(function(){k--,j.getComponent(cc.Label).string=k.toString(),cc.tween(j).set({scale:1,opacity:255}).to(1,{scale:1.5,opacity:0},{easing:cc.easing.quadIn}).start()}).to(1,{scale:1.2},{easing:function(e){return e=cc.easing.quadInOut(e),(e*=2)>1&&(e=2-e),e*e}}).union().repeat(k).call(function(){U()}).start(),[3,17];case 14:return this.showDia("store",function(){var e=H.curDia.getChildByName("content"),o=e.getChildByName("items"),n=e.getChildByName("zhanling");L=H.curDia.getChildByName("exit"),G=n.getChildByName("lbl_count").getComponent(cc.Label),o.children.forEach(function(e,o){return r(H,void 0,void 0,function(){var n,i,a,r,l,u,p;return s(this,function(){return(n=t.trialExchangeData[o])?(i=e.getChildByName("icon"),a=e.getChildByName("name").getComponent(cc.Label),r=e.getChildByName("cost").getComponent(cc.Label),l=e.getChildByName("sold_out"),u=e.getChildByName("bg"),p=n.c*w.default.itemPrice[n.i],l.active=n.soldOut,a.string=window.questUtil_008.getItemName(n.i),r.string=p.toString(),i.removeAllChildren(),window.questUtil_008.getRewardItem(n.i,n.c).then(function(e){e.parent=i}),u.off(cc.Node.EventType.TOUCH_END),n.soldOut||u.on(cc.Node.EventType.TOUCH_END,function(){if(t.item_getCountById(P.ItemType_008.c_zhanling)>=p){c.default.getInstance().click(),t.item_addCountById(P.ItemType_008.c_zhanling,-p),t.item_addCountById(n.i,n.c),n.soldOut=!0,b.default.getInstance().onSaveData();var e=l.getChildByName("out");l.active=!0,cc.tween(e).set({scale:2,opacity:128}).to(.5,{scale:1,opacity:255},{easing:cc.easing.expoIn}).start()}else y.default.onShowUIFloatText.executeDelegates("\u6218\u4ee4\u4e0d\u8db3")}),[2]):(e.active=!1,[2])})})}),L.off(cc.Node.EventType.TOUCH_END)}),cc.tween(G.node).to(.5,{z:t.item_getCountById(P.ItemType_008.c_zhanling)},{easing:function(e){return G.string=""+Math.floor(G.node.z),e}}).start(),L.once(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),H.curDia&&(H.curDia.active=!1)}),[3,17];case 15:return y.default.onHideRedPoint.executeDelegates(P.RedPointIndex_008.TrialLayer),[4,this.showDia("reward",function(){V=H.curDia.getChildByName("exit");var e=H.curDia.getChildByName("content"),o=e.getChildByName("mask"),n=o.getChildByName("layout");V.off(cc.Node.EventType.TOUCH_END),K=function(){n.children.forEach(function(t){var o=t.convertToWorldSpaceAR(cc.Vec2.ZERO),n=e.parent.convertToNodeSpaceAR(o);t.opacity=e.getBoundingBox().contains(n)?255:0})},n.childrenCount>H._trialGenerateDataMap.size&&n.children.slice(H._trialGenerateDataMap.size).forEach(function(e){e.destroy()});var i=0;H._trialGenerateDataMap.forEach(function(e){var o=e.passReward;if(0!==o.length){var a=n.children[i++]||cc.instantiate(H.rewardItemBar),r=a.getChildByName("bg"),s=a.getChildByName("icon"),l=a.getChildByName("info"),u=a.getChildByName("go"),p=a.getChildByName("get"),d=a.getChildByName("got"),f=Math.floor(Math.random()*r.childrenCount);a.parent!==n&&(a.parent=n),r.children.forEach(function(e,t){e.active=t===f}),s.removeAllChildren(),window.questUtil_008.getRewardItem(o[0][0],o[0][1]).then(function(e){e.parent=s}),l.getComponent(cc.Label).string="\u901a\u5173\u7b2c"+e.layer+"\u5c42";var _=t.passTrialLayer>=e.layer,g=-1!==t.trialRewardRecord.indexOf(e.layer);u.active=!g&&!_,p.active=_&&!g,d.active=g&&_,p.getComponent(cc.Button).interactable=_,u.off(cc.Node.EventType.TOUCH_END),p.off(cc.Node.EventType.TOUCH_END),u.on(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),H.enterScene("gaming")}),_&&p.on(cc.Node.EventType.TOUCH_END,function(){if(_){c.default.getInstance().click(),t.trialRewardRecord.push(e.layer);var n=o.map(function(e){return{itemId:e[0],count:e[1]}});y.default.onShowDia.executeDelegates(h.default.UIPath_Dia_Rewards,n),n.forEach(function(e){t.item_addCountById(e.itemId,e.count)}),b.default.getInstance().onSaveData(),p.active=!1,d.active=!0;var i=d.getChildByName("bg"),a=d.children.filter(function(e){return e!==i});i.active=!0;for(var r=0,s=a;r<s.length;r++){var l=s[r];cc.tween(l).set({scale:2,opacity:128}).to(.5,{scale:1,opacity:255},{easing:cc.easing.expoIn}).start()}}else y.default.onShowUIFloatText.executeDelegates("\u672a\u901a\u5173")},H)}}),o.on("scrolling",K),n.getComponent(cc.Layout).updateLayout();var a=n.children.findIndex(function(e){return e.getChildByName("get").active||e.getChildByName("go").active});-1!=a&&(n.y=n.children.slice(0,a).reduce(function(e,t){return e+t.height+n.getComponent(cc.Layout).spacingY},0))})];case 16:return W.sent(),K(),V.once(cc.Node.EventType.TOUCH_END,function(){c.default.getInstance().click(),H.curDia&&(H.curDia.active=!1)}),[3,17];case 17:return[2]}})})},t.prototype.switchView=function(e){this.actNode.children.forEach(function(e){e.active=!1}),this._curView=this.actNode.getChildByName(e),this._curView.active=!0,this._diaStack.forEach(function(e){e.active=!1}),this._diaStack=[]},t.prototype.showDia=function(e,t){var o=this;return void 0===t&&(t=null),new Promise(function(n){var i=o.actNode.getChildByName(e);-1===o._diaStack.indexOf(i)?o._diaStack.push(i):(o._diaStack.splice(o._diaStack.indexOf(i),1),o._diaStack.push(i)),i.active=!0,i.scale=1,i.setSiblingIndex(o._diaStack.length),t&&t();var a=i.getChildByName("bg"),r=i.children.filter(function(e){return e!==a});a.active=!0;for(var s=function(e){var t=r[e];t.scale=0;var o=e===r.length-1;cc.tween(t).to(.5,{scale:1},{easing:"backOut"}).call(function(){return o&&n()}).start()},l=0;l<r.length;l++)s(l)})},t.prototype.onStartGame=function(e){var t;return void 0===e&&(e=!1),r(this,void 0,void 0,function(){var o,n,i,a,r,u,d;return s(this,function(s){switch(s.label){case 0:return this._curTrailTime=0,m.default.currKillEnemyCount=0,m.default.currKillBossCount=0,null===(t=v.default.ins.gameManager.playerNode)||void 0===t||t.getComponent(S.default).onStopGame(),[4,this.delay(0)];case 1:return s.sent(),(o=[]).push({key:h.default.Key_DropItem,prePath:h.default.Path_DropItem,count:50}),o.push({key:h.default.Key_Pot,prePath:h.default.Path_Pot,count:_.Config_Gaming_008.Pot_CountLimit}),o.push({key:h.default.Key_Box,prePath:h.default.Path_Box,count:1}),h.DropItemConfigMap.forEach(function(e){o.push({key:e,prePath:e,count:1})}),o.push({key:h.default.Key_FloatText,prePath:h.default.Path_FloatText,count:20}),o.push({key:h.default.Key_HpBar,prePath:h.default.Path_HpBar,count:1}),o.push({key:h.default.Key_BossHpBar,prePath:h.default.Path_BossHpBar,count:1}),o.push({key:h.default.Key_EF_Spark,prePath:h.default.Path_EF_Spark,count:1}),o.push({key:h.default.Key_EF_NuclearBomb,prePath:h.default.Path_EF_NuclearBomb,count:1}),o.push({key:h.default.Key_EF_NuclearBomb_Z,prePath:h.default.Path_EF_NuclearBomb_Z,count:15}),o.push({key:h.default.Key_FlyingKnife,prePath:h.default.Path_FlyingKnife,count:3}),o.push({key:h.default.Key_EF_PickUpWeapon,prePath:h.default.Path_EF_PickUpWeapon,count:9}),o.push({key:h.default.Key_EF_RunRoute,prePath:h.default.Path_EF_RunRoute,count:1}),o.push({key:h.default.Key_EF_EnemyDia,prePath:h.default.Path_EF_EnemyDia,count:5}),o.push({key:h.default.Key_EF_BossInitPos,prePath:h.default.Path_EF_BossInitPos,count:1}),window.waitingStartFunc&&window.waitingStartFunc("\u51c6\u5907\u8fdb\u5165\u8bd5\u70bc...",!0),[4,this.onInitGamingUI()];case 2:return s.sent(),[4,p.default.getInstance().onInitNodePoolArr(o,window.waitingFunc)];case 3:return s.sent(),n=b.default.getInstance().playerData.curTrialLayer,[4,this.getTrailGenerateData(n)];case 4:return i=s.sent(),a=i.enemy.map(function(e){return{time:0,targetId:e[0],enemyLv:i.enemyLv,isGroup:!!e[2],generateCount:e[1],generateTime:i.generateTime}}),[4,v.default.ins.gameManager.onLoadMap(this._mapDatas[Math.floor(i.mapType)%this._mapDatas.length])];case 5:return s.sent(),this._curTrailGenerateData=i,(d=g.default.ins).onInitByData.apply(d,a),e&&cc.director.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH),this.scheduleOnce(this.modifedGUIAttr),window.waitingEndFunc&&window.waitingEndFunc(),!cc.sys.isNative&&cc.sys.isBrowser&&(cc.debug.setDisplayStats(!1),cc.debug.setDisplayStats(!0)),m.default.onInitData(b.default.getInstance().playerData),v.default.ins.mainUI.active=!1,v.default.ins.gameNode.active=!0,v.default.ins.gamingUI.active=!0,r=v.default.ins.gameManager,u=cc.winSize.height/1280,r.gameCamera.orthoSize=h.default.CameraOrthoSize*u,m.default.cameraHalfWidth=cc.winSize.width*r.gameCamera.orthoSize/cc.winSize.height,m.default.cameraHalfHeight=r.gameCamera.orthoSize,r.playerNode.getComponent(S.default).onInit(v.default.ins.joystick),c.default.getInstance().playBGM("008/008_bgm_003"),this.updateTrialGUI(),this._curState=l.Gaming,this.scheduleOnce(function(){v.default.ins.gamingUI.getComponent(R.default).guide.active=m.default.isGamePause}),[2]}})})},t.prototype.onInitGamingUI=function(){return r(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(e){null===v.default.ins.gamingUI?u.default.getInstance().loadPrefab(h.default.UIPath_GamingUI,function(t){null!==t&&(v.default.ins.gamingUI=cc.instantiate(t),v.default.ins.gamingUI.setParent(v.default.ins.node.getChildByName("uiNode")),v.default.ins.gamingUI.active=!1,v.default.ins.gamingUI.setSiblingIndex(0),v.default.ins.joystick=v.default.ins.gamingUI.getChildByName("joystick").getComponent(f.default)),e(null)}):e(null)})]})})},t.prototype.modifedGUIAttr=function(){var e=this;v.default.ins.gamingUI.children.forEach(function(t){e._hiddenAttr.has(t.name)&&(e._hiddenAttr.set(t.name,t.active),t.active=!1)});var t=m.default.func_onShowResultView;m.default.func_onShowResultView=function(){m.default.func_onShowResultView=t,e._curState=l.Fail}},t.prototype.challengeNextLayer=function(){this._isRepeat=!1;var e=b.default.getInstance().playerData,t=e.curTrialLayer,o=Math.max.apply(Math,Array.from(this._trialGenerateDataMap.keys())),n=Math.min(t+1,o),i=this.actNode.getChildByName("main").getChildByName("tower");i.y=Math.min(i.y+493>>1,493),e.passTrialLayer=Math.max(e.passTrialLayer,t),e.curTrialLayer=n,e.passTrialLayer>e.maxTrialLayer&&(e.maxTrialLayer=e.passTrialLayer,this._isBreakRecord=!0,y.default.onShowRedPoint.executeDelegates(P.RedPointIndex_008.TrialLayer)),b.default.getInstance().onSaveData()},t.prototype.restoreGUIAttr=function(){var e,t=this;null===(e=v.default.ins.gamingUI)||void 0===e||e.children.forEach(function(e){t._hiddenAttr.has(e.name)&&null!==t._hiddenAttr.get(e.name)&&(e.active=t._hiddenAttr.get(e.name))})},t.prototype.updateTrialGUI=function(){var e=this._curView.getChildByName("top"),t=e.getChildByName("title"),o=e.getChildByName("progress"),n=o.getChildByName("bar"),i=o.getChildByName("tag"),a=n.x-n.width/2,r=n.x+n.width/2,s=n.getComponent(cc.Sprite);s.fillRange=(m.default.currKillBossCount+m.default.currKillEnemyCount)/this._curTrailGenerateData.enemy.reduce(function(e,t){return e+t[1]},0),i.x=a+s.fillRange*(r-a),t.getComponent(cc.Label).string=this.layerStrFormat.replace("$1",b.default.getInstance().playerData.curTrialLayer.toString())},t.prototype.getReward=function(){var e;return r(this,void 0,void 0,function(){var t,o=this;return s(this,function(n){switch(n.label){case 0:return"main"!==this._curView.name?(v.default.ins.onStopGame(),this.enterScene("main")):this.curDia.active=!1,c.default.getInstance().click(),(t=b.default.getInstance().playerData).trialCanReceiveCount<=0?[4,new Promise(function(e){d.default.getInstance().showVideo(e)})]:[3,2];case 1:return n.sent(),[3,3];case 2:t.trialCanReceiveCount--,n.label=3;case 3:return[{itemId:P.ItemType_008.c_zhanling,count:null!==(e=h.TrialLevel2ZhangLing.get(t.passTrialLayer))&&void 0!==e?e:0}].forEach(function(e){if(!(e.count<=0)){var n=t.item_addCountById(e.itemId,e.count);o.updateItemValue(e.itemId,n)}}),b.default.getInstance().onSaveData(),[2]}})})},t.prototype.getDoubleReward=function(){var e,t=this;"main"!==this._curView.name?(v.default.ins.onStopGame(),this.enterScene("main")):this.curDia.active=!1,c.default.getInstance().click();var o=b.default.getInstance().playerData,n=[{itemId:P.ItemType_008.c_zhanling,count:null!==(e=h.TrialLevel2ZhangLing.get(o.passTrialLayer))&&void 0!==e?e:0}];d.default.getInstance().showVideo(function(){n.forEach(function(e){if(!(e.count<=0)){var n=o.item_addCountById(e.itemId,2*e.count);t.updateItemValue(e.itemId,n)}}),b.default.getInstance().onSaveData()})},t.prototype.updateItemValue=function(e,t){return r(this,void 0,void 0,function(){var o,n;return s(this,function(i){switch(i.label){case 0:switch(e){case P.ItemType_008.c_zhanling:return[3,1];case P.ItemType_008.c_lingqi:return[3,4]}return[3,7];case 1:return[4,window.questUtil_008.getRewardItemSf(e)];case 2:return o=i.sent(),[4,window.floatItemsUtils_008.playCollectItemAnim(o,this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.node.convertToWorldSpaceAR(cc.v2(131,576)),cc.misc.clampf(t/10,10,50))];case 3:return i.sent(),[3,7];case 4:return[4,window.questUtil_008.getRewardItemSf(e)];case 5:return n=i.sent(),[4,window.floatItemsUtils_008.playCollectItemAnim(n,this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.node.convertToWorldSpaceAR(cc.v2(0,576)),cc.misc.clampf(t/10,10,50))];case 6:return i.sent(),[3,7];case 7:return b.default.getInstance().onSaveData(),[2]}})})},t.prototype.trySettleReward=function(){var e=this;if(!(this._trialRewardData.length<=0)){var t=JSON.parse(JSON.stringify(this._trialRewardData));this._trialRewardData=[],this._preShowUI.push(function(){return new Promise(function(o){y.default.onShowDia.executeDelegates(h.default.UIPath_Dia_Rewards,t,function(){o(),t.forEach(function(t){e.updateItemValue(t.itemId,t.count)})})})}),t.forEach(function(e){b.default.getInstance().playerData.item_addCountById(e.itemId,e.count)})}},t.prototype.pauseTrial=function(){return r(this,void 0,void 0,function(){return s(this,function(){return c.default.getInstance().click(),this.enterScene("pause"),[2]})})},t.prototype.continueTrial=function(){return r(this,void 0,void 0,function(){var e,t;return s(this,function(){return c.default.getInstance().click(),e=this.curDia.getChildByName("continue"),t=this.curDia.getChildByName("exit"),e.off(cc.Node.EventType.TOUCH_END),t.off(cc.Node.EventType.TOUCH_END),this.curDia.active=!1,m.default.isGamePause=!1,[2]})})},t.prototype.exitTrial=function(){return r(this,void 0,void 0,function(){return s(this,function(){return c.default.getInstance().click(),v.default.ins.onStopGame(),this.enterScene("main"),this.trySettleReward(),[2]})})},t.prototype.delay=function(e){var t=this;return void 0===e&&(e=0),new Promise(function(o){t.scheduleOnce(o,e)})},a([O(cc.Prefab)],t.prototype,"rewardItemBar",void 0),a([N],t)}(D.default);o.default=B,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/NodePoolManager":"NodePoolManager","../../../../mag/VideoManager":"VideoManager","../../../000_common/Joystick_common":"Joystick_common","../../Config_008":"Config_008","../../Config_Gaming_008":"Config_Gaming_008","../../DelegateManager_008":"DelegateManager_008","../../EnemyManager_008":"EnemyManager_008","../../GamingData_008":"GamingData_008","../../LC_008":"LC_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../player/Player_008":"Player_008","../../utils/TrialUtils_008":"TrialUtils_008","../GamingUI_008":"GamingUI_008","../MainUI_008":"MainUI_008","./BaseUIDialog_008":"BaseUIDialog_008"}],TrialUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"00725bjCIRHoIflW+i9sz2n","TrialUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.generateItemData=function(e){for(var t=[],o=0;o<e;o++)t.push(this.randomItem(t.map(function(e){return e.i})));return t},e.randomItem=function(e){for(var t=this.itemPool.concat(),o=this.itemPool.filter(function(t){return!e.includes(t.i)}),n=o.length>0?o:t,i=n.reduce(function(e,t){return e+t.w},0),a=Math.random()*i,r=0,s=0;s<n.length;s++)if(a<=(r+=n[s].w))return JSON.parse(JSON.stringify(n[s]))},e.itemPrice=new Proxy({15201:100,15202:100,15203:100,15204:100,10001:5,10003:20/300},{get:function(e,t){var o;return null!==(o=e[t])&&void 0!==o?o:0},set:function(){return!1}}),e.itemPool=Object.freeze([{i:10001,c:20,w:100},{i:10003,c:3e3,w:100},{i:15201,c:3,w:100},{i:15202,c:3,w:100},{i:15203,c:3,w:100},{i:15204,c:3,w:100}]),e}();o.default=n,cc._RF.pop()},{}],TweenUtils:[function(e,t,o){"use strict";cc._RF.push(t,"a9e05/X+ypFhbs73iO12fC1","TweenUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.labelValueProxy=function(e,t,o,n,i,a){var r=new Proxy({value:o},{set:function(t,o,n){return(null==e?void 0:e.node)&&cc.isValid(null==e?void 0:e.node)?(t[o]=n,"value"===o&&(e.string=null!=i?i:"",e.string+=Math.floor(n),a&&(e.string+=a)),!0):(cc.Tween.stopAllByTarget(r),!0)}});cc.tween(r).to(t,{value:n}).start()},e}();o.default=n,cc._RF.pop()},{}],UIFloatTextMag_008:[function(e,t,o){"use strict";cc._RF.push(t,"e515daLdXxNlLcE53y5b7P+","UIFloatTextMag_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../DelegateManager_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pre=null,t.energyPre=null,t.nodePool=null,t}return i(t,e),t.prototype.onLoad=function(){this.onInitNodePool()},t.prototype.onEnable=function(){r.default.onShowUIFloatText.addDelegate(this.showFloatText,this),r.default.onShowUIFloatEnergyReduce.addDelegate(this.onShowFloatEnergyReduce,this)},t.prototype.onDisable=function(){r.default.onShowUIFloatText.removeDelegate(this.showFloatText,this),r.default.onShowUIFloatEnergyReduce.removeDelegate(this.onShowFloatEnergyReduce,this)},t.prototype.onDestroy=function(){this.onClearNodePool()},t.prototype.showFloatText=function(e,t){var o=this,n=this.getFloatText();n.setParent(this.node),n.setPosition(0,200),n.getComponent(cc.Label).string=e,n.scale=0,cc.tween(n).to(.3,{scale:1},{easing:"quadOut"}).start(),cc.tween(n).by(2,{y:400}).call(function(){t&&t(),o.recoveryTextNode(n)}).start()},t.prototype.onInitNodePool=function(){this.nodePool=new cc.NodePool;for(var e=0;e<5;e++)this.nodePool.put(cc.instantiate(this.pre))},t.prototype.getFloatText=function(){return this.nodePool.size()>0?this.nodePool.get():cc.instantiate(this.pre)},t.prototype.recoveryTextNode=function(e){this.nodePool.put(e)},t.prototype.onClearNodePool=function(){this.nodePool.clear(),this.nodePool=null},t.prototype.onShowFloatEnergyReduce=function(e,t){var o=cc.instantiate(this.energyPre);o.getComponentInChildren(cc.Label).string="-"+e,o.setParent(this.node),t instanceof cc.Node&&(t=t.convertToWorldSpaceAR(cc.v3(0,0))),o.setPosition(this.node.convertToNodeSpaceAR(t)),cc.tween(o).by(1,{y:50}).call(function(){o.destroy()}).start()},a([c(cc.Prefab)],t.prototype,"pre",void 0),a([c(cc.Prefab)],t.prototype,"energyPre",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../DelegateManager_008":"DelegateManager_008"}],UIMag:[function(e,t,o){"use strict";cc._RF.push(t,"cc3bdjm1ItE4aMlkGjUnJEH","UIMag");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIType=void 0;var r=e("../../ui/BaseUI"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_ui=new Map,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this,window.UIMag=o.ins},t.prototype.start=function(){for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].getComponent(r.default)&&(this.m_ui.set(this.node.children[e].name,this.node.children[e].getComponent(r.default)),this.node.children[e].active=this.node.children[e].name==u.PreStartUI)},t.prototype.ShowUI=function(e,t,o){void 0===t&&(t=!0),this.m_ui.has(e)?(this.m_ui.get(e).onShow(t,o),this.m_ui.get(e).node.setSiblingIndex(999)):console.log("\u6ca1\u6709\u8fd9\u4e2aUI ==> "+e)},t.prototype.HideUI=function(e,t,o){void 0===t&&(t=!0),this.m_ui.has(e)?this.m_ui.get(e).onHide(t,o):console.log("\u6ca1\u6709\u8fd9\u4e2aUI ==> "+e)},t.prototype.HideAllUI=function(){this.m_ui.forEach(function(e){e.node.active=!1})},t.prototype.showGameUI=function(){this.HideAllUI(),this.ShowUI(u.GameUI,!0,null)},t.ins=null,o=a([l],t)}(cc.Component));o.default=c;var u=function(){function e(){}return e.PreStartUI="PreStartUI",e.StartUI="StartUI",e.GameUI="GameUI",e.SettingUI="SettingUI",e.ExitUI="ExitUI",e.FailUI="FailUI",e.SuccUI="SuccUI",e}();o.UIType=u,cc._RF.pop()},{"../../ui/BaseUI":"BaseUI"}],UnlockNewModuleDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"6605aiUwMRI2r1vZ5IHoQ6b","UnlockNewModuleDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../Config_008"),c=e("./BaseUIDialog_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=u.inspector,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.iconDi=null,t.lbl_desc=null,t.func_comp=null,t}return i(t,e),t.prototype.onInit=function(e,t,o){this.onInitBg(e),this.idArr=t,this.index=0,this.func_comp=o,this.onRefreshUI()},t.prototype.onInitEvent=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this.onNext,this)},t.prototype.onRemoveEvent=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this.onNext,this)},t.prototype.onRefreshUI=function(){var e=this;r.default.getInstance().playSound(l.default.SEF_UnlockNewModule);var t=l.UnlockModuleDataMap.get(this.idArr[this.index]);s.default.getInstance().getSpriteFrame(t.iconPath).then(function(t){e.icon.spriteFrame=t}),this.lbl_desc.string=t.desc,cc.Tween.stopAllByTarget(this.icon.node),this.iconDi.scale=0,cc.tween(this.iconDi).to(.3,{scale:1},{easing:"backOut"}).start()},t.prototype.onNext=function(){this.index+=1,this.index<this.idArr.length?this.onRefreshUI():(r.default.getInstance().click(),this.onClose())},t.prototype.onClose=function(){var e=this;this.onHide(function(){e.func_comp&&e.func_comp()})},a([d(cc.Sprite)],t.prototype,"icon",void 0),a([d(cc.Node)],t.prototype,"iconDi",void 0),a([d(cc.Label)],t.prototype,"lbl_desc",void 0),a([p,f("packages://autoproperty//inspector.js")],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../Config_008":"Config_008","./BaseUIDialog_008":"BaseUIDialog_008"}],UnlockNewSkillDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"ae18cT+JyBC9qWWUKEBPHes","UnlockNewSkillDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("./BaseUIDialog_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=u.inspector,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.lbl_desc=null,t.btn_close=null,t.func_close=null,t}return i(t,e),t.prototype.onInit=function(e,t,o,n){void 0===n&&(n=null),this.onInitBg(e),this.icon.spriteFrame=t,this.lbl_desc.string=o,this.func_close=n,r.default.getInstance().playSound(s.default.SEF_BOX_OpenGamingBOX)},t.prototype.onInitEvent=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onTouchClose,this)},t.prototype.onRemoveEvent=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onTouchClose,this)},t.prototype.onTouchClose=function(){var e=this;r.default.getInstance().click(),this.onHide(function(){e.func_close&&e.func_close(),l.default.onRemoveDia.executeDelegates(s.default.UIPath_Dia_unlockNewSkill)})},a([d(cc.Sprite)],t.prototype,"icon",void 0),a([d(cc.Label)],t.prototype,"lbl_desc",void 0),a([d(cc.Node)],t.prototype,"btn_close",void 0),a([p,f("packages://autoproperty//inspector.js")],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","./BaseUIDialog_008":"BaseUIDialog_008"}],UpdateNodeAngle_008:[function(e,t,o){"use strict";cc._RF.push(t,"957a34WwENGv6xv10UUarkp","UpdateNodeAngle_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastPos=cc.v2(0,0),t}return i(t,e),t.prototype.onEnable=function(){this.lastPos=this.node.getPosition()},t.prototype.update=function(){var e=this.node.getPosition(),t=e.sub(this.lastPos).normalize();this.node.angle=cc.misc.radiansToDegrees(Math.atan2(t.y,t.x))+90,this.lastPos.x=e.x,this.lastPos.y=e.y},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],Vector2:[function(e,t,o){"use strict";cc._RF.push(t,"90ad7azfn9C65cNxlB898Mp","Vector2"),Object.defineProperty(o,"__esModule",{value:!0}),o.Vector2=void 0;var n=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.moins=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.moinsSelf=function(){return new e(-this.x,-this.y)},e.prototype.plus=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.mul=function(e){return this.x*e.x+this.y*e.y},e.prototype.mul_k=function(t){return new e(this.x*t,this.y*t)},e.prototype.div_k=function(t){var o=1/t;return new e(this.x*o,this.y*o)},e.absSq=function(e){return e.mul(e)},e.abs=function(e){return Math.sqrt(e.mul(e))},e.det=function(e,t){return e.x*t.y-e.y*t.x},e.normalize=function(t){return t.div_k(e.abs(t))},e.leftOf=function(t,o,n){return e.det(t.moins(n),o.moins(t))},e.distSqPointLineSegment=function(t,o,n){var i=n.moins(t).mul(o.moins(t))/e.absSq(o.moins(t));return i<0?e.absSq(n.moins(t)):i>1?e.absSq(n.moins(o)):e.absSq(n.moins(t.plus(o.moins(t).mul_k(i))))},e.Zero=new e(0,0),e}();o.Vector2=n,cc._RF.pop()},{}],VideoBoxDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"9c484gUNHhLML5VRNRh2oZr","VideoBoxDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/VideoManager"),l=e("../../Config_008"),c=e("../../DelegateManager_008"),u=e("../../LocalDataManager_008"),p=e("../../entities/Enums_008"),d=e("../../quests/QuestsSys_008"),f=e("./BaseUIDialog_008"),h=cc._decorator,_=h.ccclass,y=h.property,g=h.inspector,m="isGuide_FastClickVideoBox",v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.box=null,t.sfArr_boxState=[],t.fillSprite=null,t.btn_click=null,t.btn_video=null,t.btn_noVideo=null,t.btn_close=null,t.guide=null,t.isCanCtrl=!0,t.isValueStopReduce=!1,t.currValue=0,t.showVideoBtnState=0,t}return i(t,e),t.prototype.onInitGuide=function(){localStorage.getItem(m)?this.guide.active=!1:(this.guide.active=!0,this.guide.getComponent(cc.Animation).play().speed=5,localStorage.setItem(m,"true"))},t.prototype.onInit=function(e){this.onInitBg(e),this.onHideVideoBtn(),this.currValue=0,this.showVideoBtnState=0,this.onRefreshFillRange(),this.box.spriteFrame=this.sfArr_boxState[0],this.isCanCtrl=!0,this.onInitGuide()},t.prototype.onInitEvent=function(){this.btn_click.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_click,this),this.btn_video.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_video,this),this.btn_noVideo.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_noVideo,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_close,this)},t.prototype.onRemoveEvent=function(){this.btn_click.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_click,this),this.btn_video.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_video,this),this.btn_noVideo.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_noVideo,this),this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_close,this)},t.prototype.update=function(){this.isValueStopReduce||(this.currValue-=4,this.currValue=Math.max(this.currValue,0),this.onRefreshFillRange())},t.prototype.onRefreshFillRange=function(){this.fillSprite.fillRange=this.currValue/2e3},t.prototype.onTouchBtn_click=function(){this.isCanCtrl&&(r.default.getInstance().click(),this.guide.active=!1,this.currValue+=400,this.onRefreshFillRange(),this.showVideoBtnState=2,this.currValue>=2e3&&(this.isValueStopReduce=!0,this.onOpenBox(10)))},t.prototype.onTouchBtn_video=function(){this.isCanCtrl&&(r.default.getInstance().click(),s.default.getInstance().showVideo(this.onOpenBox.bind(this,30)))},t.prototype.onTouchBtn_noVideo=function(){this.isCanCtrl&&(r.default.getInstance().click(),this.onHideVideoBtn())},t.prototype.onTouchBtn_close=function(){this.isCanCtrl&&(r.default.getInstance().click(),this.isCanCtrl=!1,this.onClose())},t.prototype.onShowVideoBtn=function(){this.isValueStopReduce=!0,this.btn_click.active=!1,this.btn_video.active=!0,this.btn_noVideo.active=!0},t.prototype.onHideVideoBtn=function(){this.isValueStopReduce=!1,this.btn_click.active=!0,this.btn_video.active=!1,this.btn_noVideo.active=!1},t.prototype.getReward=function(e){var t=u.default.getInstance().playerData;t.item_addCountById(p.ItemType_008.c_boxKey,e),u.default.getInstance().onSaveData(),c.default.onRefreshNumKey.executeDelegates(t.item_getCountById(p.ItemType_008.c_boxKey)),c.default.onShowFloatKey.executeDelegates(Math.min(e,30)),c.default.onQuestProgressIncr.executeDelegates(d.QuestTargetID.EarnKey,e),this.scheduleOnce(this.onClose,1)},t.prototype.onOpenBox=function(e){this.isCanCtrl=!1,r.default.getInstance().playSound(l.default.SEF_BOX_OpenGamingBOX),this.onPlayBoxAni(this.getReward.bind(this,e))},t.prototype.onPlayBoxAni=function(e){var t=this;cc.tween(this.box.node).to(.1,{scale:.85},{easing:"quadIn"}).to(.1,{scale:1},{easing:"quadOut"}).call(function(){t.box.spriteFrame=t.sfArr_boxState[1],e()}).start()},t.prototype.onClose=function(){this.onHide(null)},a([y(cc.Sprite)],t.prototype,"box",void 0),a([y([cc.SpriteFrame])],t.prototype,"sfArr_boxState",void 0),a([y(cc.Sprite)],t.prototype,"fillSprite",void 0),a([y(cc.Node)],t.prototype,"btn_click",void 0),a([y(cc.Node)],t.prototype,"btn_video",void 0),a([y(cc.Node)],t.prototype,"btn_noVideo",void 0),a([y(cc.Node)],t.prototype,"btn_close",void 0),a([y(cc.Node)],t.prototype,"guide",void 0),a([_,g("packages://autoproperty//inspector.js")],t)}(f.default);o.default=v,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../quests/QuestsSys_008":"QuestsSys_008","./BaseUIDialog_008":"BaseUIDialog_008"}],VideoChichenBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"1d019bSJeNBaZaHK6bmRkzh","VideoChichenBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/VideoManager"),l=e("../../GamingData_008"),c=e("../btn/BaseSingleBtn_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onTouchEvent=function(){window.isCanCtrl&&(r.default.getInstance().click(),l.default.isGamePause=!0,s.default.getInstance().showVideo(function(){l.default.isGamePause=!1,l.default.onEatChichen()},function(){l.default.isGamePause=!1}))},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../GamingData_008":"GamingData_008","../btn/BaseSingleBtn_008":"BaseSingleBtn_008"}],VideoDropItemMag_008:[function(e,t,o){"use strict";cc._RF.push(t,"8065d1Wqf1D1YQshX7RD4Js","VideoDropItemMag_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Utils/RandomUtils"),s=e("../../mag/NodePoolManager"),l=e("./Config_008"),c=e("./DelegateManager_008"),u=e("./GamingData_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isOpen=!1,t.itemArr=[],t.timer=0,t.resetPosTimer=0,t.weaponIdConfig=[301,304],t.weaponTimer=0,t.weaponArr=[],t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.ins=this,this.isOpen&&s.default.getInstance().onInitNodePool({key:l.default.KeyPath_VideoItem_Chichen,prePath:l.default.KeyPath_VideoItem_Chichen,count:3})},t.prototype.onEnable=function(){c.default.onBossRoundClearSomeItem.addDelegate(this.onBossRoundClearItem,this)},t.prototype.onDisable=function(){c.default.onBossRoundClearSomeItem.removeDelegate(this.onBossRoundClearItem,this)},t.prototype.onStartGame=function(){this.timer=0,this.resetPosTimer=0,this.weaponTimer=0},t.prototype.onStopGame=function(){this.itemArr=[]},t.prototype.update=function(e){this.isOpen&&(u.default.isGamePause||u.default.isTrialMode||(this.timer+=e,this.resetPosTimer+=e,this.resetPosTimer>=10&&(this.resetPosTimer=0,this.onCheckPos()),this.timer>=20&&(this.timer=0,this.onGenerateOne()),this.checkWeapon()))},t.prototype.onBossRoundClearItem=function(){if(this.isOpen){for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].emit(l.default.e_OnExitBattleRoundRecoveryGameObjNode);for(e=0;e<3;e++)this.onGenerateOne()}},t.prototype.onCheckPos=function(){for(var e=u.default.PlayerNode.getPosition(),t=0;t<this.itemArr.length;t++)this.itemArr[t].getPosition().sub(e).magSqr()>=196e4&&(u.default.ScreenRect.contains(this.itemArr[t].getPosition())||this.itemArr[t].setPosition(this.getItemInitPos()))},t.prototype.onRemoveOne=function(e){var t=this.itemArr.indexOf(e);if(-1!==t)this.itemArr.splice(t,1);else{var o=this.weaponArr.indexOf(e);this.weaponArr.splice(o,1)}},t.prototype.onGenerateOne=function(){if(!(this.itemArr.length>=5)){var e=this.getItemInitPos(),t=s.default.getInstance().getNodeNotNull(l.default.KeyPath_VideoItem_Chichen);null!==t&&(t.setParent(u.default.GameObjNode),t.setPosition(e),t.scale=0,cc.tween(t).to(.3,{scale:1},{easing:"backOut"}).start(),this.itemArr.push(t))}},t.prototype.getItemInitPos=function(){return u.default.isLimitMoveRect?this.getInitPosInLimitRange():this.getInitPosOnScreenOuterEdge()},t.prototype.getInitPosInLimitRange=function(){var e=u.default.limitRectCenterPoint,t=u.default.limitRectRadius-80,o=u.default.PlayerNode.getPosition().sub(e).normalize(),n=Math.atan2(o.y,o.x)+.5*Math.PI+Math.random()*Math.PI;return cc.v2(e.x+t*Math.cos(n),e.y+t*Math.sin(n))},t.prototype.getInitPosOnScreenOuterEdge=function(){var e=cc.Vec2.ZERO,t=r.RandomUtils.getRandomInt(0,3),o=u.default.gameCameraNode.x,n=u.default.gameCameraNode.y,i=u.default.cameraHalfWidth,a=u.default.cameraHalfHeight;return 0===t?(e.y=n+a+50,e.x=o+r.RandomUtils.getRandomInt(-i-100,i+100)):1===t?(e.y=n-a-50,e.x=o+r.RandomUtils.getRandomInt(-i-100,i+100)):2===t?(e.x=o-i-50,e.y=n+r.RandomUtils.getRandomInt(-a-50,a+50)):3===t&&(e.x=o+i+50,e.y=n+r.RandomUtils.getRandomInt(-a-50,a+50)),e},t.prototype.getInitPosInScreen=function(){var e=cc.v2(r.RandomUtils.getRandomInt(-800,800),0),t=Math.random()>.5;return e.y=t?r.RandomUtils.getRandomInt(400,1e3):r.RandomUtils.getRandomInt(-1e3,-400),u.default.PlayerNode.getPosition().add(e)},t.prototype.checkWeapon=function(){this.weaponTimer<120?u.default.timer>=120&&(this.weaponTimer=u.default.timer,this.onGenerateWeapon()):this.weaponTimer<180?u.default.timer>=180&&(this.weaponTimer=u.default.timer,this.onGenerateWeapon()):this.weaponTimer<301&&u.default.timer>=301&&(this.weaponTimer=u.default.timer,this.onGenerateWeapon()),this.weaponTimer<150?u.default.timer>=150&&(this.weaponTimer=u.default.timer,this.onRecoveryWeapon()):this.weaponTimer<210?u.default.timer>=210&&(this.weaponTimer=u.default.timer,this.onRecoveryWeapon()):this.weaponTimer<330&&u.default.timer>=330&&(this.weaponTimer=u.default.timer,this.onRecoveryWeapon())},t.prototype.onGenerateWeapon=function(){var e=this,t=this.weaponIdConfig.filter(function(e){return!u.default.SkillStateMap.has(e)});if(0!==t.length){var o=t[r.RandomUtils.getRandomFormArray(t)],n=l.default.KeyPathMap_VideoItem_Weapon.get(o);n&&s.default.getInstance().onInitNodePool({key:n,prePath:n,count:1}).then(function(){var t=s.default.getInstance().getNodeNotNull(n);t.setParent(u.default.GameObjNode),t.setPosition(e.getInitPosInScreen()),t.scale=0,cc.tween(t).to(.3,{scale:1},{easing:"backOut"}).start(),e.weaponArr.push(t)})}},t.prototype.onRecoveryWeapon=function(){for(var e=this.weaponArr.length-1;e>=0;e--)this.weaponArr[e].emit(l.default.e_OnExitBattleRoundRecoveryGameObjNode)},t.ins=null,o=a([d],t)}(cc.Component));o.default=f,cc._RF.pop()},{"../../Utils/RandomUtils":"RandomUtils","../../mag/NodePoolManager":"NodePoolManager","./Config_008":"Config_008","./DelegateManager_008":"DelegateManager_008","./GamingData_008":"GamingData_008"}],VideoDropItem_Chichen_008:[function(e,t,o){"use strict";cc._RF.push(t,"f4ffbov5EhJYq+BzywU82eA","VideoDropItem_Chichen_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=e("./BaseVideoDropItem_008"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onActive=function(){l.default.onEatChichen()},t.prototype.onRecovery=function(){r.default.getInstance().recoveryNode(s.default.KeyPath_VideoItem_Chichen,this.node)},a([p],t)}(c.default));o.default=d,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","./BaseVideoDropItem_008":"BaseVideoDropItem_008"}],VideoDropItem_Weapon_008:[function(e,t,o){"use strict";cc._RF.push(t,"5f243pLUc9MnpyeREbrvN26","VideoDropItem_Weapon_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/NodePoolManager"),s=e("../Config_008"),l=e("../GamingData_008"),c=e("./BaseVideoDropItem_008"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weaponId=200,t.lightNode=null,t.actNode=null,t}return i(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.onShowAni()},t.prototype.onActive=function(){l.default.onSelectSkill(this.weaponId)},t.prototype.onRecovery=function(){var e=s.default.KeyPathMap_VideoItem_Weapon.get(this.weaponId);r.default.getInstance().recoveryNode(e,this.node)},t.prototype.onShowAni=function(){this.lightNode.emit("onShow"),null!==this.actNode&&(cc.Tween.stopAllByTarget(this.actNode),this.actNode.y=0,cc.tween(this.actNode).repeatForever(cc.tween().by(.2,{y:5}).by(.2,{y:-5})).start())},a([d(cc.Integer)],t.prototype,"weaponId",void 0),a([d(cc.Node)],t.prototype,"lightNode",void 0),a([d(cc.Node)],t.prototype,"actNode",void 0),a([p],t)}(c.default);o.default=f,cc._RF.pop()},{"../../../mag/NodePoolManager":"NodePoolManager","../Config_008":"Config_008","../GamingData_008":"GamingData_008","./BaseVideoDropItem_008":"BaseVideoDropItem_008"}],VideoIcon_LionRoar_008:[function(e,t,o){"use strict";cc._RF.push(t,"0fd78R25BVMoYYnufcpKJba","VideoIcon_LionRoar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delayShow=.25,t}return i(t,e),t.prototype.onLoad=function(){this.initPos=this.node.getPosition()},t.prototype.onEnable=function(){this.onInitAni()},t.prototype.onDisable=function(){this.onStopAni()},t.prototype.onInitAni=function(){var e=this;this.onStopAni(),cc.tween(this.node).delay(this.delayShow).call(function(){cc.tween(e.node).repeatForever(cc.tween().to(.2,{opacity:255}).delay(.1).by(.075,{x:2,y:2}).by(.1,{x:-4,y:-4}).by(.075,{x:2,y:2}).by(.075,{x:2,y:2}).by(.1,{x:-4,y:-4}).by(.075,{x:2,y:2}).to(1,{opacity:0}).delay(3)).start()}).start()},t.prototype.onStopAni=function(){this.node.opacity=0,this.node.setPosition(this.initPos),cc.Tween.stopAllByTarget(this.node)},a([l(cc.Float)],t.prototype,"delayShow",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],VideoIcon_LittleStar_008:[function(e,t,o){"use strict";cc._RF.push(t,"229a5s3P6tK0qf+KBD0DlJZ","VideoIcon_LittleStar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delayShow=.5,t}return i(t,e),t.prototype.onEnable=function(){this.onInitAni()},t.prototype.onDisable=function(){this.onStopAni()},t.prototype.onInitAni=function(){var e=this;this.onStopAni(),cc.tween(this.node).delay(this.delayShow).call(function(){cc.tween(e.node).repeatForever(cc.tween().parallel(cc.tween().to(.5,{scale:1}).to(1,{scale:0}),cc.tween().by(1.5,{angle:180})).delay(1.5)).start()}).start()},t.prototype.onStopAni=function(){this.node.scale=0,cc.Tween.stopAllByTarget(this.node)},a([l(cc.Float)],t.prototype,"delayShow",void 0),a([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],VideoMagnetBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"720c1MiPLVLBZOXuM9Lj61b","VideoMagnetBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/VideoManager"),l=e("../../DropItemMag_008"),c=e("../../GamingData_008"),u=e("./BaseSingleBtn_008"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onTouchEvent=function(){window.isCanCtrl&&(r.default.getInstance().click(),c.default.isGamePause=!0,window.isCanCtrl=!1,s.default.getInstance().showVideo(function(){c.default.isGamePause=!1,window.isCanCtrl=!0,l.default.ins.onMagnet()},function(){c.default.isGamePause=!1,window.isCanCtrl=!0}))},a([d],t)}(u.default));o.default=f,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/VideoManager":"VideoManager","../../DropItemMag_008":"DropItemMag_008","../../GamingData_008":"GamingData_008","./BaseSingleBtn_008":"BaseSingleBtn_008"}],VideoManager:[function(e,t,o){"use strict";cc._RF.push(t,"50efc//mXZBPoiaZ4RKR+Nc","VideoManager");var n=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../ui/FloatTextManager"),a=cc._decorator.ccclass,r=function(){function e(){this.isCanShake=!0}var t;return t=e,e.getInstance=function(){return null==this.ins&&(this.ins=new t),this.ins},e.prototype.showVideo=function(e,t){void 0===t&&(t=null),e&&e()},e.prototype.onShake=function(e){var t=this;this.isCanShake&&(this.isCanShake=!1,setTimeout(function(){t.isCanShake=!0},e))},e.prototype.onAddDesktop=function(e){i.default.ins.showFloatText("\u6dfb\u52a0\u684c\u9762"),e()},t=n([a],e)}();o.default=r,cc._RF.pop()},{"../../ui/FloatTextManager":"FloatTextManager"}],VideoUnlockSkillBtnManagerNode_008:[function(e,t,o){"use strict";cc._RF.push(t,"c7d0dszp1RPQJE06Oo4H6aF","VideoUnlockSkillBtnManagerNode_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/NodePoolManager"),s=e("../../Config_008"),l=e("../../DelegateManager_008"),c=e("../../GamingData_008"),u=e("../../LocalDataManager_008"),p=e("../../utils/SkillUtils_008"),d=e("../btn/VideoUnlockSkillBtn_008"),f=cc._decorator,h=f.ccclass,_=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnParent=null,t.skillIdArr=[],t.maxShowCount=2,t.isCanShowNewSkillDia=!1,t.btnScale=1,t.currBtnArr=[],t}return i(t,e),t.prototype.onEnable=function(){l.default.onLearnNewSkill.addDelegate(this.onRefreshUI,this),this.onInitBtn()},t.prototype.onDisable=function(){l.default.onLearnNewSkill.removeDelegate(this.onRefreshUI,this),this.onRecoveryBtn()},t.prototype.onInitBtn=function(){var e=this;if(this.onRecoveryBtn(),!c.default.isTrialMode)for(var t=!1,o=function(o){var i=n.skillIdArr[o],a=s.UnlockSkillDataMap.get(i);if(a&&s.SkillConfigMap.has(i)){var c=!1,p=!1;u.default.getInstance().isSkillUnlocked(i)||(a.unlockGradeIndex<0?c=!0:u.default.getInstance().getHighestChapterId(a.unlockGradeIndex)>a.unlockChapterIndex?p=!0:c=!0),n.isCanShowNewSkillDia&&p&&(t||(t=!0,l.default.onShowDia.executeDelegates(s.default.UIPath_Dia_newSkill,i,function(){u.default.getInstance().gongfa_setLvById(i,0),u.default.getInstance().onUnlockSkill(i),u.default.getInstance().onSaveData(),l.default.onRefreshGongFaUI.executeDelegates()}))),c&&a.btnPath&&r.default.getInstance().onInitNodePool({key:a.btnPath,prePath:a.btnPath,count:1}).then(function(){if(e.currBtnArr.length<e.maxShowCount){var t=r.default.getInstance().getNodeNotNull(a.btnPath);null!==t&&(t.setParent(e.btnParent),t.setSiblingIndex(0),t.scale=e.btnScale,t.active=!0,t.getComponent(d.default).onInit(a),e.currBtnArr.push({skillId:a.id,btnNode:t}))}})}},n=this,i=0;i<this.skillIdArr.length;i++)o(i)},t.prototype.onRecoveryBtn=function(){for(var e=0;e<this.currBtnArr.length;e++){var t=s.UnlockSkillDataMap.get(this.currBtnArr[e].skillId);t?r.default.getInstance().recoveryNode(t.btnPath,this.currBtnArr[e].btnNode):this.currBtnArr[e].btnNode.destroy()}this.currBtnArr=[]},t.prototype.onRefreshUI=function(){for(var e=c.default.WeaponIdArr.length,t=c.default.CommonSkillIdArr.length,o=0;o<this.currBtnArr.length;o++)this.currBtnArr[o].btnNode.active&&(this.currBtnArr[o].skillId<200?t>=p.default.SkillCountLimit_Common&&(this.currBtnArr[o].btnNode.active=!1):this.currBtnArr[o].skillId<300?e>=p.default.SkillCountLimit_Weapon&&(this.currBtnArr[o].btnNode.active=!1):c.default.SkillStateMap.has(this.currBtnArr[o].skillId)&&(this.currBtnArr[o].btnNode.active=!1))},a([_(cc.Node)],t.prototype,"btnParent",void 0),a([_([cc.Integer])],t.prototype,"skillIdArr",void 0),a([_(cc.Integer)],t.prototype,"maxShowCount",void 0),a([_(cc.Boolean)],t.prototype,"isCanShowNewSkillDia",void 0),a([_(cc.Float)],t.prototype,"btnScale",void 0),a([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../mag/NodePoolManager":"NodePoolManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../LocalDataManager_008":"LocalDataManager_008","../../utils/SkillUtils_008":"SkillUtils_008","../btn/VideoUnlockSkillBtn_008":"VideoUnlockSkillBtn_008"}],VideoUnlockSkillBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"2ae2bLElg1M3qTW9J2iIGvl","VideoUnlockSkillBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../mag/AudioMag"),s=e("../../../../mag/GameMag"),l=e("../../../../mag/NodePoolManager"),c=e("../../../../mag/VideoManager"),u=e("../../Config_008"),p=e("../../DelegateManager_008"),d=e("../../GamingData_008"),f=e("../../LocalDataManager_008"),h=e("../../utils/SkillUtils_008"),_=e("./BaseSingleBtn_008"),y=cc._decorator,g=y.ccclass,m=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(t,e),t.prototype.onInit=function(e){this.data=e},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this),p.default.onUnlockSkill.addDelegate(this.onUnlockSkill,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this),p.default.onUnlockSkill.removeDelegate(this.onUnlockSkill,this)},t.prototype.onRecovery=function(){l.default.getInstance().recoveryNode(this.data.btnPath,this.node)},t.prototype.onTouchEvent=function(){var e=this;window.isCanCtrl&&(r.default.getInstance().click(),d.default.isGaming&&(d.default.isGamePause=!0),c.default.getInstance().showVideo(function(){f.default.getInstance().gongfa_setLvById(e.data.id,0),f.default.getInstance().onUnlockSkill(e.data.id),f.default.getInstance().onSaveData(),p.default.onRefreshGongFaUI.executeDelegates(),d.default.isGaming&&(h.default.registerSkill(e.data.id),d.default.onSelectSkill(e.data.id));var t=function(){d.default.isGaming&&(d.default.isGamePause=!1),e.onRecovery()},o=u.UnlockSkillDataMap.get(e.data.id);s.default.getInstance().getSpriteFrame(u.default.Path_IconSkill+e.data.id).then(function(e){p.default.onShowDia.executeDelegates(u.default.UIPath_Dia_unlockNewSkill,e,o.desc,t)})},function(){d.default.isGaming&&(d.default.isGamePause=!1)}))},t.prototype.onUnlockSkill=function(e){e===this.data.id&&this.onRecovery()},a([g],t)}(_.default));o.default=m,cc._RF.pop()},{"../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../../../mag/NodePoolManager":"NodePoolManager","../../../../mag/VideoManager":"VideoManager","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../LocalDataManager_008":"LocalDataManager_008","../../utils/SkillUtils_008":"SkillUtils_008","./BaseSingleBtn_008":"BaseSingleBtn_008"}],ViewBtn_008:[function(e,t,o){"use strict";cc._RF.push(t,"998b8FJXpROpauaUXkQ0kk3","ViewBtn_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../DelegateManager_008"),s=e("../../GamingData_008"),l=e("../../entities/Enums_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sf_notSelected=null,t.sf_selected=null,t.sprite=null,t}return i(t,e),t.prototype.onChangeState=function(e){if(this.sprite.spriteFrame=e?this.sf_selected:this.sf_notSelected,e)switch(s.default.currMainUISelectIndex=this.node.getSiblingIndex(),this.node.getSiblingIndex()){case 2:r.default.onHideRedPoint.executeDelegates(l.RedPointIndex_008.Chapter)}},a([p(cc.SpriteFrame)],t.prototype,"sf_notSelected",void 0),a([p(cc.SpriteFrame)],t.prototype,"sf_selected",void 0),a([p(cc.Sprite)],t.prototype,"sprite",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../DelegateManager_008":"DelegateManager_008","../../GamingData_008":"GamingData_008","../../entities/Enums_008":"Enums_008"}],WaitingLayer:[function(e,t,o){"use strict";cc._RF.push(t,"a0914TbBiVMY7trscs+MN7B","WaitingLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=r.property,c=r.inspector,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fillSprite=null,t.lbl_tips=null,t.currProgress=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this.onWaiting.bind(this);window.waitingFunc=e;var t=this.onWaitingEnd.bind(this);window.waitingEndFunc=t,this.node.on("waitingStart",this.onWaitingStart,this)},t.prototype.onWaitingStart=function(e,t){void 0===e&&(e="\u8d44\u6e90\u52a0\u8f7d\u4e2d..."),void 0===t&&(t=!1),this.lbl_tips.getComponent(cc.Label).string=e,cc.Tween.stopAllByTarget(this.node),this.node.opacity=255,t&&(this.fillSprite.fillRange=0,this.currProgress=0)},t.prototype.onWaiting=function(e){this.currProgress=e},t.prototype.onWaitingEnd=function(){var e=this;this.node.active=!1,this.node.active=!0,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.5,{opacity:0}).call(function(){e.onActiveFalse()}).start()},t.prototype.update=function(){this.fillSprite.fillRange<this.currProgress&&(this.fillSprite.fillRange+=.03)},t.prototype.onActiveFalse=function(){this.node.active=!1},t.prototype.onDestroy=function(){this.node.off("waitingStart",this.onWaitingStart,this)},a([l(cc.Sprite)],t.prototype,"fillSprite",void 0),a([l(cc.Label)],t.prototype,"lbl_tips",void 0),a([s,c("packages://autoproperty//inspector.js")],t)}(cc.Component);o.default=u,window.waitingStartFunc=function(e,t){void 0===t&&(t=!1),window.waitingLayer||(window.waitingLayer=cc.find("Canvas/UIMag/WaitingUI")),window.waitingLayer&&(window.waitingLayer.active=!0,window.waitingLayer.setSiblingIndex(window.waitingLayer.parent.childrenCount),window.waitingLayer.emit("waitingStart",e,t))},cc._RF.pop()},{}],WeaponDropItem_008:[function(e,t,o){"use strict";cc._RF.push(t,"41babH/p2dFnaFvmWPb+07Z","WeaponDropItem_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../mag/AudioMag"),s=e("../Config_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actNode=null,t.lightNode=null,t}return i(t,e),t.prototype.onEnable=function(){this.actNode.angle=0,cc.tween(this.actNode).to(.4,{angle:720}).call(this.onShowSpineAni,this).start(),r.default.getInstance().playSound_intervalLimit(s.default.SEF_Drop_Knife,50)},t.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.actNode)},t.prototype.onShowSpineAni=function(){this.lightNode.emit("onShow")},a([u(cc.Node)],t.prototype,"actNode",void 0),a([u(cc.Node)],t.prototype,"lightNode",void 0),a([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../mag/AudioMag":"AudioMag","../Config_008":"Config_008"}],WidgetToCanvas:[function(e,t,o){"use strict";cc._RF.push(t,"220c7tM+jZEHa7lZGHLQAIV","WidgetToCanvas");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,l=(r.property,r.menu),c=r.requireComponent,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){var e=this.node.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.isAlignTop=!0,e.top=0,e.isAlignBottom=!0,e.bottom=0,e.isAlignLeft=!0,e.left=0,e.isAlignRight=!0,e.right=0,e.updateAlignment()},a([s,l("UI\u5de5\u5177/WidgetToCanvas"),c(cc.Widget)],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],XiuXianDia_008:[function(e,t,o){"use strict";cc._RF.push(t,"1b286lDkDFNu5tfrPftGl2Q","XiuXianDia_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Utils/RandomUtils"),s=e("../../../../mag/AudioMag"),l=e("../../../../mag/GameMag"),c=e("../../Config_008"),u=e("../../DelegateManager_008"),p=e("../../LocalDataManager_008"),d=e("../../entities/Enums_008"),f=e("../../quests/QuestsSys_008"),h=e("../../utils/PlayerInfoUtils_008"),_=e("../../utils/XiuXianUtils_008"),y=e("../misc/MaskLabel_008"),g=e("./BaseUIDialog_008"),m=cc._decorator,v=m.ccclass,b=m.property,P=m.inspector,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg_normal=null,t.bg_breaking=null,t.btn_close=null,t.lbl_lv=null,t.expBar=null,t.lbl_exp_curr=null,t.lbl_exp_target=null,t.expBallArr=[],t.expBallNode=null,t.btn_dujie=null,t.tips_dujie=null,t.pre_expBallParticle=null,t.efNode=null,t.efTargetNode=null,t.ef_smoke_normal=null,t.spineEF_levelUp=null,t.spineEFNode_dujie_preStart=null,t.spineEFNode_dujie_di=null,t.spineEFNode_dujie_zhao=null,t.spineEFNode_dujie_lei=null,t.spineEFNode_dujie_succ=null,t.spineEF_xiulian=null,t.bottom_normal=null,t.layout_info=null,t.lbl_lingqi_has=null,t.lbl_lingqi_need=null,t.btn_once=null,t.btn_tenTimes=null,t.lbl_tips_maxLevel=null,t.bottom_dujie=null,t.lbl_succProbalitity=null,t.btn_dujie_wait=null,t.btn_dujie_start=null,t.bottom_dujieDesc=null,t.maskLabel=null,t.btn_continue=null,t.playerData=null,t.totalScore=0,t.colorArr=[cc.color(131,250,178),cc.color(27,255,255),cc.color(220,164,104),cc.color(255,240,11),cc.color(255,0,0)],t.isPlayingLevelUpAni=!1,t.efNode_smoke_normal=null,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.onInitEffect(),this.spineEFNode_dujie_preStart.active=!1,this.spineEFNode_dujie_di.active=!1,this.spineEFNode_dujie_zhao.active=!1,this.spineEFNode_dujie_lei.active=!1,this.spineEFNode_dujie_succ.active=!1},t.prototype.onInit=function(e,t){this.btn_close.active=t,this.playerData=p.default.getInstance().playerData,this.totalScore=h.default.getTotalScore(this.playerData),this.onRefreshUI()},t.prototype.onShow=function(){var e=this;this.actNode.opacity=0,cc.tween(this.actNode).to(this.aniTime_show,{opacity:255},{easing:"fade"}).call(function(){e.onInitEvent()}).start()},t.prototype.onHide=function(e){var t=this;this.onRemoveEvent(),cc.tween(this.actNode).to(this.aniTime_hide,{opacity:0},{easing:"fade"}).call(function(){t.node.active=!1,e&&e()}).start()},t.prototype.onInitEvent=function(){this.btn_close.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_close,this),this.btn_once.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_once,this),this.btn_tenTimes.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_tenTimes,this),this.btn_dujie.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_dujie,this),this.btn_dujie_wait.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_dujie_wait,this),this.btn_dujie_start.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_dujie_start,this),this.btn_continue.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn_continue,this),u.default.onRefreshNumLingQi.addDelegate(this.onRefreshLingqiCount,this),cc.sys.isBrowser},t.prototype.onRemoveEvent=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_close,this),this.btn_once.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_once,this),this.btn_tenTimes.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_tenTimes,this),this.btn_dujie.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_dujie,this),this.btn_dujie_wait.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_dujie_wait,this),this.btn_dujie_start.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_dujie_start,this),this.btn_continue.off(cc.Node.EventType.TOUCH_END,this.onTouchBtn_continue,this),u.default.onRefreshNumLingQi.removeDelegate(this.onRefreshLingqiCount,this),cc.sys.isBrowser},t.prototype.onAddLingqi=function(){window.isCanCtrl&&(s.default.getInstance().click(),p.default.getInstance().playerData.item_addCountById(d.ItemType_008.c_lingqi,2e4),this.onRefreshLingqiCount())},t.prototype.onRefreshUI=function(){var e=this.playerData.xiuXianData[0],t=this.playerData.xiuXianData[1],o=this.playerData.xiuXianData[2];this.playerData.xiuXianData[3],this.playerData.xiuXianData[4],this.onRefreshLvLabel(e),this.onRefreshLvExpBar(t,e),this.onRefreshExpBall(o),this.onRefreshInfoNode(e),this.onRefreshLingqiCount(),_.default.getIsInDujieState(e)?this.onRefreshBottom_dujieState():this.onRefreshBottom_normalState(e)},t.prototype.onRefreshBottom_normalState=function(e){this.expBallNode.opacity=255,this.bg_normal.opacity=255,this.bg_breaking.opacity=0,this.bottom_normal.active=!0,this.bottom_normal.y=-550,this.bottom_dujie.active=!1,this.bottom_dujieDesc.active=!1,this.spineEFNode_dujie_preStart.active=!1,this.spineEFNode_dujie_di.active=!1,this.spineEFNode_dujie_zhao.active=!1,this.spineEFNode_dujie_lei.active=!1,this.spineEFNode_dujie_succ.active=!1,_.default.isMaxLevel(e)?(this.btn_once.active=!1,this.btn_tenTimes.active=!1,this.lbl_exp_curr.node.parent.opacity=0,this.lbl_lingqi_has.node.parent.opacity=0,this.expBallNode.opacity=0,this.lbl_tips_maxLevel.opacity=255):(this.btn_once.active=!0,this.btn_tenTimes.active=!0,this.lbl_exp_curr.node.parent.opacity=255,this.lbl_lingqi_has.node.parent.opacity=255,this.expBallNode.opacity=255,this.lbl_tips_maxLevel.opacity=0),this.btn_dujie.active=!1},t.prototype.onRefreshBottom_dujieState=function(){this.expBallNode.opacity=0,this.bg_normal.opacity=0,this.bg_breaking.opacity=255,this.bottom_normal.active=!0,this.bottom_normal.y=-640,this.bottom_dujie.active=!1,this.bottom_dujieDesc.active=!1,this.btn_once.active=!1,this.btn_tenTimes.active=!1,this.btn_dujie.active=!0,this.lbl_exp_curr.node.parent.opacity=0,this.lbl_tips_maxLevel.opacity=0,this.spineEFNode_dujie_preStart.active=!0},t.prototype.onRefreshLvLabel=function(e){this.lbl_lv.string=_.default.getLevelDesc(e)},t.prototype.onRefreshLvExpBar=function(e,t){if(!_.default.isMaxLevel(t)&&_.default.getIsInDujieState(t))return this.lbl_exp_curr.node.parent.opacity=0,void(this.expBar.progress=1);this.lbl_exp_curr.node.parent.opacity=255,this.lbl_exp_curr.string=e.toString(),this.nextLvNeedExp=_.default.getNeedExp(t),-1===this.nextLvNeedExp?(this.lbl_exp_target.string="/\u221e",this.expBar.progress=1):(this.lbl_exp_target.string="/"+this.nextLvNeedExp,this.expBar.progress=e/this.nextLvNeedExp)},t.prototype.onRefreshExpBall=function(e){this.nextExpBallLv=e;for(var t=0;t<this.expBallArr.length;t++){var o=this.expBallArr[t];o.getChildByName("sprite_light").opacity=t===this.nextExpBallLv?255:0,o.getChildByName("lbl_desc").opacity=t===this.nextExpBallLv?255:0,o.getChildByName("lbl_result").opacity=t===this.nextExpBallLv?255:0,t===e&&(o.getChildByName("lbl_result").getComponent(cc.Label).string="\u529f\u529b+"+_.default.getExpBallExp(e,p.default.getInstance().playerData.xiuXianData[0]))}},t.prototype.onRefreshInfoNode=function(e){for(var t=this.layout_info.children,o=0;o<t.length;o++)_.default.onInitInfoNode(t[o],o,e)},t.prototype.onRefreshLingqiCount=function(){var e=p.default.getInstance().playerData.item_getCountById(d.ItemType_008.c_lingqi);this.lbl_lingqi_has.string=e.toString(),this.needLingqiCount=_.default.getNeedLingQi(),this.lbl_lingqi_need.string="/"+this.needLingqiCount,e>=this.needLingqiCount?this.lbl_lingqi_has.node.color=new cc.Color(20,163,107):this.lbl_lingqi_has.node.color=new cc.Color(172,30,27)},t.prototype.onPlayXiuLianAni=function(e,t){var o=this,n=cc.instantiate(this.pre_expBallParticle);n.setParent(this.efNode);var i=this.efNode.convertToNodeSpaceAR(this.expBallArr[e].convertToWorldSpaceAR(cc.Vec2.ZERO)),a=this.efTargetNode.getPosition();n.setPosition(i);var r=a.sub(i).normalize(),s=cc.misc.radiansToDegrees(Math.atan2(r.y,r.x))+90;n.angle=s,cc.tween(n).to(.63,{x:a.x,y:a.y}).call(function(){o.spineEF_xiulian.node.opacity=255,o.spineEF_xiulian.setAnimation(0,"bao",!1),n.destroy(),t()}).start()},t.prototype.onPlayLevelUpAni=function(){var e=this;this.isPlayingLevelUpAni||(this.spineEF_xiulian.node.opacity=0,this.spineEF_levelUp.timeScale=1,this.spineEF_levelUp.setAnimation(0,"animation",!1),this.isPlayingLevelUpAni=!0,this.spineEF_levelUp.setCompleteListener(function(){e.isPlayingLevelUpAni=!1}))},t.prototype.onPlayDujieAni=function(){this.spineEFNode_dujie_lei.active=!0,this.spineEFNode_dujie_zhao.active=!0,this.spineEFNode_dujie_di.active=!0},t.prototype.onLingqiInsufficient=function(){console.log("\u7075\u77f3\u4e0d\u8db3"),u.default.onShowUIFloatText.executeDelegates("\u7075\u77f3\u4e0d\u8db3")},t.prototype.onTouchBtn_close=function(){window.isCanCtrl&&(s.default.getInstance().click(),this.onHide(null))},t.prototype.onAfterXiuLianEvent=function(e){var t=this;p.default.getInstance().onSaveData(),this.nextExpBallLv=this.playerData.xiuXianData[2],this.onRefreshExpBall(this.nextExpBallLv),this.onRefreshLvExpBar(this.playerData.xiuXianData[1],this.playerData.xiuXianData[0]),this.onRefreshLingqiCount(),e!==this.playerData.xiuXianData[0]&&(this.onPlayLevelUpAni(),this.scheduleOnce(function(){t.onRefreshInfoNode(t.playerData.xiuXianData[0]),t.onRefreshLvLabel(t.playerData.xiuXianData[0]),_.default.getIsInDujieState(t.playerData.xiuXianData[0])&&t.onRefreshBottom_dujieState(),t.onShowScoreChange(t.playerData)},.6))},t.prototype.onTouchBtn_once=function(){if(window.isCanCtrl&&!_.default.getIsInDujieState(this.playerData.xiuXianData[0])){s.default.getInstance().click();var e=this.nextExpBallLv,t=this.playerData.xiuXianData[0];_.default.onXiulianOnce(this.playerData)?(this.onPlayXiuLianAni(e,this.onAfterXiuLianEvent.bind(this,t)),u.default.onQuestProgressIncr.executeDelegates(f.QuestTargetID.XiuShen,1)):this.onLingqiInsufficient()}},t.prototype.onTouchBtn_tenTimes=function(){if(window.isCanCtrl&&!_.default.getIsInDujieState(this.playerData.xiuXianData[0])){s.default.getInstance().click();for(var e=this.nextExpBallLv,t=this.playerData.xiuXianData[0],o=!1,n=0;n<10;n++){if(!_.default.onXiulianOnce(this.playerData)){this.onLingqiInsufficient();break}if(u.default.onQuestProgressIncr.executeDelegates(f.QuestTargetID.XiuShen,1),o=!0,_.default.getIsInDujieState(this.playerData.xiuXianData[0]))break}o&&this.onPlayXiuLianAni(e,this.onAfterXiuLianEvent.bind(this,t))}},t.prototype.onTouchBtn_dujie=function(){this.onRefreshDuJieSuccProbalititUI(),this.onTouchBtn_dujie_start()},t.prototype.onTouchBtn_dujie_wait=function(){s.default.getInstance().click(),this.btn_dujie.active=!0,this.bottom_normal.active=!0,this.bottom_normal.y=-640,this.bottom_dujie.active=!1},t.prototype.onTouchBtn_dujie_start=function(){var e=this;s.default.getInstance().click(),window.isCanCtrl=!1,this.bottom_dujie.active=!1,this.bottom_dujieDesc.active=!0,this.btn_continue.active=!1;var t=r.RandomUtils.getRandomInt(0,1e4),o=p.default.getInstance().playerData,n=t<=this.dujieSuccProbalitity;if(this.onPlayDujieAni(n),n){o.xiuXianData[0]+=1,o.xiuXianData[1]=0,o.xiuXianData[3]=0,o.xiuXianData[4]=0;var i="\u4e00\u8def\u706b\u82b1\u5e26\u95ea\u7535\n\u4f60\u6e21\u52ab\u6210\u529f\u4e86";this.maskLabel.onInit(i,.05,2,this.onShowDujieResult.bind(this,!0))}else o.xiuXianData[3]=0,o.xiuXianData[4]=0,i="\u4eca\u5929\u51fa\u95e8\u6ca1\u770b\u9ec4\u5386\n\u4f60\u6e21\u52ab\u5931\u8d25\u4e86",this.maskLabel.onInit(i,.05,1.5,this.onShowDujieResult.bind(this,!1));this.scheduleOnce(function(){var t=e.maskLabel.getComponentInChildren(cc.Label).node.height;e.maskLabel.node.parent.height=t>=180?t:180},0),p.default.getInstance().onSaveData()},t.prototype.onShowDujieResult=function(e){if(this.spineEFNode_dujie_lei.active=!1,this.spineEFNode_dujie_zhao.active=!1,this.spineEFNode_dujie_di.active=!1,e){this.spineEFNode_dujie_succ.active=!0;var t=p.default.getInstance().playerData;this.onShowScoreChange(t),this.onRefreshInfoNode(t.xiuXianData[0]),this.onRefreshLvExpBar(t.xiuXianData[1],t.xiuXianData[0]),this.onRefreshLvLabel(t.xiuXianData[0]),this.onRefreshExpBall(t.xiuXianData[2]),this.lbl_exp_curr.node.parent.opacity=255}this.btn_continue.active=!0,window.isCanCtrl=!0},t.prototype.onTouchBtn_continue=function(){s.default.getInstance().click(),this.spineEFNode_dujie_succ.active=!1;var e=p.default.getInstance().playerData;e.xiuXianData[0]%10==0?this.onRefreshDuJieSuccProbalititUI():(this.onRefreshBottom_normalState(e.xiuXianData[0]),this.onRefreshInfoNode(e.xiuXianData[0]),this.onRefreshLvExpBar(e.xiuXianData[1],e.xiuXianData[0]),this.onRefreshLvLabel(e.xiuXianData[0]))},t.prototype.onRefreshDuJieSuccProbalititUI=function(){this.btn_dujie.active=!1,this.bottom_normal.active=!1,this.bottom_dujie.active=!0,this.bottom_dujieDesc.active=!1;var e=_.default.getDujieSuccProbalitity(p.default.getInstance().playerData.xiuXianData[0]);e+=1===p.default.getInstance().playerData.xiuXianData[3]?500:0,(e+=1===p.default.getInstance().playerData.xiuXianData[4]?1e3:0)>1e4?e=1e4:e<0&&(e=0),this.dujieSuccProbalitity=e,this.lbl_succProbalitity.string="\u6210\u529f\u7387\uff1a"+Math.floor(e/100)+"%"},t.prototype.onShowScoreChange=function(e){var t=h.default.getTotalScore(e);u.default.onScoreChange.executeDelegates(this.totalScore,t),u.default.onRefreshTotalScoreUI.executeDelegates(t),this.totalScore=t},t.prototype.onInitEffect=function(){var e=this;l.default.getInstance().getPrefab(c.default.UIPath_XiuXian_SmokeNormal).then(function(t){null!==t&&(e.efNode_smoke_normal=cc.instantiate(t),e.efNode_smoke_normal.setParent(e.ef_smoke_normal),e.efNode_smoke_normal.setPosition(0,0))})},a([b(cc.Node)],t.prototype,"bg_normal",void 0),a([b(cc.Node)],t.prototype,"bg_breaking",void 0),a([b(cc.Node)],t.prototype,"btn_close",void 0),a([b(cc.Label)],t.prototype,"lbl_lv",void 0),a([b(cc.ProgressBar)],t.prototype,"expBar",void 0),a([b(cc.Label)],t.prototype,"lbl_exp_curr",void 0),a([b(cc.Label)],t.prototype,"lbl_exp_target",void 0),a([b([cc.Node])],t.prototype,"expBallArr",void 0),a([b(cc.Node)],t.prototype,"expBallNode",void 0),a([b(cc.Node)],t.prototype,"btn_dujie",void 0),a([b(cc.Node)],t.prototype,"tips_dujie",void 0),a([b(cc.Prefab)],t.prototype,"pre_expBallParticle",void 0),a([b(cc.Node)],t.prototype,"efNode",void 0),a([b(cc.Node)],t.prototype,"efTargetNode",void 0),a([b(cc.Node)],t.prototype,"ef_smoke_normal",void 0),a([b(sp.Skeleton)],t.prototype,"spineEF_levelUp",void 0),a([b(cc.Node)],t.prototype,"spineEFNode_dujie_preStart",void 0),a([b(cc.Node)],t.prototype,"spineEFNode_dujie_di",void 0),a([b(cc.Node)],t.prototype,"spineEFNode_dujie_zhao",void 0),a([b(cc.Node)],t.prototype,"spineEFNode_dujie_lei",void 0),a([b(cc.Node)],t.prototype,"spineEFNode_dujie_succ",void 0),a([b(sp.Skeleton)],t.prototype,"spineEF_xiulian",void 0),a([b(cc.Node)],t.prototype,"bottom_normal",void 0),a([b(cc.Node)],t.prototype,"layout_info",void 0),a([b(cc.Label)],t.prototype,"lbl_lingqi_has",void 0),a([b(cc.Label)],t.prototype,"lbl_lingqi_need",void 0),a([b(cc.Node)],t.prototype,"btn_once",void 0),a([b(cc.Node)],t.prototype,"btn_tenTimes",void 0),a([b(cc.Node)],t.prototype,"lbl_tips_maxLevel",void 0),a([b(cc.Node)],t.prototype,"bottom_dujie",void 0),a([b(cc.Label)],t.prototype,"lbl_succProbalitity",void 0),a([b(cc.Node)],t.prototype,"btn_dujie_wait",void 0),a([b(cc.Node)],t.prototype,"btn_dujie_start",void 0),a([b(cc.Node)],t.prototype,"bottom_dujieDesc",void 0),a([b(y.default)],t.prototype,"maskLabel",void 0),a([b(cc.Node)],t.prototype,"btn_continue",void 0),a([v,P("packages://autoproperty//inspector.js")],t)}(g.default);o.default=S,cc._RF.pop()},{"../../../../Utils/RandomUtils":"RandomUtils","../../../../mag/AudioMag":"AudioMag","../../../../mag/GameMag":"GameMag","../../Config_008":"Config_008","../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008","../../quests/QuestsSys_008":"QuestsSys_008","../../utils/PlayerInfoUtils_008":"PlayerInfoUtils_008","../../utils/XiuXianUtils_008":"XiuXianUtils_008","../misc/MaskLabel_008":"MaskLabel_008","./BaseUIDialog_008":"BaseUIDialog_008"}],XiuXianUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"520c23hB19AZYz2n5FEhGtY","XiuXianUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../Utils/RandomUtils"),i=e("../../../mag/GameMag"),a=e("../DelegateManager_008"),r=e("../entities/Enums_008"),s=e("./PlayerInfoUtils_008"),l=function(){function e(){}return e.onLoadConfigData=function(e){var t=this;return new Promise(function(o){null===t.config?i.default.getInstance().getJson(e).then(function(e){var n=e;t.config=n.XiuXianConfig,a.default.onRefreshTotalScoreUI.executeDelegates(void 0),o(null)}):o(null)})},e.getLevelDesc=function(e){var t=Math.floor((e-1)/30),o=Math.floor((e-1)/10)%3,n=e%10;return this.getJingJieDesc(t)+this.getJieDuanDesc(o)+"."+n},e.getJingJieDesc=function(e){return String.fromCharCode(97+e)},e.getJieDuanDesc=function(e){return String.fromCharCode(60+e)},e.getIsInDujieState=function(e){return e<299&&e%10==0},e.isMaxLevel=function(e){var t,o;return null!==(o=e>=(null===(t=this.config)||void 0===t?void 0:t.length))&&void 0!==o?o:0},e.getNeedExp=function(e){var t,o;return e<300?e%10==0?-1:null!==(o=null===(t=this.config)||void 0===t?void 0:t[e-1].needExp)&&void 0!==o?o:-1:-1},e.getExpBallExp=function(e,t){var o,n;return null!==(n=null===(o=this.config)||void 0===o?void 0:o[t-1].expBallExpArr[e])&&void 0!==n?n:30},e.resetNextExpBallLv=function(e){for(var t,o,i=0,a=null!==(o=null===(t=this.config)||void 0===t?void 0:t[e-1].expBallWeightArr)&&void 0!==o?o:[10,10,10,10,10],r=0;r<a.length;r++)i+=a[r];var s=0,l=0,c=n.RandomUtils.getRandomInt(0,i);for(r=0;r<a.length;r++)if(c<(l+=a[r])){s=r;break}return s},e.getNeedLingQi=function(){return 300},e.getDujieSuccProbalitity=function(e){var t,o;return null!==(o=null===(t=this.config)||void 0===t?void 0:t[e-1].dujieSuccProbalitity)&&void 0!==o?o:0},e.getInfoValueByInfoType=function(e,t){for(var o=t.xiuXianData[0],n=0,i=0;i<this.infoTypeArr.length;i++)this.infoTypeArr[i]===e&&(n+=this.getInfoValueByIndex(i,o));return n},e.getTotalScore=function(e){for(var t=e.xiuXianData[0],o=0,n=0;n<this.infoTypeArr.length;n++)o+=s.default.getBaseScoreByInfoType(this.infoTypeArr[n])*this.getInfoValueByIndex(n,t);return o},e.getInfoDescByIndex=function(e){return s.default.getInfoNameByInfoType(this.infoTypeArr[e])},e.getInfoValueByIndex=function(e,t){var o,n;return null!==(n=null===(o=this.config)||void 0===o?void 0:o[t-1]["info_"+(e+1)])&&void 0!==n?n:0},e.onInitInfoNode=function(e,t,o){if(t>=3)e.active=!1;else{var n=e.getChildByName("lbl_infoDesc").getComponent(cc.Label),i=e.getChildByName("lbl_curr").getComponent(cc.Label),a=e.getChildByName("jiantou"),r=e.getChildByName("lbl_result").getComponent(cc.Label);if(n.string=this.getInfoDescByIndex(t),i.string="+"+this.getInfoValueByIndex(t,o),o<299){n.node.x=-270,i.node.x=-125,a.opacity=255,r.node.opacity=255;var s=o+1;r.string="+"+this.getInfoValueByIndex(t,s)}else n.node.x=-120,i.node.x=25,a.opacity=0,r.node.opacity=0}},e.onXiulianOnce=function(t){var o=t.xiuXianData[0];if(o>=300)return!1;var n=this.getNeedExp(o),i=t.xiuXianData[2],a=t.item_getCountById(r.ItemType_008.c_lingqi),s=this.getNeedLingQi();return a>=s&&(t.xiuXianData[2]=e.resetNextExpBallLv(o),t.item_addCountById(r.ItemType_008.c_lingqi,-s),t.xiuXianData[1]+=this.getExpBallExp(i,o),t.xiuXianData[1]>=n&&(t.xiuXianData[1]-=n,t.xiuXianData[0]+=1),!0)},e.config=null,e.infoTypeArr=[1,0,2],e}();o.default=l,cc._RF.pop()},{"../../../Utils/RandomUtils":"RandomUtils","../../../mag/GameMag":"GameMag","../DelegateManager_008":"DelegateManager_008","../entities/Enums_008":"Enums_008","./PlayerInfoUtils_008":"PlayerInfoUtils_008"}],ZIndexUtils_008:[function(e,t,o){"use strict";cc._RF.push(t,"649afqBxIZGKpscfl7hqah1","ZIndexUtils_008"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.getFormatZIndex_centerPosY=function(e,t){var o=t-e;return o<cc.macro.MIN_ZINDEX?o=cc.macro.MIN_ZINDEX:o>cc.macro.MAX_ZINDEX&&(o=cc.macro.MAX_ZINDEX),o},e}();o.default=n,cc._RF.pop()},{}],ZIndex_008:[function(e,t,o){"use strict";cc._RF.push(t,"8f9bdJ8sRtEraio4kp3+dsM","ZIndex_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../GamingData_008"),s=e("../utils/ZIndexUtils_008"),l=cc._decorator,c=l.ccclass,u=(l.property,l.menu),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.lateUpdate=function(){this.node.zIndex=s.default.getFormatZIndex_centerPosY(this.node.getPosition().y,r.default.PlayerNode.y)},a([c,u("008/ZIndex")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../GamingData_008":"GamingData_008","../utils/ZIndexUtils_008":"ZIndexUtils_008"}],ZIndex_Offset_008:[function(e,t,o){"use strict";cc._RF.push(t,"02c34pv2xFMTZYJU9Bd7r+k","ZIndex_Offset_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../GamingData_008"),s=e("../utils/ZIndexUtils_008"),l=cc._decorator,c=l.ccclass,u=l.property,p=l.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offset=0,t}return i(t,e),t.prototype.lateUpdate=function(){this.node.zIndex=s.default.getFormatZIndex_centerPosY(this.node.getPosition().y-this.offset,r.default.PlayerNode.y)},a([u(cc.Integer)],t.prototype,"offset",void 0),a([c,p("008/Zindex_offset")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../GamingData_008":"GamingData_008","../utils/ZIndexUtils_008":"ZIndexUtils_008"}],ZhanLingBar_008:[function(e,t,o){"use strict";cc._RF.push(t,"50174xh+ftKf7pufWsrnRWu","ZhanLingBar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../DelegateManager_008"),s=e("../../LocalDataManager_008"),l=e("../../entities/Enums_008"),c=cc._decorator,u=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t._curNum=0,t}return i(t,e),t.prototype.onLoad=function(){r.default.onRefreshNumZhanLing.addDelegate(this.onRefreshNumZhanLing,this)},t.prototype.onEnable=function(){this._curNum=Number(this.label.string),this.label.string=s.default.getInstance().playerData.item_getCountById(l.ItemType_008.c_zhanling).toFixed(0)},t.prototype.onRefreshNumZhanLing=function(e){var t=this;cc.tween(this.label.node).set({z:this._curNum}).to(.3,{z:e},{easing:function(e){return t.label.string=Math.floor(t.label.node.z).toString(),e}}).call(function(){t._curNum=e,t.label.string=e.toString()}).start()},a([p(cc.Label)],t.prototype,"label",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../DelegateManager_008":"DelegateManager_008","../../LocalDataManager_008":"LocalDataManager_008","../../entities/Enums_008":"Enums_008"}],ZiJinYeBar_008:[function(e,t,o){"use strict";cc._RF.push(t,"e0c05REieZAv4eOCxMRCVmO","ZiJinYeBar_008");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../DelegateManager_008"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbl_count=null,t}return i(t,e),t.prototype.onLoad=function(){r.default.onRefreshZiJinYeBar.addDelegate(this.onRefreshCount,this)},t.prototype.start=function(){},t.prototype.onDestroy=function(){r.default.onRefreshZiJinYeBar.removeDelegate(this.onRefreshCount,this)},t.prototype.onRefreshCount=function(e){this.lbl_count.string=e.toString()},a([c(cc.Label)],t.prototype,"lbl_count",void 0),a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../DelegateManager_008":"DelegateManager_008"}],"_out.d":[function(e,t){"use strict";cc._RF.push(t,"0ef74I8qXlLHaHD6vNuX5J+","_out.d"),cc._RF.pop()},{}]},{},["LoadingUI","GameConfig","LevelConfig","Agent","AgentTreeNode","Dijkstra","FloatPair","KdTree","KeyValuePair","Line","Multimap","Obstacle","ObstacleTreeNode","RVOMath","RoadmapVertex","Simulator","Vector2","DateUtils","Delegate","MathUtils","RandomUtils","StringUtils","TweenUtils","Ani_FishIdle","Ani_RotateForever","Ani_ScaleForever","Guide_TouchMove","Joystick_common","LogSpineAnimationNameAndDuration","WidgetToCanvas","Config_008","Config_Gaming_008","DelegateManager_008","DropItemMag_008","EffectMag_008","EnemyManager_008","FloatTextMag_008","GameManager_008","GamingData_008","InfiniteMap_008","LC_008","LocalDataManager_008","PotMag_008","VideoDropItemMag_008","BaseDropItem_008","BoxDropItem_008","CoinShowNode_008","DropItemLight_Yellow_008","ExpstoneShowNode_008","WeaponDropItem_008","EF_BackHome_008","EF_BossInitPos_008","EF_EnemyDia_008","EF_PickUpWeapon_008","BaseEnemyBuff_008","EnemyBuff_Burn_008","EnemyBuff_DamagePointUp_008","EnemyBuff_MoveSpeedBoost_008","EnemyBuff_MoveSpeedSlow_008","EnemyBuff_Stun_008","EnemyBullet_Explosion_008","EnemyBullet_KnifeColliderNode_008","EnemyBullet_RangeFall_008","EnemyBullet_RangeLinear_008","EnemyBullet_RangeLinear_Route_008","EnemyBullet_RotatingKnife_008","EnemyBullet_RangeAttack2_Circle_008","EnemyBullet_RangeAttack2_Obj_008","EnemyBullet_RangeAttack_008","EnemyBullet_TrackRange_008","Bossbullet_RangeFall_008","BaseEnemyMovement_008","EnemyMovement_Group_008","EnemyMovement_Normal_008","EnemyMovement_RVO2Agent_008","BaseEnemySkill_008","EnemySkill_Charge_008","EnemySkill_Charge_Lite_008","EnemySkill_Explosion_008","EnemySkill_MoveSpeedBoost_008","EnemySkill_RangeFall_008","EnemySkill_RangeLinear_008","EnemySkill_RotatingKnife_008","BaseBossSkill2_008","BossSkill2_RangeAttack2_008","BossSkill2_RangeAttack_008","BossSkill2_RangeLinear_008","BossSkill2_TrackRange_008","BaseBossSkill_008","BossSkill_RangeFall_008","BossSkill_RangeLinear_Route_008","BaseEnemy_008","Boss_LingHuChong_008","NormalEnemy_008","SpineEnemy_008","Entities_008","Enums_008","AniEffectNode_008","Cheat_008","DebugWeapon_008","EffectNode_008","EnemyTrail_008","HpBarNode_008","MotionTrail","MotionTrail_CannotPause","NuclearBombNode_008","OnenablePlayAni_008","Pot_008","PulletNode_008","RedPointNode_008","SceneOrnament_Bg_008","SceneOrnament_Obj_008","SkillStarNode_008","SpineSpeed_008","ZIndex_008","ZIndex_Offset_008","FlyingKnife_008","PlayerBullet_FlowersUAV_008","PlayerBullet_FlyingKnife_008","PlayerBullet_Frostbolt_008","PlayerBullet_JinLong_008","PlayerBullet_Lightning_008","PlayerBullet_LionRoar_008","PlayerBullet_Long_008","PlayerBullet_Phoenix_008","PlayerBullet_RollingLightning_008","PlayerBullet_RotatingKnife_008","PlayerBullet_SixPulseHolySword_008","PlayerBullet_SummonSword_008","PlayerBullet_SwordFormation2_Circle_008","PlayerBullet_SwordFormation_Sword_008","PlayerBullet_TenThousandSnakes_008","PlayerBullet_SFKnife_008","PlayerBullet_Super_Frostbolt_008","PlayerBullet_Super_Frostbolt_Samll_008","PlayerBullet_Super_Lightning_008","PlayerBullet_Super_Lightning_Small_008","PlayerBullet_Super_LionRoar_008","PlayerBullet_Super_LionRoar_Small_008","PlayerBullet_Super_Phoenix_008","PlayerBullet_Super_Phoenix_Ground_008","PlayerBullet_Super_RotatingKnife_Flying_008","PlayerBullet_Super_SixPulseHolySword_008","BasePlayerWeapon_008","PlayerWeapon_FallSword_008","PlayerWeapon_FlowersUAV_008","PlayerWeapon_FlyingKnife_008","PlayerWeapon_Frostbolt_008","PlayerWeapon_JinLong_008","PlayerWeapon_Lightning_008","PlayerWeapon_LionRoar_008","PlayerWeapon_Long_008","PlayerWeapon_Phoenix_008","PlayerWeapon_RollingLightning_008","PlayerWeapon_RotatingKnife_008","PlayerWeapon_SixPulseHolySword_008","PlayerWeapon_SummonSword_008","PlayerWeapon_SwordFormation2_008","PlayerWeapon_SwordFormation_008","PlayerWeapon_TenThousandSnakes_008","PlayerWeapon_Super_FKnife_008","PlayerWeapon_Super_FlowersUAV_008","PlayerWeapon_Super_Frostbolt_008","PlayerWeapon_Super_Lightning_008","PlayerWeapon_Super_LionRoar_008","PlayerWeapon_Super_Phoenix_008","PlayerWeapon_Super_RollingLightning_008","PlayerWeapon_Super_RotatingKnife_008","PlayerWeapon_Super_SixPulseHolySword_008","PlayerWeapon_Super_SummonSword_008","Player_008","QuestsSys_008","DiaNode_008","EfNode_008","GamingUI_008","MainUI_008","UIFloatTextMag_008","AddDesktopBtn_008","BaseSingleBtn_008","ExploreBtn_008","FoxDateBtn_008","QuestsBtn_008","ShowDailyDiaBtn_008","SkillSwordFormation_008","TrialBtn_008","VideoChichenBtn_008","VideoMagnetBtn_008","VideoUnlockSkillBtn_008","BaseUIDialog_008","DailyGiftDia_008","ExploreDia_008","FoxDateDia_008","GetEquipmentDia_008","GongFaDetailDia_008","GuideDia_008","InfoDetailDia_008","NewSkillDia_008","OpenGamingBoxDia2_008","OpenGamingBoxDia_008","QuestsDia_008","ReviveDia_008","RewardsDia_008","SelectChapterDia_008","SettingDia_008","TrialDia_008","UnlockNewModuleDia_008","UnlockNewSkillDia_008","VideoBoxDia_008","XiuXianDia_008","PauseView_008","ResultView_008","SelectSkillView_008","AlchemyTips_008","CurrSkillLayer_008","ExpBarNode_008","MainUIScrollView_008","MaskLabel_008","PlayerInfoTips_008","SelectSkillViewShowAni_008","TouchEffectNode_008","TouchEffect_008","UpdateNodeAngle_008","VideoUnlockSkillBtnManagerNode_008","ViewBtn_008","BtnIcon_Quests_008","EnergyBar_008","EquipmentNode_008","GoldBar_008","LingQiBar_008","ScoreChangeNode_008","VideoIcon_LionRoar_008","VideoIcon_LittleStar_008","ZhanLingBar_008","ZiJinYeBar_008","ChapterView_008","GongFaView_008","RoleView_008","ShiFangView_008","EquipmentUtils_008","FightUtils_008","FloatItemsUtils_008","FoxDateUtils_008","GongFaUtils_008","ItemUtils_008","PlayerInfoUtils_008","QuestsUtil_008","ShiFangUtils_008","SkillUtils_008","TrialUtils_008","XiuXianUtils_008","ZIndexUtils_008","_out.d","BaseVideoDropItem_008","VideoDropItem_Chichen_008","VideoDropItem_Weapon_008","AudioMag","GameMag","GameManager","LocalDataManager","NodePoolManager","ObjectPoolManager","UIMag","VideoManager","Test1","BaseUI","DX_Breath","DX_NodeShow_UpToBottom","CompanyUI","Dx_BtnToggle","ExitUI","FloatTextManager","FloatTextUI","GameUI","ModeBtn","PreStartUI","SettingUI","StartUI","TouchNodeUI","WaitingLayer"]);